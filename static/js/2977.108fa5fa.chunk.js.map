{"version":3,"file":"static/js/2977.108fa5fa.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/TileLayer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{HandleOwnerMixin as s}from\"../core/HandleOwner.js\";import{loadAll as i}from\"../core/loadAll.js\";import{MultiOriginJSONMixin as o}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as a}from\"../core/promiseUtils.js\";import{urlToObject as l,objectToQuery as n,makeAbsolute as p}from\"../core/urlUtils.js\";import{property as c}from\"../core/accessorSupport/decorators/property.js\";import{cast as u}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/arrayUtils.js\";import\"../core/has.js\";import{reader as m}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as h}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as d}from\"../core/accessorSupport/decorators/writer.js\";import y from\"../geometry/SpatialReference.js\";import f from\"./Layer.js\";import{APIKeyMixin as v}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as g}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as S}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as _}from\"./mixins/ArcGISService.js\";import{BlendLayer as j}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as T}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{PortalLayer as w}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as O}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as R}from\"./mixins/SublayersOwner.js\";import{parse as U,isHostedAgolService as P,isArcGISUrl as x}from\"./support/arcgisLayerUrl.js\";import{url as A}from\"./support/commonProperties.js\";import{createTileBitmap as M}from\"./support/imageBitmapUtils.js\";import I from\"./support/Sublayer.js\";var W;const B=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let C=W=class extends(j(L(R(g(S(b(w(_(o(s(O(v(T(f)))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(a).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo&&r.tileInfo.spatialReference)&&y.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>l(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i;if(this.fetchTile!==W.prototype.fetchTile){const r=await this.fetchTile(e,t,s,i);return M(r,e,t,s,o)}const a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return M(n,e,t,s,o)}getTileUrl(e,r,t){const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=n({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return i(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const o=U(this.parsedUrl.path);if(null!=o&&\"ImageServer\"===o.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!P(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!x(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^\\/]+(\\/[^\\/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=B.length;t<s;t++)if(r=B[t],r.toLowerCase().includes(e))return p(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[N]}};e([c({readOnly:!0})],C.prototype,\"attributionDataUrl\",null),e([c({type:[\"show\",\"hide\",\"hide-children\"]})],C.prototype,\"listMode\",void 0),e([c({json:{read:!0,write:!0}})],C.prototype,\"blendMode\",void 0),e([c({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],C.prototype,\"isReference\",void 0),e([c({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],C.prototype,\"operationalLayerType\",void 0),e([c({type:Boolean})],C.prototype,\"resampling\",void 0),e([c()],C.prototype,\"sourceJSON\",void 0),e([c({type:y})],C.prototype,\"spatialReference\",void 0),e([m(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],C.prototype,\"readSpatialReference\",null),e([c({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],C.prototype,\"path\",void 0),e([c({readOnly:!0})],C.prototype,\"sublayers\",void 0),e([d(\"sublayers\",{layers:{type:[I]}})],C.prototype,\"writeSublayers\",null),e([c({json:{read:!1,write:!1}})],C.prototype,\"popupEnabled\",void 0),e([c()],C.prototype,\"tileServers\",null),e([u(\"tileServers\")],C.prototype,\"castTileServers\",null),e([c({readOnly:!0,json:{read:!1}})],C.prototype,\"type\",void 0),e([c(A)],C.prototype,\"url\",void 0),C=W=e([h(\"esri.layers.TileLayer\")],C);const N=Symbol(\"default-fetch-tile\");C.prototype.fetchTile[N]=!0;const k=C;export{k as default};\n"],"names":["W","B","C","_j","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","e","Array","_key","call","apply","concat","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","_createClass","key","value","r","_objectSpread","_this2","signal","this","addResolvingPromise","loadFromPortal","supportedTypes","catch","a","then","_fetchService","Promise","resolve","get","_this$parsedUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","tileInfo","y","fromJSON","t","s","loaded","i","slice","reverse","flatten","_ref","toArray","o","writeSublayerStructure","forEach","write","push","some","Object","keys","layers","_this$parsedUrl2","_getDefaultTileServers","isArray","map","l","undefined","getTileUrl","responseType","query","refreshParameters","data","_fetchImageBitmapTile","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_r","_yield$r","n","_args","wrap","_context","prev","next","fetchTile","prototype","sent","abrupt","M","stop","_x","_x2","_x3","_this$parsedUrl3","_this$parsedUrl4","capabilities","operations","supportsTileMap","supportsBlankTile","blankTile","customParameters","token","apiKey","tileServers","_this3","allSublayers","_this4","bandCount","pixelSizeX","U","serverType","f","ssl","replace","read","origin","version","P","_fetchServerVersion","currentVersion","x","reject","match","includes","p","search","N","j","L","R","g","S","b","w","_","O","v","T","c","readOnly","json","Boolean","enabled","overridePolicy","m","String","origins","d","I","u","A","h","Symbol","k"],"sourceRoot":""}