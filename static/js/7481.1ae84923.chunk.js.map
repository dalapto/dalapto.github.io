{"version":3,"file":"static/js/7481.1ae84923.chunk.js","mappings":"8SAI+FA,EAAEC,EAAAA,EAAEC,UAAU,oDAAoDC,EAAE,CAACC,aAAa,SAACC,EAAEJ,GAAC,OAAGI,EAAEC,MAAML,EAAE,GAAE,SAAeM,EAACC,EAAAC,GAAA,OAAAC,EAAAC,MAAC,KAADC,UAAA,UAAAF,IAA4b,OAA5bA,GAAAG,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAhB,SAAAC,EAAiBf,EAAEM,GAAC,IAAAU,EAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAAgB,gCAAgD,OAAoM,OAA5PN,EAACI,EAAAG,KAAAH,EAAAC,KAAA,GAAkEJ,EAAED,EAAEQ,YAAYC,OAAOzB,EAAEM,IAASoB,iBAAsB1B,EAAE,IAAII,EAAAA,EAAE,sBAAsB,qFAAqFa,GAAGlB,EAAE4B,MAAM3B,IAAGoB,EAAAQ,OAAA,UAAO,SAAAxB,GAAI,IAAMJ,EAAEI,EAAEyB,oBAAoB,OAAOZ,EAAEa,YAAY9B,EAAEE,EAAE,IAAC,cAAAkB,EAAAC,KAAA,EAAAD,EAAAW,GAAAX,EAAA,SAAAA,EAAAQ,OAAA,UAAiB7B,EAAEiC,KAAK,2BAA2B,oDAAoDhC,GAAG,SAAAI,GAAC,OAAE,CAAE,6BAAAgB,EAAAa,OAAA,GAAAlB,EAAA,kBAAEN,EAAAC,MAAA,KAAAC,UAAA,CCAW,IAAoBuB,EAAC,WAAC,SAAAA,EAAYnC,IAAEoC,EAAAA,EAAAA,GAAA,KAAAD,GAACE,KAAKC,iBAAgBC,EAAAA,EAAAA,MAAIF,KAAKG,gBAAgB,IAAIC,IAAIJ,KAAKK,aAAa1C,CAAC,CAA8nF,OAA7nF2C,EAAAA,EAAAA,GAAAR,EAAA,EAAAS,IAAA,OAAAC,IAAA,WAAW,OAAOR,KAAKS,KAAK,GAAC,CAAAF,IAAA,QAAAG,MAAA,SAAM/C,GAAG,OAAOqC,KAAKW,aAAahD,EAAE,GAAC,CAAA4C,IAAA,QAAAG,MAAA,WAAQ,IAAM/C,EAAEqC,KAAKY,qBAAqB,OAAOZ,KAAKa,SAAS,CAACC,KAAKnD,EAAEoD,KAAK,GAAG,GAAC,CAAAR,IAAA,aAAAG,MAAA,WAAY,IAAAM,EAAA,KAAChB,KAAKG,gBAAgBc,SAAS,SAACtD,EAAEK,GAAKgD,EAAKb,gBAAgBe,IAAIlD,EAAE,EAAE,GAAG,GAAC,CAAAuC,IAAA,cAAAG,MAAA,SAAY/C,GAAE,IAAiBwD,EAAjBC,GAAAC,EAAAA,EAAAA,GAAgB1D,GAAC,IAAhB,IAAAyD,EAAAlD,MAAAiD,EAAAC,EAAAxC,KAAA0C,MAAiB,KAAPtD,EAACmD,EAAAT,MAAMV,KAAKG,gBAAgBe,IAAIlD,EAAtY,EAAyY,CAAC,OAAAuD,GAAAH,EAAApD,EAAAuD,EAAA,SAAAH,EAAAI,GAAA,IAAC,CAAAjB,IAAA,UAAAG,MAAA,SAAQ/C,GAAE,IAAA8D,EAAA,KAAOzD,EAAE,GAAGkC,EAAE,GAAGhC,EAAE,IAAIwD,IAAI/D,GAAG,OAAOqC,KAAKG,gBAAgBc,SAAS,SAACtD,EAAEC,GAAK,IAAMiB,KAAte,EAA2e4C,EAAKtB,gBAAgBK,IAAI5C,IAAM+D,EAAEzD,EAAE0D,IAAIhE,IAAIiB,GAAG8C,EAAE3D,EAAE6D,KAAKjE,GAAGiB,IAAI8C,GAAGzB,EAAE2B,KAAKjE,GAAG6D,EAAKtB,gBAAgBe,IAAItD,EAAE+D,EAAEG,EAAI,EAAE,IAAI,CAAChB,KAAK9C,EAAE+C,KAAKb,EAAE,GAAC,CAAAK,IAAA,cAAAG,MAAA,WAAc,IAAe/C,EAAiDqC,KAA1D+B,SAAsB/D,EAAoCgC,KAA/CgC,WAAmB9B,EAA4BF,KAAlCiC,MAAmB/D,EAAe8B,KAA1BkC,WAAuBtE,EAAGoC,KAAbmC,UAAkB,OAAOrE,EAAAA,EAAEsE,SAAS,CAACL,SAASpE,EAAEqE,WAAWhE,EAAEiE,MAAM/B,EAAEgC,WAAWhE,EAAEiE,UAAUvE,GAAG,GAAC,CAAA2C,IAAA,SAAAG,MAAA,eAAA2B,GAAA7D,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAC,EAAahB,EAAEK,GAAC,IAAAkC,EAAA,OAAAzB,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAA+B,OAA7Bc,KAAKS,MAAM6B,KAAKC,UAAU5E,GAAGqB,EAAAE,KAAA,GAAcyC,EAAAA,EAAAA,IAAEhE,EAAE,KAAKK,GAAE,OAAlB,OAADkC,EAAClB,EAAAG,KAAAH,EAAAE,KAAA,EAAyBsD,QAAQC,IAAI,CAACzC,KAAK0C,mBAAmBxC,GAAGF,KAAK2C,aAAazC,GAAGF,KAAK4C,oBAAoB1C,GAAGF,KAAK6C,eAAe3C,KAAI,wBAAAlB,EAAAa,OAAA,GAAAlB,EAAA,UAAC,gBAAAR,EAAAC,GAAA,OAAAiE,EAAA/D,MAAA,KAAAC,UAAA,EAAjM,IAAiM,CAAAgC,IAAA,sBAAAG,MAAA,eAAAoC,GAAAtE,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAAqE,EAA0BpF,GAAC,OAAAc,EAAAA,EAAAA,KAAAM,MAAA,SAAAiE,GAAA,cAAAA,EAAA/D,KAAA+D,EAAA9D,MAAA,UAAMvB,GAAIA,EAAEsE,MAAK,CAAAe,EAAA9D,KAAA,eAAA8D,EAAAxD,OAAA,UAAQQ,KAAKiD,QAAQ,UAAUjD,KAAKiC,MAAM,QAAK,cAAAe,EAAA9D,KAAA,EAAoBN,EAAEjB,EAAEsE,MAAMjC,KAAKK,aAAa6C,aAAY,OAA3DlD,KAAKiD,QAAOD,EAAA7D,KAAgDa,KAAKiC,MAAMtE,EAAEsE,MAAK,wBAAAe,EAAAnD,OAAA,GAAAkD,EAAA,UAAC,gBAAAI,GAAA,OAAAL,EAAAxE,MAAA,KAAAC,UAAA,EAA3K,IAA2K,CAAAgC,IAAA,eAAAG,MAAA,SAAa/C,GAAGqC,KAAKoD,WAAWzF,GAAGA,EAAEwE,WAAW,IAAIT,IAAI/D,EAAEwE,WAAWnC,KAAKqD,WAAW1F,GAAGA,EAAE2F,WAAW,IAAI5B,IAAI/D,EAAE2F,WAAWtD,KAAKmC,UAAUxE,GAAGA,EAAEwE,SAAS,GAAC,CAAA5B,IAAA,qBAAAG,MAAA,eAAA6C,GAAA/E,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAA,SAAA8E,EAAyB7F,GAAC,IAAAK,EAAAkC,EAAArB,EAAA,OAAAJ,EAAAA,EAAAA,KAAAM,MAAA,SAAA0E,GAAA,cAAAA,EAAAxE,KAAAwE,EAAAvE,MAAA,UAAMvB,GAAIA,EAAEoE,SAAQ,CAAA0B,EAAAvE,KAAA,eAAAuE,EAAAjE,OAAA,UAAQQ,KAAK0D,sBAAsB,KAAK1D,KAAK+B,SAAS,UAAU/B,KAAKgC,WAAW,QAAK,OAA8D,OAAvDhE,EAAEL,EAAEoE,SAAS7B,EAAEvC,EAAEqE,YAAY,2BAA0ByB,EAAAvE,KAAA,GAAStB,EAAAA,EAAAA,IAAEsC,EAAElC,EAAEgC,KAAKK,aAAasD,aAAa3D,KAAKK,aAAauD,KAAK5D,KAAKK,aAAawD,MAAK,OAA3FhF,EAAC4E,EAAAtE,MAA2FjB,EAAAA,EAAAA,IAAE8B,KAAKC,gBAAgBjC,GAAGgC,KAAK0D,sBAAsB7E,EAAEmB,KAAK+B,SAAS/D,EAAEgC,KAAKgC,WAAW9B,EAAC,wBAAAuD,EAAA5D,OAAA,GAAA2D,EAAA,UAAC,gBAAAM,GAAA,OAAAP,EAAAjF,MAAA,KAAAC,UAAA,EAAvX,IAAuX,CAAAgC,IAAA,iBAAAG,MAAA,SAAeR,GAAG,GAAGF,KAAKkC,WAAWlC,KAAK+D,cAAc,KAAK7D,GAAGA,EAAEgC,WAAW,GAAGlC,KAAKK,aAAa2D,SAAShE,KAAKkC,WAAWhC,EAAEgC,WAAWlC,KAAK+D,eAAclF,EAAAA,EAAAA,GAAEmB,KAAKK,aAAa2D,SAAS9D,EAAEgC,WAAW+B,EAAAA,OAAO,CAAC,IAAM/F,EAAE,IAAIP,EAAAA,EAAE,+CAA+C,oEAAoEuC,EAAEgC,YAAYlE,EAAAA,EAAEH,UAAU,2DAA2D0B,MAAMrB,EAAE,CAAC,GAAC,CAAAqC,IAAA,eAAAG,MAAA,SAAa/C,GAAG,OAAOqC,KAAKkE,kBAAkBvG,IAAIqC,KAAKmE,YAAYxG,IAAIqC,KAAKoE,cAAczG,IAAIqC,KAAKqE,oBAAoB1G,EAAE,GAAC,CAAA4C,IAAA,sBAAAG,MAAA,SAAoB/C,GAAG,OAAOqC,KAAKiC,OAAOjC,KAAKiD,QAAQtF,EAAE,GAAC,CAAA4C,IAAA,cAAAG,MAAA,SAAY/C,GAAG,QAAQqC,KAAKqD,aAAarD,KAAKqD,WAAWiB,OAAOtE,KAAKqD,WAAWzB,IAAIjE,EAAE4G,mBAAmBvE,KAAKoD,aAAapD,KAAKoD,WAAWkB,MAAMtE,KAAKoD,WAAWxB,IAAIjE,EAAE4G,eAAe,GAAC,CAAAhE,IAAA,oBAAAG,MAAA,SAAkB/C,GAAG,IAAIqC,KAAK+B,SAAS,OAAM,EAAG,IAAM/D,EAAEL,EAAE6G,uBAAuB,QAAQxG,GAAGgC,KAAK0D,sBAAsB1F,EAAE,GAAC,CAAAuC,IAAA,gBAAAG,MAAA,SAAc/C,GAAG,OAAO,MAAMqC,KAAK+D,eAAe/D,KAAK+D,cAAcpG,EAAE,GAAC,CAAA4C,IAAA,qBAAAG,MAAA,WAAoB,IAAA+D,EAAA,KAAO9G,EAAE,GAAG,OAAOqC,KAAKG,gBAAgBc,SAAS,SAACjD,EAAEkC,GAA3qF,EAAgrFlC,IAAMyG,EAAKtE,gBAAgBe,IAAIhB,EAA/sF,GAAotFvC,EAAEkE,KAAK3B,GAAG,IAAIvC,CAAC,KAACmC,CAAA,CAAvtF,E","sources":["../node_modules/@arcgis/core/views/2d/layers/features/support/whereUtils.js","../node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilter.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport e from\"../../../../../core/Error.js\";import r from\"../../../../../core/Logger.js\";const t=r.getLogger(\"esri.views.2d.layers.features.support.whereUtils\"),a={getAttribute:(e,r)=>e.field(r)};async function s(r,s){const n=await import(\"../../../../../core/sql/WhereClause.js\");try{const o=n.WhereClause.create(r,s);if(!o.isStandardized){const r=new e(\"mapview - bad input\",\"Unable to apply filter's definition expression, as expression is not standardized.\",o);t.error(r)}return e=>{const r=e.readArcadeFeature();return o.testFeature(r,a)}}catch(o){return t.warn(\"mapview-bad-where-clause\",\"Encountered an error when evaluating where clause\",r),e=>!0}}export{s as createWhereClause};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../core/Error.js\";import e from\"../../../../../core/Logger.js\";import{create as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import{getBoundsXY as s}from\"../../../../../geometry/support/boundsUtils.js\";import{getSpatialQueryOperator as r}from\"../../../../../layers/graphics/data/spatialQuerySupport.js\";import{getTimeOperator as o}from\"../../../../../layers/graphics/data/timeSupport.js\";import{normalizeQueryLike as h}from\"../../../../../layers/graphics/data/utils.js\";import a from\"../../../../../rest/support/Query.js\";import{featureAdapter as l}from\"../FeatureStore2D.js\";import{createWhereClause as n}from\"./whereUtils.js\";const d=1,m=2;class _{constructor(t){this._geometryBounds=i(),this._idToVisibility=new Map,this._serviceInfo=t}get hash(){return this._hash}check(t){return this._applyFilter(t)}clear(){const t=this._resetAllHiddenIds();return this.update(),{show:t,hide:[]}}invalidate(){this._idToVisibility.forEach(((t,e)=>{this._idToVisibility.set(e,0)}))}setKnownIds(t){for(const e of t)this._idToVisibility.set(e,d)}setTrue(t){const e=[],i=[],s=new Set(t);return this._idToVisibility.forEach(((t,r)=>{const o=!!(this._idToVisibility.get(r)&d),h=s.has(r);!o&&h?e.push(r):o&&!h&&i.push(r),this._idToVisibility.set(r,h?d|m:0)})),{show:e,hide:i}}createQuery(){const{geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r}=this;return a.fromJSON({geometry:t,spatialRel:e,where:i,timeExtent:s,objectIds:r})}async update(t,e){this._hash=JSON.stringify(t);const i=await h(t,null,e);await Promise.all([this._setGeometryFilter(i),this._setIdFilter(i),this._setAttributeFilter(i),this._setTimeFilter(i)])}async _setAttributeFilter(t){if(!t||!t.where)return this._clause=null,void(this.where=null);this._clause=await n(t.where,this._serviceInfo.fieldsIndex),this.where=t.where}_setIdFilter(t){this._idsToShow=t&&t.objectIds&&new Set(t.objectIds),this._idsToHide=t&&t.hiddenIds&&new Set(t.hiddenIds),this.objectIds=t&&t.objectIds}async _setGeometryFilter(t){if(!t||!t.geometry)return this._spatialQueryOperator=null,this.geometry=null,void(this.spatialRel=null);const e=t.geometry,i=t.spatialRel||\"esriSpatialRelIntersects\",o=await r(i,e,this._serviceInfo.geometryType,this._serviceInfo.hasZ,this._serviceInfo.hasM);s(this._geometryBounds,e),this._spatialQueryOperator=o,this.geometry=e,this.spatialRel=i}_setTimeFilter(i){if(this.timeExtent=this._timeOperator=null,i&&i.timeExtent)if(this._serviceInfo.timeInfo)this.timeExtent=i.timeExtent,this._timeOperator=o(this._serviceInfo.timeInfo,i.timeExtent,l);else{const s=new t(\"feature-layer-view:time-filter-not-available\",\"Unable to apply time filter, as layer doesn't have time metadata.\",i.timeExtent);e.getLogger(\"esri.views.2d.layers.features.controllers.FeatureFilter\").error(s)}}_applyFilter(t){return this._filterByGeometry(t)&&this._filterById(t)&&this._filterByTime(t)&&this._filterByExpression(t)}_filterByExpression(t){return!this.where||this._clause(t)}_filterById(t){return(!this._idsToHide||!this._idsToHide.size||!this._idsToHide.has(t.getObjectId()))&&(!this._idsToShow||!this._idsToShow.size||this._idsToShow.has(t.getObjectId()))}_filterByGeometry(t){if(!this.geometry)return!0;const e=t.readHydratedGeometry();return!!e&&this._spatialQueryOperator(e)}_filterByTime(t){return null==this._timeOperator||this._timeOperator(t)}_resetAllHiddenIds(){const t=[];return this._idToVisibility.forEach(((e,i)=>{e&d||(this._idToVisibility.set(i,d),t.push(i))})),t}}export{_ as default};\n"],"names":["t","r","getLogger","a","getAttribute","e","field","s","_x","_x2","_s","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","n","o","_r","wrap","_context","prev","next","sent","WhereClause","create","isStandardized","error","abrupt","readArcadeFeature","testFeature","t0","warn","stop","_","_classCallCheck","this","_geometryBounds","i","_idToVisibility","Map","_serviceInfo","_createClass","key","get","_hash","value","_applyFilter","_resetAllHiddenIds","update","show","hide","_this","forEach","set","_step","_iterator","_createForOfIteratorHelper","done","err","f","_this2","Set","h","has","push","d","geometry","spatialRel","where","timeExtent","objectIds","fromJSON","_update","JSON","stringify","Promise","all","_setGeometryFilter","_setIdFilter","_setAttributeFilter","_setTimeFilter","_setAttributeFilter2","_callee2","_context2","_clause","fieldsIndex","_x3","_idsToShow","_idsToHide","hiddenIds","_setGeometryFilter2","_callee3","_context3","_spatialQueryOperator","geometryType","hasZ","hasM","_x4","_timeOperator","timeInfo","l","_filterByGeometry","_filterById","_filterByTime","_filterByExpression","size","getObjectId","readHydratedGeometry","_this3"],"sourceRoot":""}