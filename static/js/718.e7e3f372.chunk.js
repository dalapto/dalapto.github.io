"use strict";(self.webpackChunkreact_arcgis=self.webpackChunkreact_arcgis||[]).push([[718],{718:function(e,n,t){t.r(n),t.d(n,{registerFunctions:function(){return W}});var r=t(74165),a=t(37762),i=t(15861),s=t(51064),l=t(72741),u=t(62357),c=t(22564),o=t(5431),f=t(97879),d=t(12260),p=t(97246),m=t(44715),b=t(93249),y=t(12829),h=t(67820),x=t(89066),v=t(45184),g=t(73954),k=t(84272),w=t(82279),F=t(29876),I=t(65247),Z=t(93106),D=t(66978),E=t(48562),N=t(64326),S=t(83040),C=t(7575);function A(e,n,t,r){if(1===r.length){if((0,m.m)(r[0]))return(0,Z.t)(e,r[0],-1);if((0,m.o)(r[0]))return(0,Z.t)(e,r[0].toArray(),-1)}return(0,Z.t)(e,r,-1)}function T(e,n,t){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)((0,r.Z)().mark((function e(n,t,a){var i,s,l,u,c,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((i=n.getVariables()).length>0)){e.next=17;break}s=[],l=0;case 4:if(!(l<i.length)){e.next=14;break}return u={name:i[l]},e.t0=s,e.next=9,t.evaluateIdentifier(a,u);case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:l++,e.next=4;break;case 14:for(c={},o=0;o<i.length;o++)c[i[o]]=s[o];return e.abrupt("return",(n.parameters=c,n));case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var r in e)if(r.toLowerCase()===n.toLowerCase())return e[r];return t}function L(e){if(null===e)return null;var n={type:H(e,"type",""),name:H(e,"name","")};if("range"===n.type)n.range=H(e,"range",[]);else{n.codedValues=[];var t,r=(0,a.Z)(H(e,"codedValues",[]));try{for(r.s();!(t=r.n()).done;){var i=t.value;n.codedValues.push({name:H(i,"name",""),code:H(i,"code",null)})}}catch(s){r.e(s)}finally{r.f()}}return n}function V(e){if(null===e)return null;var n={},t=H(e,"wkt",null);null!==t&&(n.wkt=t);var r=H(e,"wkid",null);return null!==r&&(n.wkid=r),n}function R(e){if(null===e)return null;var n={hasZ:H(e,"hasz",!1),hasM:H(e,"hasm",!1)},t=H(e,"spatialreference",null);t&&(n.spatialReference=V(t));var r=H(e,"x",null);if(null!==r)return n.x=r,n.y=H(e,"y",null),n;var a=H(e,"rings",null);if(null!==a)return n.rings=a,n;var i=H(e,"paths",null);if(null!==i)return n.paths=i,n;var s=H(e,"points",null);if(null!==s)return n.points=s,n;for(var l=0,u=["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"];l<u.length;l++){var c=u[l],o=H(e,c,null);null!==o&&(n[c]=o)}return n}function j(e){return!!e.layerDefinition&&!!e.featureSet&&!1!==function(e,n){var t,r=(0,a.Z)(n);try{for(r.s();!(t=r.n()).done;)if(t.value===e)return!0}catch(i){r.e(i)}finally{r.f()}return!1}(e.layerDefinition.geometryType,["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&!1!==(0,m.m)(e.layerDefinition.fields)&&!1!==(0,m.m)(e.featureSet.features)}function W(e){"async"===e.mode&&(e.functions.timezone=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,l){var o,f,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(l,1,2,n,t),!(0,m.r)(l[0])){e.next=19;break}return e.next=3,l[0].load();case 3:if(1!==l.length&&null!==l[1]){e.next=5;break}return e.abrupt("return",l[0].dateTimeReferenceFieldIndex.layerDateFieldsTimeZone);case 5:if(l[1]instanceof u.Z&&!1!==l[1].hasField("type")){e.next=7;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 7:if(o=l[1].field("type"),!1!==(0,m.c)(o)){e.next=10;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 10:e.t0=(0,m.j)(o).toLowerCase(),e.next="preferredtimezone"===e.t0?13:"editfieldsinfo"===e.t0?14:"timeinfo"===e.t0?15:"field"===e.t0?16:18;break;case 13:return e.abrupt("return",l[0].dateTimeReferenceFieldIndex.layerPreferredTimeZone);case 14:return e.abrupt("return",l[0].dateTimeReferenceFieldIndex.layerEditFieldsTimeZone);case 15:return e.abrupt("return",l[0].dateTimeReferenceFieldIndex.layerTimeInfoTimeZone);case 16:if(!l[1].hasField("fieldname")||!(0,m.c)(l[1].field("fieldname"))){e.next=18;break}return e.abrupt("return",l[0].dateTimeReferenceFieldIndex.fieldTimeZone((0,m.j)(l[1].field("fieldname"))));case 18:throw new c.aV(n,c.rH.InvalidParameter,t);case 19:if(null!==(f=(0,m.l)(l[0],(0,m.G)(n)))){e.next=22;break}return e.abrupt("return",null);case 22:return d=f.timeZone,e.abrupt("return","system"===d?s.iG.systemTimeZoneCanonicalName:d);case 24:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.functions.sqltimestamp=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){var l,u,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,1,3,n,t),l=s[0],!(0,m.k)(l)){e.next=8;break}if(1!==s.length){e.next=5;break}return e.abrupt("return",l.toSQLString());case 5:if(2!==s.length){e.next=7;break}return e.abrupt("return",l.changeTimeZone((0,m.j)(s[1])).toSQLString());case 7:case 18:throw new c.aV(n,c.rH.InvalidParameter,t);case 8:if(!(0,m.r)(l)){e.next=18;break}if(3===s.length){e.next=11;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 11:return e.next=13,l.load();case 13:if(u=(0,m.j)(s[1]),!1!==(0,m.k)(s[2])){e.next=16;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 16:return o=l.fieldTimeZone(u),e.abrupt("return",null===o?s[2].toSQLString():s[2].changeTimeZone(o).toSQLString());case 19:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"sqltimestamp",min:2,max:4}),e.functions.featuresetbyid=function(n,t){return e.standardFunctionAsync(n,t,(function(e,r,a){if((0,m.C)(a,2,4,n,t),a[0]instanceof f.Z){var i=(0,m.j)(a[1]),s=(0,m.D)(a[2],null),l=(0,m.h)((0,m.D)(a[3],!0));if(null===s&&(s=["*"]),!1===(0,m.m)(s))throw new c.aV(n,c.rH.InvalidParameter,t);return a[0].featureSetById(i,l,s)}throw new c.aV(n,c.rH.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyid",min:2,max:4}),e.functions.getfeatureset=function(n,t){return e.standardFunctionAsync(n,t,(function(e,r,a){if((0,m.C)(a,1,2,n,t),(0,m.p)(a[0])){var i=(0,m.D)(a[1],"datasource");return null===i&&(i="datasource"),i=(0,m.j)(i).toLowerCase(),(0,d.convertToFeatureSet)(a[0].fullSchema(),i,n.lrucache,n.interceptor,n.spatialReference)}throw new c.aV(n,c.rH.InvalidParameter,t)}))},e.signatures.push({name:"getfeatureset",min:1,max:2}),e.functions.featuresetbyportalitem=function(n,t){return e.standardFunctionAsync(n,t,(function(e,r,a){var i,s;if((0,m.C)(a,2,5,n,t),null===a[0])throw new c.aV(n,c.rH.PortalRequired,t);if(a[0]instanceof l.Z){var u=(0,m.j)(a[1]),o=(0,m.j)(a[2]),f=(0,m.D)(a[3],null),p=(0,m.h)((0,m.D)(a[4],!0));if(null===f&&(f=["*"]),!1===(0,m.m)(f))throw new c.aV(n,c.rH.InvalidParameter,t);var y=null;return y=n.services&&n.services.portal?n.services.portal:C.Z.getDefault(),y=(0,b._)(a[0],y),(0,d.constructFeatureSetFromPortalItem)(u,o,n.spatialReference,f,p,y,n.lrucache,n.interceptor)}if(!1===(0,m.c)(a[0]))throw new c.aV(n,c.rH.PortalRequired,t);var h=(0,m.j)(a[0]),x=(0,m.j)(a[1]),v=(0,m.D)(a[2],null),g=(0,m.h)((0,m.D)(a[3],!0));if(null===v&&(v=["*"]),!1===(0,m.m)(v))throw new c.aV(n,c.rH.InvalidParameter,t);return(0,d.constructFeatureSetFromPortalItem)(h,x,n.spatialReference,v,g,null!==(i=null===(s=n.services)||void 0===s?void 0:s.portal)&&void 0!==i?i:C.Z.getDefault(),n.lrucache,n.interceptor)}))},e.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),e.functions.featuresetbyname=function(n,t){return e.standardFunctionAsync(n,t,(function(e,r,a){if((0,m.C)(a,2,4,n,t),a[0]instanceof f.Z){var i=(0,m.j)(a[1]),s=(0,m.D)(a[2],null),l=(0,m.h)((0,m.D)(a[3],!0));if(null===s&&(s=["*"]),!1===(0,m.m)(s))throw new c.aV(n,c.rH.InvalidParameter,t);return a[0].featureSetByName(i,l,s)}throw new c.aV(n,c.rH.InvalidParameter,t)}))},e.signatures.push({name:"featuresetbyname",min:2,max:4}),e.functions.featureset=function(n,t){return e.standardFunction(n,t,(function(e,r,i){var s,l;(0,m.C)(i,1,1,n,t);var o=i[0],f={layerDefinition:{geometryType:"",objectIdField:"",hasM:!1,hasZ:!1,globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,m.c)(o))void 0!==(o=JSON.parse(o)).layerDefinition?(f.layerDefinition=o.layerDefinition,f.featureSet=o.featureSet,o.layerDefinition.spatialReference&&(f.layerDefinition.spatialReference=o.layerDefinition.spatialReference)):(f.featureSet.features=o.features,f.featureSet.geometryType=o.geometryType,f.layerDefinition.geometryType=f.featureSet.geometryType,f.layerDefinition.objectIdField=null!==(s=o.objectIdFieldName)&&void 0!==s?s:"",f.layerDefinition.typeIdField=o.typeIdFieldName,f.layerDefinition.globalIdField=o.globalIdFieldName,f.layerDefinition.fields=o.fields,o.spatialReference&&(f.layerDefinition.spatialReference=o.spatialReference));else{if(!(i[0]instanceof u.Z))throw new c.aV(n,c.rH.InvalidParameter,t);var d=H(o=JSON.parse(i[0].castToText(!0)),"layerdefinition");if(null!==d){f.layerDefinition.geometryType=H(d,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.globalIdField=H(d,"globalidfield",""),f.layerDefinition.objectIdField=H(d,"objectidfield",""),f.layerDefinition.typeIdField=H(d,"typeidfield",""),f.layerDefinition.hasZ=!0===H(d,"hasz",!1),f.layerDefinition.hasM=!0===H(d,"hasm",!1);var p=H(d,"spatialreference",null);p&&(f.layerDefinition.spatialReference=V(p));var b,y=(0,a.Z)(H(d,"fields",[]));try{for(y.s();!(b=y.n()).done;){var h=b.value,x={name:H(h,"name",""),alias:H(h,"alias",""),type:H(h,"type",""),nullable:H(h,"nullable",!0),editable:H(h,"editable",!0),length:H(h,"length",null),domain:L(H(h,"domain"))};f.layerDefinition.fields.push(x)}}catch(Y){y.e(Y)}finally{y.f()}var v=H(o,"featureset",null);if(v){var g,w={},F=(0,a.Z)(f.layerDefinition.fields);try{for(F.s();!(g=F.n()).done;){var I=g.value;w[I.name.toLowerCase()]=I.name}}catch(Y){F.e(Y)}finally{F.f()}var Z,D=(0,a.Z)(H(v,"features",[]));try{for(D.s();!(Z=D.n()).done;){var E=Z.value,N={},S=H(E,"attributes",{});for(var C in S)N[w[C.toLowerCase()]]=S[C];f.featureSet.features.push({attributes:N,geometry:R(H(E,"geometry",null))})}}catch(Y){D.e(Y)}finally{D.f()}}}else{f.layerDefinition.hasZ=!0===H(o,"hasz",!1),f.layerDefinition.hasM=!0===H(o,"hasm",!1),f.layerDefinition.geometryType=H(o,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.objectIdField=H(o,"objectidfieldname",""),f.layerDefinition.typeIdField=H(o,"typeidfieldname","");var A=H(o,"spatialreference",null);A&&(f.layerDefinition.spatialReference=V(A));var T=H(o,"fields",null);if((0,m.m)(T)){var P,W=(0,a.Z)(T);try{for(W.s();!(P=W.n()).done;){var M=P.value,O={name:H(M,"name",""),alias:H(M,"alias",""),type:H(M,"type",""),nullable:H(M,"nullable",!0),editable:H(M,"editable",!0),length:H(M,"length",null),domain:L(H(M,"domain"))};f.layerDefinition.fields.push(O)}}catch(Y){W.e(Y)}finally{W.f()}}else T=null,f.layerDefinition.fields=T;var z,G={},X=(0,a.Z)(f.layerDefinition.fields);try{for(X.s();!(z=X.n()).done;){var _=z.value;G[_.name.toLowerCase()]=_.name}}catch(Y){X.e(Y)}finally{X.f()}var U=H(o,"features",null);if((0,m.m)(U)){var q,J=(0,a.Z)(U);try{for(J.s();!(q=J.n()).done;){var Q=q.value,B={},$=H(Q,"attributes",{});for(var K in $)B[G[K.toLowerCase()]]=$[K];f.featureSet.features.push({attributes:B,geometry:R(H(Q,"geometry",null))})}}catch(Y){J.e(Y)}finally{J.f()}}else U=null,f.featureSet.features=U}}if(!1===j(f))throw new c.aV(n,c.rH.InvalidParameter,t);return""===((null===f||void 0===f||null===(l=f.layerDefinition)||void 0===l?void 0:l.geometryType)||"")&&(f.layerDefinition.geometryType="esriGeometryNull"),k.Z.create(f,n.spatialReference)}))},e.signatures.push({name:"featureset",min:1,max:1}),e.functions.filter=function(n,t){return e.standardFunctionAsync(n,t,function(){var s=(0,i.Z)((0,r.Z)().mark((function i(s,l,u){var o,f,d,b,y,x,v,g,k,w,F,I,Z,N,S;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,m.C)(u,2,2,n,t),!(0,m.m)(u[0])&&!(0,m.o)(u[0])){r.next=36;break}if(o=[],(f=u[0])instanceof p.Z&&(f=f.toArray()),d=null,(0,m.i)(u[1])){r.next=7;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 7:d=u[1].createFunction(n),b=(0,a.Z)(f),r.prev=9,b.s();case 11:if((y=b.n()).done){r.next=27;break}if(x=y.value,v=d(x),!(0,D.y8)(v)){r.next=24;break}return r.t0=!0,r.next=18,v;case 18:if(r.t1=r.sent,r.t2=r.t0===r.t1,!r.t2){r.next=22;break}o.push(x);case 22:r.next=25;break;case 24:!0===v&&o.push(x);case 25:r.next=11;break;case 27:r.next=32;break;case 29:r.prev=29,r.t3=r.catch(9),b.e(r.t3);case 32:return r.prev=32,b.f(),r.finish(32);case 35:return r.abrupt("return",o);case 36:if(!(0,m.r)(u[0])){r.next=59;break}return r.next=39,u[0].load();case 39:if(g=r.sent,k=E.WhereClause.create(u[1],g.getFieldsIndex()),!((w=k.getVariables()).length>0)){r.next=58;break}F=[],I=0;case 45:if(!(I<w.length)){r.next=55;break}return Z={name:w[I]},r.t4=F,r.next=50,e.evaluateIdentifier(n,Z);case 50:r.t5=r.sent,r.t4.push.call(r.t4,r.t5);case 52:I++,r.next=45;break;case 55:for(N={},S=0;S<w.length;S++)N[w[S]]=F[S];return r.abrupt("return",(k.parameters=N,new h.Z({parentfeatureset:u[0],whereclause:k})));case 58:return r.abrupt("return",new h.Z({parentfeatureset:u[0],whereclause:k}));case 59:throw new c.aV(n,c.rH.InvalidParameter,t);case 60:case"end":return r.stop()}}),i,null,[[9,29,32,35]])})));return function(e,n,t){return s.apply(this,arguments)}}())},e.signatures.push({name:"filter",min:2,max:2}),e.functions.orderby=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){var l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,2,2,n,t),!(0,m.r)(s[0])){e.next=3;break}return l=new w.Z(s[1]),e.abrupt("return",new x.Z({parentfeatureset:s[0],orderbyclause:l}));case 3:throw new c.aV(n,c.rH.InvalidParameter,t);case 4:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"orderby",min:2,max:2}),e.functions.top=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,2,2,n,t),!(0,m.r)(s[0])){e.next=2;break}return e.abrupt("return",new v.Z({parentfeatureset:s[0],topnum:s[1]}));case 2:if(!(0,m.m)(s[0])){e.next=4;break}return e.abrupt("return",(0,m.g)(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,(0,m.g)(s[1])));case 4:if(!(0,m.o)(s[0])){e.next=6;break}return e.abrupt("return",(0,m.g)(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,(0,m.g)(s[1])));case 6:throw new c.aV(n,c.rH.InvalidParameter,t);case 7:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"top",min:2,max:2}),e.functions.first=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){var l,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,1,1,n,t),!(0,m.r)(s[0])){e.next=8;break}return e.next=3,s[0].first(a.abortSignal);case 3:if(null===(l=e.sent)){e.next=7;break}return u=o.Z.createFromGraphicLikeObject(l.geometry,l.attributes,s[0],n.timeReference),e.abrupt("return",(u._underlyingGraphic=l,u));case 7:return e.abrupt("return",l);case 8:return e.abrupt("return",(0,m.m)(s[0])?0===s[0].length?null:s[0][0]:(0,m.o)(s[0])?0===s[0].length()?null:s[0].get(0):null);case 9:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"first",min:1,max:1}),e.functions.attachments=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){var l,o,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,1,2,n,t),l={minsize:-1,maxsize:-1,types:null,returnMetadata:!1},!(s.length>1)){e.next=9;break}if(!(s[1]instanceof u.Z)){e.next=7;break}s[1].hasField("minsize")&&(l.minsize=(0,m.g)(s[1].field("minsize"))),s[1].hasField("metadata")&&(l.returnMetadata=(0,m.h)(s[1].field("metadata"))),s[1].hasField("maxsize")&&(l.maxsize=(0,m.g)(s[1].field("maxsize"))),s[1].hasField("types")&&(o=(0,m.a0)(s[1].field("types"),!1)).length>0&&(l.types=o),e.next=9;break;case 7:if(null===s[1]){e.next=9;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 9:if(!(0,m.p)(s[0])){e.next=25;break}if((f=s[0]._layer)instanceof N.default&&(f=(0,d.constructFeatureSet)(f,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==f){e.next=16;break}e.t0=[],e.next=24;break;case 16:if(!1!==(0,m.r)(f)){e.next=20;break}e.t1=[],e.next=23;break;case 20:return e.next=22,f.load();case 22:e.t1=f.queryAttachments(s[0].field(f.objectIdField),l.minsize,l.maxsize,l.types,l.returnMetadata);case 23:e.t0=e.t1;case 24:return e.abrupt("return",e.t0);case 25:if(null!==s[0]){e.next=27;break}return e.abrupt("return",[]);case 27:throw new c.aV(n,c.rH.InvalidParameter,t);case 28:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"attachments",min:1,max:2}),e.functions.featuresetbyrelationshipname=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(a,i,s){var l,u,o,f,p,b,y,h,x,v,k,w;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(s,2,4,n,t),l=s[0],u=(0,m.j)(s[1]),o=(0,m.D)(s[2],null),f=(0,m.h)((0,m.D)(s[3],!0)),null===o&&(o=["*"]),!1!==(0,m.m)(o)){e.next=6;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 6:if(null!==s[0]){e.next=8;break}return e.abrupt("return",null);case 8:if((0,m.p)(s[0])){e.next=10;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 10:if((p=l._layer)instanceof N.default&&(p=(0,d.constructFeatureSet)(p,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==p){e.next=13;break}return e.abrupt("return",null);case 13:if(!1!==(0,m.r)(p)){e.next=15;break}return e.abrupt("return",null);case 15:return e.next=17,p.load();case 17:if(p=e.sent,b=p.relationshipMetaData().filter((function(e){return e.name===u})),0!==b.length){e.next=21;break}return e.abrupt("return",null);case 21:if(!(void 0!==b[0].relationshipTableId&&null!==b[0].relationshipTableId&&b[0].relationshipTableId>-1)){e.next=23;break}return e.abrupt("return",(0,d.constructFeatureSetFromRelationship)(p,b[0],l.field(p.objectIdField),p.spatialReference,o,f,n.lrucache,n.interceptor));case 23:if(y=p.serviceUrl()){e.next=26;break}return e.abrupt("return",null);case 26:return y="/"===y.charAt(y.length-1)?y+b[0].relatedTableId.toString():y+"/"+b[0].relatedTableId.toString(),e.next=29,(0,d.constructFeatureSetFromUrl)(y,p.spatialReference,o,f,n.lrucache,n.interceptor);case 29:return h=e.sent,e.next=32,h.load();case 32:if(x=(x=h.relationshipMetaData()).filter((function(e){return e.id===b[0].id})),!1!==l.hasField(b[0].keyField)&&null!==l.field(b[0].keyField)){e.next=41;break}return e.next=36,p.getFeatureByObjectId(l.field(p.objectIdField),[b[0].keyField]);case 36:if(!(v=e.sent)){e.next=40;break}return k=E.WhereClause.create(x[0].keyField+"= @id",h.getFieldsIndex()),e.abrupt("return",(k.parameters={id:v.attributes[b[0].keyField]},h.filter(k)));case 40:return e.abrupt("return",new g.Z({parentfeatureset:h}));case 41:return w=E.WhereClause.create(x[0].keyField+"= @id",h.getFieldsIndex()),e.abrupt("return",(w.parameters={id:l.field(b[0].keyField)},h.filter(w)));case 43:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),e.functions.featuresetbyassociation=function(n,t){return e.standardFunctionAsync(n,t,function(){var e=(0,i.Z)((0,r.Z)().mark((function e(i,s,l){var u,o,f,p,b,h,x,v,g,k,w,I,Z,D,C,A,T,P,H,L,V,R,j,W,M,O,z,G,X,_,U,q,J,Q,B,$,K,Y,ee,ne,te;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,m.C)(l,2,3,n,t),u=l[0],o=(0,m.j)((0,m.D)(l[1],"")).toLowerCase(),f=(0,m.c)(l[2])?(0,m.j)(l[2]):null,null!==l[0]){e.next=4;break}return e.abrupt("return",null);case 4:if((0,m.p)(l[0])){e.next=6;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 6:if((p=u._layer)instanceof N.default&&(p=(0,d.constructFeatureSet)(p,n.spatialReference,["*"],!0,n.lrucache,n.interceptor)),null!==p){e.next=9;break}return e.abrupt("return",null);case 9:if(!1!==(0,m.r)(p)){e.next=11;break}return e.abrupt("return",null);case 11:return e.next=13,p.load();case 13:return b=p.serviceUrl(),e.next=16,(0,d.constructAssociationMetaDataFeatureSetFromUrl)(b,n.spatialReference);case 16:if(h=e.sent,x=null,v=null,g=!1,null!==f&&""!==f&&void 0!==f){k=(0,a.Z)(h.terminals);try{for(k.s();!(w=k.n()).done;)(I=w.value).terminalName===f&&(v=I.terminalId)}catch(r){k.e(r)}finally{k.f()}null===v&&(g=!0)}Z=h.associations.getFieldsIndex(),D=Z.get("TOGLOBALID").name,C=Z.get("FROMGLOBALID").name,A=Z.get("TOTERMINALID").name,T=Z.get("FROMTERMINALID").name,P=Z.get("FROMNETWORKSOURCEID").name,H=Z.get("TONETWORKSOURCEID").name,L=Z.get("ASSOCIATIONTYPE").name,V=Z.get("ISCONTENTVISIBLE").name,R=Z.get("OBJECTID").name,j=(0,a.Z)(p.fields),e.prev=21,j.s();case 23:if((W=j.n()).done){e.next=30;break}if("global-id"!==(M=W.value).type){e.next=28;break}return x=u.field(M.name),e.abrupt("break",30);case 28:e.next=23;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(21),j.e(e.t0);case 35:return e.prev=35,j.f(),e.finish(35);case 38:for(q in O=null,z=new y.yN(new S.Z({name:"percentalong",alias:"percentalong",type:"double"}),E.WhereClause.create("0",h.associations.getFieldsIndex())),G=new y.yN(new S.Z({name:"side",alias:"side",type:"string"}),E.WhereClause.create("''",h.associations.getFieldsIndex())),X="globalid",_="globalId",U={},h.lkp)U[q]=h.lkp[q].sourceId;J=new y.TO(new S.Z({name:"classname",alias:"classname",type:"string"}),null,U),Q="",e.t1=o,e.next="midspan"===e.t1?46:"junctionedge"===e.t1?50:"connected"===e.t1?54:"container"===e.t1?59:"content"===e.t1?61:"structure"===e.t1?63:"attached"===e.t1?65:67;break;case 46:return Q="((".concat(D,"='").concat(x,"') OR ( ").concat(C,"='").concat(x,"')) AND (").concat(L," IN (5))"),J.codefield=E.WhereClause.create("CASE WHEN (".concat(D,"='").concat(x,"') THEN ").concat(P," ELSE ").concat(H," END"),h.associations.getFieldsIndex()),(B=(0,F.JW)(y.Xx.findField(h.associations.fields,C))).name=X,B.alias=X,O=new y.yN(B,E.WhereClause.create("CASE WHEN (".concat(C,"='").concat(x,"') THEN ").concat(D," ELSE ").concat(C," END"),h.associations.getFieldsIndex())),z=h.unVersion>=4?new y.$X(y.Xx.findField(h.associations.fields,Z.get("PERCENTALONG").name)):new y.yN(new S.Z({name:"percentalong",alias:"percentalong",type:"double"}),E.WhereClause.create("0",h.associations.getFieldsIndex())),e.abrupt("break",68);case 50:return Q="((".concat(D,"='").concat(x,"') OR ( ").concat(C,"='").concat(x,"')) AND (").concat(L," IN (4,6))"),J.codefield=E.WhereClause.create("CASE WHEN (".concat(D,"='").concat(x,"') THEN ").concat(P," ELSE ").concat(H," END"),h.associations.getFieldsIndex()),($=(0,F.JW)(y.Xx.findField(h.associations.fields,C))).name=X,$.alias=X,O=new y.yN($,E.WhereClause.create("CASE WHEN (".concat(C,"='").concat(x,"') THEN ").concat(D," ELSE ").concat(C," END"),h.associations.getFieldsIndex())),G=new y.yN(new S.Z({name:"side",alias:"side",type:"string"}),E.WhereClause.create("CASE WHEN (".concat(L,"=4) THEN 'from' ELSE 'to' END"),h.associations.getFieldsIndex())),e.abrupt("break",68);case 54:return ee="".concat(D,"='@T'"),ne="".concat(C,"='@T'"),null!==v&&(ee+=" AND ".concat(A,"=@A"),ne+=" AND ".concat(T,"=@A")),Q="(("+ee+") OR ("+ne+"))",Q=(0,m.P)(Q,"@T",null!==(K=x)&&void 0!==K?K:""),ee=(0,m.P)(ee,"@T",null!==(Y=x)&&void 0!==Y?Y:""),null!==v&&(ee=(0,m.P)(ee,"@A",v.toString()),Q=(0,m.P)(Q,"@A",v.toString())),J.codefield=E.WhereClause.create("CASE WHEN "+ee+" THEN ".concat(P," ELSE ").concat(H," END"),h.associations.getFieldsIndex()),(te=(0,F.JW)(y.Xx.findField(h.associations.fields,C))).name=X,te.alias=X,O=new y.yN(te,E.WhereClause.create("CASE WHEN "+ee+" THEN ".concat(C," ELSE ").concat(D," END"),h.associations.getFieldsIndex())),e.abrupt("break",68);case 59:return Q="".concat(D,"='").concat(x,"' AND ").concat(L," = 2"),null!==v&&(Q+=" AND ".concat(A," = ")+v.toString()),J.codefield=P,Q="( "+Q+" )",O=new y.QP(y.Xx.findField(h.associations.fields,C),X,X),e.abrupt("break",68);case 61:return Q="(".concat(C,"='").concat(x,"' AND ").concat(L," = 2)"),null!==v&&(Q+=" AND ".concat(T," = ")+v.toString()),J.codefield=H,Q="( "+Q+" )",O=new y.QP(y.Xx.findField(h.associations.fields,D),X,X),e.abrupt("break",68);case 63:return Q="(".concat(D,"='").concat(x,"' AND ").concat(L," = 3)"),null!==v&&(Q+=" AND ".concat(A," = ")+v.toString()),J.codefield=P,Q="( "+Q+" )",O=new y.QP(y.Xx.findField(h.associations.fields,C),X,_),e.abrupt("break",68);case 65:return Q="(".concat(C,"='").concat(x,"' AND ").concat(L," = 3)"),null!==v&&(Q+=" AND ".concat(T," = ")+v.toString()),J.codefield=H,Q="( "+Q+" )",O=new y.QP(y.Xx.findField(h.associations.fields,D),X,_),e.abrupt("break",68);case 67:throw new c.aV(n,c.rH.InvalidParameter,t);case 68:return g&&(Q="1 <> 1"),e.abrupt("return",new y.Xx({parentfeatureset:h.associations,adaptedFields:[new y.$X(y.Xx.findField(h.associations.fields,R)),new y.$X(y.Xx.findField(h.associations.fields,V)),O,G,J,z],extraFilter:Q?E.WhereClause.create(Q,h.associations.getFieldsIndex()):null}));case 70:case"end":return e.stop()}}),e,null,[[21,32,35,38]])})));return function(n,t,r){return e.apply(this,arguments)}}())},e.signatures.push({name:"featuresetbyassociation",min:2,max:6}),e.functions.groupby=function(n,t){return e.standardFunctionAsync(n,t,function(){var s=(0,i.Z)((0,r.Z)().mark((function i(s,l,o){var f,d,p,b,y,h,x,v,g,k,w,F,Z,D,N,S,C,A,P,H,L,V,R,j,W,M,O,z,G,X,_,U,q,J,Q,B,$,K;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((0,m.C)(o,3,3,n,t),(0,m.r)(o[0])){r.next=2;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 2:return r.next=4,o[0].load();case 4:if(f=r.sent,d=[],p=[],b=!1,y=[],!(0,m.c)(o[1])){r.next=12;break}y.push(o[1]),r.next=23;break;case 12:if(!(o[1]instanceof u.Z)){r.next=16;break}y.push(o[1]),r.next=23;break;case 16:if(!(0,m.m)(o[1])){r.next=20;break}y=o[1],r.next=23;break;case 20:if((0,m.o)(o[1])){r.next=22;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 22:y=o[1].toArray();case 23:h=(0,a.Z)(y),r.prev=24,h.s();case 26:if((x=h.n()).done){r.next=41;break}if(v=x.value,!(0,m.c)(v)){r.next=33;break}g=E.WhereClause.create((0,m.j)(v),f.getFieldsIndex()),k=!0===(0,I.y5)(g)?(0,m.j)(v):"%%%%FIELDNAME",d.push({name:k,expression:g}),"%%%%FIELDNAME"===k&&(b=!0),r.next=39;break;case 33:if(v instanceof u.Z){r.next=35;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 35:if(w=v.hasField("name")?v.field("name"):"%%%%FIELDNAME",F=v.hasField("expression")?v.field("expression"):"","%%%%FIELDNAME"===w&&(b=!0),w){r.next=38;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 38:d.push({name:w,expression:E.WhereClause.create(F||w,f.getFieldsIndex())});case 39:r.next=26;break;case 41:r.next=46;break;case 43:r.prev=43,r.t0=r.catch(24),h.e(r.t0);case 46:return r.prev=46,h.f(),r.finish(46);case 49:if(y=[],!(0,m.c)(o[2])){r.next=53;break}y.push(o[2]),r.next=64;break;case 53:if(!(0,m.m)(o[2])){r.next=57;break}y=o[2],r.next=64;break;case 57:if(!(0,m.o)(o[2])){r.next=61;break}y=o[2].toArray(),r.next=64;break;case 61:if(o[2]instanceof u.Z){r.next=63;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 63:y.push(o[2]);case 64:Z=(0,a.Z)(y),r.prev=65,Z.s();case 67:if((D=Z.n()).done){r.next=77;break}if((N=D.value)instanceof u.Z){r.next=71;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 71:if(S=N.hasField("name")?N.field("name"):"",C=N.hasField("statistic")?N.field("statistic"):"",A=N.hasField("expression")?N.field("expression"):"",S&&C&&A){r.next=74;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 74:p.push({name:S,statistic:C.toLowerCase(),expression:E.WhereClause.create(A,f.getFieldsIndex())});case 75:r.next=67;break;case 77:r.next=82;break;case 79:r.prev=79,r.t1=r.catch(65),Z.e(r.t1);case 82:return r.prev=82,Z.f(),r.finish(82);case 85:if(b){P={},H=(0,a.Z)(f.fields);try{for(H.s();!(L=H.n()).done;)V=L.value,P[V.name.toLowerCase()]=1}catch(i){H.e(i)}finally{H.f()}R=(0,a.Z)(d);try{for(R.s();!(j=R.n()).done;)"%%%%FIELDNAME"!==(W=j.value).name&&(P[W.name.toLowerCase()]=1)}catch(i){R.e(i)}finally{R.f()}M=(0,a.Z)(p);try{for(M.s();!(O=M.n()).done;)"%%%%FIELDNAME"!==(z=O.value).name&&(P[z.name.toLowerCase()]=1)}catch(i){M.e(i)}finally{M.f()}G=0,X=(0,a.Z)(d);try{for(X.s();!(_=X.n()).done;)if("%%%%FIELDNAME"===(U=_.value).name){for(;1===P["field_"+G.toString()];)G++;P["field_"+G.toString()]=1,U.name="FIELD_"+G.toString()}}catch(i){X.e(i)}finally{X.f()}}q=0,J=d;case 87:if(!(q<J.length)){r.next=94;break}return Q=J[q],r.next=91,T(Q.expression,e,n);case 91:q++,r.next=87;break;case 94:B=0,$=p;case 95:if(!(B<$.length)){r.next=102;break}return K=$[B],r.next=99,T(K.expression,e,n);case 99:B++,r.next=95;break;case 102:return r.abrupt("return",o[0].groupby(d,p));case 103:case"end":return r.stop()}}),i,null,[[24,43,46,49],[65,79,82,85]])})));return function(e,n,t){return s.apply(this,arguments)}}())},e.signatures.push({name:"groupby",min:3,max:3}),e.functions.distinct=function(n,t){return e.standardFunctionAsync(n,t,function(){var s=(0,i.Z)((0,r.Z)().mark((function i(s,l,o){var f,d,p,b,y,h,x,v,g,k,w,F,Z,D,N,S,C,P,H,L,V,R,j,W,M;return(0,r.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(0,m.r)(o[0])){r.next=59;break}return(0,m.C)(o,2,2,n,t),r.next=4,o[0].load();case 4:if(f=r.sent,d=[],p=[],!(0,m.c)(o[1])){r.next=11;break}p.push(o[1]),r.next=22;break;case 11:if(!(o[1]instanceof u.Z)){r.next=15;break}p.push(o[1]),r.next=22;break;case 15:if(!(0,m.m)(o[1])){r.next=19;break}p=o[1],r.next=22;break;case 19:if((0,m.o)(o[1])){r.next=21;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 21:p=o[1].toArray();case 22:b=!1,y=(0,a.Z)(p),r.prev=24,y.s();case 26:if((h=y.n()).done){r.next=41;break}if(x=h.value,!(0,m.c)(x)){r.next=33;break}v=E.WhereClause.create((0,m.j)(x),f.getFieldsIndex()),g=!0===(0,I.y5)(v)?(0,m.j)(x):"%%%%FIELDNAME",d.push({name:g,expression:v}),"%%%%FIELDNAME"===g&&(b=!0),r.next=39;break;case 33:if(x instanceof u.Z){r.next=35;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 35:if(k=x.hasField("name")?x.field("name"):"%%%%FIELDNAME",w=x.hasField("expression")?x.field("expression"):"","%%%%FIELDNAME"===k&&(b=!0),k){r.next=38;break}throw new c.aV(n,c.rH.InvalidParameter,t);case 38:d.push({name:k,expression:E.WhereClause.create(w||k,f.getFieldsIndex())});case 39:r.next=26;break;case 41:r.next=46;break;case 43:r.prev=43,r.t0=r.catch(24),y.e(r.t0);case 46:return r.prev=46,y.f(),r.finish(46);case 49:if(b){F={},Z=(0,a.Z)(f.fields);try{for(Z.s();!(D=Z.n()).done;)N=D.value,F[N.name.toLowerCase()]=1}catch(i){Z.e(i)}finally{Z.f()}S=(0,a.Z)(d);try{for(S.s();!(C=S.n()).done;)"%%%%FIELDNAME"!==(P=C.value).name&&(F[P.name.toLowerCase()]=1)}catch(i){S.e(i)}finally{S.f()}H=0,L=(0,a.Z)(d);try{for(L.s();!(V=L.n()).done;)if("%%%%FIELDNAME"===(R=V.value).name){for(;1===F["field_"+H.toString()];)H++;F["field_"+H.toString()]=1,R.name="FIELD_"+H.toString()}}catch(i){L.e(i)}finally{L.f()}}j=0,W=d;case 51:if(!(j<W.length)){r.next=58;break}return M=W[j],r.next=55,T(M.expression,e,n);case 55:j++,r.next=51;break;case 58:return r.abrupt("return",o[0].groupby(d,[]));case 59:return r.abrupt("return",A("distinct",0,0,o));case 60:case"end":return r.stop()}}),i,null,[[24,43,46,49]])})));return function(e,n,t){return s.apply(this,arguments)}}())})}},93249:function(e,n,t){t.d(n,{_:function(){return c},q:function(){return o}});var r=t(74165),a=t(1413),i=t(15861),s=t(19545),l=t(76200),u=t(7575);function c(e,n){return null===e?n:new u.Z({url:e.field("url")})}function o(e,n,t){return f.apply(this,arguments)}function f(){return f=(0,i.Z)((0,r.Z)().mark((function e(n,t,i){var u,c,o,f;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s.id||void 0===s.id?void 0:s.id.findCredential(n.restUrl)){e.next=3;break}return e.abrupt("return",null);case 3:if("loaded"!==n.loadStatus||""!==t||!n.user||!n.user.sourceJSON||!1!==i){e.next=5;break}return e.abrupt("return",n.user.sourceJSON);case 5:if(""!==t){e.next=14;break}return e.next=8,(0,l.default)(n.restUrl+"/community/self",{responseType:"json",query:(0,a.Z)({f:"json"},!1===i?{}:{returnUserLicenseTypeExtensions:!0})});case 8:if(!(u=e.sent).data){e.next=13;break}if(!(c=u.data)||!c.username){e.next=13;break}return e.abrupt("return",c);case 13:case 20:return e.abrupt("return",null);case 14:return e.next=16,(0,l.default)(n.restUrl+"/community/users/"+t,{responseType:"json",query:{f:"json"}});case 16:if(!(o=e.sent).data){e.next=20;break}return f=o.data,e.abrupt("return",f.error?null:f);case 21:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}}}]);
//# sourceMappingURL=718.e7e3f372.chunk.js.map