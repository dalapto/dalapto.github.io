"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[113],{11873:function(e,t,n){function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,n,r,i,o,u,a,s){return[e,t,n,r,i,o,u,a,s]}function o(e,t){return new Float64Array(e,t,9)}n.d(t,{a:function(){return o},c:function(){return r},f:function(){return i}});Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:r,createView:o,fromValues:i},Symbol.toStringTag,{value:"Module"}))},98131:function(e,t,n){function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}n.d(t,{I:function(){return u},a:function(){return r},b:function(){return i},c:function(){return o}});var u=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:i,create:r,createView:o,fromValues:function(e,t,n,r){return[e,t,n,r]}},Symbol.toStringTag,{value:"Module"}))},85981:function(e,t,n){n.d(t,{Ue:function(){return s},nF:function(){return h},zk:function(){return c}});var r=n(16889),i=n(21530),o=n(11186),u=n(71353),a=n(51378);function s(e){return e?{origin:(0,u.a)(e.origin),vector:(0,u.a)(e.vector)}:{origin:(0,u.c)(),vector:(0,u.c)()}}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s();return(0,o.c)(n.origin,e),(0,o.b)(n.vector,t,e),n}function h(e,t,n){return function(e,t,n,i,u){var s=e.vector,c=e.origin,h=(0,o.b)(a.WM.get(),t,c),d=(0,o.e)(s,h)/(0,o.p)(s);return(0,o.g)(u,s,(0,r.uZ)(d,n,i)),(0,o.a)(u,u,e.origin)}(e,t,0,1,n)}(0,u.c)(),(0,u.c)(),new i.x((function(){return s()}))},10387:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var r=n(37762),i=n(74165),o=n(15861),u=n(15671),a=n(43144),s=n(27366),c=n(66978),h=(n(32718),n(25243),n(63780),n(93169),n(10064),n(69912)),d=n(11186),f=n(71353),l=n(85981),_=n(71417),v=n(13005),m=n(27546),p=n(21530),T=(n(14226),n(90045),n(67077)),g=n(40885);function O(e){return e?{ray:(0,g.Ue)(e.ray),c0:e.c0,c1:e.c1}:{ray:(0,g.Ue)(),c0:0,c1:Number.MAX_VALUE}}var b,y;new p.x((function(){return O()})),n(76146),n(51378);function R(e,t){for(var n=0;n<E;n++){var r=e[n];if(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]>=t[3])return!1}return!0}!function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.TOP=3]="TOP",e[e.NEAR=4]="NEAR",e[e.FAR=5]="FAR"}(b||(b={})),function(e){e[e.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",e[e.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",e[e.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",e[e.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",e[e.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",e[e.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",e[e.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",e[e.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(y||(y={}));y.FAR_BOTTOM_RIGHT,y.NEAR_BOTTOM_RIGHT,y.NEAR_BOTTOM_LEFT,y.FAR_BOTTOM_LEFT,y.NEAR_BOTTOM_LEFT,y.NEAR_BOTTOM_RIGHT,y.NEAR_TOP_RIGHT,y.NEAR_TOP_LEFT,y.FAR_BOTTOM_RIGHT,y.FAR_BOTTOM_LEFT,y.FAR_TOP_LEFT,y.FAR_TOP_RIGHT,y.NEAR_BOTTOM_RIGHT,y.FAR_BOTTOM_RIGHT,y.FAR_TOP_RIGHT,y.NEAR_TOP_RIGHT,y.FAR_BOTTOM_LEFT,y.NEAR_BOTTOM_LEFT,y.NEAR_TOP_LEFT,y.FAR_TOP_LEFT,y.FAR_TOP_LEFT,y.NEAR_TOP_LEFT,y.NEAR_TOP_RIGHT,y.FAR_TOP_RIGHT;var E=6,k=((0,T.f)(-1,-1,-1,1),(0,T.f)(1,-1,-1,1),(0,T.f)(1,1,-1,1),(0,T.f)(-1,1,-1,1),(0,T.f)(-1,-1,1,1),(0,T.f)(1,-1,1,1),(0,T.f)(1,1,1,1),(0,T.f)(-1,1,1,1),new p.x(O),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),(0,f.c)(),n(97731)),A=function(){function e(t,n){(0,u.Z)(this,e),this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new N,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}return(0,a.Z)(e,[{key:"bounds",get:function(){return this._root.bounds}},{key:"halfSize",get:function(){return this._root.halfSize}},{key:"root",get:function(){return this._root.node}},{key:"maximumObjectsPerNode",get:function(){return this._maximumObjectsPerNode}},{key:"maximumDepth",get:function(){return this._maximumDepth}},{key:"objectCount",get:function(){return this._objectCount}},{key:"destroy",value:function(){this._degenerateObjects.clear(),N.clearPool(),L[0]=null,G.prune(),J.prune()}},{key:"add",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;this._objectCount+=t,this._grow(e,t);for(var n=N.acquire(),r=0;r<t;r++){var i=e[r];this._isDegenerate(i)?this._degenerateObjects.add(i):(n.init(this._root),this._add(i,n))}N.release(n)}},{key:"remove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._objectCount-=e.length;var n,i=N.acquire(),o=(0,r.Z)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,a=null!=t?t:(0,_.h)(this.objectToBoundingSphere(u),V);P(a[3])?(i.init(this._root),this._remove(u,a,i)):this._degenerateObjects.delete(u)}}catch(s){o.e(s)}finally{o.f()}N.release(i),this._shrink()}},{key:"update",value:function(e,t){if(P(t[3])||!this._isDegenerate(e)){var n=function(e){return L[0]=e,L}(e);this.remove(n,t),this.add(n)}}},{key:"forEachAlongRay",value:function(e,t,n){var r=this,i=(0,g.re)(e,t);this._forEachNode(this._root,(function(e){if(!r._intersectsNode(i,e))return!1;var t=e.node;return t.terminals.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){r._intersectsObject(i,e)&&n(e)})),!0}))}},{key:"forEachAlongRayWithVerticalOffset",value:function(e,t,n,r){var i=this,o=(0,g.re)(e,t);this._forEachNode(this._root,(function(e){if(!i._intersectsNodeWithOffset(o,e,r))return!1;var t=e.node;return t.terminals.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),null!==t.residents&&t.residents.forAll((function(e){i._intersectsObjectWithOffset(o,e,r)&&n(e)})),!0}))}},{key:"forEach",value:function(e){this._forEachNode(this._root,(function(t){var n=t.node;return n.terminals.forAll(e),null!==n.residents&&n.residents.forAll(e),!0})),this._degenerateObjects.forEach(e)}},{key:"forEachDegenerateObject",value:function(e){this._degenerateObjects.forEach(e)}},{key:"findClosest",value:function(e,t,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){return!0},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,u=1/0,a=1/0,s=null,c=M(e,t),h=function(c){if(--o,i(c)){var h=r.objectToBoundingSphere(c);if(R(n,h)){var d=B(e,t,(0,_.g)(h)),f=d-h[3],l=d+h[3];f<u&&(u=f,a=l,s=c)}}};return this._forEachNodeDepthOrdered(this._root,(function(r){if(o<=0||!R(n,r.bounds))return!1;if((0,d.g)(Z,c,r.halfSize),(0,d.a)(Z,Z,r.bounds),B(e,t,Z)>a)return!1;var i=r.node;return i.terminals.forAll((function(e){return h(e)})),null!==i.residents&&i.residents.forAll((function(e){return h(e)})),!0}),e,t),s}},{key:"forEachInDepthRange",value:function(t,n,r,i,o,u,a){var s=this,c=-1/0,h=1/0,f={setRange:function(t){r===e.DepthOrder.FRONT_TO_BACK?(c=Math.max(c,t.near),h=Math.min(h,t.far)):(c=Math.max(c,-t.far),h=Math.min(h,-t.near))}};f.setRange(i);var l=B(n,r,t),v=M(n,r),m=M(n,-r),p=function(e){if(a(e)){var t=s.objectToBoundingSphere(e),i=(0,_.g)(t),d=B(n,r,i)-l,v=d-t[3],m=d+t[3];v>h||m<c||!R(u,t)||o(e,f)}};this._forEachNodeDepthOrdered(this._root,(function(e){if(!R(u,e.bounds))return!1;if((0,d.g)(Z,v,e.halfSize),(0,d.a)(Z,Z,e.bounds),B(n,r,Z)-l>h)return!1;if((0,d.g)(Z,m,e.halfSize),(0,d.a)(Z,Z,e.bounds),B(n,r,Z)-l<c)return!1;var t=e.node;return t.terminals.forAll((function(e){return p(e)})),null!==t.residents&&t.residents.forAll((function(e){return p(e)})),!0}),n,r)}},{key:"forEachNode",value:function(e){this._forEachNode(this._root,(function(t){return e(t.node,t.bounds,t.halfSize,t.depth)}))}},{key:"forEachNeighbor",value:function(e,t){var n=this,r=(0,_.a)(t),i=(0,_.g)(t),o=function(t){var o=n.objectToBoundingSphere(t),u=(0,_.a)(o),a=r+u;return!((0,d.d)((0,_.g)(o),i)-a*a<=0)||e(t)},u=!0,a=function(e){u&&(u=o(e))};this._forEachNode(this._root,(function(e){var t=(0,_.a)(e.bounds),n=r+t;if((0,d.d)((0,_.g)(e.bounds),i)-n*n>0)return!1;var o=e.node;return o.terminals.forAll(a),u&&null!==o.residents&&o.residents.forAll(a),u})),u&&this.forEachDegenerateObject(a)}},{key:"_intersectsNode",value:function(e,t){return F(t.bounds,2*-t.halfSize,D),F(t.bounds,2*t.halfSize,H),(0,k.yK)(e.origin,e.direction,D,H)}},{key:"_intersectsNodeWithOffset",value:function(e,t,n){return F(t.bounds,2*-t.halfSize,D),F(t.bounds,2*t.halfSize,H),n.applyToMinMax(D,H),(0,k.yK)(e.origin,e.direction,D,H)}},{key:"_intersectsObject",value:function(e,t){var n=this.objectToBoundingSphere(t);return!(n[3]>0)||(0,_.j)(n,e)}},{key:"_intersectsObjectWithOffset",value:function(e,t,n){var r=this.objectToBoundingSphere(t);return!(r[3]>0)||(0,_.j)(n.applyToBoundingSphere(r),e)}},{key:"_forEachNode",value:function(e,t){for(var n=N.acquire().init(e),r=[n];0!==r.length;){if(t(n=r.pop())&&!n.isLeaf())for(var i=0;i<n.node.children.length;i++)n.node.children[i]&&r.push(N.acquire().init(n).advance(i));N.release(n)}}},{key:"_forEachNodeDepthOrdered",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DepthOrder.FRONT_TO_BACK,o=N.acquire().init(t),u=[o];for(function(e,t,n){if(!J.length)for(var r=0;r<8;++r)J.push({index:0,distance:0});for(var i=0;i<8;++i){var o=I[i];J.data[i].index=i,J.data[i].distance=B(e,t,o)}J.sort((function(e,t){return e.distance-t.distance}));for(var u=0;u<8;++u)n[u]=J.data[u].index}(r,i,X);0!==u.length;){if(n(o=u.pop())&&!o.isLeaf())for(var a=7;a>=0;--a){var s=X[a];o.node.children[s]&&u.push(N.acquire().init(o).advance(s))}N.release(o)}}},{key:"_remove",value:function(e,t,n){G.clear();var r=n.advanceTo(t,(function(e,t){G.push(e.node),G.push(t)}))?n.node.terminals:n.node.residents;if(r.removeUnordered(e),0===r.length)for(var i=G.length-2;i>=0;i-=2){var o=G.data[i],u=G.data[i+1];if(!this._purge(o,u))break}}},{key:"_nodeIsEmpty",value:function(e){if(0!==e.terminals.length)return!1;if(null!==e.residents)return 0===e.residents.length;for(var t=0;t<e.children.length;t++)if(e.children[t])return!1;return!0}},{key:"_purge",value:function(e,t){return t>=0&&(e.children[t]=null),!!this._nodeIsEmpty(e)&&(null===e.residents&&(e.residents=new m.Z({shrink:!0})),!0)}},{key:"_add",value:function(e,t){t.advanceTo(this.objectToBoundingSphere(e))?t.node.terminals.push(e):(t.node.residents.push(e),t.node.residents.length>this._maximumObjectsPerNode&&t.depth<this._maximumDepth&&this._split(t))}},{key:"_split",value:function(e){var t=e.node.residents;e.node.residents=null;for(var n=0;n<t.length;n++){var r=N.acquire().init(e);this._add(t.at(n),r),N.release(r)}}},{key:"_grow",value:function(e,t){var n=this;if(0!==t&&(j(e,t,(function(e){return n.objectToBoundingSphere(e)}),q),P(q[3])&&!this._fitsInsideTree(q)))if(this._nodeIsEmpty(this._root.node))(0,_.h)(q,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{var r=this._rootBoundsForRootAsSubNode(q);this._placingRootViolatesMaxDepth(r)?this._rebuildTree(q,r):this._growRootAsSubNode(r),N.release(r)}}},{key:"_rebuildTree",value:function(e,t){var n=this;(0,d.c)(K,t.bounds),K[3]=t.halfSize,j([e,K],2,(function(e){return e}),W);var r=N.acquire().init(this._root);this._root.initFrom(null,W,W[3]),this._root.increaseHalfSize(1.25),this._forEachNode(r,(function(e){return n.add(e.node.terminals.data,e.node.terminals.length),null!==e.node.residents&&n.add(e.node.residents.data,e.node.residents.length),!0})),N.release(r)}},{key:"_placingRootViolatesMaxDepth",value:function(e){var t=this,n=Math.log(e.halfSize/this._root.halfSize)*Math.LOG2E,r=0;return this._forEachNode(this._root,(function(e){return(r=Math.max(r,e.depth))+n<=t._maximumDepth})),r+n>this._maximumDepth}},{key:"_rootBoundsForRootAsSubNode",value:function(e){for(var t=e[3],n=e,r=-1/0,i=this._root.bounds,o=this._root.halfSize,u=0;u<3;u++){var a=i[u]-o-(n[u]-t),s=n[u]+t-(i[u]+o),c=Math.max(0,Math.ceil(a/(2*o))),h=Math.max(0,Math.ceil(s/(2*o)))+1,d=Math.pow(2,Math.ceil(Math.log(c+h)*Math.LOG2E));r=Math.max(r,d),U[u].min=c,U[u].max=h}for(var f=0;f<3;f++){var l=U[f].min,_=U[f].max,v=(r-(l+_))/2;l+=Math.ceil(v),_+=Math.floor(v);var m=i[f]-o-l*o*2;C[f]=m+(_+l)*o}var p=r*o;return C[3]=p*w,N.acquire().initFrom(null,C,p,0)}},{key:"_growRootAsSubNode",value:function(e){var t=this._root.node;(0,d.c)(q,this._root.bounds),q[3]=this._root.halfSize,this._root.init(e),e.advanceTo(q,null,!0),e.node.children=t.children,e.node.residents=t.residents,e.node.terminals=t.terminals}},{key:"_shrink",value:function(){for(;;){var e=this._findShrinkIndex();if(-1===e)break;this._root.advance(e),this._root.depth=0}}},{key:"_findShrinkIndex",value:function(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;for(var e=null,t=this._root.node.children,n=0,r=0;r<t.length&&null==e;)e=t[n=r++];for(;r<t.length;)if(t[r++])return-1;return n}},{key:"_isDegenerate",value:function(e){return!P(this.objectToBoundingSphere(e)[3])}},{key:"_fitsInsideTree",value:function(e){var t=this._root.bounds,n=this._root.halfSize;return e[3]<=n&&e[0]>=t[0]-n&&e[0]<=t[0]+n&&e[1]>=t[1]-n&&e[1]<=t[1]+n&&e[2]>=t[2]-n&&e[2]<=t[2]+n}},{key:"toJSON",value:function(){var e=this.maximumDepth,t=this.maximumObjectsPerNode,n=this._objectCount,r=this._nodeToJSON(this._root.node);return{maximumDepth:e,maximumObjectsPerNode:t,objectCount:n,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}},{key:"_nodeToJSON",value:function(e){var t,n,r=this,i=e.children.map((function(e){return e?r._nodeToJSON(e):null})),o=null===(t=e.residents)||void 0===t?void 0:t.map((function(e){return r.objectToBoundingSphere(e)})),u=null===(n=e.terminals)||void 0===n?void 0:n.map((function(e){return r.objectToBoundingSphere(e)}));return{children:i,residents:o,terminals:u}}}],[{key:"fromJSON",value:function(t){var n=new e((function(e){return e}),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return n._objectCount=t.objectCount,n._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),n}}]),e}(),N=function(){function e(){(0,u.Z)(this,e),this.bounds=(0,_.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}return(0,a.Z)(e,[{key:"init",value:function(e){return this.initFrom(e.node,e.bounds,e.halfSize,e.depth)}},{key:"initFrom",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.depth;return this.node=null!=t?t:e.createEmptyNode(),null!=n&&(0,_.h)(n,this.bounds),this.halfSize=r,this.depth=i,this}},{key:"increaseHalfSize",value:function(e){this.halfSize*=e,this.updateBoundsRadiusFromHalfSize()}},{key:"updateBoundsRadiusFromHalfSize",value:function(){this.bounds[3]=this.halfSize*w}},{key:"advance",value:function(t){var n=this.node.children[t];n||(n=e.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;var r=I[t];return this.bounds[0]+=r[0]*this.halfSize,this.bounds[1]+=r[1]*this.halfSize,this.bounds[2]+=r[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}},{key:"advanceTo",value:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];;){if(this.isTerminalFor(e))return t&&t(this,-1),!0;if(this.isLeaf()){if(!n)return t&&t(this,-1),!1;this.node.residents=null}var r=this._childIndex(e);t&&t(this,r),this.advance(r)}}},{key:"isLeaf",value:function(){return null!=this.node.residents}},{key:"isTerminalFor",value:function(e){return e[3]>this.halfSize/2}},{key:"_childIndex",value:function(e){var t=this.bounds;return(t[0]<e[0]?1:0)+(t[1]<e[1]?2:0)+(t[2]<e[2]?4:0)}}],[{key:"createEmptyNode",value:function(){return{children:[null,null,null,null,null,null,null,null],terminals:new m.Z({shrink:!0}),residents:new m.Z({shrink:!0})}}},{key:"acquire",value:function(){return e._pool.acquire()}},{key:"release",value:function(t){e._pool.release(t)}},{key:"clearPool",value:function(){e._pool.prune()}}]),e}();function S(e,t){e[0]=Math.min(e[0],t[0]-t[3]),e[1]=Math.min(e[1],t[1]-t[3]),e[2]=Math.min(e[2],t[2]-t[3])}function x(e,t){e[0]=Math.max(e[0],t[0]+t[3]),e[1]=Math.max(e[1],t[1]+t[3]),e[2]=Math.max(e[2],t[2]+t[3])}function F(e,t,n){n[0]=e[0]+t,n[1]=e[1]+t,n[2]=e[2]+t}function j(e,t,n,r){if(1===t){var i=n(e[0]);(0,_.h)(i,r)}else{D[0]=1/0,D[1]=1/0,D[2]=1/0,H[0]=-1/0,H[1]=-1/0,H[2]=-1/0;for(var o=0;o<t;o++){var u=n(e[o]);P(u[3])&&(S(D,u),x(H,u))}(0,d.h)(r,D,H,.5),r[3]=Math.max(H[0]-D[0],H[1]-D[1],H[2]-D[2])/2}}function M(e,t){for(var n,r=1/0,i=0;i<8;++i){var o=B(e,t,z[i]);o<r&&(r=o,n=z[i])}return n}function B(e,t,n){return t*(e[0]*n[0]+e[1]*n[1]+e[2]*n[2])}function P(e){return!isNaN(e)&&e!==-1/0&&e!==1/0&&e>0}N._pool=new v.Z(N),function(e){var t;(t=e.DepthOrder||(e.DepthOrder={}))[t.FRONT_TO_BACK=1]="FRONT_TO_BACK",t[t.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(A||(A={}));var I=[(0,f.f)(-1,-1,-1),(0,f.f)(1,-1,-1),(0,f.f)(-1,1,-1),(0,f.f)(1,1,-1),(0,f.f)(-1,-1,1),(0,f.f)(1,-1,1),(0,f.f)(-1,1,1),(0,f.f)(1,1,1)],z=[(0,f.f)(-1,-1,-1),(0,f.f)(-1,-1,1),(0,f.f)(-1,1,-1),(0,f.f)(-1,1,1),(0,f.f)(1,-1,-1),(0,f.f)(1,-1,1),(0,f.f)(1,1,-1),(0,f.f)(1,1,1)],w=Math.sqrt(3),L=[null];var C=(0,_.c)(),Z=(0,f.c)(),D=(0,f.c)(),H=(0,f.c)(),G=new m.Z,V=(0,_.c)(),q=(0,_.c)(),K=(0,_.c)(),W=(0,_.c)(),U=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],J=new m.Z,X=[0,0,0,0,0,0,0,0],Y=A,Q=n(83715);function $(e,t,n){var r=(0,_.c)(),i=(0,_.g)(r);return(0,d.A)(i,i,e,.5),(0,d.A)(i,i,t,.5),r[3]=(0,d.i)(i,e),(0,d.a)(i,i,n),r}var ee=function(){function e(){(0,u.Z)(this,e),this._idToComponent=new Map,this._components=new Y((function(e){return e.bounds})),this._edges=new Y((function(e){return e.bounds})),this._tmpLineSegment=(0,l.Ue)(),this._tmpP1=(0,f.c)(),this._tmpP2=(0,f.c)(),this._tmpP3=(0,f.c)(),this.remoteClient=null}return(0,a.Z)(e,[{key:"fetchCandidates",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var r,o=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:return(0,c.k_)(n),e.next=5,this._ensureEdgeLocations(t,n);case 5:return r=[],e.abrupt("return",(this._edges.forEachNeighbor((function(e){return o._addCandidates(t,e,r),r.length<1e3}),t.bounds),{result:{candidates:r}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_ensureEdgeLocations",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,n){var o,u,a,s,c,h;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],this._components.forEachNeighbor((function(e){if(null==e.info){var t=e.id,n=e.uid;o.push({id:t,uid:n})}return!0}),t.bounds),o.length){e.next=3;break}return e.abrupt("return");case 3:return u={components:o},e.next=6,this.remoteClient.invoke("fetchAllEdgeLocations",u,null!==n&&void 0!==n?n:{});case 6:a=e.sent,s=(0,r.Z)(a.components);try{for(s.s();!(c=s.n()).done;)h=c.value,this._setFetchEdgeLocations(h)}catch(i){s.e(i)}finally{s.f()}case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ne(t.id,t.bounds),e.abrupt("return",(this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t){var n,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=this._idToComponent.get(t.id))&&(r=[],this._edges.forEachNeighbor((function(e){return e.component===n&&r.push(e),!0}),n.bounds),this._edges.remove(r),this._components.remove([n]),this._idToComponent.delete(n.id)),e.abrupt("return",{result:{}});case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setFetchEdgeLocations",value:function(e){var t=this._idToComponent.get(e.id);if(null!=t&&e.uid===t.uid){for(var n=Q.n_.createView(e.locations),r=new Array(n.count),i=(0,f.c)(),o=(0,f.c)(),u=0;u<n.count;u++){n.position0.getVec(u,i),n.position1.getVec(u,o);var a=$(i,o,e.origin),s=new re(t,u,a);r[u]=s}this._edges.add(r);var c=e.objectIds,h=e.origin;t.info={locations:n,objectIds:c,origin:h}}}},{key:"_addCandidates",value:function(e,t,n){var r=t.component.info,i=r.origin,o=r.objectIds,u=r.locations,a=u.position0.getVec(t.index,this._tmpP1),s=u.position1.getVec(t.index,this._tmpP2);(0,d.a)(a,a,i),(0,d.a)(s,s,i);var c=o[u.componentIndex.get(t.index)];this._addEdgeCandidate(e,c,a,s,n),this._addVertexCandidate(e,c,a,n),this._addVertexCandidate(e,c,s,n)}},{key:"_addEdgeCandidate",value:function(e,t,n,r,i){if(e.returnEdge){var o=(0,_.g)(e.bounds),u=(0,l.zk)(n,r,this._tmpLineSegment),a=(0,l.nF)(u,o,this._tmpP3);(0,_.l)(e.bounds,a)&&i.push({type:"edge",objectId:t,target:(0,f.a)(a),distance:(0,d.i)(o,a),start:(0,f.a)(n),end:(0,f.a)(r)})}}},{key:"_addVertexCandidate",value:function(e,t,n,r){if(e.returnVertex){var i=(0,_.g)(e.bounds);(0,_.l)(e.bounds,n)&&r.push({type:"vertex",objectId:t,target:(0,f.a)(n),distance:(0,d.i)(i,n)})}}}]),e}(),te=ee=(0,s._)([(0,h.j)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],ee),ne=(0,a.Z)((function e(t,n){(0,u.Z)(this,e),this.id=t,this.bounds=n,this.info=null,this.uid=++e.uid}));ne.uid=0;var re=(0,a.Z)((function e(t,n,r){(0,u.Z)(this,e),this.component=t,this.index=n,this.bounds=r}))}}]);
//# sourceMappingURL=113.21d0821c.chunk.js.map