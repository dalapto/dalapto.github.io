"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[8082,9951],{98266:function(e,t,i){i.d(t,{D:function(){return h},s:function(){return c}});var n=i(15671),r=i(43144),a=i(11752),o=i(61120),s=i(60136),l=i(29388),u=i(24390);function c(e,t,i,n){e.set(t,i.get(n)),i.on(n,(function(i){e.set(t,i)}))}var h=function(e){(0,s.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,n.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"setupDefaultRules",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"setupDefaultRules",this).call(this);var e=this._root.language,t=this._root.interfaceColors,n=this._root.horizontalLayout,r=this._root.verticalLayout,s=this.rule.bind(this);s("InterfaceColors").setAll({stroke:u.C.fromHex(15066597),fill:u.C.fromHex(15987699),primaryButton:u.C.fromHex(6788316),primaryButtonHover:u.C.fromHex(6779356),primaryButtonDown:u.C.fromHex(6872182),primaryButtonActive:u.C.fromHex(6872182),primaryButtonText:u.C.fromHex(16777215),primaryButtonStroke:u.C.fromHex(16777215),secondaryButton:u.C.fromHex(14277081),secondaryButtonHover:u.C.fromHex(10724259),secondaryButtonDown:u.C.fromHex(9276813),secondaryButtonActive:u.C.fromHex(15132390),secondaryButtonText:u.C.fromHex(0),secondaryButtonStroke:u.C.fromHex(16777215),grid:u.C.fromHex(0),background:u.C.fromHex(16777215),alternativeBackground:u.C.fromHex(0),text:u.C.fromHex(0),alternativeText:u.C.fromHex(16777215),disabled:u.C.fromHex(11382189),positive:u.C.fromHex(5288704),negative:u.C.fromHex(11730944)});var l=s("ColorSet");l.setAll({passOptions:{hue:.05,saturation:0,lightness:0},colors:[u.C.fromHex(6797276)],step:1,reuse:!1,startIndex:0}),l.setPrivate("currentStep",0),l.setPrivate("currentPass",0),s("Entity").setAll({stateAnimationDuration:0,stateAnimationEasing:(0,u.an)(u.ap)}),s("Component").setAll({interpolationDuration:0,interpolationEasing:(0,u.an)(u.ap)}),s("Sprite").setAll({visible:!0,scale:1,opacity:1,rotation:0,position:"relative",tooltipX:u.ao,tooltipY:u.ao,tooltipPosition:"fixed",isMeasured:!0}),s("Sprite").states.create("default",{visible:!0,opacity:1}),s("Container").setAll({interactiveChildren:!0,setStateOnChildren:!1}),s("Graphics").setAll({strokeWidth:1}),s("Chart").setAll({width:u.a4,height:u.a4,interactiveChildren:!1}),s("Sprite",["horizontal","center"]).setAll({centerX:u.ao,x:u.ao}),s("Sprite",["vertical","center"]).setAll({centerY:u.ao,y:u.ao}),s("Container",["horizontal","layout"]).setAll({layout:n}),s("Container",["vertical","layout"]).setAll({layout:r}),s("Pattern").setAll({repetition:"repeat",width:50,height:50,rotation:0,fillOpacity:1}),s("LinePattern").setAll({gap:6,colorOpacity:1,width:49,height:49}),s("RectanglePattern").setAll({gap:6,checkered:!1,centered:!0,maxWidth:5,maxHeight:5,width:48,height:48,strokeWidth:0}),s("CirclePattern").setAll({gap:5,checkered:!1,centered:!1,radius:3,strokeWidth:0,width:45,height:45}),s("LinearGradient").setAll({rotation:90}),s("Legend").setAll({fillField:"fill",strokeField:"stroke",nameField:"name",layout:u.a1.new(this._root,{}),layer:30,clickTarget:"itemContainer"}),s("Container",["legend","item","itemcontainer"]).setAll({paddingLeft:5,paddingRight:5,paddingBottom:5,paddingTop:5,layout:n,setStateOnChildren:!0,interactiveChildren:!1,ariaChecked:!0,focusable:!0,ariaLabel:e.translate("Press ENTER to toggle"),role:"checkbox"});var h=s("Rectangle",["legend","item","background"]);h.setAll({fillOpacity:0}),c(h,"fill",t,"background"),s("Container",["legend","marker"]).setAll({setStateOnChildren:!0,centerY:u.ao,paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0,width:18,height:18}),s("RoundedRectangle",["legend","marker","rectangle"]).setAll({width:u.a4,height:u.a4,cornerRadiusBL:3,cornerRadiusTL:3,cornerRadiusBR:3,cornerRadiusTR:3});var d=s("RoundedRectangle",["legend","marker","rectangle"]).states.create("disabled",{});c(d,"fill",t,"disabled"),c(d,"stroke",t,"disabled"),s("Label",["legend","label"]).setAll({centerY:u.ao,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,populateText:!0}),c(s("Label",["legend","label"]).states.create("disabled",{}),"fill",t,"disabled"),s("Label",["legend","value","label"]).setAll({centerY:u.ao,marginLeft:5,paddingRight:0,paddingLeft:0,paddingTop:0,paddingBottom:0,width:50,centerX:u.a4,populateText:!0}),c(s("Label",["legend","value","label"]).states.create("disabled",{}),"fill",t,"disabled"),s("HeatLegend").setAll({stepCount:1}),s("RoundedRectangle",["heatlegend","marker"]).setAll({cornerRadiusTR:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusBL:0}),s("RoundedRectangle",["vertical","heatlegend","marker"]).setAll({height:u.a4,width:15}),s("RoundedRectangle",["horizontal","heatlegend","marker"]).setAll({width:u.a4,height:15}),s("HeatLegend",["vertical"]).setAll({height:u.a4}),s("HeatLegend",["horizontal"]).setAll({width:u.a4}),s("Label",["heatlegend","start"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5}),s("Label",["heatlegend","end"]).setAll({paddingLeft:5,paddingRight:5,paddingTop:5,paddingBottom:5});var f=s("Label");f.setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontSize:"1em",populateText:!1}),c(f,"fill",t,"text"),s("RadialLabel").setAll({textType:"regular",centerY:u.ao,centerX:u.ao,inside:!1,radius:0,baseRadius:u.a4,orientation:"auto",textAlign:"center"}),s("RoundedRectangle").setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8}),s("PointedRectangle").setAll({pointerBaseWidth:15,pointerLength:10,cornerRadius:8}),s("Slice").setAll({shiftRadius:0,dRadius:0,dInnerRadius:0});var p=s("Tick");p.setAll({strokeOpacity:.15,isMeasured:!1,length:4.5,position:"absolute",crisp:!0}),c(p,"stroke",t,"grid"),s("Bullet").setAll({locationX:.5,locationY:.5}),s("Tooltip").setAll({position:"absolute",getFillFromSprite:!0,getStrokeFromSprite:!1,autoTextColor:!0,paddingTop:9,paddingBottom:8,paddingLeft:10,paddingRight:10,marginBottom:5,pointerOrientation:"vertical",centerX:u.ao,centerY:u.ao,animationEasing:(0,u.an)(u.ap),exportable:!1}),s("PointedRectangle",["tooltip","background"]).setAll({strokeOpacity:.9,cornerRadius:4,pointerLength:4,pointerBaseWidth:8,fillOpacity:.9,stroke:u.C.fromHex(16777215)});var v=s("Label",["tooltip"]);v.setAll({role:"tooltip",populateText:!0,paddingRight:0,paddingTop:0,paddingLeft:0,paddingBottom:0}),c(v,"fill",t,"alternativeText"),s("Button").setAll({paddingTop:8,paddingBottom:8,paddingLeft:10,paddingRight:10,interactive:!0,layout:n,interactiveChildren:!1,setStateOnChildren:!0,focusable:!0}),s("Button").states.create("hover",{}),s("Button").states.create("down",{stateAnimationDuration:0}),s("Button").states.create("active",{});var y=s("RoundedRectangle",["button","background"]);c(y,"fill",t,"primaryButton"),c(y,"stroke",t,"primaryButtonStroke"),c(s("RoundedRectangle",["button","background"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),c(s("RoundedRectangle",["button","background"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown"),c(s("RoundedRectangle",["button","background"]).states.create("active",{}),"fill",t,"primaryButtonActive"),c(s("Graphics",["button","icon"]),"stroke",t,"primaryButtonText"),c(s("Label",["button"]),"fill",t,"primaryButtonText"),s("Button",["zoom"]).setAll({paddingTop:18,paddingBottom:18,paddingLeft:12,paddingRight:12,centerX:46,centerY:-10,y:0,x:u.a4,role:"button",ariaLabel:e.translate("Zoom Out"),layer:30});var g=s("RoundedRectangle",["background","button","zoom"]);g.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),c(g,"fill",t,"primaryButton"),c(s("RoundedRectangle",["background","button","zoom"]).states.create("hover",{}),"fill",t,"primaryButtonHover"),c(s("RoundedRectangle",["background","button","zoom"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"primaryButtonDown");var m=s("Graphics",["icon","button","zoom"]);m.setAll({crisp:!0,strokeOpacity:.7,draw:function(e){e.moveTo(0,0),e.lineTo(12,0)}}),c(m,"stroke",t,"primaryButtonText"),s("Button",["resize"]).setAll({paddingTop:9,paddingBottom:9,paddingLeft:13,paddingRight:13,draggable:!0,centerX:u.ao,centerY:u.ao,position:"absolute",role:"slider",ariaValueMin:"0",ariaValueMax:"100",ariaLabel:e.translate("Use up and down arrows to move selection")});var b=s("RoundedRectangle",["background","resize","button"]);b.setAll({cornerRadiusBL:40,cornerRadiusBR:40,cornerRadiusTL:40,cornerRadiusTR:40}),c(b,"fill",t,"secondaryButton"),c(b,"stroke",t,"secondaryButtonStroke"),c(s("RoundedRectangle",["background","resize","button"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),c(s("RoundedRectangle",["background","resize","button"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown");var _=s("Graphics",["resize","button","icon"]);_.setAll({interactive:!1,crisp:!0,strokeOpacity:.5,draw:function(e){e.moveTo(0,.5),e.lineTo(0,12.5),e.moveTo(4,.5),e.lineTo(4,12.5)}}),c(_,"stroke",t,"secondaryButtonText"),s("Button",["resize","vertical"]).setAll({rotation:90,cursorOverStyle:"ns-resize"}),s("Button",["resize","horizontal"]).setAll({cursorOverStyle:"ew-resize"}),s("Button",["play"]).setAll({paddingTop:13,paddingBottom:13,paddingLeft:14,paddingRight:14,ariaLabel:e.translate("Play"),toggleKey:"active"});var w=s("RoundedRectangle",["play","background"]);w.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),c(w,"fill",t,"primaryButton");var k=s("Graphics",["play","icon"]);k.setAll({stateAnimationDuration:0,dx:1,draw:function(e){e.moveTo(0,-5),e.lineTo(8,0),e.lineTo(0,5),e.lineTo(0,-5)}}),c(k,"fill",t,"primaryButtonText"),s("Graphics",["play","icon"]).states.create("default",{stateAnimationDuration:0}),s("Graphics",["play","icon"]).states.create("active",{stateAnimationDuration:0,draw:function(e){e.moveTo(-4,-5),e.lineTo(-1,-5),e.lineTo(-1,5),e.lineTo(-4,5),e.lineTo(-4,-5),e.moveTo(4,-5),e.lineTo(1,-5),e.lineTo(1,5),e.lineTo(4,5),e.lineTo(4,-5)}}),s("Button",["switch"]).setAll({paddingTop:4,paddingBottom:4,paddingLeft:4,paddingRight:4,ariaLabel:e.translate("Press ENTER to toggle"),toggleKey:"active",width:40,height:24,layout:null});var x=s("RoundedRectangle",["switch","background"]);x.setAll({strokeOpacity:.5,cornerRadiusBL:100,cornerRadiusBR:100,cornerRadiusTL:100,cornerRadiusTR:100}),c(x,"fill",t,"primaryButton");var M=s("Circle",["switch","icon"]);M.setAll({radius:8,centerY:0,centerX:0,dx:0}),c(M,"fill",t,"primaryButtonText"),s("Graphics",["switch","icon"]).states.create("active",{dx:16}),s("Scrollbar").setAll({start:0,end:1,layer:30,animationEasing:(0,u.an)(u.ap)}),s("Scrollbar",["vertical"]).setAll({marginRight:13,marginLeft:13,minWidth:12,height:u.a4}),s("Scrollbar",["horizontal"]).setAll({marginTop:13,marginBottom:13,minHeight:12,width:u.a4}),this.rule("Button",["scrollbar"]).setAll({exportable:!1});var C=s("RoundedRectangle",["scrollbar","main","background"]);C.setAll({cornerRadiusTL:8,cornerRadiusBL:8,cornerRadiusTR:8,cornerRadiusBR:8,fillOpacity:.8}),c(C,"fill",t,"fill");var Z=s("RoundedRectangle",["scrollbar","thumb"]);Z.setAll({role:"slider",ariaLive:"polite",position:"absolute",draggable:!0}),c(Z,"fill",t,"secondaryButton"),c(s("RoundedRectangle",["scrollbar","thumb"]).states.create("hover",{}),"fill",t,"secondaryButtonHover"),c(s("RoundedRectangle",["scrollbar","thumb"]).states.create("down",{stateAnimationDuration:0}),"fill",t,"secondaryButtonDown"),s("RoundedRectangle",["scrollbar","thumb","vertical"]).setAll({x:u.ao,width:u.a4,centerX:u.ao,ariaLabel:e.translate("Use up and down arrows to move selection")}),s("RoundedRectangle",["scrollbar","thumb","horizontal"]).setAll({y:u.ao,centerY:u.ao,height:u.a4,ariaLabel:e.translate("Use left and right arrows to move selection")});var P=s("PointedRectangle",["axis","tooltip","background"]);P.setAll({cornerRadius:0}),c(P,"fill",t,"alternativeBackground"),s("Label",["axis","tooltip"]).setAll({role:void 0}),s("Label",["axis","tooltip","y"]).setAll({textAlign:"right"}),s("Label",["axis","tooltip","y","opposite"]).setAll({textAlign:"left"}),s("Label",["axis","tooltip","x"]).setAll({textAlign:"center"}),s("Tooltip",["categoryaxis"]).setAll({labelText:"{category}"}),s("Star").setAll({spikes:5,innerRadius:5,radius:10}),s("Tooltip",["stock"]).setAll({paddingTop:6,paddingBottom:5,paddingLeft:7,paddingRight:7}),s("PointedRectangle",["tooltip","stock","axis"]).setAll({pointerLength:0,pointerBaseWidth:0,cornerRadius:3}),s("Label",["tooltip","stock"]).setAll({fontSize:"0.8em"}),s("SpriteResizer").setAll({rotationStep:10}),s("Container",["resizer","grip"]).states.create("hover",{});var A=s("RoundedRectangle",["resizer","grip"]);A.setAll({strokeOpacity:.7,strokeWidth:1,fillOpacity:1,width:12,height:12}),c(A,"fill",t,"background"),c(A,"stroke",t,"alternativeBackground");var T=s("RoundedRectangle",["resizer","grip","outline"]);T.setAll({strokeOpacity:0,fillOpacity:0,width:20,height:20}),T.states.create("hover",{fillOpacity:.3}),c(T,"fill",t,"alternativeBackground"),s("RoundedRectangle",["resizer","grip","left"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0}),s("RoundedRectangle",["resizer","grip","right"]).setAll({cornerRadiusBL:0,cornerRadiusBR:0,cornerRadiusTL:0,cornerRadiusTR:0});var I=s("Rectangle",["resizer","rectangle"]);I.setAll({strokeDasharray:[2,2],strokeOpacity:.5,strokeWidth:1}),c(I,"stroke",t,"alternativeBackground")}}]),i}(u.am)},24390:function(e,t,i){i.d(t,{$:function(){return jt},A:function(){return z},B:function(){return C},C:function(){return We},D:function(){return N},E:function(){return kt},F:function(){return pe},G:function(){return V},H:function(){return de},I:function(){return ye},J:function(){return O},K:function(){return F},L:function(){return D},M:function(){return H},N:function(){return It},O:function(){return T},P:function(){return x},Q:function(){return K},R:function(){return $},S:function(){return rt},T:function(){return Nt},U:function(){return ve},V:function(){return R},W:function(){return me},X:function(){return at},Y:function(){return Qe},Z:function(){return xe},_:function(){return W},a:function(){return k},a0:function(){return Bt},a1:function(){return Rt},a2:function(){return ft},a3:function(){return Yt},a4:function(){return Q},a5:function(){return Et},a6:function(){return Ve},a7:function(){return Ft},a8:function(){return ce},a9:function(){return he},aA:function(){return wt},aB:function(){return B},aC:function(){return Ge},aD:function(){return q},aE:function(){return Je},aF:function(){return gt},aG:function(){return fe},aH:function(){return Se},aI:function(){return p},aJ:function(){return we},aK:function(){return et},aL:function(){return ze},aa:function(){return ee},ab:function(){return vt},ac:function(){return ae},ad:function(){return I},ae:function(){return Ce},af:function(){return zt},ag:function(){return Ut},ah:function(){return be},ai:function(){return pt},aj:function(){return tt},ak:function(){return Ne},al:function(){return qt},am:function(){return Gt},an:function(){return ct},ao:function(){return J},ap:function(){return ut},aq:function(){return ge},ar:function(){return _e},as:function(){return $e},at:function(){return it},au:function(){return nt},av:function(){return Dt},aw:function(){return st},ax:function(){return G},ay:function(){return Zt},az:function(){return U},b:function(){return te},c:function(){return Me},d:function(){return M},e:function(){return P},f:function(){return ie},g:function(){return w},h:function(){return Ee},i:function(){return _},j:function(){return Fe},k:function(){return j},l:function(){return De},m:function(){return Pe},n:function(){return g},o:function(){return se},p:function(){return ke},q:function(){return Ie},r:function(){return Ae},s:function(){return Te},t:function(){return Oe},u:function(){return v},v:function(){return Ze},w:function(){return ne},x:function(){return Z},y:function(){return le},z:function(){return oe}});var n=i(82963),r=i(93433),a=i(11752),o=i(61120),s=i(74165),l=i(97326),u=i(60136),c=i(29388),h=i(15671),d=i(43144),f=i(27366);function p(e){return Number(e)!==e}function v(e){if(null!=e&&!w(e)){var t=Number(e);return p(t)&&_(e)&&""!=e?v(e.replace(/[^0-9.\-]+/g,"")):t}return e}function y(e){if(b(e))return new Date(e);if(w(e))return new Date(e);var t=Number(e);return w(t)?new Date(t):new Date(e)}function g(e){if(p(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";if(0===e&&1/e==-1/0)return"-0";var t=e<0;e=Math.abs(e);var i,n=/^([0-9]+)(?:\.([0-9]+))?(?:e[\+\-]([0-9]+))?$/.exec(""+e),r=n[1],a=n[2]||"";if(void 0===n[3])i=""===a?r:r+"."+a;else{var o=+n[3];if(e<1)i="0."+m("0",o-1)+r+a;else{var s=o-a.length;i=0===s?r+a:s<0?r+a.slice(0,s)+"."+a.slice(s):r+a+m("0",s)}}return t?"-"+i:i}function m(e,t){return new Array(t+1).join(e)}function b(e){return"[object Date]"===function(e){return{}.toString.call(e)}(e)}function _(e){return"string"==typeof e}function w(e){return"number"==typeof e&&Number(e)==e}function k(e){return"object"==typeof e&&null!==e}var x="__\xa7\xa7\xa7__",M="__\xa7\xa7\xa7\xa7__";function C(e,t){for(var i=e.length,n=0;n<i;++n)if(e[n]===t)return n;return-1}function Z(e,t){for(var i=e.length,n=new Array(i),r=0;r<i;++r)n[r]=t(e[r],r);return n}function P(e,t){for(var i=e.length,n=0;n<i;++n)t(e[n],n)}function A(e,t){for(var i=e.length;i>0;)t(e[--i],i)}function T(e,t){for(var i=e.length,n=0;n<i&&t(e[n],n);++n);}function I(e,t){for(var i=!1,n=0;;){if(-1===(n=e.indexOf(t,n)))return i;i=!0,e.splice(n,1)}}function O(e,t){var i=e.indexOf(t);return-1!==i&&(e.splice(i,1),!0)}function D(e,t){-1===e.indexOf(t)&&e.push(t)}function F(e){for(var t=e.length,i=new Array(t),n=0;n<t;++n)i[n]=e[n];return i}function E(e,t,i){e.splice(t,0,i)}function S(e,t){e.splice(t,1)}function L(e,t){for(var i=e.length,n=0;n<i;++n)if(t(e[n],n))return n;return-1}function B(e,t){var i=L(e,t);if(-1!==i)return e[i]}function j(e,t){for(var i=e.length;i>0;)t(e[--i])||e.splice(i,1)}var R=function(){function e(){(0,h.Z)(this,e),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1}return(0,d.Z)(e,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),e}(),N=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dispose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._disposed=!1,this._dispose=t}return(0,d.Z)(e,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),e}(),z=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,d.Z)(i,[{key:"_dispose",value:function(){P(this._disposers,(function(e){e.dispose()}))}}]),i}(R),H=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,h.Z)(this,i),n=t.call(this),Object.defineProperty((0,l.Z)(n),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._disposers=e,n}return(0,d.Z)(i,[{key:"_dispose",value:function(){P(this._disposers,(function(e){e.dispose()}))}}]),i}(R),V=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_counter",{enumerable:!0,configurable:!0,writable:!0,value:0}),e}return(0,d.Z)(i,[{key:"increment",value:function(){var e=this;return++this._counter,new N((function(){--e._counter,0===e._counter&&e.dispose()}))}}]),i}(N),W=function(){function e(){(0,h.Z)(this,e),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_killed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_iterating",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_enabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._listeners=[],this._killed=[],this._disabled={},this._iterating=0,this._enabled=!0,this._disposed=!1}return(0,d.Z)(e,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){if(!this._disposed){this._disposed=!0;var e=this._listeners;this._iterating=1,this._listeners=null,this._disabled=null;try{P(e,(function(e){e.disposer.dispose()}))}finally{this._killed=null,this._iterating=null}}}},{key:"hasListeners",value:function(){return 0!==this._listeners.length}},{key:"hasListenersByType",value:function(e){return function(e,t){for(var i=e.length,n=0;n<i;++n)if(t(e[n]))return!0;return!1}(this._listeners,(function(t){return(null===t.type||t.type===e)&&!t.killed}))}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"enableType",value:function(e){delete this._disabled[e]}},{key:"disableType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;this._disabled[e]=t}},{key:"_removeListener",value:function(e){if(0===this._iterating){var t=this._listeners.indexOf(e);if(-1===t)throw new Error("Invalid state: could not remove listener");this._listeners.splice(t,1)}else this._killed.push(e)}},{key:"_removeExistingListener",value:function(e,t,i,n){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(r){r.once!==e||r.type!==t||void 0!==i&&r.callback!==i||r.context!==n||r.disposer.dispose()}))}},{key:"isEnabled",value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");return this._enabled&&this._listeners.length>0&&this.hasListenersByType(e)&&void 0===this._disabled[e]}},{key:"removeType",value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");this._eachListener((function(t){t.type===e&&t.disposer.dispose()}))}},{key:"has",value:function(e,t,i){return-1!==L(this._listeners,(function(n){return!0!==n.once&&n.type===e&&(void 0===t||n.callback===t)&&n.context===i}))}},{key:"_shouldDispatch",value:function(e){if(this._disposed)throw new Error("EventDispatcher is disposed");var t=this._disabled[e];return w(t)?(t<=1?delete this._disabled[e]:--this._disabled[e],!1):this._enabled}},{key:"_eachListener",value:function(e){var t=this;++this._iterating;try{P(this._listeners,e)}finally{--this._iterating,0===this._iterating&&0!==this._killed.length&&(P(this._killed,(function(e){t._removeListener(e)})),this._killed.length=0)}}},{key:"dispatch",value:function(e,t){this._shouldDispatch(e)&&this._eachListener((function(i){i.killed||null!==i.type&&i.type!==e||i.dispatch(e,t)}))}},{key:"_on",value:function(e,t,i,n,r,a){var o=this;if(this._disposed)throw new Error("EventDispatcher is disposed");this._removeExistingListener(e,t,i,n);var s={type:t,callback:i,context:n,shouldClone:r,dispatch:a,killed:!1,once:e,disposer:new N((function(){s.killed=!0,o._removeListener(s)}))};return this._listeners.push(s),s}},{key:"onAll",value:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._on(!1,null,e,t,i,(function(i,n){return e.call(t,n)})).disposer}},{key:"on",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this._on(!1,e,t,i,n,(function(e,n){return t.call(i,n)})).disposer}},{key:"once",value:function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=this._on(!0,e,t,i,n,(function(e,n){r.disposer.dispose(),t.call(i,n)}));return r.disposer}},{key:"off",value:function(e,t,i){this._removeExistingListener(!1,e,t,i)}},{key:"copyFrom",value:function(e){var t=this;if(this._disposed)throw new Error("EventDispatcher is disposed");if(e===this)throw new Error("Cannot copyFrom the same TargetedEventDispatcher");var i=[];return P(e._listeners,(function(e){!e.killed&&e.shouldClone&&(null===e.type?i.push(t.onAll(e.callback,e.context)):e.once?i.push(t.once(e.type,e.callback,e.context)):i.push(t.on(e.type,e.callback,e.context)))})),new H(i)}}]),e}();function Y(e,t){if(!(e>=0&&e<t))throw new Error("Index out of bounds: "+e)}var U=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,h.Z)(this,t),Object.defineProperty(this,"_values",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new W}),this._values=e}return(0,d.Z)(t,[{key:"values",get:function(){return this._values}},{key:"contains",value:function(e){return-1!==this._values.indexOf(e)}},{key:"removeValue",value:function(e){for(var t=0,i=this._values.length;t<i;)this._values[t]===e?(this.removeIndex(t),--i):++t}},{key:"indexOf",value:function(e){return C(this._values,e)}},{key:"length",get:function(){return this._values.length}},{key:"hasIndex",value:function(e){return e>=0&&e<this._values.length}},{key:"getIndex",value:function(e){return this._values[e]}},{key:"_onPush",value:function(e){this.events.isEnabled("push")&&this.events.dispatch("push",{type:"push",target:this,newValue:e})}},{key:"_onInsertIndex",value:function(e,t){this.events.isEnabled("insertIndex")&&this.events.dispatch("insertIndex",{type:"insertIndex",target:this,index:e,newValue:t})}},{key:"_onSetIndex",value:function(e,t,i){this.events.isEnabled("setIndex")&&this.events.dispatch("setIndex",{type:"setIndex",target:this,index:e,oldValue:t,newValue:i})}},{key:"_onRemoveIndex",value:function(e,t){this.events.isEnabled("removeIndex")&&this.events.dispatch("removeIndex",{type:"removeIndex",target:this,index:e,oldValue:t})}},{key:"_onMoveIndex",value:function(e,t,i){this.events.isEnabled("moveIndex")&&this.events.dispatch("moveIndex",{type:"moveIndex",target:this,oldIndex:e,newIndex:t,value:i})}},{key:"_onClear",value:function(e){this.events.isEnabled("clear")&&this.events.dispatch("clear",{type:"clear",target:this,oldValues:e})}},{key:"setIndex",value:function(e,t){Y(e,this._values.length);var i=this._values[e];return i!==t&&(this._values[e]=t,this._onSetIndex(e,i,t)),i}},{key:"insertIndex",value:function(e,t){return Y(e,this._values.length+1),E(this._values,e,t),this._onInsertIndex(e,t),t}},{key:"swap",value:function(e,t){var i=this._values.length;if(Y(e,i),Y(t,i),e!==t){var n=this._values[e],r=this._values[t];this._values[e]=r,this._onSetIndex(e,n,r),this._values[t]=n,this._onSetIndex(t,r,n)}}},{key:"removeIndex",value:function(e){Y(e,this._values.length);var t=this._values[e];return S(this._values,e),this._onRemoveIndex(e,t),t}},{key:"moveValue",value:function(e,t){var i=this.indexOf(e);if(-1!==i)if(S(this._values,i),null==t){var n=this._values.length;this._values.push(e),this._onMoveIndex(i,n,e)}else E(this._values,t,e),this._onMoveIndex(i,t,e);else null==t?(this._values.push(e),this._onPush(e)):(E(this._values,t,e),this._onInsertIndex(t,e));return e}},{key:"push",value:function(e){return this._values.push(e),this._onPush(e),e}},{key:"unshift",value:function(e){return this.insertIndex(0,e),e}},{key:"pushAll",value:function(e){var t=this;P(e,(function(e){t.push(e)}))}},{key:"copyFrom",value:function(e){this.pushAll(e._values)}},{key:"pop",value:function(){return this._values.length-1<0?void 0:this.removeIndex(this._values.length-1)}},{key:"shift",value:function(){return this._values.length?this.removeIndex(0):void 0}},{key:"setAll",value:function(e){var t=this,i=this._values;this._values=[],this._onClear(i),P(e,(function(e){t._values.push(e),t._onPush(e)}))}},{key:"clear",value:function(){this.setAll([])}},{key:e,value:(0,s.Z)().mark((function e(){var t,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._values.length,i=0;case 2:if(!(i<t)){e.next=8;break}return e.next=5,this._values[i];case 5:++i,e.next=2;break;case 8:case"end":return e.stop()}}),e,this)}))},{key:"each",value:function(e){P(this._values,e)}},{key:"eachReverse",value:function(e){A(this._values,e)}}]),t}(Symbol.iterator),q=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"autoDispose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,l.Z)(e),"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,d.Z)(i,[{key:"_onSetIndex",value:function(e,t,n){this.autoDispose&&t.dispose(),(0,a.Z)((0,o.Z)(i.prototype),"_onSetIndex",this).call(this,e,t,n)}},{key:"_onRemoveIndex",value:function(e,t){this.autoDispose&&t.dispose(),(0,a.Z)((0,o.Z)(i.prototype),"_onRemoveIndex",this).call(this,e,t)}},{key:"_onClear",value:function(e){this.autoDispose&&P(e,(function(e){e.dispose()})),(0,a.Z)((0,o.Z)(i.prototype),"_onClear",this).call(this,e)}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this.autoDispose&&P(this._values,(function(e){e.dispose()})))}}]),i}(U),G=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e,n){var r;return(0,h.Z)(this,i),r=t.call(this),Object.defineProperty((0,l.Z)(r),"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(r),"make",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.template=e,r.make=n,r}return(0,d.Z)(i)}(q),X=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,h.Z)(this,i),n=t.call(this),Object.defineProperty((0,l.Z)(n),"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(n),"_container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(n),"_events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._container=e,n._events=n.events.onAll((function(e){if("clear"===e.type)P(e.oldValues,(function(e){n._onRemoved(e)}));else if("push"===e.type)n._onInserted(e.newValue);else if("setIndex"===e.type)n._onRemoved(e.oldValue),n._onInserted(e.newValue,e.index);else if("insertIndex"===e.type)n._onInserted(e.newValue,e.index);else if("removeIndex"===e.type)n._onRemoved(e.oldValue);else{if("moveIndex"!==e.type)throw new Error("Unknown IListEvent type");n._onRemoved(e.value),n._onInserted(e.value,e.newIndex)}})),n}return(0,d.Z)(i,[{key:"_onInserted",value:function(e,t){e._setParent(this._container,!0);var i=this._container._childrenDisplay;void 0===t?i.addChild(e._display):i.addChildAt(e._display,t)}},{key:"_onRemoved",value:function(e){this._container._childrenDisplay.removeChild(e._display),this._container.markDirtyBounds(),this._container.markDirty()}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._events.dispose(),P(this.values,(function(e){e.dispose()})))}}]),i}(U),K=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._value=t}return(0,d.Z)(e,[{key:"value",get:function(){return this._value/100}},{key:"percent",get:function(){return this._value}},{key:"toString",value:function(){return this._value+"%"}},{key:"interpolate",value:function(e,t){return e+this.value*(t-e)}}],[{key:"normalize",value:function(t,i,n){return t instanceof e?t:new e(i===n?0:100*Math.min(Math.max(1/(n-i)*(t-i),0),1))}}]),e}();function $(e){return new K(e)}$(0);var Q=$(100),J=$(50);function ee(e){return Object.keys(e)}function te(e){return Object.assign({},e)}function ie(e,t){ee(e).forEach((function(i){t(i,e[i])}))}function ne(e,t){for(var i in e)if(re(e,i)&&!t(i,e[i]))break}function re(e,t){return{}.hasOwnProperty.call(e,t)}function ae(e){e.parentNode&&e.parentNode.removeChild(e)}function oe(e,t,i,n){return e.addEventListener(t,i,n||!1),new N((function(){e.removeEventListener(t,i,n||!1)}))}function se(e){return oe(window,"resize",(function(t){e()}))}function le(e){switch(e){case"touchevents":return window.hasOwnProperty("TouchEvent");case"pointerevents":return window.hasOwnProperty("PointerEvent");case"mouseevents":return window.hasOwnProperty("MouseEvent");case"wheelevents":return window.hasOwnProperty("WheelEvent");case"keyboardevents":return window.hasOwnProperty("KeyboardEvent")}return!1}function ue(e){return e.pointerId||0}function ce(){if(document.activeElement&&document.activeElement!=document.body)if(document.activeElement.blur)document.activeElement.blur();else{var e=document.createElement("button");e.style.position="fixed",e.style.top="0px",e.style.left="-10000px",document.body.appendChild(e),e.focus(),e.blur(),document.body.removeChild(e)}}function he(e){e&&e.focus()}function de(e){if(le("pointerevents"))return e;if(le("touchevents"))switch(e){case"pointerover":case"pointerdown":return"touchstart";case"pointerout":case"pointerup":return"touchend";case"pointermove":return"touchmove";case"click":return"click";case"dblclick":return"dblclick"}else if(le("mouseevents"))switch(e){case"pointerover":return"mouseover";case"pointerout":return"mouseout";case"pointerdown":return"mousedown";case"pointermove":return"mousemove";case"pointerup":return"mouseup";case"click":return"click";case"dblclick":return"dblclick"}return e}function fe(e){if("undefined"!=typeof Touch&&e instanceof Touch)return!0;if("undefined"!=typeof PointerEvent&&e instanceof PointerEvent&&null!=e.pointerType)switch(e.pointerType){case"touch":case"pen":case 2:return!0;case"mouse":case 4:return!1;default:return!(e instanceof MouseEvent)}else if(null!=e.type&&e.type.match(/^mouse/))return!1;return!0}function pe(e,t,i){e.style[t]=i}function ve(e,t){return e.style[t]}function ye(e){if(e.composedPath){var t=e.composedPath();return 0===t.length?null:t[0]}return e.target}function ge(e,t){return e.target&&function(e,t){for(var i=t;;){if(e===i)return!0;if(null===i.parentNode){if(null==i.host)return!1;i=i.host}else i=i.parentNode}}(t.root.dom,e.target)}function me(e,t){e.style.pointerEvents=t?"auto":"none"}function be(){return/apple/i.test(navigator.vendor)&&"ontouchend"in document?1:void 0}function _e(e,t){return w(e)?e:null!=e&&w(e.value)&&w(t)?t*e.value:0}function we(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}function ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return"string"!=typeof e&&(e=e.toString()),t>e.length?Array(t-e.length+1).join(i)+e:e}function xe(e){return function(e){return e.replace(/^[\s]*/,"")}(function(e){return e.replace(/[\s]*$/,"")}(e))}function Me(e){return e.replace(/\/(date|number|duration)$/i,"")}function Ce(e){return e?e.replace(/<[^>]*>/g,""):e}function Ze(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Pe(e){var t=new Date(e.getFullYear(),0,0),i=e.getTime()-t.getTime()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(i/864e5)}function Ae(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-i);var n=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-n.getTime())/864e5+1)/7)}function Te(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),i=t.getUTCDay()||7;return t.setUTCDate(t.getUTCDate()+4-i),new Date(Date.UTC(t.getUTCFullYear(),0,1)).getFullYear()}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Ae(new Date(e.getFullYear(),e.getMonth(),1),t),n=Ae(e,t);return 1==n&&(n=53),n-i+1}function Oe(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=new Date(t,0,4,0,0,0,0);return n&&r.setUTCFullYear(t),7*e+i-((r.getDay()||7)+3)}function De(e,t){return e>12?e-=12:0===e&&(e=12),null!=t?e+(t-1):e}function Fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(arguments.length>3&&void 0!==arguments[3]&&arguments[3])return t?"Coordinated Universal Time":"UTC";var n=e.toLocaleString("UTC"),r=e.toLocaleString("UTC",{timeZoneName:t?"long":"short"}).substr(n.length);return!1===i&&(r=r.replace(/ (standard|daylight|summer|winter) /i," ")),r}function Ee(e){var t=new Date(Date.UTC(2012,0,1,0,0,0,0)),i=new Date(t.toLocaleString("en-US",{timeZone:"UTC"}));return(new Date(t.toLocaleString("en-US",{timeZone:e})).getTime()-i.getTime())/6e4*-1}function Se(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Le(e){var t,i,n,r=e.h,a=e.s,o=e.l;if(0==a)t=i=n=o;else{var s=function(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},l=o<.5?o*(1+a):o+a-o*a,u=2*o-l;t=s(u,l,r+1/3),i=s(u,l,r),n=s(u,l,r-1/3)}return{r:Math.round(255*t),g:Math.round(255*i),b:Math.round(255*n)}}function Be(e){var t=e.r/255,i=e.g/255,n=e.b/255,r=Math.max(t,i,n),a=Math.min(t,i,n),o=0,s=0,l=(r+a)/2;if(r===a)o=s=0;else{var u=r-a;switch(s=l>.5?u/(2-r-a):u/(r+a),r){case t:o=(i-n)/u+(i<n?6:0);break;case i:o=(n-t)/u+2;break;case n:o=(t-i)/u+4}o/=6}return{h:o,s:s,l:l}}function je(e,t){var i=t>0?255-e:e;return Math.round(i*t)}function Re(e){return(299*e.r+587*e.g+114*e.b)/1e3>=128}function Ne(e,t){return e||(e=[]),[].concat((0,r.Z)(e),(0,r.Z)(t)).filter((function(e,t,i){return i.indexOf(e)===t}))}function ze(e,t){return!!t&&e.left==t.left&&e.right==t.right&&e.top==t.top&&e.bottom==t.bottom}function He(e){return"#"===e[0]&&(e=e.substr(1)),3==e.length&&(e=e[0].repeat(2)+e[1].repeat(2)+e[2].repeat(2)),parseInt(e,16)}function Ve(e){return We.fromAny(e)}var We=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_hex",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._hex=0|t}return(0,d.Z)(e,[{key:"hex",get:function(){return this._hex}},{key:"r",get:function(){return this._hex>>>16}},{key:"g",get:function(){return this._hex>>8&255}},{key:"b",get:function(){return 255&this._hex}},{key:"toCSS",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba("+this.r+", "+this.g+", "+this.b+", "+e+")"}},{key:"toCSSHex",value:function(){return"#"+ke(this.r.toString(16),2)+ke(this.g.toString(16),2)+ke(this.b.toString(16),2)}},{key:"toHSL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Be({r:this.r,g:this.g,b:this.b,a:e})}},{key:"toString",value:function(){return this.toCSSHex()}}],[{key:"fromHSL",value:function(e,t,i){var n=Le({h:e,s:t,l:i});return this.fromRGB(n.r,n.g,n.b)}},{key:"fromHex",value:function(t){return new e(t)}},{key:"fromRGB",value:function(t,i,n){return new e((0|n)+(i<<8)+(t<<16))}},{key:"fromString",value:function(t){return new e(He(t))}},{key:"fromCSS",value:function(t){return new e(function(e){var t=(e=e.replace(/[ ]/g,"")).match(/^rgb\(([0-9]*),([0-9]*),([0-9]*)\)/i);if(t)t.push("1");else if(!(t=e.match(/^rgba\(([0-9]*),([0-9]*),([0-9]*),([.0-9]*)\)/i)))return 0;for(var i="",n=1;n<=3;n++){var r=parseInt(t[n]).toString(16);1==r.length&&(r="0"+r),i+=r}return He(i)}(t))}},{key:"fromAny",value:function(t){if(_(t)){if("#"==t[0])return e.fromString(t);if("rgb"==t.substr(0,3))return e.fromCSS(t)}else{if(w(t))return e.fromHex(t);if(t instanceof e)return e.fromHex(t.hex)}throw new Error("Unknown color syntax: "+t)}},{key:"alternative",value:function(e,t,i){var n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{r:255,g:255,b:255},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{r:255,g:255,b:255},n=t,r=i;return Re(i)&&(n=i,r=t),Re(e)?r:n}({r:e.r,g:e.g,b:e.b},t?{r:t.r,g:t.g,b:t.b}:void 0,i?{r:i.r,g:i.g,b:i.b}:void 0);return this.fromRGB(n.r,n.g,n.b)}},{key:"interpolate",value:function(t,i,n){if("hsl"==(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb")){var r=i.toHSL(),a=n.toHSL();return e.fromHSL(Ue(t,r.h,a.h),Ue(t,r.s,a.s),Ue(t,r.l,a.l))}return e.fromRGB(Ue(t,i.r,n.r),Ue(t,i.g,n.g),Ue(t,i.b,n.b))}},{key:"lighten",value:function(t,i){var n=function(e,t){return e?{r:Math.max(0,Math.min(255,e.r+je(e.r,t))),g:Math.max(0,Math.min(255,e.g+je(e.g,t))),b:Math.max(0,Math.min(255,e.b+je(e.b,t))),a:e.a}:e}({r:t.r,g:t.g,b:t.b},i);return e.fromRGB(n.r,n.g,n.b)}},{key:"brighten",value:function(t,i){var n=function(e,t){if(e){var i=je(Math.min(Math.max(e.r,e.g,e.b),230),t);return{r:Math.max(0,Math.min(255,Math.round(e.r+i))),g:Math.max(0,Math.min(255,Math.round(e.g+i))),b:Math.max(0,Math.min(255,Math.round(e.b+i))),a:e.a}}return e}({r:t.r,g:t.g,b:t.b},i);return e.fromRGB(n.r,n.g,n.b)}},{key:"saturate",value:function(t,i){var n=function(e,t){if(void 0===e||1==t)return e;var i=Be(e);return i.s=t,Le(i)}({r:t.r,g:t.g,b:t.b},i);return e.fromRGB(n.r,n.g,n.b)}}]),e}();function Ye(e){return(0,f.a)(this,void 0,void 0,(0,s.Z)().mark((function t(){var i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=5;break}return i=[],ie(e,(function(e,t){i.push(t.waitForStop())})),t.next=5,Promise.all(i);case 5:case"end":return t.stop()}}),t)})))}function Ue(e,t,i){return t+e*(i-t)}function qe(e,t,i){return e>=1?i:t}function Ge(e,t,i){return new K(Ue(e,t.percent,i.percent))}function Xe(e,t,i){return We.interpolate(e,t,i)}var Ke=Math.PI,$e=Ke/180,Qe=180/Ke;function Je(e,t,i){if(!w(t)||t<=0){var n=Math.round(e);return i&&n-e==.5&&n--,n}var r=Math.pow(10,t);return Math.round(e*r)/r}function et(e,t){if(!w(t)||t<=0)return Math.ceil(e);var i=Math.pow(10,t);return Math.ceil(e*i)/i}function tt(e,t,i){return Math.min(Math.max(e,t),i)}function it(e){return Math.sin($e*e)}function nt(e){return Math.cos($e*e)}function rt(e){return(e%=360)<0&&(e+=360),e}function at(e,t,i,n,r){var a=Number.MAX_VALUE,o=Number.MAX_VALUE,s=-Number.MAX_VALUE,l=-Number.MAX_VALUE,u=[];u.push(ot(r,i)),u.push(ot(r,n));for(var c=Math.min(90*Math.floor(i/90),90*Math.floor(n/90)),h=Math.max(90*Math.ceil(i/90),90*Math.ceil(n/90)),d=c;d<=h;d+=90)d>=i&&d<=n&&u.push(ot(r,d));for(var f=0;f<u.length;f++){var p=u[f];p.x<a&&(a=p.x),p.y<o&&(o=p.y),p.x>s&&(s=p.x),p.y>l&&(l=p.y)}return{left:e+a,top:t+o,right:e+s,bottom:t+l}}function ot(e,t){return{x:e*nt(t),y:e*it(t)}}function st(e){var t=e.length;if(t>0){var i=e[0],n=i.left,r=i.top,a=i.right,o=i.bottom;if(t>1)for(var s=1;s<t;s++)i=e[s],n=Math.min(i.left,n),a=Math.max(i.right,a),r=Math.min(i.top,r),o=Math.max(i.bottom,o);return{left:n,right:a,top:r,bottom:o}}return{left:0,right:0,top:0,bottom:0}}function lt(e){return e}function ut(e){return e*e*e}function ct(e){return function(t){return 1-e(1-t)}}var ht=function(){function e(t,i){var n=this;(0,h.Z)(this,e),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_userSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=t,this._settings=i,ie(i,(function(e){n._userSettings[e]=!0}))}return(0,d.Z)(e,[{key:"get",value:function(e,t){var i=this._settings[e];return void 0!==i?i:t}},{key:"setRaw",value:function(e,t){this._settings[e]=t}},{key:"set",value:function(e,t){this._userSettings[e]=!0,this.setRaw(e,t)}},{key:"remove",value:function(e){delete this._userSettings[e],delete this._settings[e]}},{key:"setAll",value:function(e){var t=this;ee(e).forEach((function(i){t.set(i,e[i])}))}},{key:"_eachSetting",value:function(e){ie(this._settings,e)}},{key:"apply",value:function(){var e=this,t={stateAnimationEasing:!0,stateAnimationDuration:!0},i=this._entity.states.lookup("default");this._eachSetting((function(n,r){t[n]||(t[n]=!0,e!==i&&(n in i._settings||(i._settings[n]=e._entity.get(n))),e._entity.set(n,r))}))}},{key:"applyAnimate",value:function(e){var t=this;null==e&&(e=this._settings.stateAnimationDuration),null==e&&(e=this.get("stateAnimationDuration",this._entity.get("stateAnimationDuration",0)));var i=this._settings.stateAnimationEasing;null==i&&(i=this.get("stateAnimationEasing",this._entity.get("stateAnimationEasing",ut)));var n=this._entity.states.lookup("default"),r={stateAnimationEasing:!0,stateAnimationDuration:!0},a={};return this._eachSetting((function(o,s){if(!r[o]){r[o]=!0,t!=n&&(o in n._settings||(n._settings[o]=t._entity.get(o)));var l=t._entity.animate({key:o,to:s,duration:e,easing:i});l&&(a[o]=l)}})),a}}]),e}(),dt=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._entity=t}return(0,d.Z)(e,[{key:"lookup",value:function(e){return this._states[e]}},{key:"create",value:function(e,t){var i=this._states[e];if(i)return i.setAll(t),i;var n=new ht(this._entity,t);return this._states[e]=n,n}},{key:"remove",value:function(e){delete this._states[e]}},{key:"apply",value:function(e){var t=this._states[e];t&&t.apply(),this._entity._applyState(e)}},{key:"applyAnimate",value:function(e,t){var i,n=this._states[e];return n&&(i=n.applyAnimate(t)),this._entity._applyStateAnimated(e,t),i}}]),e}(),ft=new((0,d.Z)((function e(){(0,h.Z)(this,e),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.3.12"}),Object.defineProperty(this,"licenses",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"entitiesById",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"rootElements",{enumerable:!0,configurable:!0,writable:!0,value:[]})})));function pt(e){ft.licenses.push(e)}function vt(e,t){return e===t?0:e<t?-1:1}function yt(e,t,i){for(var n=e.length,r=t.length,a=Math.min(n,r),o=0;o<a;++o){var s=i(e[o],t[o]);if(0!==s)return s}return vt(n,r)}function gt(e,t){return e===t?0:e<t?-1:1}var mt=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_entity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disabled",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._entity=t}return(0,d.Z)(e,[{key:"add",value:function(e,t){var i=this,n=this._callbacks[e];return void 0===n&&(n=this._callbacks[e]=[]),n.push(t),this._entity._markDirtyKey(e),new N((function(){O(n,t)&&i._entity._markDirtyKey(e)}))}},{key:"remove",value:function(e){var t=this._callbacks[e];void 0!==t&&(delete this._callbacks[e],0!==t.length&&this._entity._markDirtyKey(e))}},{key:"enable",value:function(e){this._disabled[e]&&(delete this._disabled[e],this._entity._markDirtyKey(e))}},{key:"disable",value:function(e){this._disabled[e]||(this._disabled[e]=!0,this._entity._markDirtyKey(e))}},{key:"fold",value:function(e,t){if(!this._disabled[e]){var i=this._callbacks[e];if(void 0!==i)for(var n=0,r=i.length;n<r;++n)t=i[n](t,this._entity,e)}return t}}]),e}(),bt=function(){function e(t,i,n,r,a,o,s){(0,h.Z)(this,e),Object.defineProperty(this,"_animation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_from",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_to",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_duration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_easing",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_loops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interpolate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_oldTime",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_time",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_stopped",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_playing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new W}),this._animation=t,this._from=i,this._to=n,this._duration=r,this._easing=a,this._loops=o,this._interpolate=function(e,t){return"number"==typeof e&&"number"==typeof t?Ue:e instanceof K&&t instanceof K?Ge:e instanceof We&&t instanceof We?Xe:qe}(i,n),this._oldTime=s}return(0,d.Z)(e,[{key:"to",get:function(){return this._to}},{key:"from",get:function(){return this._from}},{key:"playing",get:function(){return this._playing}},{key:"stopped",get:function(){return this._stopped}},{key:"stop",value:function(){this._stopped||(this._stopped=!0,this._playing=!1,this.events.isEnabled("stopped")&&this.events.dispatch("stopped",{type:"stopped",target:this}))}},{key:"pause",value:function(){this._playing=!1,this._oldTime=null}},{key:"play",value:function(){this._stopped||this._playing||(this._playing=!0,this._animation._startAnimation())}},{key:"percentage",get:function(){return this._time/this._duration}},{key:"waitForStop",value:function(){var e=this;return new Promise((function(t,i){if(e._stopped)t();else var n=e.events.on("stopped",(function(){n.dispose(),t()}))}))}},{key:"_checkEnded",value:function(){return!(this._loops>1)||(--this._loops,!1)}},{key:"_run",value:function(e){null!==this._oldTime&&(this._time+=e-this._oldTime,this._time>this._duration&&(this._time=this._duration)),this._oldTime=e}},{key:"_reset",value:function(e){this._oldTime=e,this._time=0}},{key:"_value",value:function(e){return this._interpolate(this._easing(e),this._from,this._to)}}]),e}(),_t=0,wt=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:++_t}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_prevPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_animatingPrivateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_userProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._settings=t}return(0,d.Z)(e,[{key:"_checkDirty",value:function(){var e=this;ee(this._settings).forEach((function(t){e._userProperties[t]=!0,e._markDirtyKey(t)}))}},{key:"resetUserSettings",value:function(){this._userProperties={}}},{key:"_runAnimation",value:function(e){var t=this;if(this.isDisposed())return!1;var i=!1;return ie(this._animatingSettings,(function(n,r){if(r._stopped)t._stopAnimation(n);else if(r._playing){r._run(e);var a=r.percentage;a>=1?r._checkEnded()?t.set(n,r._value(1)):(i=!0,r._reset(e),t._set(n,r._value(1))):(i=!0,t._set(n,r._value(a)))}})),ie(this._animatingPrivateSettings,(function(n,r){if(r._stopped)t._stopAnimationPrivate(n);else if(r._playing){r._run(e);var a=r.percentage;a>=1?r._checkEnded()?t.setPrivate(n,r._value(1)):(i=!0,r._reset(e),t._setPrivate(n,r._value(1))):(i=!0,t._setPrivate(n,r._value(a)))}})),i}},{key:"_markDirtyKey",value:function(e){this.markDirty()}},{key:"_markDirtyPrivateKey",value:function(e){this.markDirty()}},{key:"on",value:function(e,t){var i=this,n=this._settingEvents[e];return void 0===n&&(n=this._settingEvents[e]=[]),n.push(t),new N((function(){O(n,t),0===n.length&&delete i._settingEvents[e]}))}},{key:"onPrivate",value:function(e,t){var i=this,n=this._privateSettingEvents[e];return void 0===n&&(n=this._privateSettingEvents[e]=[]),n.push(t),new N((function(){O(n,t),0===n.length&&delete i._privateSettingEvents[e]}))}},{key:"getRaw",value:function(e,t){var i=this._settings[e];return void 0!==i?i:t}},{key:"get",value:function(e,t){return this.getRaw(e,t)}},{key:"_sendKeyEvent",value:function(e,t){var i=this,n=this._settingEvents[e];void 0!==n&&P(n,(function(n){n(t,i,e)}))}},{key:"_sendPrivateKeyEvent",value:function(e,t){var i=this,n=this._privateSettingEvents[e];void 0!==n&&P(n,(function(n){n(t,i,e)}))}},{key:"_setRaw",value:function(e,t,i){this._prevSettings[e]=t,this._sendKeyEvent(e,i)}},{key:"setRaw",value:function(e,t){var i=this._settings[e];this._settings[e]=t,i!==t&&this._setRaw(e,i,t)}},{key:"_set",value:function(e,t){var i=this._settings[e];this._settings[e]=t,i!==t&&(this._setRaw(e,i,t),this._markDirtyKey(e))}},{key:"_stopAnimation",value:function(e){var t=this._animatingSettings[e];t&&(delete this._animatingSettings[e],t.stop())}},{key:"set",value:function(e,t){return this._set(e,t),this._stopAnimation(e),t}},{key:"remove",value:function(e){e in this._settings&&(this._prevSettings[e]=this._settings[e],delete this._settings[e],this._sendKeyEvent(e,void 0),this._markDirtyKey(e)),this._stopAnimation(e)}},{key:"removeAll",value:function(){var e=this;P(ee(this._settings),(function(t){e.remove(t)}))}},{key:"getPrivate",value:function(e,t){var i=this._privateSettings[e];return void 0!==i?i:t}},{key:"_setPrivateRaw",value:function(e,t,i){this._prevPrivateSettings[e]=t,this._sendPrivateKeyEvent(e,i)}},{key:"setPrivateRaw",value:function(e,t){var i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&this._setPrivateRaw(e,i,t)}},{key:"_setPrivate",value:function(e,t){var i=this._privateSettings[e];this._privateSettings[e]=t,i!==t&&(this._setPrivateRaw(e,i,t),this._markDirtyPrivateKey(e))}},{key:"_stopAnimationPrivate",value:function(e){var t=this._animatingPrivateSettings[e];t&&(t.stop(),delete this._animatingPrivateSettings[e])}},{key:"setPrivate",value:function(e,t){return this._setPrivate(e,t),this._stopAnimationPrivate(e),t}},{key:"removePrivate",value:function(e){e in this._privateSettings&&(this._prevPrivateSettings[e]=this._privateSettings[e],delete this._privateSettings[e],this._markDirtyPrivateKey(e)),this._stopAnimationPrivate(e)}},{key:"setAll",value:function(e){var t=this;ie(e,(function(e,i){t.set(e,i)}))}},{key:"animate",value:function(e){var t=e.key,i=e.to,n=e.duration||0,r=e.loops||1,a=void 0===e.from?this.get(t):e.from,o=void 0===e.easing?lt:e.easing;if(0===n)this.set(t,i);else{if(void 0!==a&&a!==i){this.set(t,a);var s=this._animatingSettings[t]=new bt(this,a,i,n,o,r,this._animationTime());return this._startAnimation(),s}this.set(t,i)}var l=new bt(this,a,i,n,o,r,null);return l.stop(),l}},{key:"animatePrivate",value:function(e){var t=e.key,i=e.to,n=e.duration||0,r=e.loops||1,a=void 0===e.from?this.getPrivate(t):e.from,o=void 0===e.easing?lt:e.easing;if(0===n)this.setPrivate(t,i);else{if(void 0!==a&&a!==i){this.setPrivate(t,a);var s=this._animatingPrivateSettings[t]=new bt(this,a,i,n,o,r,this._animationTime());return this._startAnimation(),s}this.setPrivate(t,i)}var l=new bt(this,a,i,n,o,r,null);return l.stop(),l}},{key:"_dispose",value:function(){}},{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._dispose())}}]),e}(),kt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e,r,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if((0,h.Z)(this,i),o=t.call(this,r),Object.defineProperty((0,l.Z)(o),"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(o),"_user_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(o),"states",{enumerable:!0,configurable:!0,writable:!0,value:new dt((0,l.Z)(o))}),Object.defineProperty((0,l.Z)(o),"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new mt((0,l.Z)(o))}),Object.defineProperty((0,l.Z)(o),"events",{enumerable:!0,configurable:!0,writable:!0,value:o._createEvents()}),Object.defineProperty((0,l.Z)(o),"_userPrivateProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(o),"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(o),"_dirtyPrivate",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(o),"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(o),"_templates",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(o),"_internalTemplates",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(o),"_defaultThemes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(o),"_templateDisposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(o),"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(o),"_runSetup",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,l.Z)(o),"_disposerProperties",{enumerable:!0,configurable:!0,writable:!0,value:{}}),!a)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");return o._root=e,o._internalTemplates=s,r.id&&o._registerId(r.id),(0,n.Z)(o)}return(0,d.Z)(i,[{key:"_afterNew",value:function(){var e=this;this._checkDirty();var t=!1,i=this._template;i&&(t=!0,i._setObjectTemplate(this)),P(this._internalTemplates,(function(i){t=!0,i._setObjectTemplate(e)})),t&&this._applyTemplates(!1),this.states.create("default",{}),this._setDefaults()}},{key:"_afterNewApplyThemes",value:function(){var e=this;this._checkDirty();var t=this._template;t&&t._setObjectTemplate(this),P(this._internalTemplates,(function(t){t._setObjectTemplate(e)})),this.states.create("default",{}),this._setDefaults(),this._applyThemes()}},{key:"_createEvents",value:function(){return new W}},{key:"classNames",get:function(){return this.constructor.classNames}},{key:"className",get:function(){return this.constructor.className}},{key:"_setDefaults",value:function(){}},{key:"_setDefault",value:function(e,t){e in this._settings||(0,a.Z)((0,o.Z)(i.prototype),"set",this).call(this,e,t)}},{key:"_setRawDefault",value:function(e,t){e in this._settings||(0,a.Z)((0,o.Z)(i.prototype),"setRaw",this).call(this,e,t)}},{key:"_clearDirty",value:function(){var e=this;ee(this._dirty).forEach((function(t){e._dirty[t]=!1})),ee(this._dirtyPrivate).forEach((function(t){e._dirtyPrivate[t]=!1}))}},{key:"isDirty",value:function(e){return!!this._dirty[e]}},{key:"isPrivateDirty",value:function(e){return!!this._dirtyPrivate[e]}},{key:"_markDirtyKey",value:function(e){this._dirty[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"_markDirtyKey",this).call(this,e)}},{key:"_markDirtyPrivateKey",value:function(e){this._dirtyPrivate[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"_markDirtyKey",this).call(this,e)}},{key:"isType",value:function(e){return-1!==this.classNames.indexOf(e)}},{key:"_pushPropertyDisposer",value:function(e,t){var i=this._disposerProperties[e];return void 0===i&&(i=this._disposerProperties[e]=[]),i.push(t),t}},{key:"_disposeProperty",value:function(e){var t=this._disposerProperties[e];void 0!==t&&(P(t,(function(e){e.dispose()})),delete this._disposerProperties[e])}},{key:"template",get:function(){return this._template},set:function(e){var t=this._template;t!==e&&(this._template=e,t&&t._removeObjectTemplate(this),e&&e._setObjectTemplate(this),this._applyTemplates())}},{key:"markDirty",value:function(){this._root._addDirtyEntity(this)}},{key:"_startAnimation",value:function(){this._root._addAnimation(this)}},{key:"_animationTime",value:function(){return this._root.animationTime}},{key:"_applyState",value:function(e){}},{key:"_applyStateAnimated",value:function(e,t){}},{key:"get",value:function(e,t){var i=this.adapters.fold(e,this._settings[e]);return void 0!==i?i:t}},{key:"isUserSetting",value:function(e){return this._userProperties[e]||!1}},{key:"set",value:function(e,t){return this._userProperties[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"set",this).call(this,e,t)}},{key:"setRaw",value:function(e,t){this._userProperties[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"setRaw",this).call(this,e,t)}},{key:"_setSoft",value:function(e,t){return this._userProperties[e]?t:(0,a.Z)((0,o.Z)(i.prototype),"set",this).call(this,e,t)}},{key:"remove",value:function(e){delete this._userProperties[e],this._removeTemplateProperty(e)}},{key:"setPrivate",value:function(e,t){return this._userPrivateProperties[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"setPrivate",this).call(this,e,t)}},{key:"setPrivateRaw",value:function(e,t){this._userPrivateProperties[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"setPrivateRaw",this).call(this,e,t)}},{key:"removePrivate",value:function(e){delete this._userPrivateProperties[e],this._removeTemplatePrivateProperty(e)}},{key:"_setTemplateProperty",value:function(e,t,n){this._userProperties[t]||e===this._findTemplateByKey(t)&&(0,a.Z)((0,o.Z)(i.prototype),"set",this).call(this,t,n)}},{key:"_setTemplatePrivateProperty",value:function(e,t,n){this._userPrivateProperties[t]||e===this._findTemplateByPrivateKey(t)&&(0,a.Z)((0,o.Z)(i.prototype),"setPrivate",this).call(this,t,n)}},{key:"_removeTemplateProperty",value:function(e){if(!this._userProperties[e]){var t=this._findTemplateByKey(e);t?(0,a.Z)((0,o.Z)(i.prototype),"set",this).call(this,e,t._settings[e]):(0,a.Z)((0,o.Z)(i.prototype),"remove",this).call(this,e)}}},{key:"_removeTemplatePrivateProperty",value:function(e){if(!this._userPrivateProperties[e]){var t=this._findTemplateByPrivateKey(e);t?(0,a.Z)((0,o.Z)(i.prototype),"setPrivate",this).call(this,e,t._privateSettings[e]):(0,a.Z)((0,o.Z)(i.prototype),"removePrivate",this).call(this,e)}}},{key:"_walkParents",value:function(e){e(this._root._rootContainer),e(this)}},{key:"_applyStateByKey",value:function(e){var t=this.states.create(e,{}),i={};this._eachTemplate((function(n){var r=n.states.lookup(e);r&&r._apply(t,i)})),ie(t._settings,(function(e){i[e]||t._userSettings[e]||t.remove(e)}))}},{key:"_applyTemplate",value:function(e,t){var n=this;this._templateDisposers.push(e._apply(this,t)),ie(e._settings,(function(e,r){t.settings[e]||n._userProperties[e]||(t.settings[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"set",n).call(n,e,r))})),ie(e._privateSettings,(function(e,r){t.privateSettings[e]||n._userPrivateProperties[e]||(t.privateSettings[e]=!0,(0,a.Z)((0,o.Z)(i.prototype),"setPrivate",n).call(n,e,r))})),this._runSetup&&e.setup&&(this._runSetup=!1,e.setup(this))}},{key:"_findStaticTemplate",value:function(e){if(this._template&&e(this._template))return this._template}},{key:"_eachTemplate",value:function(e){this._findStaticTemplate((function(t){return e(t),!1})),A(this._internalTemplates,e),P(this._templates,e)}},{key:"_applyTemplates",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&this._disposeTemplates();var n={settings:{},privateSettings:{},states:{}};this._eachTemplate((function(t){e._applyTemplate(t,n)})),t&&(ie(this._settings,(function(t){e._userProperties[t]||n.settings[t]||(0,a.Z)((0,o.Z)(i.prototype),"remove",e).call(e,t)})),ie(this._privateSettings,(function(t){e._userPrivateProperties[t]||n.privateSettings[t]||(0,a.Z)((0,o.Z)(i.prototype),"removePrivate",e).call(e,t)})))}},{key:"_findTemplate",value:function(e){var t=this._findStaticTemplate(e);if(void 0===t){var i=function(e,t){var i=function(e,t){for(var i=e.length;i>0;)if(t(e[--i],i))return i;return-1}(e,t);if(-1!==i)return e[i]}(this._internalTemplates,e);return void 0===i?B(this._templates,e):i}return t}},{key:"_findTemplateByKey",value:function(e){return this._findTemplate((function(t){return e in t._settings}))}},{key:"_findTemplateByPrivateKey",value:function(e){return this._findTemplate((function(t){return e in t._privateSettings}))}},{key:"_disposeTemplates",value:function(){P(this._templateDisposers,(function(e){e.dispose()})),this._templateDisposers.length=0}},{key:"_removeTemplates",value:function(){var e=this;P(this._templates,(function(t){t._removeObjectTemplate(e)})),this._templates.length=0}},{key:"_applyThemes",value:function(){var e=this,t=!1,i=[],n=[],r=new Set,a=this.get("themeTagsSelf");return a&&P(a,(function(e){r.add(e)})),this._walkParents((function(a){a===e._root._rootContainer&&(t=!0),a._defaultThemes.length>0&&i.push(a._defaultThemes);var o=a.get("themes");o&&n.push(o);var s=a.get("themeTags");s&&P(s,(function(e){r.add(e)}))})),n=i.concat(n),this._removeTemplates(),t&&A(this.classNames,(function(t){var i=[];P(n,(function(e){P(e,(function(e){var n=e._lookupRules(t);n&&A(n,(function(e){if(e.tags.every((function(e){return r.has(e)}))){var t=function(e,t){for(var i=0,n=e.length,r=!1;i<n;){var a=i+n>>1,o=t(e[a]);o<0?i=a+1:0===o?(r=!0,n=a):n=a}return{found:r,index:i}}(i,(function(t){var i=vt(e.tags.length,t.tags.length);return 0===i?yt(e.tags,t.tags,vt):i}));i.splice(t.index,0,e)}}))}))})),P(i,(function(t){e._templates.push(t.template),t.template._setObjectTemplate(e)}))})),this._applyTemplates(),t&&(this._runSetup=!1),t}},{key:"_changed",value:function(){}},{key:"_beforeChanged",value:function(){if(this.isDirty("id")){var e=this.get("id");e&&this._registerId(e);var t=this._prevSettings.id;t&&delete ft.entitiesById[t]}}},{key:"_registerId",value:function(e){if(ft.entitiesById[e]&&ft.entitiesById[e]!==this)throw new Error('An entity with id "'+e+'" already exists.');ft.entitiesById[e]=this}},{key:"_afterChanged",value:function(){}},{key:"addDisposer",value:function(e){return this._disposers.push(e),e}},{key:"_dispose",value:function(){var e=this;(0,a.Z)((0,o.Z)(i.prototype),"_dispose",this).call(this);var t=this._template;t&&t._removeObjectTemplate(this),P(this._internalTemplates,(function(t){t._removeObjectTemplate(e)})),this._removeTemplates(),this._disposeTemplates(),this.events.dispose(),this._disposers.forEach((function(e){e.dispose()})),ie(this._disposerProperties,(function(e,t){P(t,(function(e){e.dispose()}))}));var n=this.get("id");n&&delete ft.entitiesById[n]}},{key:"setTimeout",value:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){var i=this,n=setTimeout((function(){i.removeDispose(r),e()}),t),r=new N((function(){clearTimeout(n)}));return this._disposers.push(r),r}))},{key:"removeDispose",value:function(e){if(!this.isDisposed()){var t=C(this._disposers,e);t>-1&&this._disposers.splice(t,1)}e.dispose()}},{key:"hasTag",value:function(e){return-1!==C(this.get("themeTags",[]),e)}},{key:"addTag",value:function(e){if(!this.hasTag(e)){var t=this.get("themeTags",[]);t.push(e),this.set("themeTags",t)}}},{key:"removeTag",value:function(e){if(this.hasTag(e)){var t=this.get("themeTags",[]);I(t,e),this.set("themeTags",t)}}},{key:"_t",value:function(e,t){for(var i,n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return(i=this._root.language).translate.apply(i,[e,t].concat(r))}},{key:"root",get:function(){return this._root}}],[{key:"new",value:function(e,t,i){var n=new this(e,t,!0);return n._template=i,n._afterNew(),n}},{key:"_new",value:function(e,t){var i=new this(e,t,!0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[]);return i._afterNew(),i}}]),i}(wt);Object.defineProperty(kt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Entity"}),Object.defineProperty(kt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:["Entity"]});var xt=function(){function e(t,i,n){(0,h.Z)(this,e),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._name=t,this._template=i,this._settings=n}return(0,d.Z)(e,[{key:"get",value:function(e,t){var i=this._settings[e];return void 0!==i?i:t}},{key:"set",value:function(e,t){this._settings[e]=t,this._template._stateChanged(this._name)}},{key:"remove",value:function(e){delete this._settings[e],this._template._stateChanged(this._name)}},{key:"setAll",value:function(e){var t=this;ee(e).forEach((function(i){t._settings[i]=e[i]})),this._template._stateChanged(this._name)}},{key:"_apply",value:function(e,t){ie(this._settings,(function(i,n){t[i]||e._userSettings[i]||(t[i]=!0,e.setRaw(i,n))}))}}]),e}(),Mt=function(){function e(t){(0,h.Z)(this,e),Object.defineProperty(this,"_template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_states",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._template=t}return(0,d.Z)(e,[{key:"lookup",value:function(e){return this._states[e]}},{key:"create",value:function(e,t){var i=this._states[e];if(i)return i.setAll(t),i;var n=new xt(e,this._template,t);return this._states[e]=n,this._template._stateChanged(e),n}},{key:"remove",value:function(e){delete this._states[e],this._template._stateChanged(e)}},{key:"_apply",value:function(e,t){ie(this._states,(function(i,n){var r=t.states[i];null==r&&(r=t.states[i]={});var a=e.states.create(i,{});n._apply(a,r)}))}}]),e}(),Ct=function(){function e(){(0,h.Z)(this,e),Object.defineProperty(this,"_callbacks",{enumerable:!0,configurable:!0,writable:!0,value:{}})}return(0,d.Z)(e,[{key:"add",value:function(e,t){var i=this,n=this._callbacks[e];return void 0===n&&(n=this._callbacks[e]=[]),n.push(t),new N((function(){O(n,t),0===n.length&&delete i._callbacks[e]}))}},{key:"remove",value:function(e){void 0!==this._callbacks[e]&&delete this._callbacks[e]}},{key:"_apply",value:function(e){var t=[];return ie(this._callbacks,(function(i,n){P(n,(function(n){t.push(e.adapters.add(i,n))}))})),new H(t)}}]),e}(),Zt=function(){function e(t,i){if((0,h.Z)(this,e),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_privateSettings",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_settingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_privateSettingEvents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_entities",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"states",{enumerable:!0,configurable:!0,writable:!0,value:new Mt(this)}),Object.defineProperty(this,"adapters",{enumerable:!0,configurable:!0,writable:!0,value:new Ct}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new W}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this._settings=t}return(0,d.Z)(e,[{key:"entities",get:function(){return this._entities}},{key:"get",value:function(e,t){var i=this._settings[e];return void 0!==i?i:t}},{key:"setRaw",value:function(e,t){this._settings[e]=t}},{key:"set",value:function(e,t){var i=this;this._settings[e]!==t&&(this.setRaw(e,t),this._entities.forEach((function(n){n._setTemplateProperty(i,e,t)})))}},{key:"remove",value:function(e){e in this._settings&&(delete this._settings[e],this._entities.forEach((function(t){t._removeTemplateProperty(e)})))}},{key:"removeAll",value:function(){var e=this;ie(this._settings,(function(t,i){e.remove(t)}))}},{key:"getPrivate",value:function(e,t){var i=this._privateSettings[e];return void 0!==i?i:t}},{key:"setPrivateRaw",value:function(e,t){return this._privateSettings[e]=t,t}},{key:"setPrivate",value:function(e,t){var i=this;return this._privateSettings[e]!==t&&(this.setPrivateRaw(e,t),this._entities.forEach((function(n){n._setTemplatePrivateProperty(i,e,t)}))),t}},{key:"removePrivate",value:function(e){e in this._privateSettings&&(delete this._privateSettings[e],this._entities.forEach((function(t){t._removeTemplatePrivateProperty(e)})))}},{key:"setAll",value:function(e){var t=this;ie(e,(function(e,i){t.set(e,i)}))}},{key:"on",value:function(e,t){var i=this,n=this._settingEvents[e];return void 0===n&&(n=this._settingEvents[e]=[]),n.push(t),new N((function(){O(n,t),0===n.length&&delete i._settingEvents[e]}))}},{key:"onPrivate",value:function(e,t){var i=this,n=this._privateSettingEvents[e];return void 0===n&&(n=this._privateSettingEvents[e]=[]),n.push(t),new N((function(){O(n,t),0===n.length&&delete i._privateSettingEvents[e]}))}},{key:"_apply",value:function(e,t){var i=[];return ie(this._settingEvents,(function(t,n){P(n,(function(n){i.push(e.on(t,n))}))})),ie(this._privateSettingEvents,(function(t,n){P(n,(function(n){i.push(e.onPrivate(t,n))}))})),this.states._apply(e,t),i.push(this.adapters._apply(e)),i.push(e.events.copyFrom(this.events)),new H(i)}},{key:"_setObjectTemplate",value:function(e){this._entities.push(e)}},{key:"_removeObjectTemplate",value:function(e){I(this._entities,e)}},{key:"_stateChanged",value:function(e){this._entities.forEach((function(t){t._applyStateByKey(e)}))}}],[{key:"new",value:function(t){return new e(t,!0)}}]),e}(),Pt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,h.Z)(this,i),n=t.call(this),Object.defineProperty((0,l.Z)(n),"_sprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(n),"_rendererDisposers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(n),"_dispatchParents",{enumerable:!0,configurable:!0,writable:!0,value:!0}),n._sprite=e,n}return(0,d.Z)(i,[{key:"_makePointerEvent",value:function(e,t){return{type:e,originalEvent:t.event,point:t.point,simulated:t.simulated,native:t.native,target:this._sprite}}},{key:"_onRenderer",value:function(e,t){var i=this;this._sprite.set("interactive",!0),this._sprite._display.interactive=!0;var n=this._rendererDisposers[e];if(void 0===n){var r=this._sprite._display.on(e,(function(e){t.call(i,e)}));n=this._rendererDisposers[e]=new V((function(){delete i._rendererDisposers[e],r.dispose()}))}return n.increment()}},{key:"_on",value:function(e,t,n,r,s,l){var u=(0,a.Z)((0,o.Z)(i.prototype),"_on",this).call(this,e,t,n,r,s,l),c=i.RENDERER_EVENTS[t];return void 0!==c&&(u.disposer=new H([u.disposer,this._onRenderer(t,c)])),u}},{key:"stopParentDispatch",value:function(){this._dispatchParents=!1}},{key:"dispatchParents",value:function(e,t){var i=this._dispatchParents;this._dispatchParents=!0;try{this.dispatch(e,t),this._dispatchParents&&this._sprite.parent&&this._sprite.parent.events.dispatchParents(e,t)}finally{this._dispatchParents=i}}}]),i}(W);Object.defineProperty(Pt,"RENDERER_EVENTS",{enumerable:!0,configurable:!0,writable:!0,value:{click:function(e){this.isEnabled("click")&&!this._sprite.isDragging()&&this._sprite._hasDown()&&!this._sprite._hasMoved(this._makePointerEvent("click",e))&&this.dispatch("click",this._makePointerEvent("click",e))},rightclick:function(e){this.isEnabled("rightclick")&&this.dispatch("rightclick",this._makePointerEvent("rightclick",e))},middleclick:function(e){this.isEnabled("middleclick")&&this.dispatch("middleclick",this._makePointerEvent("middleclick",e))},dblclick:function(e){this.dispatchParents("dblclick",this._makePointerEvent("dblclick",e))},pointerover:function(e){this.isEnabled("pointerover")&&this.dispatch("pointerover",this._makePointerEvent("pointerover",e))},pointerout:function(e){this.isEnabled("pointerout")&&this.dispatch("pointerout",this._makePointerEvent("pointerout",e))},pointerdown:function(e){this.dispatchParents("pointerdown",this._makePointerEvent("pointerdown",e))},pointerup:function(e){this.isEnabled("pointerup")&&this.dispatch("pointerup",this._makePointerEvent("pointerup",e))},globalpointerup:function(e){this.isEnabled("globalpointerup")&&this.dispatch("globalpointerup",this._makePointerEvent("globalpointerup",e))},globalpointermove:function(e){this.isEnabled("globalpointermove")&&this.dispatch("globalpointermove",this._makePointerEvent("globalpointermove",e))},wheel:function(e){this.dispatchParents("wheel",{type:"wheel",target:this._sprite,originalEvent:e.event,point:e.point})}}});var At=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_adjustedLocalBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty((0,l.Z)(e),"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty((0,l.Z)(e),"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_templateField",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_sizeDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_dragEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_dragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_isHidden",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_isShowing",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_isHiding",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_isDown",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_downPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_downPoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,l.Z)(e),"_toggleDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_dragDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_tooltipDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_hoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_focusDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_tooltipMoveDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_tooltipPointerDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_statesHandled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,d.Z)(i,[{key:"_afterNew",value:function(){this.setPrivateRaw("visible",!0),(0,a.Z)((0,o.Z)(i.prototype),"_afterNew",this).call(this)}},{key:"_markDirtyKey",value:function(e){(0,a.Z)((0,o.Z)(i.prototype),"_markDirtyKey",this).call(this,e),"x"!=e&&"y"!=e&&"dx"!=e&&"dy"!=e||(this.markDirtyBounds(),this._addPercentagePositionChildren(),this.markDirtyPosition())}},{key:"_markDirtyPrivateKey",value:function(e){(0,a.Z)((0,o.Z)(i.prototype),"_markDirtyPrivateKey",this).call(this,e),"x"!=e&&"y"!=e||this.markDirtyPosition()}},{key:"_removeTemplateField",value:function(){this._templateField&&this._templateField._removeObjectTemplate(this)}},{key:"_createEvents",value:function(){return new Pt(this)}},{key:"_processTemplateField",value:function(){var e,t=this.get("templateField");if(t){var i=this.dataItem;if(i){var n=i.dataContext;n&&((e=n[t])instanceof Zt||!e||(e=Zt.new(e)))}}this._templateField!==e&&(this._removeTemplateField(),this._templateField=e,e&&e._setObjectTemplate(this),this._applyTemplates())}},{key:"_setDataItem",value:function(e){var t=this._dataItem;this._dataItem=e,this._processTemplateField();var i="dataitemchanged";e!=t&&this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this,oldDataItem:t,newDataItem:e})}},{key:"dataItem",get:function(){if(this._dataItem)return this._dataItem;for(var e=this._parent;e;){if(e._dataItem)return e._dataItem;e=e._parent}},set:function(e){this._setDataItem(e)}},{key:"_addPercentageSizeChildren",value:function(){var e=this.parent;e&&(this.get("width")instanceof K||this.get("height")instanceof K?D(e._percentageSizeChildren,this):O(e._percentageSizeChildren,this))}},{key:"_addPercentagePositionChildren",value:function(){var e=this.parent;e&&(this.get("x")instanceof K||this.get("y")instanceof K?D(e._percentagePositionChildren,this):O(e._percentagePositionChildren,this))}},{key:"markDirtyPosition",value:function(){this._root._addDirtyPosition(this)}},{key:"updatePivotPoint",value:function(){var e=this._localBounds;if(e){var t=this.get("centerX");null!=t&&(this._display.pivot.x=e.left+_e(t,e.right-e.left));var i=this.get("centerY");null!=i&&(this._display.pivot.y=e.top+_e(i,e.bottom-e.top))}}},{key:"_beforeChanged",value:function(){var e=this;if((0,a.Z)((0,o.Z)(i.prototype),"_beforeChanged",this).call(this),this._handleStates(),this.isDirty("tooltip")){var t=this._prevSettings.tooltip;t&&t.dispose()}if((this.isDirty("layer")||this.isDirty("layerMargin"))&&(this._display.setLayer(this.get("layer"),this.get("layerMargin")),this.markDirtyLayer()),this.isDirty("tooltipPosition")){var n=this._tooltipMoveDp;n&&(n.dispose(),this._tooltipMoveDp=void 0);var r=this._tooltipPointerDp;r&&(r.dispose(),this._tooltipPointerDp=void 0),"pointer"==this.get("tooltipPosition")&&(this._tooltipPointerDp=new H([this.events.on("pointerover",(function(){e._tooltipMoveDp=e.events.on("globalpointermove",(function(t){e.showTooltip(t.point)}))})),this.events.on("pointerout",(function(){var t=e._tooltipMoveDp;t&&(t.dispose(),e._tooltipMoveDp=void 0)}))]))}}},{key:"_handleStates",value:function(){this._statesHandled||(this.isDirty("active")&&(this.get("active")?(this.states.applyAnimate("active"),this.set("ariaChecked",!0)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!1)),this.markDirtyAccessibility()),this.isDirty("disabled")&&(this.get("disabled")?(this.states.applyAnimate("disabled"),this.set("ariaChecked",!1)):(this.isHidden()||this.states.applyAnimate("default"),this.set("ariaChecked",!0)),this.markDirtyAccessibility()),this._statesHandled=!0)}},{key:"_changed",value:function(){var e=this;(0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this);var t=this._display,n=this.events;if(this.isDirty("draggable")){var r=this.get("draggable");r?(this.set("interactive",!0),this._dragDp=new H([n.on("pointerdown",(function(t){e.dragStart(t)})),n.on("globalpointermove",(function(t){e.dragMove(t)})),n.on("globalpointerup",(function(t){e.dragStop(t)}))])):this._dragDp&&(this._dragDp.dispose(),this._dragDp=void 0),t.cancelTouch=!!r}if(this.isDirty("tooltipText")||this.isDirty("tooltipHTML")||this.isDirty("showTooltipOn")){var s=this.get("tooltipText"),l=this.get("tooltipHTML"),u=this.get("showTooltipOn","hover");this._tooltipDp&&(this._tooltipDp.dispose(),this._tooltipDp=void 0),(s||l)&&("click"==u?this._tooltipDp=new H([n.on("click",(function(){e.setTimeout((function(){return e.showTooltip()}),10)})),oe(document,"click",(function(t){e.hideTooltip()}))]):"always"==u||(this._tooltipDp=new H([n.on("pointerover",(function(){e.showTooltip()})),n.on("pointerout",(function(){e.hideTooltip()}))])))}if(this.isDirty("toggleKey")){var c=this.get("toggleKey");c&&"none"!=c?this._toggleDp=n.on("click",(function(){e._isDragging||e.set(c,!e.get(c))})):this._toggleDp&&(this._toggleDp.dispose(),this._toggleDp=void 0)}if(this.isDirty("opacity")&&(t.alpha=Math.max(0,this.get("opacity",1))),this.isDirty("rotation")&&(this.markDirtyBounds(),t.angle=this.get("rotation",0)),this.isDirty("scale")&&(this.markDirtyBounds(),t.scale=this.get("scale",0)),(this.isDirty("centerX")||this.isDirty("centerY"))&&(this.markDirtyBounds(),this.updatePivotPoint()),(this.isDirty("visible")||this.isPrivateDirty("visible")||this.isDirty("forceHidden"))&&(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?t.visible=!0:(t.visible=!1,this.hideTooltip()),this.markDirtyBounds(),this.get("focusable")&&this.markDirtyAccessibility()),this.isDirty("width")||this.isDirty("height")){this.markDirtyBounds(),this._addPercentageSizeChildren();var h=this.parent;h&&(this.isDirty("width")&&this.get("width")instanceof K||this.isDirty("height")&&this.get("height")instanceof K)&&(h.markDirty(),h._prevWidth=0),this._sizeDirty=!0}if((this.isDirty("maxWidth")||this.isDirty("maxHeight")||this.isPrivateDirty("width")||this.isPrivateDirty("height")||this.isDirty("minWidth")||this.isDirty("minHeight")||this.isPrivateDirty("maxWidth")||this.isPrivateDirty("maxHeight")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&(this.markDirtyBounds(),this._sizeDirty=!0),this._sizeDirty&&this._updateSize(),this.isDirty("wheelable")){var d=this.get("wheelable");d&&this.set("interactive",!0),t.wheelable=!!d}if((this.isDirty("tabindexOrder")||this.isDirty("focusableGroup"))&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this)),this.isDirty("filter")&&(t.filter=this.get("filter")),this.isDirty("cursorOverStyle")&&(t.cursorOverStyle=this.get("cursorOverStyle")),this.isDirty("hoverOnFocus")&&(this.get("hoverOnFocus")?this._focusDp=new H([n.on("focus",(function(){e.showTooltip()})),n.on("blur",(function(){e.hideTooltip()}))]):this._focusDp&&(this._focusDp.dispose(),this._focusDp=void 0)),this.isDirty("focusable")&&(this.get("focusable")?this._root._registerTabindexOrder(this):this._root._unregisterTabindexOrder(this),this.markDirtyAccessibility()),(this.isDirty("role")||this.isDirty("ariaLive")||this.isDirty("ariaChecked")||this.isDirty("ariaHidden")||this.isDirty("ariaOrientation")||this.isDirty("ariaValueNow")||this.isDirty("ariaValueMin")||this.isDirty("ariaValueMax")||this.isDirty("ariaValueText")||this.isDirty("ariaLabel")||this.isDirty("ariaControls"))&&this.markDirtyAccessibility(),this.isDirty("exportable")&&(t.exportable=this.get("exportable")),this.isDirty("interactive")){var f=this.events;this.get("interactive")?this._hoverDp=new H([f.on("click",(function(t){fe(t.originalEvent)&&(e.getPrivate("touchHovering")||e.setTimeout((function(){e._handleOver(),(e.get("tooltipText")||e.get("tooltipHTML"))&&e.showTooltip(),e.setPrivateRaw("touchHovering",!0),e.events.dispatch("pointerover",{type:"pointerover",target:t.target,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})}),10))})),f.on("globalpointerup",(function(t){fe(t.originalEvent)&&e.getPrivate("touchHovering")&&(e._handleOut(),(e.get("tooltipText")||e.get("tooltipHTML"))&&e.hideTooltip(),e.setPrivateRaw("touchHovering",!1),e.events.dispatch("pointerout",{type:"pointerout",target:t.target,originalEvent:t.originalEvent,point:t.point,simulated:t.simulated})),e._isDown&&e._handleUp(t)})),f.on("pointerover",(function(){e._handleOver()})),f.on("pointerout",(function(){e._handleOut()})),f.on("pointerdown",(function(t){e._handleDown(t)}))]):(this._display.interactive=!1,this._hoverDp&&(this._hoverDp.dispose(),this._hoverDp=void 0))}this.isDirty("forceInactive")&&(this._display.inactive=this.get("forceInactive",!1)),"always"==this.get("showTooltipOn")&&this._display.visible&&this.showTooltip()}},{key:"dragStart",value:function(e){this._dragEvent=e,this.events.stopParentDispatch()}},{key:"dragStop",value:function(e){if(this._dragEvent=void 0,this._dragPoint=void 0,this.events.stopParentDispatch(),this._isDragging){this._isDragging=!1;var t="dragstop";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}},{key:"_handleOver",value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("hoverActive")?this.states.applyAnimate("hoverActive"):this.get("disabled")&&this.states.lookup("hoverDisabled")?this.states.applyAnimate("hoverDisabled"):this.states.applyAnimate("hover"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}},{key:"_handleOut",value:function(){this.isHidden()||(this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):(this.states.lookup("hover")||this.states.lookup("hoverActive"))&&this.states.applyAnimate("default"),this.get("draggable")&&this._isDown&&this.states.lookup("down")&&this.states.applyAnimate("down"))}},{key:"_handleUp",value:function(e){if(!this.isHidden()){this.get("active")&&this.states.lookup("active")?this.states.applyAnimate("active"):this.get("disabled")&&this.states.lookup("disabled")?this.states.applyAnimate("disabled"):this.states.lookup("down")&&(this.isHover()?this.states.applyAnimate("hover"):this.states.applyAnimate("default")),this._downPoint=void 0;var t=ue(e.originalEvent);delete this._downPoints[t],0==ee(this._downPoints).length&&(this._isDown=!1)}}},{key:"_hasMoved",value:function(e){var t=ue(e.originalEvent),i=this._downPoints[t];if(i){var n=Math.abs(i.x-e.point.x),r=Math.abs(i.y-e.point.y);return n>5||r>5}return!1}},{key:"_hasDown",value:function(){return ee(this._downPoints).length>0}},{key:"_handleDown",value:function(e){var t=this.parent;if(t&&!this.get("draggable")&&t._handleDown(e),this.get("interactive")&&!this.isHidden()){this.states.lookup("down")&&this.states.applyAnimate("down"),this._downPoint={x:e.point.x,y:e.point.y},this._isDown=!0;var i=ue(e.originalEvent);this._downPoints[i]={x:e.point.x,y:e.point.y}}}},{key:"dragMove",value:function(e){var t=this._dragEvent;if(t){if(t.simulated&&!e.simulated)return!0;for(var i=0,n=this.parent;null!=n;)i+=n.get("rotation",0),n=n.parent;var r=e.point.x-t.point.x,a=e.point.y-t.point.y,o=this.events;if(t.simulated&&!this._isDragging){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};var s="dragstart";o.isEnabled(s)&&o.dispatch(s,{type:s,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}if(this._isDragging){var l=this._dragPoint;this.set("x",l.x+r*nt(i)+a*it(i)),this.set("y",l.y+a*nt(i)-r*it(i));var u="dragged";o.isEnabled(u)&&o.dispatch(u,{type:u,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}else if(Math.hypot(r,a)>5){this._isDragging=!0,this._dragEvent=e,this._dragPoint={x:this.x(),y:this.y()};var c="dragstart";o.isEnabled(c)&&o.dispatch(c,{type:c,target:this,originalEvent:e.originalEvent,point:e.point,simulated:e.simulated})}}}},{key:"_updateSize",value:function(){}},{key:"_getBounds",value:function(){this._localBounds=this._display.getLocalBounds()}},{key:"depth",value:function(){for(var e=this.parent,t=0;;){if(!e)return t;++t,e=e.parent}}},{key:"markDirtySize",value:function(){this._sizeDirty=!0,this.markDirty()}},{key:"markDirtyBounds",value:function(){if(this.get("isMeasured")){var e=this._display;this._root._addDirtyBounds(this),e.isMeasured=!0,e.invalidateBounds();var t=this.parent;t&&"absolute"!=this.get("position")&&(null==t.get("width")||null==t.get("height")||t.get("layout"))&&t.markDirtyBounds(),this.get("focusable")&&this.isFocus()&&this.markDirtyAccessibility()}}},{key:"markDirtyAccessibility",value:function(){this._root._invalidateAccessibility(this)}},{key:"markDirtyLayer",value:function(){this._display.markDirtyLayer(!0)}},{key:"markDirty",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"markDirty",this).call(this),this.markDirtyLayer()}},{key:"_updateBounds",value:function(){var e,t=this._adjustedLocalBounds;if(this.get("visible")&&this.getPrivate("visible")&&!this.get("forceHidden")?(this._getBounds(),this._fixMinBounds(this._localBounds),this.updatePivotPoint(),this._adjustedLocalBounds=this._display.getAdjustedBounds(this._localBounds),e=this._adjustedLocalBounds):(e={left:0,right:0,top:0,bottom:0},this._localBounds=e,this._adjustedLocalBounds=e),!t||t.left!==e.left||t.top!==e.top||t.right!==e.right||t.bottom!==e.bottom){var i="boundschanged";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this}),this.parent&&(this.parent.markDirty(),this.parent.markDirtyBounds())}}},{key:"_fixMinBounds",value:function(e){var t=this.get("minWidth",this.getPrivate("minWidth")),i=this.get("minHeight",this.getPrivate("minHeight"));w(t)&&e.right-e.left<t&&(e.right=e.left+t),w(i)&&e.bottom-e.top<i&&(e.bottom=e.top+i);var n=this.getPrivate("width"),r=this.getPrivate("height");w(n)&&(n>0?e.right=e.left+n:e.left=e.right+n),w(r)&&(r>0?e.bottom=e.top+r:e.top=e.bottom+r)}},{key:"_removeParent",value:function(e){e&&(e.children.removeValue(this),O(e._percentageSizeChildren,this),O(e._percentagePositionChildren,this))}},{key:"_clearDirty",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_clearDirty",this).call(this),this._sizeDirty=!1,this._statesHandled=!1}},{key:"hover",value:function(){this.showTooltip(),this._handleOver()}},{key:"unhover",value:function(){this.hideTooltip(),this._handleOut()}},{key:"showTooltip",value:function(e){var t=this.getTooltip(),i=this.get("tooltipText"),n=this.get("tooltipHTML");if((i||n)&&t){var r=this.get("tooltipPosition"),a=this.getPrivate("tooltipTarget",this);"fixed"!=r&&e||(this._display._setMatrix(),e=this.toGlobal(a._getTooltipPoint())),t.set("pointTo",e),t.set("tooltipTarget",a),t.get("x")||t.set("x",e.x),t.get("y")||t.set("y",e.y),i&&t.label.set("text",i),n&&t.label.set("html",n);var o=this.dataItem;if(o&&t.label._setDataItem(o),"always"==this.get("showTooltipOn")&&(e.x<0||e.x>this._root.width()||e.y<0||e.y>this._root.height()))return void this.hideTooltip();t.label.text.markDirtyText();var s=t.show();return this.setPrivateRaw("showingTooltip",!0),s}}},{key:"hideTooltip",value:function(){var e=this.getTooltip();if(e&&e.get("tooltipTarget")==this.getPrivate("tooltipTarget",this)){var t=e.get("keepTargetHover")&&0==e.get("stateAnimationDuration",0)?400:void 0,i=e.hide(t);return this.setPrivateRaw("showingTooltip",!1),i}}},{key:"_getTooltipPoint",value:function(){var e=this._localBounds;if(e){var t=0,i=0;return this.get("isMeasured")?(t=e.left+_e(this.get("tooltipX",0),e.right-e.left),i=e.top+_e(this.get("tooltipY",0),e.bottom-e.top)):(t=_e(this.get("tooltipX",0),this.width()),i=_e(this.get("tooltipY",0),this.height())),{x:t,y:i}}return{x:0,y:0}}},{key:"getTooltip",value:function(){var e=this.get("tooltip");if(e)return e;var t=this.parent;return t?t.getTooltip():void 0}},{key:"_updatePosition",value:function(){var e=this.parent,t=this.get("dx",0),i=this.get("dy",0),n=this.get("x"),r=this.getPrivate("x"),a=0,o=0,s=this.get("position");n instanceof K&&(n=e?e.innerWidth()*n.value+e.get("paddingLeft",0):0),w(n)?a=n+t:null!=r?a=r:e&&"relative"==s&&(a=e.get("paddingLeft",0)+t);var l=this.get("y"),u=this.getPrivate("y");l instanceof K&&(l=e?e.innerHeight()*l.value+e.get("paddingTop",0):0),w(l)?o=l+i:null!=u?o=u:e&&"relative"==s&&(o=e.get("paddingTop",0)+i);var c=this._display;if(c.x!=a||c.y!=o){c.invalidateBounds(),c.x=a,c.y=o;var h="positionchanged";this.events.isEnabled(h)&&this.events.dispatch(h,{type:h,target:this})}this.getPrivate("showingTooltip")&&this.showTooltip()}},{key:"x",value:function(){var e=this.get("x"),t=this.getPrivate("x"),i=this.parent;return i?e instanceof K?_e(e,i.innerWidth())+i.get("paddingLeft",0):w(e)?e:null!=t?t:i.get("paddingLeft",this._display.x):this._display.x}},{key:"y",value:function(){var e=this.getPrivate("y");if(null!=e)return e;var t=this.get("y"),i=this.parent;return i?t instanceof K?_e(t,i.innerHeight())+i.get("paddingTop",0):w(t)?t:null!=e?e:i.get("paddingTop",this._display.y):this._display.y}},{key:"_dispose",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_dispose",this).call(this),this._display.dispose(),this._removeTemplateField(),this._removeParent(this.parent),this._root._removeFocusElement(this);var e=this.get("tooltip");e&&e.dispose(),this.markDirty()}},{key:"adjustedLocalBounds",value:function(){return this._fixMinBounds(this._adjustedLocalBounds),this._adjustedLocalBounds}},{key:"localBounds",value:function(){return this._localBounds}},{key:"bounds",value:function(){var e=this._adjustedLocalBounds,t=this.x(),i=this.y();return{left:e.left+t,right:e.right+t,top:e.top+i,bottom:e.bottom+i}}},{key:"globalBounds",value:function(){var e=this.localBounds(),t=this.toGlobal({x:e.left,y:e.top}),i=this.toGlobal({x:e.right,y:e.top}),n=this.toGlobal({x:e.right,y:e.bottom}),r=this.toGlobal({x:e.left,y:e.bottom});return{left:Math.min(t.x,i.x,n.x,r.x),top:Math.min(t.y,i.y,n.y,r.y),right:Math.max(t.x,i.x,n.x,r.x),bottom:Math.max(t.y,i.y,n.y,r.y)}}},{key:"_onShow",value:function(e){}},{key:"_onHide",value:function(e){}},{key:"appear",value:function(e,t){return(0,f.a)(this,void 0,void 0,(0,s.Z)().mark((function i(){var n=this;return(0,s.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.hide(0);case 2:return i.abrupt("return",t?new Promise((function(i,r){n.setTimeout((function(){i(n.show(e))}),t)})):this.show(e));case 3:case"end":return i.stop()}}),i,this)})))}},{key:"show",value:function(e){return(0,f.a)(this,void 0,void 0,(0,s.Z)().mark((function t(){var i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isShowing){t.next=6;break}return this._isHidden=!1,this._isShowing=!0,this._isHiding=!1,this.states.lookup("default").get("visible")&&this.set("visible",!0),this._onShow(e),i=this.states.applyAnimate("default",e),t.next=5,Ye(i);case 5:this._isShowing=!1;case 6:case"end":return t.stop()}}),t,this)})))}},{key:"hide",value:function(e){return(0,f.a)(this,void 0,void 0,(0,s.Z)().mark((function t(){var i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._isHiding||this._isHidden){t.next=8;break}return this._isHiding=!0,this._isShowing=!1,this.states.lookup("hidden")||this.states.create("hidden",{opacity:0,visible:!1}),this._isHidden=!0,this._onHide(e),i=this.states.applyAnimate("hidden",e),t.next=7,Ye(i);case 7:this._isHiding=!1;case 8:case"end":return t.stop()}}),t,this)})))}},{key:"isHidden",value:function(){return this._isHidden}},{key:"isShowing",value:function(){return this._isShowing}},{key:"isHiding",value:function(){return this._isHiding}},{key:"isHover",value:function(){return this._display.hovering()}},{key:"isFocus",value:function(){return this._root.focused(this)}},{key:"isDragging",value:function(){return this._isDragging}},{key:"isVisible",value:function(){return!(!this.get("visible")||!this.getPrivate("visible")||this.get("forceHidden"))}},{key:"isVisibleDeep",value:function(){return this._parent?this._parent.isVisibleDeep()&&this.isVisible():this.isVisible()}},{key:"compositeOpacity",value:function(){var e=this.get("opacity",1);return this._parent?this._parent.compositeOpacity()*e:e}},{key:"width",value:function(){var e=this.get("width"),t=this.get("maxWidth",this.getPrivate("maxWidth")),i=this.get("minWidth",this.getPrivate("minWidth")),n=this.getPrivate("width"),r=0;if(w(n))r=n;else if(null==e)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.right-this._adjustedLocalBounds.left);else if(e instanceof K){var a=this.parent;r=a?a.innerWidth()*e.value:this._root.width()*e.value}else w(e)&&(r=e);return w(i)&&(r=Math.max(i,r)),w(t)&&(r=Math.min(t,r)),r}},{key:"maxWidth",value:function(){var e=this.get("maxWidth",this.getPrivate("maxWidth"));if(w(e))return e;var t=this.get("width");if(w(t))return t;var i=this.parent;return i?i.innerWidth():this._root.width()}},{key:"maxHeight",value:function(){var e=this.get("maxHeight",this.getPrivate("maxHeight"));if(w(e))return e;var t=this.get("height");if(w(t))return t;var i=this.parent;return i?i.innerHeight():this._root.height()}},{key:"height",value:function(){var e=this.get("height"),t=this.get("maxHeight",this.getPrivate("maxHeight")),i=this.get("minHeight",this.getPrivate("minHeight")),n=this.getPrivate("height"),r=0;if(w(n))r=n;else if(null==e)this._adjustedLocalBounds&&(r=this._adjustedLocalBounds.bottom-this._adjustedLocalBounds.top);else if(e instanceof K){var a=this.parent;r=a?a.innerHeight()*e.value:this._root.height()*e.value}else w(e)&&(r=e);return w(i)&&(r=Math.max(i,r)),w(t)&&(r=Math.min(t,r)),r}},{key:"_findStaticTemplate",value:function(e){return this._templateField&&e(this._templateField)?this._templateField:(0,a.Z)((0,o.Z)(i.prototype),"_findStaticTemplate",this).call(this,e)}},{key:"_walkParents",value:function(e){this._parent&&this._walkParent(e)}},{key:"_walkParent",value:function(e){this._parent&&this._parent._walkParent(e),e(this)}},{key:"parent",get:function(){return this._parent}},{key:"_setParent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this._parent;e!==i&&(this.markDirtyBounds(),e.markDirty(),this._parent=e,t&&(this._removeParent(i),e&&(this._addPercentageSizeChildren(),this._addPercentagePositionChildren())),this.markDirtyPosition(),this._applyThemes())}},{key:"getNumberFormatter",value:function(){return this.get("numberFormatter",this._root.numberFormatter)}},{key:"getDateFormatter",value:function(){return this.get("dateFormatter",this._root.dateFormatter)}},{key:"getDurationFormatter",value:function(){return this.get("durationFormatter",this._root.durationFormatter)}},{key:"toGlobal",value:function(e){return this._display.toGlobal(e)}},{key:"toLocal",value:function(e){return this._display.toLocal(e)}},{key:"_getDownPoint",value:function(){var e=this._getDownPointId();if(e)return this._downPoints[e]}},{key:"_getDownPointId",value:function(){if(this._downPoints)return function(e,t){return ee(e).sort(t)}(this._downPoints,(function(e,t){return e>t?1:e<t?-1:0}))[0]}},{key:"toFront",value:function(){var e=this.parent;e&&e.children.moveValue(this,e.children.length-1)}},{key:"toBack",value:function(){var e=this.parent;e&&e.children.moveValue(this,0)}}]),i}(kt);Object.defineProperty(At,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Sprite"}),Object.defineProperty(At,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kt.classNames.concat([At.className])});var Tt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_display",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(e),"_backgroundDisplay",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(e),"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,l.Z)(e),"_pattern",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,d.Z)(i,[{key:"_afterNew",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_afterNewApplyThemes",this).call(this)}},{key:"pattern",get:function(){return this._pattern}},{key:"_draw",value:function(){}},{key:"_beforeChanged",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("repetition")||this.isDirty("width")||this.isDirty("height")||this.isDirty("rotation")||this.isDirty("color")||this.isDirty("strokeWidth")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("colorOpacity")||this.isDirty("fill")||this.isDirty("fillOpacity"))&&(this._clear=!0)}},{key:"_changed",value:function(){if((0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this),this._clear){var e=this.get("repetition",""),t=this.get("width",100),n=this.get("height",100),r=this.get("fill"),s=this.get("fillOpacity",1);this._display.clear(),this._backgroundDisplay.clear(),r&&s>0&&(this._backgroundDisplay.beginFill(r,s),this._backgroundDisplay.drawRect(0,0,t,n),this._backgroundDisplay.endFill()),this._display.angle=this.get("rotation",0),this._draw(),this._pattern=this._root._renderer.createPattern(this._display,this._backgroundDisplay,e,t,n)}}}]),i}(kt);Object.defineProperty(Tt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Pattern"}),Object.defineProperty(Tt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kt.classNames.concat([Tt.className])});var It,Ot=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,d.Z)(i,[{key:"_beforeChanged",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_beforeChanged",this).call(this),this._clear=!0,this.isDirty("src")&&this._load()}},{key:"_draw",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_draw",this).call(this);var e=this._image;if(e){var t=this.get("width",100),n=this.get("height",100),r=this.get("fit","image"),s=0,l=0;"pattern"==r?(s=t,l=n):(s=e.width,l=e.height,"image"==r&&(this.set("width",s),this.set("height",l)));var u=0,c=0;this.get("centered",!0)&&(u=t/2-s/2,c=n/2-l/2),this._display.image(e,s,l,u,c)}}},{key:"_load",value:function(){var e=this,t=this.get("src");if(t){var i=new Image;i.src=t,i.decode().then((function(){e._image=i,e._draw(),e.events.isEnabled("loaded")&&e.events.dispatch("loaded",{type:"loaded",target:e})})).catch((function(e){}))}}}]),i}(Tt);Object.defineProperty(Ot,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PicturePattern"}),Object.defineProperty(Ot,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Tt.classNames.concat([Ot.className])}),function(e){e.ADD="lighter",e.COLOR="color",e.COLOR_BURN="color-burn",e.COLOR_DODGE="color-dodge",e.DARKEN="darken",e.DIFFERENCE="difference",e.DST_OVER="destination-over",e.EXCLUSION="exclusion",e.HARD_LIGHT="hard-light",e.HUE="hue",e.LIGHTEN="lighten",e.LUMINOSITY="luminosity",e.MULTIPLY="multiply",e.NORMAL="source-over",e.OVERLAY="overlay",e.SATURATION="saturation",e.SCREEN="screen",e.SOFT_LIGHT="soft-light",e.SRC_ATOP="source-atop",e.XOR="xor"}(It||(It={}));var Dt=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","fillPattern","strokePattern","fillGradient","strokeGradient","strokeDasharray","strokeDashoffset"],Ft=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_display",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeGraphics()}),Object.defineProperty((0,l.Z)(e),"_clear",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,d.Z)(i,[{key:"_beforeChanged",value:function(){var e=this;if((0,a.Z)((0,o.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("draw")||this.isDirty("svgPath"))&&this.markDirtyBounds(),(this.isDirty("fill")||this.isDirty("stroke")||this.isDirty("visible")||this.isDirty("forceHidden")||this.isDirty("scale")||this.isDirty("fillGradient")||this.isDirty("strokeGradient")||this.isDirty("fillPattern")||this.isDirty("strokePattern")||this.isDirty("fillOpacity")||this.isDirty("strokeOpacity")||this.isDirty("strokeWidth")||this.isDirty("draw")||this.isDirty("blendMode")||this.isDirty("strokeDasharray")||this.isDirty("strokeDashoffset")||this.isDirty("svgPath")||this.isDirty("lineJoin")||this.isDirty("shadowColor")||this.isDirty("shadowBlur")||this.isDirty("shadowOffsetX")||this.isDirty("shadowOffsetY"))&&(this._clear=!0),this._display.crisp=this.get("crisp",!1),this.isDirty("fillGradient")){var t=this.get("fillGradient");if(t){this._display.isMeasured=!0;var n=t.get("target");n&&(this._disposers.push(n.events.on("boundschanged",(function(){e._markDirtyKey("fill")}))),this._disposers.push(n.events.on("positionchanged",(function(){e._markDirtyKey("fill")}))))}}if(this.isDirty("strokeGradient")){var r=this.get("strokeGradient");if(r){this._display.isMeasured=!0;var s=r.get("target");s&&(this._disposers.push(s.events.on("boundschanged",(function(){e._markDirtyKey("stroke")}))),this._disposers.push(s.events.on("positionchanged",(function(){e._markDirtyKey("stroke")}))))}}}},{key:"_changed",value:function(){if((0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this),this._clear){this.markDirtyBounds(),this.markDirtyLayer(),this._display.clear();var e=this.get("strokeDasharray");w(e)&&(e=e<.5?[0]:[e]),this._display.setLineDash(e);var t=this.get("strokeDashoffset");t&&this._display.setLineDashOffset(t);var n=this.get("blendMode",It.NORMAL);this._display.blendMode=n;var r=this.get("draw");r&&r(this._display,this);var s=this.get("svgPath");null!=s&&this._display.svgPath(s)}}},{key:"_afterChanged",value:function(){var e=this;if((0,a.Z)((0,o.Z)(i.prototype),"_afterChanged",this).call(this),this._clear){var t=this.get("fill"),n=this.get("fillGradient"),r=this.get("fillPattern"),s=this.get("fillOpacity"),l=this.get("stroke"),u=this.get("strokeGradient"),c=this.get("strokePattern"),h=this.get("shadowColor"),d=this.get("shadowBlur"),f=this.get("shadowOffsetX"),p=this.get("shadowOffsetY"),v=this.get("shadowOpacity");if(h&&(d||f||p)&&this._display.shadow(h,d,f,p,v),r){var y=!1;!t||r.get("fill")&&!r.get("fillInherited")||(r.set("fill",t),r.set("fillInherited",!0),y=!0),!l||r.get("color")&&!r.get("colorInherited")||(r.set("color",l),r.set("colorInherited",!0),y=!0),y&&r._changed();var g=r.pattern;g&&(this._display.beginFill(g,s),this._display.endFill(),r instanceof Ot&&r.events.once("loaded",(function(){e._clear=!0,e.markDirty()})))}else if(n){if(t){var m=n.get("stops",[]);m.length&&P(m,(function(e){e.color&&!e.colorInherited||!t||(e.color=t,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=s,e.opacityInherited=!0)}))}var b=n.getFill(this);b&&(this._display.beginFill(b,s),this._display.endFill())}else t&&(this._display.beginFill(t,s),this._display.endFill());if(l||u||c){var _=this.get("strokeOpacity"),w=this.get("strokeWidth",1);this.get("nonScalingStroke")&&(w/=this.get("scale",1)),this.get("crisp")&&(w/=this._root._renderer.resolution);var k=this.get("lineJoin");if(c){var x=!1;!l||c.get("color")&&!c.get("colorInherited")||(c.set("color",l),c.set("colorInherited",!0),x=!0),x&&c._changed();var M=c.pattern;M&&(this._display.lineStyle(w,M,_,k),this._display.endStroke(),c instanceof Ot&&c.events.once("loaded",(function(){e._clear=!0,e.markDirty()})))}else if(u){var C=u.get("stops",[]);C.length&&P(C,(function(e){e.color&&!e.colorInherited||!l||(e.color=l,e.colorInherited=!0),(null==e.opacity||e.opacityInherited)&&(e.opacity=_,e.opacityInherited=!0)}));var Z=u.getFill(this);Z&&(this._display.lineStyle(w,Z,_,k),this._display.endStroke())}else l&&(this._display.lineStyle(w,l,_,k),this._display.endStroke())}this.getPrivate("showingTooltip")&&this.showTooltip()}this._clear=!1}}]),i}(At);Object.defineProperty(Ft,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Graphics"}),Object.defineProperty(Ft,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:At.classNames.concat([Ft.className])});var Et=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,h.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i,[{key:"_beforeChanged",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("width")||this.isDirty("height")||this.isPrivateDirty("width")||this.isPrivateDirty("height"))&&(this._clear=!0)}},{key:"_changed",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this),this._clear&&!this.get("draw")&&this._draw()}},{key:"_draw",value:function(){this._display.drawRect(0,0,this.width(),this.height())}},{key:"_updateSize",value:function(){this.markDirty(),this._clear=!0}}]),i}(Ft);function St(e,t){e.get("reverseChildren",!1)?e.children.eachReverse(t):e.children.each(t)}Object.defineProperty(Et,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Rectangle"}),Object.defineProperty(Et,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Ft.classNames.concat([Et.className])});var Lt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,h.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i)}(kt);Object.defineProperty(Lt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Layout"}),Object.defineProperty(Lt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:kt.classNames.concat([Lt.className])});var Bt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,h.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i,[{key:"updateContainer",value:function(e){var t=e.get("paddingLeft",0),i=e.innerWidth(),n=0;St(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("width");if(t instanceof K){n+=t.value;var r=i*t.value,a=e.get("minWidth",e.getPrivate("minWidth",-1/0));a>r&&(i-=a,n-=t.value);var o=e.get("maxWidth",e.getPrivate("maxWidth",1/0));r>o&&(i-=o,n-=t.value)}else w(t)||(t=e.width()),i-=t+e.get("marginLeft",0)+e.get("marginRight",0)}})),(i<=0||i==1/0)&&(i=.1),St(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("width");if(t instanceof K){var r=i*t.value/n-e.get("marginLeft",0)-e.get("marginRight",0),a=e.get("minWidth",e.getPrivate("minWidth",-1/0)),o=e.get("maxWidth",e.getPrivate("maxWidth",1/0));r=Math.min(Math.max(a,r),o),e.setPrivate("width",r)}}}));var r=t;St(e,(function(e){if("relative"==e.get("position"))if(e.isVisible()){var t=e.adjustedLocalBounds(),i=e.get("marginLeft",0),n=e.get("marginRight",0),a=e.get("maxWidth"),o=t.left,s=t.right;a&&s-o>a&&(s=o+a);var l=r+i-o;e.setPrivate("x",l),r=l+s+n}else e.setPrivate("x",void 0)}))}}]),i}(Lt);Object.defineProperty(Bt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"HorizontalLayout"}),Object.defineProperty(Bt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Lt.classNames.concat([Bt.className])});var jt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,h.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i,[{key:"updateContainer",value:function(e){var t=e.get("paddingTop",0),i=e.innerHeight(),n=0;St(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("height");if(t instanceof K){n+=t.value;var r=i*t.value,a=e.get("minHeight",e.getPrivate("minHeight",-1/0));a>r&&(i-=a,n-=t.value);var o=e.get("maxHeight",e.getPrivate("maxHeight",1/0));r>o&&(i-=o,n-=t.value)}else w(t)||(t=e.height()),i-=t+e.get("marginTop",0)+e.get("marginBottom",0)}})),(i<=0||i==1/0)&&(i=.1),St(e,(function(e){if(e.isVisible()&&"relative"==e.get("position")){var t=e.get("height");if(t instanceof K){var r=i*t.value/n-e.get("marginTop",0)-e.get("marginBottom",0),a=e.get("minHeight",e.getPrivate("minHeight",-1/0)),o=e.get("maxHeight",e.getPrivate("maxHeight",1/0));r=Math.min(Math.max(a,r),o),e.setPrivate("height",r)}}}));var r=t;St(e,(function(e){if("relative"==e.get("position"))if(e.isVisible()){var t=e.adjustedLocalBounds(),i=e.get("marginTop",0),n=t.top,a=t.bottom,o=e.get("maxHeight");o&&a-n>o&&(a=n+o);var s=e.get("marginBottom",0),l=r+i-n;e.setPrivate("y",l),r=l+a+s}else e.setPrivate("y",void 0)}))}}]),i}(Lt);Object.defineProperty(jt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"VerticalLayout"}),Object.defineProperty(jt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Lt.classNames.concat([jt.className])});var Rt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,h.Z)(this,i),t.apply(this,arguments)}return(0,d.Z)(i,[{key:"_afterNew",value:function(){this._setRawDefault("maxColumns",Number.MAX_VALUE),(0,a.Z)((0,o.Z)(i.prototype),"_afterNew",this).call(this)}},{key:"updateContainer",value:function(e){var t=e.get("paddingLeft",0),i=e.get("paddingRight",0),n=e.get("paddingTop",0),r=e.maxWidth()-t-i,a=r,o=1;St(e,(function(e){if(e.get("visible")&&e.getPrivate("visible")&&!e.get("forceHidden")&&"absolute"!=e.get("position")){var t=e.width();t<a&&(a=t),t>o&&(o=t)}})),a=tt(a,1,r),o=tt(o,1,r);var s=1;s=this.get("fixedWidthGrid")?r/o:r/a,s=Math.max(1,Math.floor(s)),s=Math.min(this.get("maxColumns",Number.MAX_VALUE),s);var l=this.getColumnWidths(e,s,o,r),u=n,c=0,h=0;s=l.length;var d=t;St(e,(function(e){if("relative"==e.get("position")&&e.isVisible()){var i=e.get("marginTop",0),n=e.get("marginBottom",0),r=e.adjustedLocalBounds(),a=e.get("marginLeft",0),o=e.get("marginRight",0),f=d+a-r.left,p=u+i-r.top;e.setPrivate("x",f),e.setPrivate("y",p),d+=l[c]+o,h=Math.max(h,e.height()+i+n),++c>=s&&(c=0,d=t,u+=h)}}))}},{key:"getColumnWidths",value:function(e,t,i,n){var r=this,a=0,o=[],s=0;return St(e,(function(n){var a=n.adjustedLocalBounds();"absolute"!=n.get("position")&&n.isVisible()&&(r.get("fixedWidthGrid")?o[s]=i:o[s]=Math.max(0|o[s],a.right-a.left+n.get("marginLeft",0)+n.get("marginRight",0)),s<e.children.length-1&&(++s==t&&(s=0)))})),P(o,(function(e){a+=e})),a>n?t>2?(t-=1,this.getColumnWidths(e,t,i,n)):[n]:o}}]),i}(Lt);Object.defineProperty(Rt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GridLayout"}),Object.defineProperty(Rt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Lt.classNames.concat([Rt.className])});var Nt=function(){function e(){(0,h.Z)(this,e)}return(0,d.Z)(e,null,[{key:"escape",value:function(e){return e.replace(/\[\[/g,this.prefix+"1").replace(/([^\/\]]{1})\]\]/g,"$1"+this.prefix+"2").replace(/\]\]/g,this.prefix+"2").replace(/\{\{/g,this.prefix+"3").replace(/\}\}/g,this.prefix+"4").replace(/\'\'/g,this.prefix+"5")}},{key:"unescape",value:function(e){return e.replace(new RegExp(this.prefix+"1","g"),"[[").replace(new RegExp(this.prefix+"2","g"),"]]").replace(new RegExp(this.prefix+"3","g"),"{{").replace(new RegExp(this.prefix+"4","g"),"}}").replace(new RegExp(this.prefix+"5","g"),"''")}},{key:"cleanUp",value:function(e){return e.replace(/\[\[/g,"[").replace(/\]\]/g,"]").replace(/\{\{/g,"{").replace(/\}\}/g,"}").replace(/\'\'/g,"'")}},{key:"chunk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[];e=this.escape(e);for(var r=t?e.split("'"):[e],a=0;a<r.length;a++){var o=r[a];if(""!==o)if(a%2==0)for(var s=(o=(o=o.replace(/\]\[/g,"]"+x+"[")).replace(/\[\]/g,"[ ]")).split(/[\[\]]+/),l=0;l<s.length;l++){var u=this.cleanUp(this.unescape(s[l]));u!==x&&""!==u&&(l%2==0?n.push({type:"value",text:u}):n.push({type:i?"value":"format",text:"["+u+"]"}))}else for(var c=o.split(/[\[\]]+/),h=0;h<c.length;h++){var d=this.cleanUp(this.unescape(c[h]));""!==d&&(h%2==0?n.push({type:"text",text:d}):this.isImage(d)?n.push({type:"image",text:"["+d+"]"}):n.push({type:"format",text:"["+d+"]"}))}}return n}},{key:"isImage",value:function(e){return!!e.match(/img[ ]?:/)}},{key:"getTextStyle",value:function(e){var t={};if(""==e||"[ ]"==e)return{};var i=e.match(/('[^']*')|("[^"]*")/gi);if(i)for(var n=0;n<i.length;n++)e=e.replace(i[n],i[n].replace(/['"]*/g,"").replace(/[ ]+/g,"+"));var r=e.match(/([\w\-]*:[\s]?[^;\s\]]*)|(\#[\w]{1,6})|([\w\-]+)|(\/)/gi);if(!r)return{};for(var a=0;a<r.length;a++)if(r[a].match(/^(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)$/i))t.fontWeight=r[a];else if(r[a].match(/^(underline|line-through)$/i))t.textDecoration=r[a];else if("/"==r[a]);else if(r[a].match(/:/)){var o=r[a].replace("+"," ").split(/:[ ]*/);t[o[0]]=o[1]}else t.fill=We.fromString(r[a]);return t}}]),e}();function zt(e,t){if(null!=t){t=""+t;var i,n=(t=Nt.escape(t)).match(/\{([^}]+)\}/g);if(n)for(i=0;i<n.length;i++){var r=Ht(e,n[i].replace(/\{([^}]+)\}/,"$1"));null==r&&(r=""),t=t.split(n[i]).join(r)}t=Nt.unescape(t)}else t="";return t}function Ht(e,t,i){for(var n,r,a=e.dataItem,o=[],s=/(format[a-zA-Z]*)\((.*)\)|([^.]+)/g;null!==(r=s.exec(t));)if(r[3]){o.push({prop:r[3]});var l=e.getDateFormatter().get("dateFields",[]),u=e.getNumberFormatter().get("numericFields",[]),c=e.getDurationFormatter().get("durationFields",[]);-1!==l.indexOf(r[3])?o.push({method:"formatDate",params:[]}):-1!==u.indexOf(r[3])?o.push({method:"formatNumber",params:[]}):-1!==c.indexOf(r[3])&&o.push({method:"formatDuration",params:[]})}else{var h=[];if(""!=xe(r[2]))for(var d=void 0,f=/'([^']*)'|"([^"]*)"|([0-9\-]+)/g;null!==(d=f.exec(r[2]));)h.push(d[1]||d[2]||d[3]);o.push({method:r[1],params:h})}if(a){(null==(n=Wt(e,o,a._settings))||k(n))&&(n=Wt(e,o,a));var p=a.dataContext;null==n&&p&&(null==(n=Wt(e,o,p))&&(n=Wt(e,[{prop:t}],p)),null==n&&p.dataContext&&(n=Wt(e,o,p.dataContext))),null==n&&a.component&&a.component.dataItem!==a&&(n=Ht(a.component,t))}return null==n&&(n=Wt(e,o,e)),null==n&&e.parent&&(n=Ht(e.parent,t)),n}function Vt(e,t){var i=e.getPrivate("customData");if(k(i))return i[t]}function Wt(e,t,i,n){for(var r=i,a=!1,o=0,s=t.length;o<s;o++){var l=t[o];if(l.prop){if(r instanceof At){var u=r.get(l.prop);null==u&&(u=r.getPrivate(l.prop)),null==u&&(u=Vt(r,l.prop)),null==u&&(u=r[l.prop]),r=u}else if(r.get){var c=r.get(l.prop);null==c&&(c=r[l.prop]),r=c}else r=r[l.prop];if(null==r)return}else switch(l.method){case"formatNumber":var h=v(r);null!=h&&(r=e.getNumberFormatter().format(h,n||l.params[0]||void 0),a=!0);break;case"formatDate":var d=y(r);if(!b(d)||p(d.getTime()))return;null!=d&&(r=e.getDateFormatter().format(d,n||l.params[0]||void 0),a=!0);break;case"formatDuration":var f=v(r);null!=f&&(r=e.getDurationFormatter().format(f,n||l.params[0]||void 0,l.params[1]||void 0),a=!0);break;case"urlEncode":case"encodeURIComponent":r=encodeURIComponent(r);break;default:r[l.method]&&r[l.method].apply(i,l.params)}}if(!a){var g=[{method:"",params:n}];if(null==n)w(r)?(g[0].method="formatNumber",g[0].params=""):b(r)&&(g[0].method="formatDate",g[0].params="");else{var m=function(e){if(void 0===e)return"string";var t=(e=(e=(e=e.toLowerCase().replace(/^\[[^\]]*\]/,"")).replace(/\[[^\]]+\]/,"")).trim()).match(/\/(date|number|duration)$/);return t?t[1]:"number"===e?"number":"date"===e?"date":"duration"===e?"duration":e.match(/[#0]/)?"number":e.match(/[ymwdhnsqaxkzgtei]/)?"date":"string"}(n);"number"===m?g[0].method="formatNumber":"date"===m?g[0].method="formatDate":"duration"===m&&(g[0].method="formatDuration")}g[0].method&&(r=Wt(e,g,r))}return r}Object.defineProperty(Nt,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:"__amcharts__"});var Yt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_display",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeContainer()}),Object.defineProperty((0,l.Z)(e),"_childrenDisplay",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeContainer()}),Object.defineProperty((0,l.Z)(e),"children",{enumerable:!0,configurable:!0,writable:!0,value:new X((0,l.Z)(e))}),Object.defineProperty((0,l.Z)(e),"_percentageSizeChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(e),"_percentagePositionChildren",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,l.Z)(e),"_prevWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(e),"_prevHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(e),"_contentWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(e),"_contentHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,l.Z)(e),"_contentMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_vsbd0",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_vsbd1",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,d.Z)(i,[{key:"_afterNew",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_afterNew",this).call(this),this._display.addChild(this._childrenDisplay)}},{key:"_dispose",value:function(){A(this.allChildren(),(function(e){e.dispose()})),this.getPrivate("htmlElement")&&this._root._removeHTMLContent(this),(0,a.Z)((0,o.Z)(i.prototype),"_dispose",this).call(this)}},{key:"_changed",value:function(){if((0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this),this.isDirty("interactiveChildren")&&(this._display.interactiveChildren=this.get("interactiveChildren",!1)),this.isDirty("layout")&&(this._prevWidth=0,this._prevHeight=0,this.markDirtyBounds(),this._prevSettings.layout&&this.children.each((function(e){e.removePrivate("x"),e.removePrivate("y")}))),(this.isDirty("paddingTop")||this.isDirty("paddingBottom")||this.isDirty("paddingLeft")||this.isDirty("paddingRight"))&&this.children.each((function(e){e.markDirtyPosition()})),this.isDirty("maskContent")){var e=this._childrenDisplay,t=this._contentMask;this.get("maskContent")?t||(t=Et.new(this._root,{x:-.5,y:-.5,width:this.width()+1,height:this.height()+1}),this._contentMask=t,e.addChildAt(t._display,0),e.mask=t._display):t&&(e.removeChild(t._display),e.mask=null,t.dispose(),this._contentMask=void 0)}}},{key:"_updateSize",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_updateSize",this).call(this),P(this._percentageSizeChildren,(function(e){e._updateSize()})),P(this._percentagePositionChildren,(function(e){e.markDirtyPosition(),e._updateSize()})),this.updateBackground()}},{key:"updateBackground",value:function(){var e=this.get("background"),t=this._localBounds;if(t&&!this.isHidden()){var i=t.left,n=t.top,r=t.right-i,a=t.bottom-n,o=this.get("maxWidth"),s=this.get("maxHeight");s&&a>s&&(a=s),o&&r>o&&(r=o);var l=this.width(),u=this.height();e&&(e.setAll({width:r,height:a,x:i,y:n}),this._display.interactive&&(e._display.interactive=!0));var c=this._contentMask;c&&c.setAll({width:l+1,height:u+1});var h=this.get("verticalScrollbar");if(h){h.set("height",u),h.set("x",l-h.width()-h.get("marginRight",0)),h.set("end",h.get("start",0)+u/this._contentHeight);var d=h.get("background");d&&d.setAll({width:h.width(),height:u});var f=!0;this._contentHeight<=u&&(f=!1),h.setPrivate("visible",f)}}}},{key:"_applyThemes",value:function(){return!!(0,a.Z)((0,o.Z)(i.prototype),"_applyThemes",this).call(this)&&(this.eachChildren((function(e){e._applyThemes()})),!0)}},{key:"_applyState",value:function(e){(0,a.Z)((0,o.Z)(i.prototype),"_applyState",this).call(this,e),this.get("setStateOnChildren")&&this.eachChildren((function(t){t.states.apply(e)}))}},{key:"_applyStateAnimated",value:function(e,t){(0,a.Z)((0,o.Z)(i.prototype),"_applyStateAnimated",this).call(this,e,t),this.get("setStateOnChildren")&&this.eachChildren((function(i){i.states.applyAnimate(e,t)}))}},{key:"innerWidth",value:function(){return this.width()-this.get("paddingRight",0)-this.get("paddingLeft",0)}},{key:"innerHeight",value:function(){return this.height()-this.get("paddingTop",0)-this.get("paddingBottom",0)}},{key:"_getBounds",value:function(){var e=this.get("width"),t=this.get("height"),i=this.getPrivate("width"),n=this.getPrivate("height"),r={left:0,top:0,right:this.width(),bottom:this.height()},a=this.get("layout"),o=!1,s=!1;if((a instanceof Bt||a instanceof Rt)&&(o=!0),a instanceof jt&&(s=!0),null==e&&null==i||null==t&&null==n||this.get("verticalScrollbar")){var l=Number.MAX_VALUE,u=l,c=-l,h=l,d=-l,f=this.get("paddingLeft",0),p=this.get("paddingTop",0),v=this.get("paddingRight",0),y=this.get("paddingBottom",0);this.children.each((function(e){if("absolute"!=e.get("position")&&e.get("isMeasured")){var t=e.adjustedLocalBounds(),i=e.x(),n=e.y(),r=i+t.left,a=i+t.right,l=n+t.top,f=n+t.bottom;o&&(r-=e.get("marginLeft",0),a+=e.get("marginRight",0)),s&&(l-=e.get("marginTop",0),f+=e.get("marginBottom",0)),r<u&&(u=r),a>c&&(c=a),l<h&&(h=l),f>d&&(d=f)}})),u==l&&(u=0),c==-l&&(c=0),h==l&&(h=0),d==-l&&(d=0),r.left=u-f,r.top=h-p,r.right=c+v,r.bottom=d+y}this._contentWidth=r.right-r.left,this._contentHeight=r.bottom-r.top,w(e)&&(r.left=0,r.right=e),w(i)&&(r.left=0,r.right=i),w(t)&&(r.top=0,r.bottom=t),w(n)&&(r.top=0,r.bottom=n),this._localBounds=r}},{key:"_updateBounds",value:function(){var e=this.get("layout");e&&e.updateContainer(this),(0,a.Z)((0,o.Z)(i.prototype),"_updateBounds",this).call(this),this.updateBackground()}},{key:"markDirty",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"markDirty",this).call(this),this._root._addDirtyParent(this)}},{key:"_prepareChildren",value:function(){var e=this.innerWidth(),t=this.innerHeight();if(e!=this._prevWidth||t!=this._prevHeight){var i=this.get("layout"),n=!1,r=!1;i&&((i instanceof Bt||i instanceof Rt)&&(n=!0),i instanceof jt&&(r=!0)),P(this._percentageSizeChildren,(function(i){if(!n){var a=i.get("width");a instanceof K&&i.setPrivate("width",a.value*e)}if(!r){var o=i.get("height");o instanceof K&&i.setPrivate("height",o.value*t)}})),P(this._percentagePositionChildren,(function(e){e.markDirtyPosition(),e.markDirtyBounds()})),this._prevWidth=e,this._prevHeight=t,this._sizeDirty=!0,this.updateBackground()}this._handleStates()}},{key:"_updateChildren",value:function(){var e=this;if(this.isDirty("html")){var t=this.get("html");t&&""!==t?this._root._setHTMLContent(this,zt(this,this.get("html",""))):this._root._removeHTMLContent(this),this._root._positionHTMLElement(this)}if(this.isDirty("verticalScrollbar")){var i=this.get("verticalScrollbar");if(i){i._setParent(this),i.children.removeValue(i.startGrip),i.children.removeValue(i.endGrip),this.set("maskContent",!0),this.set("paddingRight",i.width()+i.get("marginRight",0)+i.get("marginLeft",0));var n=this.get("background");n||(n=this.set("background",Et.new(this._root,{themeTags:["background"],fillOpacity:0,fill:this._root.interfaceColors.get("alternativeBackground")}))),this._vsbd0=this.events.on("wheel",(function(t){var n=t.originalEvent;if(ge(n,e)){n.preventDefault();var r=n.deltaY/5e3,a=i.get("start",0),o=i.get("end",1);a+r<=0&&(r=-a),o+r>=1&&(r=1-o),a+r>=0&&o+r<=1&&(i.set("start",a+r),i.set("end",o+r))}})),this._disposers.push(this._vsbd0),this._vsbd1=i.events.on("rangechanged",(function(){var t=e._contentHeight,n=e._childrenDisplay,r=e._contentMask;n.y=-i.get("start")*t,n.markDirtyLayer(),r&&(r._display.y=-n.y,n.mask=r._display)})),this._disposers.push(this._vsbd1),this._display.addChild(i._display)}else{var r=this._prevSettings.verticalScrollbar;r&&(this._display.removeChild(r._display),this._vsbd0&&this._vsbd0.dispose(),this._vsbd1&&this._vsbd1.dispose(),this._childrenDisplay.y=0,this.setPrivate("height",void 0),this.set("maskContent",!1),this.set("paddingRight",void 0))}}if(this.isDirty("background")){var a=this._prevSettings.background;a&&this._display.removeChild(a._display);var o=this.get("background");o instanceof At&&(o.set("isMeasured",!1),o._setParent(this),this._display.addChildAt(o._display,0))}if(this.isDirty("mask")){var s=this.get("mask"),l=this._prevSettings.mask;if(l&&(this._display.removeChild(l._display),l!=s&&l.dispose()),s){var u=s.parent;u&&u.children.removeValue(s),s._setParent(this),this._display.addChildAt(s._display,0),this._childrenDisplay.mask=s._display}}}},{key:"_processTemplateField",value:function(){(0,a.Z)((0,o.Z)(i.prototype),"_processTemplateField",this).call(this),this.children.each((function(e){e._processTemplateField()}))}},{key:"walkChildren",value:function(e){this.children.each((function(t){t instanceof i&&t.walkChildren(e),e(t)}))}},{key:"eachChildren",value:function(e){var t=this.get("background");t&&e(t);var i=this.get("verticalScrollbar");i&&e(i);var n=this.get("mask");n&&e(n),this.children.values.forEach((function(t){e(t)}))}},{key:"allChildren",value:function(){var e=[];return this.eachChildren((function(t){e.push(t)})),e}},{key:"_setDataItem",value:function(e){var t=e!==this._dataItem;(0,a.Z)((0,o.Z)(i.prototype),"_setDataItem",this).call(this,e);var n=this.get("html","");n&&""!==n&&t&&this._root._setHTMLContent(this,zt(this,n))}}]),i}(At);Object.defineProperty(Yt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Container"}),Object.defineProperty(Yt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:At.classNames.concat([Yt.className])});var Ut=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"textStyle",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeTextStyle()}),Object.defineProperty((0,l.Z)(e),"_display",{enumerable:!0,configurable:!0,writable:!0,value:e._root._renderer.makeText("",e.textStyle)}),Object.defineProperty((0,l.Z)(e),"_textStyles",{enumerable:!0,configurable:!0,writable:!0,value:["textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale"]}),Object.defineProperty((0,l.Z)(e),"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,d.Z)(i,[{key:"_updateBounds",value:function(){if(this.get("text"))(0,a.Z)((0,o.Z)(i.prototype),"_updateBounds",this).call(this);else{this._adjustedLocalBounds={left:0,right:0,top:0,bottom:0}}}},{key:"_changed",value:function(){var e=this;(0,a.Z)((0,o.Z)(i.prototype),"_changed",this).call(this),this._display.clear();var t=this.textStyle;if(this.isDirty("opacity")){var n=this.get("opacity",1);this._display.alpha=n}if((this.isDirty("text")||this.isDirty("populateText"))&&(this._display.text=this._getText(),this.markDirtyBounds(),"tooltip"==this.get("role")&&this._root.updateTooltip(this)),this.isPrivateDirty("tooltipElement")&&this.getPrivate("tooltipElement")&&this._disposers.push(new N((function(){e._root._removeTooltipElement(e)}))),this.isDirty("width")&&(t.wordWrapWidth=this.width(),this.markDirtyBounds()),this.isDirty("oversizedBehavior")&&(t.oversizedBehavior=this.get("oversizedBehavior","none"),this.markDirtyBounds()),this.isDirty("breakWords")&&(t.breakWords=this.get("breakWords",!1),this.markDirtyBounds()),this.isDirty("ellipsis")&&(t.ellipsis=this.get("ellipsis"),this.markDirtyBounds()),this.isDirty("ignoreFormatting")&&(t.ignoreFormatting=this.get("ignoreFormatting",!1),this.markDirtyBounds()),this.isDirty("minScale")&&(t.minScale=this.get("minScale",0),this.markDirtyBounds()),this.isDirty("fill")){var r=this.get("fill");r&&(t.fill=r)}if(this.isDirty("fillOpacity")){var s=this.get("fillOpacity",1);s&&(t.fillOpacity=s)}(this.isDirty("maxWidth")||this.isPrivateDirty("maxWidth"))&&(t.maxWidth=this.get("maxWidth",this.getPrivate("maxWidth")),this.markDirtyBounds()),(this.isDirty("maxHeight")||this.isPrivateDirty("maxHeight"))&&(t.maxHeight=this.get("maxHeight",this.getPrivate("maxHeight")),this.markDirtyBounds()),P(this._textStyles,(function(i){e._dirty[i]&&(t[i]=e.get(i),e.markDirtyBounds())})),t.fontSize=this.get("fontSize"),t.fontFamily=this.get("fontFamily"),this._display.style=t,this.isDirty("role")&&"tooltip"==this.get("role")&&this._root.updateTooltip(this)}},{key:"_getText",value:function(){var e=this.get("text","");return this.get("populateText")?zt(this,e):e}},{key:"markDirtyText",value:function(){this._display.text=this._getText(),"tooltip"==this.get("role")&&this._root.updateTooltip(this),this.markDirtyBounds(),this.markDirty()}},{key:"_setDataItem",value:function(e){(0,a.Z)((0,o.Z)(i.prototype),"_setDataItem",this).call(this,e),this.get("populateText")&&this.markDirtyText()}},{key:"getNumberFormatter",value:function(){return this.parent?this.parent.getNumberFormatter():(0,a.Z)((0,o.Z)(i.prototype),"getNumberFormatter",this).call(this)}},{key:"getDateFormatter",value:function(){return this.parent?this.parent.getDateFormatter():(0,a.Z)((0,o.Z)(i.prototype),"getDateFormatter",this).call(this)}},{key:"getDurationFormatter",value:function(){return this.parent?this.parent.getDurationFormatter():(0,a.Z)((0,o.Z)(i.prototype),"getDurationFormatter",this).call(this)}}]),i}(At);Object.defineProperty(Ut,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Text"}),Object.defineProperty(Ut,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:At.classNames.concat([Ut.className])});var qt=function(e){(0,u.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,h.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,l.Z)(e),"_text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,l.Z)(e),"_textKeys",{enumerable:!0,configurable:!0,writable:!0,value:["text","fill","fillOpacity","textAlign","fontFamily","fontSize","fontStyle","fontWeight","fontStyle","fontVariant","textDecoration","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","shadowOpacity","lineHeight","baselineRatio","direction","textBaseline","oversizedBehavior","breakWords","ellipsis","minScale","populateText","role","ignoreFormatting"]}),e}return(0,d.Z)(i,[{key:"text",get:function(){return this._text}},{key:"_afterNew",value:function(){var e=this;(0,a.Z)((0,o.Z)(i.prototype),"_afterNew",this).call(this),this._makeText(),P(this._textKeys,(function(t){var i=e.get(t);null!=i&&e._text.set(t,i)})),""!==this.get("html","")&&this._text.set("text",""),this.onPrivate("maxWidth",(function(){e._setMaxDimentions()})),this.onPrivate("maxHeight",(function(){e._setMaxDimentions()}))}},{key:"_makeText",value:function(){this._text=this.children.push(Ut.new(this._root,{}))}},{key:"_updateChildren",value:function(){var e=this;if((0,a.Z)((0,o.Z)(i.prototype),"_updateChildren",this).call(this),P(this._textKeys,(function(t){e._text.set(t,e.get(t))})),this.isDirty("maxWidth")&&this._setMaxDimentions(),this.isDirty("maxHeight")&&this._setMaxDimentions(),this.isDirty("rotation")&&this._setMaxDimentions(),""!==this.get("html","")?this._text.set("text",""):this._text.set("text",this.get("text")),this.isDirty("textAlign")||this.isDirty("width")){var t,n=this.get("textAlign");null!=this.get("width")?t="right"==n?Q:"center"==n?J:0:"left"==n||"start"==n?t=this.get("paddingLeft"):"right"!=n&&"end"!=n||(t=-this.get("paddingRight")),this.text.set("x",t)}}},{key:"_setMaxDimentions",value:function(){var e=this.get("rotation"),t=90==e||270==e||-90==e,i=this.get("maxWidth",this.getPrivate("maxWidth",1/0));w(i)?this.text.set(t?"maxHeight":"maxWidth",i-this.get("paddingLeft",0)-this.get("paddingRight",0)):this.text.set(t?"maxHeight":"maxWidth",void 0);var n=this.get("maxHeight",this.getPrivate("maxHeight",1/0));w(n)?this.text.set(t?"maxWidth":"maxHeight",n-this.get("paddingTop",0)-this.get("paddingBottom",0)):this.text.set(t?"maxWidth":"maxHeight",void 0)}},{key:"_setDataItem",value:function(e){(0,a.Z)((0,o.Z)(i.prototype),"_setDataItem",this).call(this,e),this._markDirtyKey("text"),this.text.get("populateText")&&this.text.markDirtyText()}},{key:"getText",value:function(){return this._text._getText()}}]),i}(Yt);Object.defineProperty(qt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Label"}),Object.defineProperty(qt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Yt.classNames.concat([qt.className])});var Gt=function(){function e(t,i){if((0,h.Z)(this,e),Object.defineProperty(this,"_root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rules",{enumerable:!0,configurable:!0,writable:!0,value:{}}),this._root=t,!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`")}return(0,d.Z)(e,[{key:"setupDefaultRules",value:function(){}},{key:"_lookupRules",value:function(e){return this._rules[e]}},{key:"ruleRaw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this._rules[e];i||(i=this._rules[e]=[]),t.sort(vt);var n=function(e,t){for(var i=0,n=e.length,r=!1;i<n;){var a=i+n>>1,o=t(e[a]);o<0?i=a+1:0===o?(r=!0,i=a+1):n=a}return{found:r,index:r?i-1:i}}(i,(function(e){var i=vt(e.tags.length,t.length);return 0===i?yt(e.tags,t,vt):i})),r=n.index;if(n.found)return i[r].template;var a=Zt.new({});return i.splice(r,0,{tags:t,template:a}),a}},{key:"rule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.ruleRaw(e,t)}}],[{key:"new",value:function(e){var t=new this(e,!0);return t.setupDefaultRules(),t}}]),e}()},32390:function(e,t,i){i.d(t,{T:function(){return d}});var n=i(97326),r=i(15671),a=i(43144),o=i(11752),s=i(61120),l=i(60136),u=i(29388),c=i(24390),h=function(e){(0,l.Z)(i,e);var t=(0,u.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,a.Z)(i,[{key:"_beforeChanged",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"_beforeChanged",this).call(this),(this.isDirty("pointerBaseWidth")||this.isDirty("cornerRadius")||this.isDirty("pointerLength")||this.isDirty("pointerX")||this.isDirty("pointerY")||this.isDirty("width")||this.isDirty("height"))&&(this._clear=!0)}},{key:"_changed",value:function(){if((0,o.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),this._clear){this.markDirtyBounds();var e=this.width(),t=this.height();if(e>0&&t>0){var n=this.get("cornerRadius",8);n=(0,c.aj)(n,0,Math.min(e/2,t/2));var r=this.get("pointerX",0),a=this.get("pointerY",0),l=this.get("pointerBaseWidth",15)/2,u=(r-0)*(t-0)-(a-0)*(e-0),h=(r-0)*(0-t)-(a-t)*(e-0),d=this._display;if(d.moveTo(n,0),u>0&&h>0){var f=Math.round((0,c.aj)(r,n+l,e-l-n));a=(0,c.aj)(a,-1/0,0),d.lineTo(f-l,0),d.lineTo(r,a),d.lineTo(f+l,0)}if(d.lineTo(e-n,0),d.arcTo(e,0,e,n,n),u>0&&h<0){var p=Math.round((0,c.aj)(a,n+l,t-l-n));r=(0,c.aj)(r,e,1/0),d.lineTo(e,n),d.lineTo(e,Math.max(p-l,n)),d.lineTo(r,a),d.lineTo(e,p+l)}if(d.lineTo(e,t-n),d.arcTo(e,t,e-n,t,n),u<0&&h<0){var v=Math.round((0,c.aj)(r,n+l,e-l-n));a=(0,c.aj)(a,t,1/0),d.lineTo(e-n,t),d.lineTo(v+l,t),d.lineTo(r,a),d.lineTo(v-l,t)}if(d.lineTo(n,t),d.arcTo(0,t,0,t-n,n),u<0&&h>0){var y=Math.round((0,c.aj)(a,n+l,t-n-l));r=(0,c.aj)(r,-1/0,0),d.lineTo(0,t-n),d.lineTo(0,y+l),d.lineTo(r,a),d.lineTo(0,Math.max(y-l,n))}d.lineTo(0,n),d.arcTo(0,0,n,0,n),d.closePath()}}}}]),i}(c.a7);Object.defineProperty(h,"className",{enumerable:!0,configurable:!0,writable:!0,value:"PointedRectangle"}),Object.defineProperty(h,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:c.a7.classNames.concat([h.className])});var d=function(e){(0,l.Z)(i,e);var t=(0,u.Z)(i);function i(e,a,o){var s,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,r.Z)(this,i),s=t.call(this,e,a,o,l),Object.defineProperty((0,n.Z)(s),"_fx",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,n.Z)(s),"_fy",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,n.Z)(s),"_label",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,n.Z)(s),"_fillDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,n.Z)(s),"_strokeDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,n.Z)(s),"_labelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,n.Z)(s),"_w",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,n.Z)(s),"_h",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,n.Z)(s),"_keepHoverDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,n.Z)(s),"_htmlContentHovered",{enumerable:!0,configurable:!0,writable:!0,value:!1}),s}return(0,a.Z)(i,[{key:"_afterNew",value:function(){var e=this;this._settings.themeTags=(0,c.ak)(this._settings.themeTags,["tooltip"]),(0,o.Z)((0,s.Z)(i.prototype),"_afterNew",this).call(this),this.set("background",h.new(this._root,{themeTags:["tooltip","background"]})),this._label=this.children.push(c.al.new(this._root,{})),this._disposers.push(this._label.events.on("boundschanged",(function(){e._updateBackground()}))),this._disposers.push(this.on("bounds",(function(){e._updateBackground()}))),this._updateTextColor(),this._root.tooltipContainer.children.push(this),this.hide(0),this._disposers.push(this.label.onPrivate("htmlElement",(function(t){t&&((0,c.z)(t,"pointerover",(function(t){e._htmlContentHovered=!0})),(0,c.z)(t,"pointerout",(function(t){e._htmlContentHovered=!1})))}))),this._root._tooltips.push(this)}},{key:"label",get:function(){return this._label}},{key:"dispose",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"dispose",this).call(this),(0,c.ad)(this._root._tooltips,this)}},{key:"_updateChildren",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"_updateChildren",this).call(this),(this.isDirty("pointerOrientation")||this.isPrivateDirty("minWidth")||this.isPrivateDirty("minHeight"))&&this.get("background")._markDirtyKey("width"),null!=this.get("labelText")&&this.label.set("text",this.get("labelText")),null!=this.get("labelHTML")&&this.label.set("html",this.get("labelHTML"))}},{key:"_changed",value:function(){var e=this;if((0,o.Z)((0,s.Z)(i.prototype),"_changed",this).call(this),(this.isDirty("pointTo")||this.isDirty("pointerOrientation"))&&this._updateBackground(),this.isDirty("tooltipTarget")&&this.updateBackgroundColor(),this.isDirty("keepTargetHover"))if(this.get("keepTargetHover")){var t=this.get("background");this._keepHoverDp=new c.M([t.events.on("pointerover",(function(t){var i=e.get("tooltipTarget");i&&(i.parent&&i.parent.getPrivate("tooltipTarget")==i&&(i=i.parent),i.hover())})),t.events.on("pointerout",(function(t){var i=e.get("tooltipTarget");i&&(i.parent&&i.parent.getPrivate("tooltipTarget")==i&&(i=i.parent),e._htmlContentHovered||i.unhover())}))])}else this._keepHoverDp&&(this._keepHoverDp.dispose(),this._keepHoverDp=void 0)}},{key:"_onShow",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"_onShow",this).call(this),this.updateBackgroundColor()}},{key:"updateBackgroundColor",value:function(){var e,t,i=this,n=this.get("tooltipTarget"),r=this.get("background");n&&r&&(e=n.get("fill"),t=n.get("stroke"),null==e&&(e=t),this.get("getFillFromSprite")&&(this._fillDp&&this._fillDp.dispose(),null!=e&&r.set("fill",e),this._fillDp=n.on("fill",(function(e){null!=e&&(r.set("fill",e),i._updateTextColor(e))})),this._disposers.push(this._fillDp)),this.get("getStrokeFromSprite")&&(this._strokeDp&&this._strokeDp.dispose(),null!=e&&r.set("stroke",e),this._strokeDp=n.on("fill",(function(e){null!=e&&r.set("stroke",e)})),this._disposers.push(this._strokeDp)),this.get("getLabelFillFromSprite")&&(this._labelDp&&this._labelDp.dispose(),null!=e&&this.label.set("fill",e),this._labelDp=n.on("fill",(function(e){null!=e&&i.label.set("fill",e)})),this._disposers.push(this._labelDp))),this._updateTextColor(e)}},{key:"_updateTextColor",value:function(e){this.get("autoTextColor")&&(null==e&&(e=this.get("background").get("fill")),null==e&&(e=this._root.interfaceColors.get("background")),e instanceof c.C&&this.label.set("fill",c.C.alternative(e,this._root.interfaceColors.get("alternativeText"),this._root.interfaceColors.get("text"))))}},{key:"_setDataItem",value:function(e){(0,o.Z)((0,s.Z)(i.prototype),"_setDataItem",this).call(this,e),this.label._setDataItem(e)}},{key:"_updateBackground",value:function(){(0,o.Z)((0,s.Z)(i.prototype),"updateBackground",this).call(this);var e=this._root.container;if(e){var t=.5,n=.5,r=this.get("centerX");r instanceof c.Q&&(t=r.value);var a=this.get("centerY");a instanceof c.Q&&(n=a.value);var l=e.width(),u=e.height(),d=this.parent,f=0,p=0;if(d){f=d.x(),p=d.y();var v=d.get("layerMargin");v&&(f+=v.left||0,p+=v.top||0,l+=(v.left||0)+(v.right||0),u+=(v.top||0)+(v.bottom||0))}var y=this.get("bounds",{left:-f,top:-p,right:l-f,bottom:u-p});this._updateBounds();var g=this.width(),m=this.height();0===g&&(g=this._w),0===m&&(m=this._h);var b=this.get("pointTo",{x:l/2,y:u/2}),_=b.x,w=b.y,k=this.get("pointerOrientation"),x=this.get("background"),M=0,C=0,Z=0;x instanceof h&&(M=x.get("pointerLength",0),Z=C=x.get("strokeWidth",0)/2,x.set("width",g),x.set("height",m));var P,A,T=y.right-y.left,I=y.bottom-y.top;"horizontal"==k||"left"==k||"right"==k?(C=0,"horizontal"==k?_>y.left+T/2?(_-=g*(1-t)+M,Z*=-1):_+=g*t+M:"left"==k?_+=g*(1-t)+M:(_-=g*t+M,Z*=-1)):(Z=0,"vertical"==k?w>y.top+m/2+M?w-=m*(1-n)+M:(w+=m*n+M,C*=-1):"down"==k?w-=m*(1-n)+M:(w+=m*n+M,C*=-1)),_=(0,c.aj)(_,y.left+g*t,y.left+T-g*(1-t))+Z,w=(0,c.aj)(w,y.top+m*n,y.top+I-m*(1-n))-C,P=b.x-_+g*t+Z,A=b.y-w+m*n-C,this._fx=_,this._fy=w;var O=this.get("animationDuration",0);if(O>0&&this.get("visible")&&this.get("opacity")>.1){var D=this.get("animationEasing");this.animate({key:"x",to:_,duration:O,easing:D}),this.animate({key:"y",to:w,duration:O,easing:D})}else this.set("x",_),this.set("y",w);x instanceof h&&(x.set("pointerX",P),x.set("pointerY",A)),g>0&&(this._w=g),m>0&&(this._h=m)}}}]),i}(c.a3);Object.defineProperty(d,"className",{enumerable:!0,configurable:!0,writable:!0,value:"Tooltip"}),Object.defineProperty(d,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:c.a3.classNames.concat([d.className])})},70116:function(e,t,i){var n;i.d(t,{Y:function(){return n}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(n||(n={}))},86950:function(e,t,i){function n(e){return"h"in e&&"s"in e&&"v"in e}function r(e){return"l"in e&&"a"in e&&"b"in e}function a(e){return"l"in e&&"c"in e&&"h"in e}function o(e){return"x"in e&&"y"in e&&"z"in e}i.d(t,{Y3:function(){return m},_Y:function(){return g},sJ:function(){return b},xr:function(){return y}});var s=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){var i,n,r=[];if(e[0].length!==t.length)throw new Error("dimensions do not match");var a=e.length,o=e[0].length,s=0;for(i=0;i<a;i++){for(s=0,n=0;n<o;n++)s+=e[i][n]*t[n];r.push(s)}return r}function c(e){var t=[e.r/255,e.g/255,e.b/255].map((function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)})),i=u(s,t);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function h(e){var t=u(l,[e.x/100,e.y/100,e.z/100]).map((function(e){var t=e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055;return Math.min(1,Math.max(t,0))}));return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function d(e){var t=[e.x/95.047,e.y/100,e.z/108.883].map((function(e){return e>Math.pow(6/29,3)?Math.pow(e,1/3):1/3*Math.pow(29/6,2)*e+4/29}));return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function f(e){var t=e.l,i=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map((function(e){return e>6/29?Math.pow(e,3):3*Math.pow(6/29,2)*(e-4/29)}));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function p(e){return function(e){var t=e.l,i=e.a,n=e.b,r=Math.sqrt(i*i+n*n),a=Math.atan2(n,i);return{l:t,c:r,h:a=a>0?a:a+2*Math.PI}}(d(c(e)))}function v(e){return h(f(function(e){var t=e.l,i=e.c,n=e.h;return{l:t,a:i*Math.cos(n),b:i*Math.sin(n)}}(e)))}function y(e){return function(e){return"r"in e&&"g"in e&&"b"in e}(e)?e:a(e)?v(e):r(e)?function(e){return h(f(e))}(e):o(e)?h(e):n(e)?function(e){var t,i=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,a=r*n,o=a*(1-Math.abs(i%2-1));switch(Math.floor(i)){case 0:t={r:a,g:o,b:0};break;case 1:t={r:o,g:a,b:0};break;case 2:t={r:0,g:a,b:o};break;case 3:t={r:0,g:o,b:a};break;case 4:t={r:o,g:0,b:a};break;case 5:case 6:t={r:a,g:0,b:o};break;default:t={r:0,g:0,b:0}}return t.r=Math.round(t.r+r-a),t.g=Math.round(t.g+r-a),t.b=Math.round(t.b+r-a),t}(e):e}function g(e){return n(e)?e:function(e){var t=e.r,i=e.g,n=e.b,r=Math.max(t,i,n),a=r-Math.min(t,i,n),o=r,s=0===a?0:r===t?(i-n)/a%6:r===i?(n-t)/a+2:(t-i)/a+4,l=0===a?0:a/o;return s<0&&(s+=6),{h:s*=60,s:l*=100,v:o*=100/255}}(y(e))}function m(e){return r(e)?e:function(e){return d(c(e))}(y(e))}function b(e){return a(e)?e:p(y(e))}},71277:function(e,t,i){function n(e){return e=e||globalThis.location.hostname,u.some((function(t){var i;return null!=(null===(i=e)||void 0===i?void 0:i.match(t))}))}function r(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(a)||null!=t.match(s)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(o)||null!=t.match(l)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}i.d(t,{XO:function(){return n},pJ:function(){return r}});var a=/^devext.arcgis.com$/,o=/^qaext.arcgis.com$/,s=/^[\w-]*\.mapsdevext.arcgis.com$/,l=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,a,o,/^jsapps.esri.com$/,s,l]},14916:function(e,t,i){function n(e,t,i,n){var r=null,a=1e3;"number"==typeof t?(a=t,n=i):(r=null!==t&&void 0!==t?t:null,a=i);var o,s=0,l=function(){s=0,e.apply(n,o)},u=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];r&&r.apply(n,t),o=t,a?s||(s=setTimeout(l,a)):l()};return u.remove=function(){s&&(clearTimeout(s),s=0)},u.forceUpdate=function(){s&&(clearTimeout(s),l())},u.hasPendingUpdates=function(){return!!s},u}i.d(t,{P:function(){return n}})},11812:function(e,t,i){i.d(t,{Z:function(){return y}});var n,r=i(15671),a=i(43144),o=i(60136),s=i(29388),l=i(27366),u=i(46784),c=i(49861),h=i(25243),d=(i(63780),i(93169),i(69912));function f(e){var t=e.exifInfo,i=e.exifName,n=e.tagName;if(!t||!i||!n)return null;var r=t.find((function(e){return e.name===i}));return r?function(e){var t=e.tagName,i=e.tags;if(!i||!t)return null;var n=i.find((function(e){return e.name===t}));return n&&n.value||null}({tagName:n,tags:r.tags}):null}var p={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}},v=n=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this,e)).contentType=null,n.exifInfo=null,n.id=null,n.globalId=null,n.keywords=null,n.name=null,n.parentGlobalId=null,n.parentObjectId=null,n.size=null,n.url=null,n}return(0,a.Z)(i,[{key:"orientationInfo",get:function(){var e=f({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return p[e]||null}},{key:"clone",value:function(){return new n({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}}]),i}(u.wq);(0,l._)([(0,c.Cb)({type:String})],v.prototype,"contentType",void 0),(0,l._)([(0,c.Cb)()],v.prototype,"exifInfo",void 0),(0,l._)([(0,c.Cb)({readOnly:!0})],v.prototype,"orientationInfo",null),(0,l._)([(0,c.Cb)({type:h.z8})],v.prototype,"id",void 0),(0,l._)([(0,c.Cb)({type:String})],v.prototype,"globalId",void 0),(0,l._)([(0,c.Cb)({type:String})],v.prototype,"keywords",void 0),(0,l._)([(0,c.Cb)({type:String})],v.prototype,"name",void 0),(0,l._)([(0,c.Cb)({json:{read:!1}})],v.prototype,"parentGlobalId",void 0),(0,l._)([(0,c.Cb)({json:{read:!1}})],v.prototype,"parentObjectId",void 0),(0,l._)([(0,c.Cb)({type:h.z8})],v.prototype,"size",void 0),(0,l._)([(0,c.Cb)({json:{read:!1}})],v.prototype,"url",void 0);var y=v=n=(0,l._)([(0,d.j)("esri.layers.support.AttachmentInfo")],v)},36009:function(e,t,i){i.r(t),i.d(t,{getPatternDescriptor:function(){return I},getSizeFromOptions:function(){return L},getSymbolLayerFill:function(){return T},previewSymbol3D:function(){return R}});var n=i(74165),r=i(1413),a=i(15861),o=i(65905),s=i(86950),l=(i(93169),i(10064)),u=i(32718),c=i(92026),h=i(66978),d=i(17842),f=i(79563),p=i(29122),v=i(73627),y=i(37817),g=i(69157),m=i(74579),b=i(19951),_=y.b_.size,w=y.b_.maxSize,k=y.b_.maxOutlineSize,x=y.b_.lineWidth,M=y.b_.tallSymbolWidth;function C(e){var t=e.outline,i=null!=e.material?e.material.color:null,n=null!=i?i.toHex():null;if(null==t||"pattern"in t&&null!=t.pattern&&"style"===t.pattern.type&&"none"===t.pattern.style)return"fill"===e.type&&"#ffffff"===n?{color:"#bdc3c7",width:.75}:null;var r=(0,d.F2)(t.size)||0;return{color:"rgba("+(null!=t.color?t.color.toRgba():"255,255,255,1")+")",width:Math.min(r,k),style:"pattern"in t&&null!=t.pattern&&"style"===t.pattern.type?(0,f.Sp)(t.pattern.style):null,join:"butt",cap:"patternCap"in t?t.patternCap:"butt"}}function Z(){return(Z=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r,a,s,l,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(r=t.thumbnail)||void 0===r||!r.url){e.next=2;break}return e.abrupt("return",t.thumbnail.url);case 2:if("icon"!==i.type){e.next=6;break}if(!(null===i||void 0===i||null===(a=i.resource)||void 0===a?void 0:a.href)){e.next=6;break}return e.abrupt("return",(0,m.nf)(i));case 6:if(s=(0,o.V)("esri/images/Legend/legend3dsymboldefault.png"),!t.styleOrigin||!t.styleOrigin.styleName&&!t.styleOrigin.styleUrl){e.next=13;break}return e.next=10,(0,b.resolveWebStyleSymbol)(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch((function(){return null}));case 10:if(!((u=e.sent)&&"thumbnail"in u&&null!==(l=u.thumbnail)&&void 0!==l&&l.url)){e.next=13;break}return e.abrupt("return",u.thumbnail.url);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.a,n=(0,s._Y)(e),r=n.h,a=n.s/t,o=100-(100-n.v)/t,l=(0,s.xr)({h:r,s:a,v:o});return[l.r,l.g,l.b,i]}function A(e){return"water"===e.type?null==e.color?null:e.color:null==e.material||null==e.material.color?null:e.material.color}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=A(e);if(!i){if("fill"===e.type)return null;var n=f.Ne.r,r=(0,y.uH)(n,t);return[r,r,r,100]}for(var a=i.toRgba(),o=0;o<3;o++)a[o]=(0,y.uH)(a[o],t);return a}function I(e,t){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)((0,n.Z)().mark((function e(t,i){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!==(r=t.style)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,(0,f.Od)((0,o.V)("esri/symbols/patterns/".concat(r,".png")),i.toCss(!0));case 5:return e.t0=e.sent,e.abrupt("return",{type:"pattern",x:0,y:0,src:e.t0,width:5,height:5});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return e.outline?C(e):{color:"rgba(0, 0, 0, 1)",width:1.5}}function F(e,t){var i=A(e);if(!i)return null;var n="rgba(";return n+=(0,y.uH)(i.r,t)+",",n+=(0,y.uH)(i.g,t)+",",(n+=(0,y.uH)(i.b,t)+",")+i.a+");"}function E(e,t){var i=F(e,t);return i?"pattern"in e&&null!=e.pattern&&"style"===e.pattern.type&&"none"===e.pattern.style?null:{color:i,width:Math.min(e.size?(0,d.F2)(e.size):.75,k),style:"pattern"in e&&null!=e.pattern&&"style"===e.pattern.type?(0,f.Sp)(e.pattern.style):null,cap:"cap"in e?e.cap:null,join:"join"in e?"miter"===e.join?(0,d.F2)(2):e.join:null}:{}}function S(e,t,i){var n=null!=i?.75*i:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:e,offset:0},{color:t,offset:1}]}}function L(e){var t="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null;return t?(0,d.F2)(t):null}function B(e,t){var i,n,r=L(t),a=null!==t&&void 0!==t&&t.maxSize?(0,d.F2)(t.maxSize):null,o=null!==(i=null===t||void 0===t?void 0:t.disableUpsampling)&&void 0!==i&&i,s=e.symbolLayers,l=[],c=0,f=0,m=s.at(-1);return m&&"icon"===m.type&&(n=m.size&&(0,d.F2)(m.size)),s.forEach((function(i){if("icon"===i.type||"object"===i.type){var s="icon"===i.type?i.size&&(0,d.F2)(i.size):0,u=r||s?Math.ceil(Math.min(r||s,a||w)):_;if(i&&i.resource&&i.resource.href){var h=function(e,t){return Z.apply(this,arguments)}(e,i).then((function(e){var t=i.get("material.color"),n=function(e){return"icon"===e.type?"multiply":"tint"}(i);return(0,g.rG)(e,u,t,n,o)})).then((function(e){var t=e.width,i=e.height;return c=Math.max(c,t),f=Math.max(f,i),[{shape:{type:"image",x:0,y:0,width:t,height:i,src:e.url},fill:null,stroke:null}]}));l.push(h)}else{var m,b=u;"icon"===i.type&&n&&r&&(b=u*(s/n));var k="tall"===(null===t||void 0===t?void 0:t.symbolConfig)||(null===t||void 0===t||null===(m=t.symbolConfig)||void 0===m?void 0:m.isTall)||"object"===i.type&&function(e){var t=e.depth,i=e.height,n=e.width;return 0!==n&&0!==t&&0!==i&&n===t&&null!=n&&null!=i&&n<i}(i);c=Math.max(c,k?M:b),f=Math.max(f,b),l.push(Promise.resolve(function(e,t,i){var n=[];if(!e)return n;switch(e.type){case"icon":var r=t,a=t;switch(e.resource&&e.resource.primitive||p.S){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:T(e,0),stroke:C(e)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[r,0]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:C(e)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*r,0]},{command:"L",values:[r,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:C(e)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*r,0]},{command:"L",values:[.5*r,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[r,.5*a]}]},stroke:D(e)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[r,a]},{command:"M",values:[r,0]},{command:"L",values:[0,a]}]},stroke:D(e)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*r,0]},{command:"L",values:[r,.5*a]},{command:"L",values:[.5*r,a]},{command:"Z",values:[]}]},fill:T(e,0),stroke:C(e)})}break;case"object":switch(e.resource&&e.resource.primitive||v.S){case"cone":var o=S(T(e,0),T(e,-.6),i?M:t),s=(0,y.TE)(t,i);n.push({shape:s[0],fill:o}),n.push({shape:s[1],fill:o});break;case"inverted-cone":var l=T(e,0),u=S(l,T(e,-.6),t),c=(0,y.DY)(t);n.push({shape:c[0],fill:u}),n.push({shape:c[1],fill:l});break;case"cube":var h=(0,y.Pc)(t,i);n.push({shape:h[0],fill:T(e,0)}),n.push({shape:h[1],fill:T(e,-.3)}),n.push({shape:h[2],fill:T(e,-.5)});break;case"cylinder":var d=S(T(e,0),T(e,-.6),i?M:t),f=(0,y.EB)(t,i);n.push({shape:f[0],fill:d}),n.push({shape:f[1],fill:d}),n.push({shape:f[2],fill:T(e,0)});break;case"diamond":var g=(0,y.XX)(t);n.push({shape:g[0],fill:T(e,-.3)}),n.push({shape:g[1],fill:T(e,0)}),n.push({shape:g[2],fill:T(e,-.3)}),n.push({shape:g[3],fill:T(e,-.7)});break;case"sphere":var m=S(T(e,0),T(e,-.6));m.x1=0,m.y1=0,m.x2=.25*t,m.y2=.25*t,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*t},fill:m});break;case"tetrahedron":var b=(0,y.tp)(t);n.push({shape:b[0],fill:T(e,-.3)}),n.push({shape:b[1],fill:T(e,0)}),n.push({shape:b[2],fill:T(e,-.6)})}}return n}(i,b,k)))}}})),(0,h.as)(l).then((function(e){var i=[];return e.forEach((function(e){e.value?i.push(e.value):e.error&&u.Z.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",e.error)})),(0,g.wh)(i,[c,f],{node:t&&t.node,scale:!1,opacity:t&&t.opacity,ariaLabel:null===t||void 0===t?void 0:t.ariaLabel})}))}function j(){return(j=(0,a.Z)((0,n.Z)().mark((function e(t,i){var a,o,s,l,u,h,f,p,v,m,b,k,x,M,Z,O,D,F,S,B,j,R,N,z,H,V,W,Y,U,q,G,X,K;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="mesh-3d"===t.type,o=t.symbolLayers,s=L(i),l=i&&i.maxSize?(0,d.F2)(i.maxSize):null,u=s||_,h=[],f=0,p=0,v=!1,m=0;case 3:if(!(m<o.length)){e.next=42;break}if(b=o.at(m),k=[],!a||"fill"===b.type){e.next=7;break}return e.abrupt("continue",39);case 7:x=y.JZ.fill[0],e.t0=b.type,e.next="fill"===e.t0?11:"line"===e.t0?22:"extrude"===e.t0?28:"water"===e.t0?33:38;break;case 11:if(M=C(b),Z=Math.min(u,l||w),f=Math.max(f,Z),p=Math.max(p,Z),v=!0,O=T(b,0),D="pattern"in b?b.pattern:null,F=A(b),e.t1=!a&&null!=D&&"style"===D.type&&"solid"!==D.style&&F,!e.t1){e.next=20;break}return e.next=19,I(D,F);case 19:O=e.sent;case 20:return k.push({shape:x,fill:O,stroke:M}),e.abrupt("break",38);case 22:if(null!=(S=E(b,0))){e.next=25;break}return e.abrupt("break",38);case 25:return B={stroke:S,shape:x},f=Math.max(f,_),p=Math.max(p,_),k.push(B),e.abrupt("break",38);case 28:return j=(0,r.Z)({join:"round",width:1},E(b,-.4)),R=T(b,0),N=T(b,-.2),z=Math.min(u,l||w),H=(0,y.EV)(z),j.width=1,k.push({shape:H[0],fill:N,stroke:j}),k.push({shape:H[1],fill:N,stroke:j}),k.push({shape:H[2],fill:R,stroke:j}),V=_,W=.7*_+.5*z,f=Math.max(f,V),p=Math.max(p,W),e.abrupt("break",38);case 33:return Y=(0,c.s3)(A(b)),U=P(Y),q=P(Y,2),G=P(Y,3),X=(0,y.ht)(),v=!0,k.push({shape:X[0],fill:U}),k.push({shape:X[1],fill:q}),k.push({shape:X[2],fill:G}),K=Math.min(u,l||w),f=Math.max(f,K),p=Math.max(p,K),e.abrupt("break",38);case 38:h.push(k);case 39:m++,e.next=3;break;case 42:return e.abrupt("return",(0,g.wh)(h,[f,p],{node:i&&i.node,scale:v,opacity:i&&i.opacity,ariaLabel:null===i||void 0===i?void 0:i.ariaLabel}));case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t){if(0===e.symbolLayers.length)return Promise.reject(new l.Z("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(e.type){case"point-3d":return B(e,t);case"line-3d":return function(e,t){var i,n=e.symbolLayers,a=[],o=(0,m.YW)(e),s=L(t),l=(t&&t.maxSize?(0,d.F2)(t.maxSize):null)||k,u=0,c=0;return n.forEach((function(e,t){if(e&&("line"===e.type||"path"===e.type)){var n=[];switch(e.type){case"line":var o=E(e,0);if(null==o)break;var h=o&&o.width||0;0===t&&(i=h);var d=Math.min(s||h,l),f=0===t?d:s?d*(h/i):d,p=f>x/2?2*f:x;c=Math.max(c,f),u=Math.max(u,p),o.width=f,n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*c]},{command:"L",values:[u,.5*c]}]},stroke:o});break;case"path":var v=Math.min(s||_,l),g=T(e,0),m=T(e,-.2),b=F(e,-.4),w=b?{color:b,width:1}:{};if("quad"===e.profile){var k=e.width,M=e.height,C=(0,y.eb)(k&&M?k/M:1,0===M,0===k),Z=(0,r.Z)((0,r.Z)({},w),{},{join:"bevel"});n.push({shape:C[0],fill:m,stroke:Z}),n.push({shape:C[1],fill:m,stroke:Z}),n.push({shape:C[2],fill:g,stroke:Z})}else n.push({shape:y.JZ.pathSymbol3DLayer[0],fill:m,stroke:w}),n.push({shape:y.JZ.pathSymbol3DLayer[1],fill:g,stroke:w});c=Math.max(c,v),u=c}a.push(n)}})),Promise.resolve((0,g.wh)(a,[u,c],{node:t&&t.node,scale:o,opacity:t&&t.opacity,ariaLabel:null===t||void 0===t?void 0:t.ariaLabel}))}(e,t);case"polygon-3d":case"mesh-3d":return function(e,t){return j.apply(this,arguments)}(e,t)}return Promise.reject(new l.Z("symbolPreview: swatchInfo3D","symbol not supported."))}},37817:function(e,t,i){i.d(t,{DY:function(){return d},EB:function(){return c},EV:function(){return s},JZ:function(){return a},Pc:function(){return u},TE:function(){return h},XX:function(){return f},b_:function(){return n},dc:function(){return y},eb:function(){return o},ht:function(){return l},tp:function(){return p},uH:function(){return v}});var n,r=i(51995);!function(e){e[e.size=22]="size",e[e.lineWidth=50]="lineWidth",e[e.maxSize=120]="maxSize",e[e.maxOutlineSize=80]="maxOutlineSize",e[e.tallSymbolWidth=20]="tallSymbolWidth"}(n||(n={}));var a={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function o(e,t,i){var r=n.size,a=r,o=r;e<1?a*=.75:e>1&&(o*=1.25);var s=r,l=r;return t&&i&&(a=o=s=l=0),[{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[i?s:.875*s,0]},{command:"L",values:[i?a-.5*s:0,o-.5*l]},{command:"L",values:[a-.5*s,o-.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,0]},{command:"L",values:[s,t?0:.125*l]},{command:"L",values:[a-.5*s,t?o-.5*l:l]},{command:"L",values:[a-.5*s,o-.5*l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[a-.5*s,o-.5*l]},{command:"L",values:[i?a-.5*s:0,o-.5*l]},{command:"L",values:[i?a-.5*s:0,t?o-.5*l:l]},{command:"L",values:[a-.5*s,t?o-.5*l:l]},{command:"Z",values:[]}]}]}function s(e){var t=n.size,i=.5*e;return[{type:"path",path:[{command:"M",values:[0,.7*t*.5]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[0,.7*t+i-.7*t*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,.7*t]},{command:"L",values:[.3*t,.7*t+i]},{command:"L",values:[t,i]},{command:"L",values:[t,0]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*t,0]},{command:"L",values:[t,0]},{command:"L",values:[.3*t,.7*t]},{command:"L",values:[0,.7*t*.5]},{command:"Z",values:[]}]}]}function l(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function u(e,t){var i=t?n.tallSymbolWidth:e,r=e,a=t?4:6;i<=n.size?i-=.5*a:i-=a;var o=t?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[0,.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*o]},{command:"L",values:[.5*i,o]},{command:"L",values:[.5*i,r]},{command:"L",values:[0,r-.5*o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,o]},{command:"L",values:[.5*i,r]},{command:"L",values:[i,r-.5*o]},{command:"L",values:[i,.5*o]},{command:"Z",values:[]}]}]}function c(e,t){var i=t?n.tallSymbolWidth:e,r=e,a=t?4:6;i<=n.size?i-=.5*a:i-=a;var o=.5*i,s=.15*i,l=r-s;return[{type:"ellipse",cx:.5*i,cy:l,rx:o,ry:s},{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[0,l]},{command:"L",values:[i,l]},{command:"L",values:[i,s]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:s,rx:o,ry:s}]}function h(e,t){var i=t?n.tallSymbolWidth:e,r=e,a=t?4:6;i<=n.size?i-=.5*a:i-=a;var o=.15*i,s=r-o;return[{type:"ellipse",cx:.5*i,cy:s,rx:.5*i,ry:o},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,s]},{command:"L",values:[0,s]},{command:"Z",values:[]}]}]}function d(e){var t=e,i=e;t<n.size?t-=3:t-=6;var r=.15*t;return[{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[t,0]},{command:"L",values:[.5*t,i-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*t,cy:0,rx:.5*t,ry:r}]}function f(e){var t=e,i=e;t<n.size?t-=2:t-=4;var r=t,a=i,o=Math.floor(e/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[r,.5*a-o]},{command:"L",values:[.45*r-o,.5*a+o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,0]},{command:"L",values:[.45*r-o,.5*a+o]},{command:"L",values:[0,.5*a-o]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,.5*a-o]},{command:"L",values:[.45*r-o,.5*a+o]},{command:"L",values:[.45*r,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*r,i]},{command:"L",values:[r,.5*a-o]},{command:"L",values:[.45*r-o,.5*a+o]},{command:"Z",values:[]}]}]}function p(e){var t=e,i=e;i<n.size?i-=1:i-=2;return[{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[t,i]},{command:"L",values:[.45*t,.6*i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*t,0]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[0,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[0,i]},{command:"L",values:[.45*t,.6*i]},{command:"L",values:[t,i]},{command:"Z",values:[]}]}]}function v(e,t){return Math.round(Math.min(Math.max(e+255*t*.75,0),255))}function y(e,t){if(null==e)return new r.Z;if("type"in e&&("linear"===e.type||"pattern"===e.type))return e;var i=new r.Z(e);return new r.Z([v(i.r,t),v(i.g,t),v(i.b,t),i.a])}},69157:function(e,t,i){i.d(t,{rG:function(){return p},wh:function(){return d}});var n=i(19545),r=i(76200),a=i(86950),o=i(10064),s=i(93169),l=(i(42877),i(88367)),u=i(99653),c=i(74579),h=(0,l.E)();function d(e,t,i){var n=Math.ceil(t[0]),r=Math.ceil(t[1]);if(!e.some((function(e){return!!e.length})))return null;var a=i&&i.node||document.createElement("div");return null!=i.opacity&&(a.style.opacity=i.opacity.toString()),null!=i.effectView&&(a.style.filter=(0,c.wJ)(i.effectView)),function(e,t){h.append(e,t),h.detach(t)}(a,(function(){return(0,u.KB)(e,n,r,i)})),a}function f(e,t,i,n,r){if("multiply"===r)e[t]*=i[0],e[t+1]*=i[1],e[t+2]*=i[2],e[t+3]*=i[3];else{var o=(0,a._Y)({r:e[t],g:e[t+1],b:e[t+2]});o.h=n.h,o.s=n.s,o.v=o.v/100*n.v;var s=(0,a.xr)(o);e[t]=s.r,e[t+1]=s.g,e[t+2]=s.b,e[t+3]*=i[3]}}function p(e,t,i,l,u){return function(e,t,i){return e?(0,r.default)(e,{responseType:"image"}).then((function(e){var n=e.data,r=n.width,a=n.height,o=r/a,s=t;if(i){var l=Math.max(r,a);s=Math.min(s,l)}return{image:n,width:o<=1?Math.ceil(s*o):s,height:o<=1?s:Math.ceil(s/o)}})):Promise.reject(new o.Z("renderUtils: imageDataSize","href not provided."))}(e,t,u).then((function(r){var o,u,c=null!==(o=r.width)&&void 0!==o?o:t,h=null!==(u=r.height)&&void 0!==u?u:t;if(r.image&&function(e,t){return!(!e||"ignore"===t)&&("multiply"!==t||255!==e.r||255!==e.g||255!==e.b||1!==e.a)}(i,l)){var d=r.image.width,p=r.image.height;(0,s.Z)("edge")&&/\.svg$/i.test(e)&&(d-=1,p-=1);var v=function(e,t){e=Math.ceil(e),t=Math.ceil(t);var i=document.createElement("canvas");i.width=e,i.height=t,i.style.width=e+"px",i.style.height=t+"px";var n=i.getContext("2d");return n.clearRect(0,0,e,t),n}(c,h);v.drawImage(r.image,0,0,d,p,0,0,c,h);for(var y=v.getImageData(0,0,c,h),g=[i.r/255,i.g/255,i.b/255,i.a],m=(0,a._Y)(i),b=0;b<y.data.length;b+=4)f(y.data,b,g,m,l);v.putImageData(y,0,0),e=v.canvas.toDataURL("image/png")}else{var _=n.id&&n.id.findCredential(e);if(_&&_.token){var w=e.includes("?")?"&":"?";e="".concat(e).concat(w,"token=").concat(_.token)}}return{url:e,width:c,height:h}})).catch((function(){return{url:e,width:t,height:t}}))}},99653:function(e,t,i){i.d(t,{KB:function(){return j}});var n=i(37762),r=i(51995),a=i(93169),o=i(92026),s=i(11245),l=i(22018),u=(i(80975),i(67005)),c="http://www.w3.org/2000/svg",h=0,d=0,f=(0,a.Z)("android"),p=(0,a.Z)("chrome")||f&&f>=4?"auto":"optimizeLegibility",v={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},y=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,g={},m={},b={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},_=Math.PI,w=1;function k(e,t){var i=e*(_/180);return Math.abs(t*Math.sin(i))+Math.abs(t*Math.cos(i))}function x(e){return e.map((function(e){return"".concat(e.command," ").concat(e.values.join(" "))})).join(" ").trim()}function M(e,t,i,n){if(e){if("circle"===e.type)return(0,u.u)("circle",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return(0,u.u)("ellipse",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return(0,u.u)("rect",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return(0,u.u)("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){var r="string"!=typeof e.path?x(e.path):e.path;return(0,u.u)("path",{fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:r})}if("text"===e.type)return(0,o.O3)(n),(0,u.u)("text",{"dominant-baseline":n.dominantBaseline,fill:t,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":p,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:e.x,y:e.y},e.text)}return null}function C(e){var t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){var i="patternId-"+ ++h;t.fill="url(#".concat(i,")"),t.pattern={id:i,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){var n="linearGradientId-"+ ++d;t.fill="url(#".concat(n,")"),t.linearGradient={id:n,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map((function(e){return{offset:e.offset,color:e.color&&new r.Z(e.color).toString()}}))}}else if(e){var a=new r.Z(e);t.fill=a.toString()}return t}function Z(e){var t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new r.Z(e.color).toString()),e.dashArray&&(t.dashArray=e.dashArray),e.dashArray&&(t.dashOffset=e.dashoffset),e.style)){var i=null;if(e.style in b&&(i=b[e.style]),Array.isArray(i)){var n;i=i.slice(0);for(var a=null!==(n=e.width)&&void 0!==n?n:0,o=0;o<i.length;++o)i[o]*=a;if("butt"!==e.cap){for(var s=0;s<i.length;s+=2)i[s]-=a,i[s]<1&&(i[s]=1);for(var l=1;l<i.length;l+=2)i[l]+=a}i=i.join(",")}t.dashArray=i}return t}function P(e,t){var i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(e){var n=e.alignBaseline,r="baseline"===n?"auto":"top"===n?"text-top":"bottom"===n?"hanging":n;i.align=e.align,i.dominantBaseline=r,i.decoration=e.decoration,i.kerning=e.kerning?"auto":"0",i.rotate=e.rotated?"90":"0",(0,o.O3)(t),i.font.style=t.style||"normal",i.font.variant=t.variant||"normal",i.font.weight=t.weight||"normal",i.font.size=t.size&&t.size.toString()||"10pt",i.font.family=t.family||"serif"}return i}function A(e){var t=e.pattern,i=e.linearGradient;if(t)return(0,u.u)("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},(0,u.u)("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(i){var n=i.stops.map((function(e,t){return(0,u.u)("stop",{key:"".concat(t,"-stop"),offset:e.offset,"stop-color":e.color})}));return(0,u.u)("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n)}return null}function T(e,t){if(!e||0===e.length)return null;var i,r=[],a=(0,n.Z)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.shape,l=o.fill,c=o.stroke,h=o.font,d=C(l),f=Z(c),p="text"===s.type?P(s,h):null,v=M(s,d.fill,f,p);v&&r.push(v)}}catch(y){a.e(y)}finally{a.f()}return(0,u.u)("mask",{id:t,maskUnits:"userSpaceOnUse"},(0,u.u)("g",null,r))}function I(e,t,i){return(0,l.t)(e,(0,l.c)(e),[t,i])}function O(e,t,i,n,r){return(0,l.s)(e,(0,l.c)(e),[t,i]),e[4]=e[4]*t-n*t+n,e[5]=e[5]*i-r*i+r,e}function D(e,t){g&&"left"in g?(null!=g.left&&g.left>e&&(g.left=e),(null==g.right||g.right<e)&&(g.right=e),(null==g.top||g.top>t)&&(g.top=t),(null==g.bottom||g.bottom<t)&&(g.bottom=t)):g={left:e,bottom:t,right:e,top:t}}function F(e){var t,i=e.args,n=i.length;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(t=0;t<n;t+=2)D(i[t],i[t+1]);m.x=i[n-2],m.y=i[n-1];break;case"H":for(t=0;t<n;++t)D(i[t],m.y);m.x=i[n-1];break;case"V":for(t=0;t<n;++t)D(m.x,i[t]);m.y=i[n-1];break;case"m":var r=0;"x"in m||(D(m.x=i[0],m.y=i[1]),r=2);for(t=r;t<n;t+=2)D(m.x+=i[t],m.y+=i[t+1]);break;case"l":case"t":for(t=0;t<n;t+=2)D(m.x+=i[t],m.y+=i[t+1]);break;case"h":for(t=0;t<n;++t)D(m.x+=i[t],m.y);break;case"v":for(t=0;t<n;++t)D(m.x,m.y+=i[t]);break;case"c":for(t=0;t<n;t+=6)D(m.x+i[t],m.y+i[t+1]),D(m.x+i[t+2],m.y+i[t+3]),D(m.x+=i[t+4],m.y+=i[t+5]);break;case"s":case"q":for(t=0;t<n;t+=4)D(m.x+i[t],m.y+i[t+1]),D(m.x+=i[t+2],m.y+=i[t+3]);break;case"A":for(t=0;t<n;t+=7)D(i[t+5],i[t+6]);m.x=i[n-2],m.y=i[n-1];break;case"a":for(t=0;t<n;t+=7)D(m.x+=i[t+5],m.y+=i[t+6])}}function E(e,t,i){var n,r=v[e.toLowerCase()];"number"==typeof r&&(r?t.length>=r&&(n={action:e,args:t.slice(0,t.length-t.length%r)},i.push(n),F(n)):(n={action:e,args:[]},i.push(n),F(n)))}function S(e){var t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){var i=(0,o.s3)(function(e){var t=("string"!=typeof e.path?x(e.path):e.path).match(y),i=[];if(g={},m={},!t)return null;for(var n="",r=[],a=t.length,o=0;o<a;++o){var s=t[o],l=parseFloat(s);isNaN(l)?(n&&E(n,r,i),r=[],n=s):r.push(l)}E(n,r,i);var u={x:0,y:0,width:0,height:0};return g&&"left"in g&&(u.x=g.left,u.y=g.top,u.width=g.right-g.left,u.height=g.bottom-g.top),u}(e));t.x=i.x,t.y=i.y,t.width=i.width,t.height=i.height}return t}function L(e){var t,i={x:0,y:0,width:0,height:0},r=null,a=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=(0,n.Z)(e);try{for(s.s();!(t=s.n()).done;){var l=t.value;r?(r.x=Math.min(r.x,l.x),r.y=Math.min(r.y,l.y),a=Math.max(a,l.x+l.width),o=Math.max(o,l.y+l.height)):((r=i).x=l.x,r.y=l.y,a=l.x+l.width,o=l.y+l.height)}}catch(u){s.e(u)}finally{s.f()}return r&&(r.width=a-r.x,r.height=o-r.y),r}function B(e,t,i,n,r,a,o,u,c){var h=(o&&a?k(a,t):t)/2,d=(o&&a?k(a,i):i)/2;if(c){var f=c[0],p=c[1];h=(o&&a?k(a,f):f)/2,d=(o&&a?k(a,p):p)/2}var v=e.width+n,y=e.height+n,g=(0,s.c)(),m=(0,s.c)(),b=!1;if(r&&0!==v&&0!==y){var _=t!==i?t/i:v/y,w=t>i?t:i,x=1,M=1;isNaN(w)||(_>1?(x=w/v,M=w/_/y):(M=w/y,x=w*_/v)),(0,l.m)(m,m,O(g,x,M,h,d)),b=!0}var C=e.x+(v-n)/2,Z=e.y+(y-n)/2;if((0,l.m)(m,m,I(g,h-C,d-Z)),!b&&(v>t||y>i)){var P=v/t>y/i,A=(P?t:i)/(P?v:y);(0,l.m)(m,m,O(g,A,A,C,Z))}return a&&(0,l.m)(m,m,function(e,t,i,n){var r=t%360*Math.PI/180;(0,l.r)(e,(0,l.c)(e),r);var a=Math.cos(r),o=Math.sin(r),s=e[4],u=e[5];return e[4]=s*a-u*o+n*o-i*a+i,e[5]=u*a+s*o-i*o-n*a+n,e}(g,a,C,Z)),u&&(0,l.m)(m,m,I(g,u[0],u[1])),"matrix(".concat(m[0],",").concat(m[1],",").concat(m[2],",").concat(m[3],",").concat(m[4],",").concat(m[5],")")}function j(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[],s=[],l=++w,h=function(e,t,i){var n=null===e||void 0===e?void 0:e.effects.find((function(e){return"bloom"===e.type}));if(!n)return null;var r=n.strength,a=n.radius,o=r>0?a:0,s=(r+o)*t,l=4*r+1;return(0,u.u)("filter",{id:"bloom".concat(i),x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},(0,u.u)("feMorphology",{operator:"dilate",radius:(r+.5*o)*(Math.pow(5,t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),(0,u.u)("feGaussianBlur",{in:"dilate",stdDeviation:s/25,result:"blur"}),(0,u.u)("feGaussianBlur",{in:"blur",stdDeviation:s/50,result:"intensityBlur"}),(0,u.u)("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},(0,u.u)("feFuncR",{type:"linear",slope:l}),(0,u.u)("feFuncG",{type:"linear",slope:l}),(0,u.u)("feFuncB",{type:"linear",slope:l})),(0,u.u)("feMerge",null,(0,u.u)("feMergeNode",{in:"intensityBlur"}),(0,u.u)("feMergeNode",{in:"intensityBrightness"}),(0,u.u)("feGaussianBlur",{stdDeviation:r/10})))}(r.effectView,t,l),d=null;if(h){var f,p=null===(f=r.effectView)||void 0===f?void 0:f.effects.find((function(e){return"bloom"===e.type})),v=(p.strength?p.strength+p.radius/2:0)/3,y=t+t*v,g=i+i*v;d=[Math.max(y,10),Math.max(g,10)]}for(var m=0;m<e.length;m++){var b,_,x,I=e[m],O=[],D=[],F=0,E=0,j=0,R=(0,n.Z)(I);try{for(R.s();!(x=R.n()).done;){var N=x.value,z=N.shape,H=N.fill,V=N.stroke,W=N.font,Y=N.offset;r.ignoreStrokeWidth||"text"===z.type||(F+=V&&V.width||0);var U=C(H),q=Z(V),G="text"===z.type?P(z,W):null;a.push(A(U)),O.push(M(z,U.fill,q,G)),D.push(S(z)),Y&&(E+=Y[0],j+=Y[1])}}catch(J){R.e(J)}finally{R.f()}var X=B((0,o.s3)(L(D)),t,i,F,null!==(b=r.scale)&&void 0!==b&&b,r.rotation,null!==(_=r.useRotationSize)&&void 0!==_&&_,[E,j],d),K=null;if(r.masking){var $="mask-".concat(m),Q=r.masking[m];a.push(T(Q,$)),K="url(#".concat($,")")}s.push(K?(0,u.u)("g",{mask:K},(0,u.u)("g",{transform:X},O)):(0,u.u)("g",{transform:X},O))}return r.useRotationSize&&r.rotation&&(t=k(r.rotation,t),i=k(r.rotation,i)),h&&((0,o.O3)(d),t=d[0],i=d[1]),(0,u.u)("svg",{xmlns:c,width:t,height:i,style:"display: block;","aria-labelledby":r.ariaLabel,role:"img",focusable:!1},h,(0,u.u)("defs",null,a),h?(0,u.u)("g",{filter:"url(#bloom".concat(l,")")},s):s)}},19951:function(e,t,i){i.r(t),i.d(t,{fetchSymbolFromStyle:function(){return y},getStyleItemFromStyle:function(){return v},resolveWebStyleSymbol:function(){return p}});var n=i(51508),r=i(71277),a=i(10064),o=i(92026),s=i(35995),l=i(7575),u=i(53283),c=i(42283),h=i(1472),d=i(38048),f=i(81854);function p(e,t,i,n){var r=e.name;return null==r?Promise.reject(new a.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?function(e,t,i){var n=d.wm.replaceAll(/\{SymbolName\}/gi,e),r=null!=t.portal?t.portal:l.Z.getDefault();return(0,d.EJ)(n,i).then((function(e){var t=(0,d.KV)(e.data);return(0,c.im)(t,{portal:r,url:(0,s.mN)((0,s.Yd)(n)),origin:"portal-item"})}))}(r,t,n):(0,d.n2)(e,t,n).then((function(e){return y((0,o.s3)(e),r,t,i,d.v9,n)}))}function v(e,t){return t.items.find((function(t){return t.name===e}))}function y(e,t,i,o,p,y){var g,m,b,_=i&&null!=i.portal?i.portal:l.Z.getDefault(),w={portal:_,url:(0,s.mN)(e.baseUrl),origin:"portal-item"},k=v(t,e.data);if(!k){var x="The symbol name '".concat(t,"' could not be found");return Promise.reject(new a.Z("symbolstyleutils:symbol-name-not-found",x,{symbolName:t}))}var M=(0,u.f)(p(k,o),w),C=null!==(g=null===(m=k.thumbnail)||void 0===m?void 0:m.href)&&void 0!==g?g:null,Z=k.thumbnail&&k.thumbnail.imageData;(0,r.XO)()&&(M=null!==(b=(0,r.pJ)(M))&&void 0!==b?b:"",C=(0,r.pJ)(C));var P={portal:_,url:(0,s.mN)((0,s.Yd)(M)),origin:"portal-item"};return(0,d.EJ)(M,y).then((function(r){var a="cimRef"===o?(0,d.KV)(r.data):r.data,s=(0,c.im)(a,P);if(s&&(0,n.dU)(s)){if(C){var l=(0,u.f)(C,w);s.thumbnail=new f.p({url:l})}else Z&&(s.thumbnail=new f.p({url:"data:image/png;base64,".concat(Z)}));e.styleUrl?s.styleOrigin=new h.Z({portal:i.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(s.styleOrigin=new h.Z({portal:i.portal,styleName:e.styleName,name:t}))}return s}))}},48082:function(e,t,i){i.r(t),i.d(t,{default:function(){return Lr}});var n=i(74165),r=i(15861),a=i(4942),o=i(1413),s=i(29439),l=i(15671),u=i(43144),c=i(60136),h=i(29388),d=i(27366),f=(i(59166),i(40281)),p=i(44927),v=i(98928),y=i(100),g=i(32718),m=i(94172),b=i(14916),_=i(49861),w=i(89125),k=i(63780),x=(i(93169),i(69912)),M=i(33565),C=(i(25243),i(10064)),Z=i(70116),P=(i(17768),i(16889)),A=i(643),T=(i(68860),i(6291));new Map;var I=["B","kB","MB","GB","TB"];var O=i(52639),D=i(7138),F=i(11812),E=i(99837),S=i(93433),L=i(76969),B=i(37270),j=i(37933),R=i(91738),N=i(819),z=g.Z.getLogger("esri.widgets.Feature.support.featureUtils"),H=/href=(""|'')/gi,V=/(\{([^\{\r\n]+)\})/g,W=/\'/g,Y=/^\s*expression\//i,U=/(\n)/gi,q=/[\u00A0-\u9999<>\&]/gim,G=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,X=/^(?:mailto:|tel:)/,K="relationships/",$=(0,L.Ze)("short-date-short-time");function Q(e){if(null!=e)return e.get("sourceLayer")||e.get("layer")}function J(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","function"==typeof t?t(i):t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return!X.test(e.trim().toLowerCase())}function ie(e){return!!e&&Y.test(e)}function ne(e,t){var i=function(e,t){if(!ie(t)||!e)return null;var i=t.replace(Y,"").toLowerCase(),n=null;return e.some((function(e){return e.name.toLowerCase()===i&&(n=e,!0)})),n}(t,null===e||void 0===e?void 0:e.fieldName);return i?i.title||null:e?e.label||e.fieldName:null}function re(e,t){var i=ae(t,e);return i?i.name:e}function ae(e,t){var i;return e&&"function"==typeof e.getField&&t&&null!==(i=e.getField(t))&&void 0!==i?i:null}function oe(e){return"".concat(e).trim()}function se(e){var t=e.attributes,i=e.globalAttributes,n=e.layer,r=e.text,a=e.expressionAttributes,s=e.fieldInfoMap;return r?le({formattedAttributes:i,template:he(r,(0,o.Z)((0,o.Z)((0,o.Z)({},i),a),t),n),fieldInfoMap:s}):""}function le(e){var t=e.formattedAttributes,i=e.template,n=e.fieldInfoMap;return oe(function(e){return e.replaceAll(H,"")}((0,A.gx)((0,A.gx)(i,(function(e){return function(e,t){var i=t.get(e.toLowerCase());return"{".concat(i&&i.fieldName||e,"}")}(e,n)})),t)))}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=(0,o.Z)({},e);return Object.keys(i).forEach((function(e){return function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t[e];if("string"==typeof n){var r=(i?encodeURIComponent(n):n).replaceAll(W,"%27");t[e]=r}}(e,i,t)})),i}function ce(e,t){return e.replaceAll(V,(function(e,i,n){var r=ae(t,n);return r?"{".concat(r.name,"}"):i}))}function he(e,t,i){var n=ce(e,i);return n?n.replaceAll(G,(function(e,i,n){return function(e,t,i){var n=(t=oe(t))&&"{"!==t[0];return(0,A.gx)(e,ue(i,n||!1))}(e,i||n,t)})):n}function de(e){return null!=e&&"object"==typeof e&&"layer"in e&&!!e.layer}function fe(e){return function(e){return null!=e&&"object"==typeof e&&"fieldsIndex"in e&&"geometryType"in e&&"getField"in e&&"load"in e&&"loaded"in e&&"objectIdField"in e&&"spatialReference"in e&&"type"in e&&"feature"===e.type&&"when"in e}(e)&&function(e){return null!=e&&"object"==typeof e&&"createQuery"in e&&"queryFeatureCount"in e&&"queryObjectIds"in e&&"queryRelatedFeatures"in e&&"queryRelatedFeaturesCount"in e&&"relationships"in e}(e)}function pe(e,t){var i=t.fieldInfos,n=t.fieldName,r=t.preventPlacesFormatting,a=t.layer,s=ve(i,n),l=null===s||void 0===s?void 0:s.clone(),u=ae(a,n);if(l&&!(0,B.Ec)(n)){var c,h=null===u||void 0===u?void 0:u.type;if("date"===h||"date-only"===h||"time-only"===h||"timestamp-offset"===h||null!==(c=l.format)&&void 0!==c&&c.dateFormat){var d,f,p=null!==(d=l.format)&&void 0!==d?d:new R.Z;if(null!==(f=p.dateFormat)&&void 0!==f||(p.dateFormat="date-only"===h?"short-date":"short-date-short-time"),"number"==typeof e){var v=!de(a)&&(0,j.Te)(a)&&a.datesInUnknownTimezone||de(a)&&function(e){return null!=e&&"object"==typeof e&&"type"in e&&"map-image"===e.type}(a.layer)&&a.layer.datesInUnknownTimezone;return p.formatDate(e,v)}switch(h){case"date-only":return p.formatDateOnly(e);case"time-only":return p.formatTimeOnly(e);case"timestamp-offset":return p.formatTimestamp(e)}}}var y=null===l||void 0===l?void 0:l.format;return"string"==typeof e&&(0,B.Ec)(n)&&y?y.formatRasterPixelValue(e):"string"==typeof(e=function(e,t){if("string"==typeof e&&t&&null==t.dateFormat&&(null!=t.places||null!=t.digitSeparator)){var i=Number(e);if(!isNaN(i))return i}return e}(e,y))||null==e||null==y?me(e):r?(0,T.uf)(e,(0,o.Z)((0,o.Z)({},(0,T.sh)(y)),{},{minimumFractionDigits:0,maximumFractionDigits:20})):y.formatNumber(e)}function ve(e,t){if(e&&e.length&&t)return e.find((function(e){var i;return(null===(i=e.fieldName)||void 0===i?void 0:i.toLowerCase())===t.toLowerCase()}))}function ye(e){var t=[];if(!e)return t;var i=e.fieldInfos,n=e.content;return i&&t.push.apply(t,(0,S.Z)(i)),n&&Array.isArray(n)?(n.forEach((function(e){if("fields"===e.type){var i=e&&e.fieldInfos;i&&t.push.apply(t,(0,S.Z)(i))}})),t):t}function ge(e){return e.replaceAll(q,(function(e){return"&#".concat(e.charCodeAt(0),";")}))}function me(e){return"string"==typeof e?e.replaceAll(U,'<br class="esri-text-new-line" />'):e}function be(e){var t,i=e.value,n=e.fieldName,r=e.fieldInfos,a=e.fieldInfoMap,o=e.layer,s=e.graphic;if(null==i)return"";var l=function(e){var t=e.fieldName,i=e.value,n=e.graphic,r=e.layer;if(Pe(t))return null;if(!r||"function"!=typeof r.getFieldDomain)return null;var a=n&&r.getFieldDomain(t,{feature:n});return a&&"coded-value"===a.type?a.getName(i):null}({fieldName:n,value:i,graphic:s,layer:o});if(l)return l;var u=function(e){var t=e.fieldName,i=e.graphic,n=e.layer;if(Pe(t))return null;if(!n||"function"!=typeof n.getFeatureType)return null;var r=n.typeIdField;if(!r||t!==r)return null;var a=n.getFeatureType(i);return a?a.name:null}({fieldName:n,graphic:s,layer:o});if(u)return u;if(a.get(n.toLowerCase()))return pe(i,{fieldInfos:r||Array.from(a.values()),fieldName:n,layer:o});switch(null===o||void 0===o||null===(t=o.fieldsIndex)||void 0===t||null===(t=t.get(n))||void 0===t?void 0:t.type){case"date":return(0,L.p6)(i);case"date-only":return(0,L.o8)(i);case"time-only":return(0,L.LJ)(i);case"timestamp-offset":return(0,L.i$)(i)}return me(i)}function _e(e){var t=e.fieldInfos,i=e.attributes,n=e.layer,r=e.graphic,a=e.fieldInfoMap,o=e.relatedInfos,s={};return null!==o&&void 0!==o&&o.forEach((function(e){return function(e){var t=e.attributes,i=e.relatedInfo,n=e.fieldInfoMap,r=e.fieldInfos,a=e.layer;t&&i&&(i.relatedFeatures&&i.relatedFeatures&&i.relatedFeatures.forEach((function(e){return Ae({attributes:t,graphic:e,relatedInfo:i,fieldInfoMap:n,fieldInfos:r,layer:a})})),i.relatedStatsFeatures&&i.relatedStatsFeatures&&i.relatedStatsFeatures.forEach((function(e){return Ae({attributes:t,graphic:e,relatedInfo:i,fieldInfoMap:n,fieldInfos:r,layer:a})})))}({attributes:s,relatedInfo:e,fieldInfoMap:a,fieldInfos:t,layer:n})})),i&&Object.keys(i).forEach((function(e){var o=i[e];s[e]=be({fieldName:e,fieldInfos:t,fieldInfoMap:a,layer:n,value:o,graphic:r})})),s}function we(e,t){return ke.apply(this,arguments)}function ke(){return ke=(0,r.Z)((0,n.Z)().mark((function e(t,i){var r,a,o,s,l,u,c,h,d,f,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.layer,o=t.graphic,s=t.outFields,l=t.objectIds,u=t.returnGeometry,c=t.spatialReference,"number"==typeof(h=l[0])||"string"==typeof h){e.next=4;break}return"Could not query required fields for the specified feature. The feature's ID is invalid.",d={layer:a,graphic:o,objectId:h,requiredFields:s},e.abrupt("return",(z.warn("Could not query required fields for the specified feature. The feature's ID is invalid.",d),null));case 4:if(null!==(r=(0,j.S1)(a))&&void 0!==r&&null!==(r=r.operations)&&void 0!==r&&r.supportsQuery){e.next=7;break}return"The specified layer cannot be queried. The following fields will not be available.",f={layer:a,graphic:o,requiredFields:s,returnGeometry:u},e.abrupt("return",(z.warn("The specified layer cannot be queried. The following fields will not be available.",f),null));case 7:return(p=a.createQuery()).objectIds=l,p.outFields=null!==s&&void 0!==s&&s.length?s:[a.objectIdField],p.returnGeometry=!!u,p.returnZ=!!u,p.returnM=!!u,p.outSpatialReference=c,e.next=11,a.queryFeatures(p,i);case 11:return e.abrupt("return",e.sent.features[0]);case 12:case"end":return e.stop()}}),e)}))),ke.apply(this,arguments)}function xe(e){return Me.apply(this,arguments)}function Me(){return(Me=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(i=t.expressionInfos)&&void 0!==i&&i.length){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,(0,N.LC)();case 4:return r=e.sent,a=r.arcadeUtils.hasGeometryFunctions,e.abrupt("return",a(t));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,r.Z)((0,n.Z)().mark((function e(t,i){var r,a,s,l,u,c,h,d,f,p,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.graphic,a=t.popupTemplate,s=t.layer,l=t.spatialReference,s&&a){e.next=3;break}return e.abrupt("return");case 3:if(e.t0="function"==typeof s.load,!e.t0){e.next=7;break}return e.next=7,s.load(i);case 7:if(r.attributes){e.next=9;break}return e.abrupt("return");case 9:if(null!=(u=r.attributes[s.objectIdField])){e.next=12;break}return e.abrupt("return");case 12:return c=[u],e.next=15,a.getRequiredFields(s.fieldsIndex);case 15:if(h=e.sent,d=(0,B.R9)(h,r),f=d?[]:h,e.t1=a.returnGeometry,e.t1){e.next=23;break}return e.next=22,xe(a);case 22:e.t1=e.sent;case 23:if(p=e.t1,!d||p){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,we({layer:s,graphic:r,outFields:f,objectIds:c,returnGeometry:p,spatialReference:l},i);case 28:(v=e.sent)&&(v.geometry&&(r.geometry=v.geometry),v.attributes&&(r.attributes=(0,o.Z)((0,o.Z)({},r.attributes),v.attributes)));case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return!!e&&e.includes(K)}function Ae(e){var t=e.attributes,i=e.graphic,n=e.relatedInfo,r=e.fieldInfos,a=e.fieldInfoMap,o=e.layer;t&&i&&n&&Object.keys(i.attributes).forEach((function(e){var s=function(e){return e?"".concat(K).concat(e.layerId,"/").concat(e.fieldName):""}({layerId:n.relation.id.toString(),fieldName:e}),l=i.attributes[e];t[s]=be({fieldName:s,fieldInfos:r,fieldInfoMap:a,layer:o,value:l,graphic:i})}))}var Te=function(e){if(!e)return!1;var t=e.toUpperCase();return t.includes("CURRENT_TIMESTAMP")||t.includes("CURRENT_DATE")||t.includes("CURRENT_TIME")},Ie=function(e){var t,i=e.layer,n=e.method,r=e.query,a=e.definitionExpression;if(null!==(t=i.capabilities)&&void 0!==t&&null!==(t=t.query)&&void 0!==t&&t.supportsCacheHint&&"attachments"!==n){var o=null!=r.where?r.where:null,s=null!=r.geometry?r.geometry:null;Te(a)||Te(o)||"extent"===(null===s||void 0===s?void 0:s.type)||"tile"===r.resultType||(r.cacheHint=!0)}};function Oe(e,t,i){return e.filter(fe).find((function(e){return e!==t&&e.url===t.url&&e.layerId===i.relatedTableId}))}var De={editing:!1,operations:{add:!0,update:!0,delete:!0}},Fe=f.Z.ofType(F.Z),Ee=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e))._getAttachmentsPromise=null,n._attachmentLayer=null,n.capabilities=(0,o.Z)({},De),n.activeAttachmentInfo=null,n.activeFileInfo=null,n.attachmentInfos=new Fe,n.fileInfos=new f.Z,n.graphic=null,n.mode="view",n.filesEnabled=!1,n.addHandles((0,m.YP)((function(){return n.graphic}),(function(){return n._graphicChanged()}),m.nn)),n}return(0,u.Z)(i,[{key:"destroy",value:function(){this._attachmentLayer=null,this.graphic=null}},{key:"castCapabilities",value:function(e){return(0,o.Z)((0,o.Z)({},De),e)}},{key:"state",get:function(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}},{key:"supportsResizeAttachments",get:function(){var e=this.graphic;if(!e)return!1;var t=e.layer||e.sourceLayer;return(null===t||void 0===t?void 0:t.loaded)&&"capabilities"in t&&t.capabilities&&"operations"in t.capabilities&&"supportsResizeAttachments"in t.capabilities.operations&&t.capabilities.operations.supportsResizeAttachments||!1}},{key:"getAttachments",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o,s,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._attachmentLayer,i=this.attachmentInfos,t&&"function"==typeof t.queryAttachments){e.next=3;break}throw new C.Z("invalid-layer","getAttachments(): A valid layer is required.");case 3:return r=this._getObjectId(),a=new E.Z({objectIds:[r],returnMetadata:!0}),o=[],s=t.queryAttachments(a).then((function(e){return e[r]||o})).catch((function(){return o})),this._getAttachmentsPromise=s,this.notifyChange("state"),e.next=7,s;case 7:return l=e.sent,e.abrupt("return",(i.removeAll(),l.length&&i.addMany(l),this._getAttachmentsPromise=null,this.notifyChange("state"),l));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addAttachment",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c=this,h=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:this.graphic,a=this._attachmentLayer,o=this.attachmentInfos,s=this.capabilities,r){e.next=4;break}throw new C.Z("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:r});case 4:if(t){e.next=6;break}throw new C.Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:t});case 6:if(null!==(i=s.operations)&&void 0!==i&&i.add){e.next=8;break}throw new C.Z("invalid-capabilities","addAttachment(): add capabilities are required.");case 8:if(a&&"function"==typeof a.addAttachment){e.next=10;break}throw new C.Z("invalid-layer","addAttachment(): A valid layer is required.");case 10:return l=a.addAttachment(r,t).then((function(e){return c._queryAttachment(e.objectId,r)})),e.next=13,l;case 13:return u=e.sent,e.abrupt("return",(o.add(u),u));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAttachment",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._attachmentLayer,a=this.attachmentInfos,o=this.graphic,s=this.capabilities,t){e.next=3;break}throw new C.Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:t});case 3:if(null!==(i=s.operations)&&void 0!==i&&i.delete){e.next=5;break}throw new C.Z("invalid-capabilities","deleteAttachment(): delete capabilities are required.");case 5:if(r&&"function"==typeof r.deleteAttachments){e.next=7;break}throw new C.Z("invalid-layer","deleteAttachment(): A valid layer is required.");case 7:if(o){e.next=9;break}throw new C.Z("invalid-graphic","deleteAttachment(): A graphic is required.");case 9:return l=r.deleteAttachments(o,[t.id]).then((function(){return t})),e.next=12,l;case 12:return u=e.sent,e.abrupt("return",(a.remove(u),u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h,d=this,f=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:this.activeAttachmentInfo,a=this._attachmentLayer,o=this.attachmentInfos,s=this.graphic,l=this.capabilities,t){e.next=4;break}throw new C.Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:t});case 4:if(r){e.next=6;break}throw new C.Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:r});case 6:if(null!==(i=l.operations)&&void 0!==i&&i.update){e.next=8;break}throw new C.Z("invalid-capabilities","updateAttachment(): Update capabilities are required.");case 8:if(u=o.findIndex((function(e){return e===r})),a&&"function"==typeof a.updateAttachment){e.next=11;break}throw new C.Z("invalid-layer","updateAttachment(): A valid layer is required.");case 11:if(s){e.next=13;break}throw new C.Z("invalid-graphic","updateAttachment(): A graphic is required.");case 13:return c=a.updateAttachment(s,r.id,t).then((function(e){return d._queryAttachment(e.objectId)})),e.next=16,c;case 16:return h=e.sent,e.abrupt("return",(o.splice(u,1,h),h));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"commitFiles",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.fileInfos.items.map((function(e){return t.addAttachment(e.form)})));case 2:return this.fileInfos.removeAll(),e.abrupt("return",this.getAttachments());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(e,t){if(!e||!t)return null;var i={file:e,form:t};return this.fileInfos.add(i),i}},{key:"updateFile",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.activeFileInfo;if(!e||!t||!i)return null;var n=this.fileInfos.findIndex((function(e){return i===e}));return n>-1&&this.fileInfos.splice(n,1,{file:e,form:t}),this.fileInfos.items[n]}},{key:"deleteFile",value:function(e){var t=this.fileInfos.find((function(t){return t.file===e}));return t?(this.fileInfos.remove(t),t):null}},{key:"_queryAttachment",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,i){var r,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._attachmentLayer,t&&null!==r&&void 0!==r&&r.queryAttachments){e.next=3;break}throw new C.Z("invalid-attachment-id","Could not query attachment.");case 3:return a=this._getObjectId(i),o=new E.Z({objectIds:[a],attachmentsWhere:"AttachmentId=".concat(t),returnMetadata:!0}),e.abrupt("return",r.queryAttachments(o).then((function(e){return e[a][0]})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getObjectId",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graphic;return null!==(e=null===t||void 0===t?void 0:t.getObjectId())&&void 0!==e?e:null}},{key:"_graphicChanged",value:function(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch((function(){})))}},{key:"_setAttachmentLayer",value:function(){var e=Q(this.graphic);this._attachmentLayer=e?"scene"===e.type&&null!=e.associatedLayer?e.associatedLayer:e:null}}]),i}(D.Z);(0,d._)([(0,_.Cb)()],Ee.prototype,"capabilities",void 0),(0,d._)([(0,w.p)("capabilities")],Ee.prototype,"castCapabilities",null),(0,d._)([(0,_.Cb)()],Ee.prototype,"activeAttachmentInfo",void 0),(0,d._)([(0,_.Cb)()],Ee.prototype,"activeFileInfo",void 0),(0,d._)([(0,_.Cb)({readOnly:!0,type:Fe})],Ee.prototype,"attachmentInfos",void 0),(0,d._)([(0,_.Cb)()],Ee.prototype,"fileInfos",void 0),(0,d._)([(0,_.Cb)({type:O.Z})],Ee.prototype,"graphic",void 0),(0,d._)([(0,_.Cb)()],Ee.prototype,"mode",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Ee.prototype,"state",null),(0,d._)([(0,_.Cb)()],Ee.prototype,"filesEnabled",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Ee.prototype,"supportsResizeAttachments",null);var Se=Ee=(0,d._)([(0,x.j)("esri.widgets.Attachments.AttachmentsViewModel")],Ee),Le=i(65905);function Be(e){var t=e.toLowerCase();return"image/bmp"===t||"image/emf"===t||"image/exif"===t||"image/gif"===t||"image/x-icon"===t||"image/jpeg"===t||"image/png"===t||"image/tiff"===t||"image/x-wmf"===t}var je=i(8905),Re=i(80975),Ne=i(80532),ze=i(67005),He={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ve="esri-attachments",We="esri-button",Ye={base:Ve,loaderContainer:"".concat(Ve,"__loader-container"),loader:"".concat(Ve,"__loader"),fadeIn:"".concat(Ve,"--fade-in"),container:"".concat(Ve,"__container"),containerList:"".concat(Ve,"__container--list"),containerPreview:"".concat(Ve,"__container--preview"),actions:"".concat(Ve,"__actions"),deleteButton:"".concat(Ve,"__delete-button"),addAttachmentButton:"".concat(Ve,"__add-attachment-button"),errorMessage:"".concat(Ve,"__error-message"),items:"".concat(Ve,"__items"),item:"".concat(Ve,"__item"),itemButton:"".concat(Ve,"__item-button"),itemMask:"".concat(Ve,"__item-mask"),itemMaskIcon:"".concat(Ve,"__item-mask--icon"),itemImage:"".concat(Ve,"__image"),itemImageResizable:"".concat(Ve,"__image--resizable"),itemLabel:"".concat(Ve,"__label"),itemFilename:"".concat(Ve,"__filename"),itemChevronIcon:"".concat(Ve,"__item-chevron-icon"),itemLink:"".concat(Ve,"__item-link"),itemLinkOverlay:"".concat(Ve,"__item-link-overlay"),itemLinkOverlayIcon:"".concat(Ve,"__item-link-overlay-icon"),itemEditIcon:"".concat(Ve,"__item-edit-icon"),itemAddIcon:"".concat(Ve,"__item-add-icon"),itemAddButton:"".concat(Ve,"__item-add-button"),formNode:"".concat(Ve,"__form-node"),fileFieldset:"".concat(Ve,"__file-fieldset"),fileLabel:"".concat(Ve,"__file-label"),fileName:"".concat(Ve,"__file-name"),fileInput:"".concat(Ve,"__file-input"),metadata:"".concat(Ve,"__metadata"),metadataFieldset:"".concat(Ve,"__metadata-fieldset"),progressBar:"".concat(Ve,"__progress-bar"),esriWidget:"esri-widget",esriButton:We,buttonDisabled:"".concat(We,"--disabled"),esriButtonSecondary:"".concat(We,"--secondary"),esriButtonTertiary:"".concat(We,"--tertiary"),esriButtonThird:"".concat(We,"--third"),esriButtonSmall:"".concat(We,"--small"),esriButtonHalf:"".concat(We,"--half"),empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},Ue=window.CSS,qe=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,i){var r;return(0,l.Z)(this,n),(r=t.call(this,e,i)).displayType="auto",r.messages=null,r.messagesUnits=null,r.selectedFile=null,r.submitting=!1,r.viewModel=null,r.visibleElements=(0,o.Z)({},He),r._supportsImageOrientation=Ue&&Ue.supports&&Ue.supports("image-orientation","from-image"),r._addAttachmentForm=null,r._updateAttachmentForm=null,r}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.viewModel||(this.viewModel=new Se),this.addHandles([(0,m.on)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.attachmentInfos}),"change",(function(){return e.scheduleRender()})),(0,m.on)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.fileInfos}),"change",(function(){return e.scheduleRender()})),(0,m.YP)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.mode}),(function(){return e._modeChanged()}),m.nn)])}},{key:"loadDependencies",value:function(){return(0,je.h)({icon:function(){return i.e(7474).then(i.bind(i,87474))}})}},{key:"capabilities",get:function(){return this.viewModel.capabilities},set:function(e){this.viewModel.capabilities=e}},{key:"effectiveDisplayType",get:function(){var e=this.displayType;return e&&"auto"!==e?e:this.viewModel.supportsResizeAttachments?"preview":"list"}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"castVisibleElements",value:function(e){return(0,o.Z)((0,o.Z)({},He),e)}},{key:"addAttachment",value:function(){var e=this,t=this._addAttachmentForm,i=this.viewModel;return this._set("submitting",!0),this._set("error",null),i.addAttachment(t).then((function(t){return e._set("submitting",!1),e._set("error",null),i.mode="view",t})).catch((function(t){throw e._set("submitting",!1),e._set("error",new C.Z("attachments:add-attachment",e.messages.addErrorMessage,t)),t}))}},{key:"deleteAttachment",value:function(e){var t=this,i=this.viewModel;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then((function(e){return t._set("submitting",!1),t._set("error",null),i.mode="view",e})).catch((function(e){throw t._set("submitting",!1),t._set("error",new C.Z("attachments:delete-attachment",t.messages.deleteErrorMessage,e)),e}))}},{key:"updateAttachment",value:function(){var e=this,t=this.viewModel,i=this._updateAttachmentForm;return this._set("submitting",!0),this._set("error",null),t.updateAttachment(i).then((function(i){return e._set("submitting",!1),e._set("error",null),t.mode="view",i})).catch((function(t){throw e._set("submitting",!1),e._set("error",new C.Z("attachments:update-attachment",e.messages.updateErrorMessage,t)),t}))}},{key:"addFile",value:function(){var e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}},{key:"updateFile",value:function(){var e=this.viewModel,t=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",t}},{key:"deleteFile",value:function(e){var t,i=this.viewModel.deleteFile(e||(null===(t=this.viewModel.activeFileInfo)||void 0===t?void 0:t.file));return this.viewModel.mode="view",i}},{key:"render",value:function(){var e=this.submitting,t=this.viewModel.state;return(0,ze.u)("div",{class:this.classes(Ye.base,Ye.esriWidget)},e?this.renderProgressBar():null,"loading"===t?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}},{key:"renderErrorMessage",value:function(){var e=this.error,t=this.visibleElements;return e&&t.errorMessage?(0,ze.u)("div",{key:"error-message",class:Ye.errorMessage},e.message):null}},{key:"renderAttachments",value:function(){var e=this.viewModel,t=e.activeFileInfo,i=e.mode,n=e.activeAttachmentInfo;return"add"===i?this.renderAddForm():"edit"===i?this.renderDetailsForm(n||t):this.renderAttachmentContainer()}},{key:"renderLoading",value:function(){return(0,ze.u)("div",{class:Ye.loaderContainer,key:"loader"},(0,ze.u)("div",{class:Ye.loader}))}},{key:"renderProgressBar",value:function(){return this.visibleElements.progressBar?(0,ze.u)("div",{class:Ye.progressBar,key:"progress-bar"}):null}},{key:"renderAddForm",value:function(){var e=this.submitting,t=this.selectedFile,i=e||!t,n=this.visibleElements.cancelAddButton?(0,ze.u)("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ye.esriButton,Ye.esriButtonTertiary,Ye.esriButtonSmall,Ye.esriButtonHalf,e&&Ye.buttonDisabled)},this.messages.cancel):null,r=this.visibleElements.addSubmitButton?(0,ze.u)("button",{type:"submit",disabled:i,class:this.classes(Ye.esriButton,Ye.esriButtonSecondary,Ye.esriButtonSmall,Ye.esriButtonHalf,(0,a.Z)({},Ye.buttonDisabled,i))},this.messages.add):null,o=t?(0,ze.u)("span",{key:"file-name",class:Ye.fileName},t.name):null,s=(0,ze.u)("form",{bind:this,afterCreate:Re.Yo,afterRemoved:Re.pV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},(0,ze.u)("fieldset",{class:Ye.fileFieldset},o,(0,ze.u)("label",{class:this.classes(Ye.fileLabel,Ye.esriButton,Ye.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,(0,ze.u)("input",{class:Ye.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),r,n);return(0,ze.u)("div",{key:"add-form-container",class:Ye.formNode},s)}},{key:"renderDetailsForm",value:function(e){var t,i,n,r,o,s,l,u,c=this,h=this.visibleElements,d=this.viewModel,f=this.selectedFile,p=this.submitting,v=d.capabilities,y=p||!f;f?(o=f.type,s=f.name,l=f.size):e&&"file"in e?(o=e.file.type,s=e.file.name,l=e.file.size):e&&"contentType"in e&&(o=e.contentType,s=e.name,l=e.size,u=e.url);var g=v.editing&&null!==(t=v.operations)&&void 0!==t&&t.delete&&h.deleteButton?(0,ze.u)("button",{key:"delete-button",type:"button",disabled:p,bind:this,onclick:function(t){return c._submitDeleteAttachment(t,e)},class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonTertiary,Ye.deleteButton,(0,a.Z)({},Ye.buttonDisabled,p))},this.messages.delete):void 0,m=v.editing&&null!==(i=v.operations)&&void 0!==i&&i.update&&h.updateButton?(0,ze.u)("button",{disabled:y,key:"update-button",type:"submit",class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonThird,(0,a.Z)({},Ye.buttonDisabled,y))},this.messages.update):void 0,b=this.visibleElements.cancelUpdateButton?(0,ze.u)("button",{disabled:p,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ye.esriButton,Ye.esriButtonSmall,Ye.esriButtonTertiary,Ye.esriButtonThird,(0,a.Z)({},Ye.buttonDisabled,p))},this.messages.cancel):void 0,_=v.editing&&null!==(n=v.operations)&&void 0!==n&&n.update?(0,ze.u)("fieldset",{key:"file",class:Ye.fileFieldset},(0,ze.u)("span",{key:"file-name",class:Ye.fileName},s),(0,ze.u)("label",{class:this.classes(Ye.fileLabel,Ye.esriButton,Ye.esriButtonSecondary)},this.messages.changeFile,(0,ze.u)("input",{class:Ye.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,w=(0,ze.u)("fieldset",{key:"size",class:Ye.metadataFieldset},(0,ze.u)("label",null,function(e,t){var i=0===t?0:Math.floor(Math.log(t)/Math.log(Z.Y.KILOBYTES));i=(0,P.uZ)(i,0,I.length-1);var n=(0,T.uf)(t/Math.pow(Z.Y.KILOBYTES,i),{maximumFractionDigits:2});return(0,A.gx)(e.units.bytes[I[i]],{fileSize:n})}(this.messagesUnits,null!==(r=l)&&void 0!==r?r:0))),k=(0,ze.u)("fieldset",{key:"content-type",class:Ye.metadataFieldset},(0,ze.u)("label",null,o)),x=null!=u?(0,ze.u)("a",{class:Ye.itemLink,href:u,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),(0,ze.u)("div",{class:Ye.itemLinkOverlay},(0,ze.u)("span",{class:Ye.itemLinkOverlayIcon},(0,ze.u)("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),M=(0,ze.u)("form",{bind:this,afterCreate:Re.Yo,afterRemoved:Re.pV,"data-node-ref":"_updateAttachmentForm",onsubmit:function(t){return c._submitUpdateAttachment(t,e)}},(0,ze.u)("div",{class:Ye.metadata},w,k),_,(0,ze.u)("div",{class:Ye.actions},g,b,m));return(0,ze.u)("div",{key:"edit-form-container",class:Ye.formNode},x,M)}},{key:"renderImageMask",value:function(e,t){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,t):null}},{key:"renderGenericImageMask",value:function(e,t){var i=this.viewModel.supportsResizeAttachments,n=function(e){var t=(0,Le.V)("esri/themes/base/images/files/");return e?"text/plain"===e?"".concat(t,"text-32.svg"):"application/pdf"===e?"".concat(t,"pdf-32.svg"):"text/csv"===e?"".concat(t,"csv-32.svg"):"application/gpx+xml"===e?"".concat(t,"gpx-32.svg"):"application/x-dwf"===e?"".concat(t,"cad-32.svg"):"application/postscript"===e||"application/json"===e||"text/xml"===e||"model/vrml"===e?"".concat(t,"code-32.svg"):"application/x-zip-compressed"===e||"application/x-7z-compressed"===e||"application/x-gzip"===e||"application/x-tar"===e||"application/x-gtar"===e||"application/x-bzip2"===e||"application/gzip"===e||"application/x-compress"===e||"application/x-apple-diskimage"===e||"application/x-rar-compressed"===e||"application/zip"===e?"".concat(t,"zip-32.svg"):e.includes("image/")?"".concat(t,"image-32.svg"):e.includes("audio/")?"".concat(t,"sound-32.svg"):e.includes("video/")?"".concat(t,"video-32.svg"):e.includes("msexcel")||e.includes("ms-excel")||e.includes("spreadsheetml")?"".concat(t,"excel-32.svg"):e.includes("msword")||e.includes("ms-word")||e.includes("wordprocessingml")?"".concat(t,"word-32.svg"):e.includes("powerpoint")||e.includes("presentationml")?"".concat(t,"report-32.svg"):"".concat(t,"generic-32.svg"):"".concat(t,"generic-32.svg")}(t),r=(0,a.Z)({},Ye.itemImageResizable,i);return(0,ze.u)("div",{key:n,class:this.classes(Ye.itemMaskIcon,Ye.itemMask)},(0,ze.u)("img",{title:e,alt:e,src:n,class:this.classes(r,Ye.itemImage)}))}},{key:"renderImageMaskForAttachment",value:function(e,t){var i=this.viewModel.supportsResizeAttachments;if(!e)return null;var n=e.contentType,r=e.name,o=e.url;if(!i||!Be(n))return this.renderGenericImageMask(r,n);var s=this._getCSSTransform(e),l=s?{transform:s,"image-orientation":"none"}:{},u="".concat(o).concat(null!==o&&void 0!==o&&o.includes("?")?"&":"?","w=").concat(t),c=(0,a.Z)({},Ye.itemImageResizable,i);return(0,ze.u)("div",{key:u,class:this.classes(Ye.itemMask)},(0,ze.u)("img",{styles:l,alt:r,title:r,src:u,class:this.classes(c,Ye.itemImage)}))}},{key:"renderFile",value:function(e){var t=this,i=e.file;return(0,ze.u)("li",{class:Ye.item,key:i},(0,ze.u)("button",{key:"details-button",bind:this,class:Ye.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:function(){return t._startEditFile(e)},type:"button"},this.renderImageMask(e),(0,ze.u)("label",{class:Ye.itemLabel},(0,ze.u)("span",{class:Ye.itemFilename},i.name||this.messages.noTitle),(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(Ye.itemChevronIcon,(0,Re.dZ)(this.container)?Ye.iconLeft:Ye.iconRight)}))))}},{key:"renderAttachmentInfo",value:function(e){var t=this,i=e.attachmentInfo,n=e.displayType,r=this.viewModel,a=this.effectiveDisplayType,o=r.capabilities,s=r.supportsResizeAttachments,l=i.contentType,u=i.name,c=i.url,h=this.renderImageMask(i,"list"===n?48:400),d=o.editing?(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(Ye.itemChevronIcon,(0,Re.dZ)(this.container)?Ye.iconLeft:Ye.iconRight)}):null,f=[h,"preview"===a&&s&&Be(l)?null:(0,ze.u)("label",{class:Ye.itemLabel},(0,ze.u)("span",{class:Ye.itemFilename},u||this.messages.noTitle),d)],p=o.editing?(0,ze.u)("button",{key:"details-button",bind:this,class:Ye.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":i.id,onclick:function(){return t._startEditAttachment(i)},type:"button"},f):(0,ze.u)("a",{key:"details-link",class:Ye.itemButton,href:null!==c&&void 0!==c?c:void 0,target:"_blank"},f);return(0,ze.u)("li",{class:Ye.item,key:i},p)}},{key:"renderAttachmentContainer",value:function(){var e,t,i=this,n=this.effectiveDisplayType,r=this.viewModel,o=this.visibleElements,s=r.attachmentInfos,l=r.capabilities,u=r.fileInfos,c=!(null===s||void 0===s||!s.length),h=!(null===u||void 0===u||!u.length),d=(e={},(0,a.Z)(e,Ye.containerList,"preview"!==n),(0,a.Z)(e,Ye.containerPreview,"preview"===n),e),f=l.editing&&null!==(t=l.operations)&&void 0!==t&&t.add&&o.addButton?(0,ze.u)("button",{bind:this,onclick:function(){return i._startAddAttachment()},class:this.classes(Ye.esriButton,Ye.esriButtonTertiary,Ye.addAttachmentButton),type:"button"},(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(Ye.itemAddIcon,Ye.iconPlus)}),this.messages.add):void 0,p=c?(0,ze.u)("ul",{key:"attachments-list",class:Ye.items},s.toArray().map((function(e){return i.renderAttachmentInfo({attachmentInfo:e,displayType:n})}))):void 0,v=h?(0,ze.u)("ul",{key:"file-list",class:Ye.items},u.toArray().map((function(e){return i.renderFile(e)}))):void 0,y=h||c?void 0:(0,ze.u)("div",{class:Ye.empty},this.messages.noAttachments);return(0,ze.u)("div",{key:"attachments-container",class:this.classes(Ye.container,d)},p,v,y,f)}},{key:"_modeChanged",value:function(){this._set("error",null),this._set("selectedFile",null)}},{key:"_handleFileInputChange",value:function(e){var t=e.target,i=t&&t.files&&t.files.item(0);this._set("selectedFile",i)}},{key:"_submitDeleteAttachment",value:function(e,t){e.preventDefault(),t&&("file"in t?this.deleteFile(t.file):t&&this.deleteAttachment(t))}},{key:"_submitAddAttachment",value:function(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}},{key:"_submitUpdateAttachment",value:function(e,t){e.preventDefault(),t&&"file"in t?this.updateFile():this.updateAttachment()}},{key:"_startEditAttachment",value:function(e){var t=this.viewModel;t.activeFileInfo=null,t.activeAttachmentInfo=e,t.mode="edit"}},{key:"_startEditFile",value:function(e){var t=this.viewModel;t.activeAttachmentInfo=null,t.activeFileInfo=e,t.mode="edit"}},{key:"_startAddAttachment",value:function(){this.viewModel.mode="add"}},{key:"_cancelForm",value:function(e){e.preventDefault(),this.viewModel.mode="view"}},{key:"_getCSSTransform",value:function(e){var t=e.orientationInfo;return!this._supportsImageOrientation&&t?[t.rotation?"rotate(".concat(t.rotation,"deg)"):"",t.mirrored?"scaleX(-1)":""].join(" "):""}}]),n}(M.Z);(0,d._)([(0,_.Cb)()],qe.prototype,"capabilities",null),(0,d._)([(0,_.Cb)()],qe.prototype,"displayType",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],qe.prototype,"effectiveDisplayType",null),(0,d._)([(0,_.Cb)()],qe.prototype,"graphic",null),(0,d._)([(0,_.Cb)()],qe.prototype,"label",null),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Attachments/t9n/Attachments")],qe.prototype,"messages",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/core/t9n/Units")],qe.prototype,"messagesUnits",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],qe.prototype,"selectedFile",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],qe.prototype,"submitting",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],qe.prototype,"error",void 0),(0,d._)([(0,_.Cb)({type:Se})],qe.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)()],qe.prototype,"visibleElements",void 0),(0,d._)([(0,w.p)("visibleElements")],qe.prototype,"castVisibleElements",null);var Ge=qe=(0,d._)([(0,x.j)("esri.widgets.Attachments")],qe),Xe=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e)).description=null,n.title=null,n}return(0,u.Z)(i)}(Se);(0,d._)([(0,_.Cb)()],Xe.prototype,"description",void 0),(0,d._)([(0,_.Cb)()],Xe.prototype,"title",void 0);var Ke=Xe=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],Xe),$e=i(96919),Qe="esri-feature-element-info",Je={base:Qe,title:"".concat(Qe,"__title"),description:"".concat(Qe,"__description")},et=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n)).description=null,r.headingLevel=2,r.title=null,r}return(0,u.Z)(i,[{key:"render",value:function(){return(0,ze.u)("div",{class:Je.base},this.renderTitle(),this.renderDescription())}},{key:"renderTitle",value:function(){var e=this.title;return e?(0,ze.u)($e.X6,{level:this.headingLevel,class:Je.title},e):null}},{key:"renderDescription",value:function(){var e=this.description;return e?(0,ze.u)("div",{key:"description",class:Je.description},e):null}}]),i}(M.Z);(0,d._)([(0,_.Cb)()],et.prototype,"description",void 0),(0,d._)([(0,_.Cb)()],et.prototype,"headingLevel",void 0),(0,d._)([(0,_.Cb)()],et.prototype,"title",void 0);var tt=et=(0,d._)([(0,x.j)("esri.widgets.Feature.support.FeatureElementInfo")],et),it="esri-feature-attachments",nt=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n))._featureElementInfo=null,r.attachmentsWidget=new Ge,r.headingLevel=2,r.viewModel=new Ke,r}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new tt,this.addHandles([(0,m.YP)((function(){var t,i;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(i=e.viewModel)||void 0===i?void 0:i.title,e.headingLevel]}),(function(){return e._setupFeatureElementInfo()}),m.nn),(0,m.YP)((function(){return e.viewModel}),(function(t){return e.attachmentsWidget.viewModel=t}),m.nn)])}},{key:"destroy",value:function(){var e;this.attachmentsWidget.viewModel=null,this.attachmentsWidget.destroy(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"displayType",get:function(){return this.attachmentsWidget.displayType},set:function(e){this.attachmentsWidget.displayType=e}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"render",value:function(){var e,t=this.attachmentsWidget;return(0,ze.u)("div",{class:it},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),null===t||void 0===t?void 0:t.render())}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,i=this.title,n=this.headingLevel;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i,headingLevel:n})}}]),i}(M.Z);(0,d._)([(0,_.Cb)({readOnly:!0})],nt.prototype,"attachmentsWidget",void 0),(0,d._)([(0,_.Cb)()],nt.prototype,"description",null),(0,d._)([(0,_.Cb)()],nt.prototype,"displayType",null),(0,d._)([(0,_.Cb)()],nt.prototype,"graphic",null),(0,d._)([(0,_.Cb)()],nt.prototype,"headingLevel",void 0),(0,d._)([(0,_.Cb)()],nt.prototype,"title",null),(0,d._)([(0,_.Cb)({type:Ke})],nt.prototype,"viewModel",void 0);var rt=nt=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureAttachments")],nt),at=i(41691),ot=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e))._loadingPromise=null,n.created=null,n.creator=null,n.destroyer=null,n.graphic=null,n.handles.add((0,m.YP)((function(){return n.creator}),(function(e){n._destroyContent(),n._createContent(e)}),m.nn)),n}return(0,u.Z)(i,[{key:"destroy",value:function(){this._destroyContent()}},{key:"state",get:function(){return this._loadingPromise?"loading":"ready"}},{key:"_destroyContent",value:function(){var e=this.created,t=this.graphic,i=this.destroyer;e&&t&&(J(i,{graphic:t}).catch((function(){return null})),this._set("created",null))}},{key:"_createContent",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=this.graphic)&&t){e.next=3;break}return e.abrupt("return");case 3:return r=J(t,{graphic:i}).catch((function(){return null})),this._loadingPromise=r,this.notifyChange("state"),e.next=7,r;case 7:a=e.sent,r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),i}((0,at.p)(D.Z));(0,d._)([(0,_.Cb)({readOnly:!0})],ot.prototype,"created",void 0),(0,d._)([(0,_.Cb)()],ot.prototype,"creator",void 0),(0,d._)([(0,_.Cb)()],ot.prototype,"destroyer",void 0),(0,d._)([(0,_.Cb)({type:O.Z})],ot.prototype,"graphic",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],ot.prototype,"state",null);var st=ot=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],ot),lt=i(53963),ut="esri-feature-content",ct={base:ut,loaderContainer:"".concat(ut,"__loader-container"),loader:"".concat(ut,"__loader")},ht=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n)).viewModel=null,r._addTargetToAnchors=function(e){Array.from(e.querySelectorAll("a")).forEach((function(e){te(e.href)&&!e.hasAttribute("target")&&e.setAttribute("target","_blank")}))},r}return(0,u.Z)(i,[{key:"creator",get:function(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.creator},set:function(e){this.viewModel&&(this.viewModel.creator=e)}},{key:"graphic",get:function(){var e;return null===(e=this.viewModel)||void 0===e?void 0:e.graphic},set:function(e){this.viewModel&&(this.viewModel.graphic=e)}},{key:"renderLoading",value:function(){return(0,ze.u)("div",{class:ct.loaderContainer,key:"loader"},(0,ze.u)("div",{class:ct.loader}))}},{key:"renderCreated",value:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.created;return t?t instanceof HTMLElement?(0,ze.u)("div",{key:t,bind:t,afterCreate:this._attachToNode}):(0,lt.Qd)(t)?(0,ze.u)("div",{key:t},!t.destroyed&&t.render()):(0,ze.u)("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}},{key:"render",value:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.state;return(0,ze.u)("div",{class:ct.base},"loading"===t?this.renderLoading():this.renderCreated())}},{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),i}(M.Z);(0,d._)([(0,_.Cb)()],ht.prototype,"creator",null),(0,d._)([(0,_.Cb)()],ht.prototype,"graphic",null),(0,d._)([(0,_.Cb)({type:st})],ht.prototype,"viewModel",void 0);var dt=ht=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureContent")],ht),ft=i(89860),pt=i(16698),vt=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e)).attributes=null,n.expressionInfos=null,n.description=null,n.fieldInfos=null,n.title=null,n}return(0,u.Z)(i,[{key:"formattedFieldInfos",get:function(){var e=this.expressionInfos,t=this.fieldInfos,i=[];return null!==t&&void 0!==t&&t.forEach((function(t){if(!t.hasOwnProperty("visible")||t.visible){var n=t.clone();n.label=ne(n,e),i.push(n)}})),i}}]),i}(D.Z);(0,d._)([(0,_.Cb)()],vt.prototype,"attributes",void 0),(0,d._)([(0,_.Cb)({type:[ft.Z]})],vt.prototype,"expressionInfos",void 0),(0,d._)([(0,_.Cb)()],vt.prototype,"description",void 0),(0,d._)([(0,_.Cb)({type:[pt.Z]})],vt.prototype,"fieldInfos",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],vt.prototype,"formattedFieldInfos",null),(0,d._)([(0,_.Cb)()],vt.prototype,"title",void 0);var yt=vt=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],vt),gt=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function mt(e,t){if("string"!=typeof t||!t)return t;var i=function(e){var t=null;return gt.some((function(i){return i.pattern.test(e)&&(t=i),!!t})),t}(t);if(!i)return t;var n=t.match(i.pattern),r=n&&n[2],a=(0,A.gx)((0,A.gx)(i.label,{messages:e,hierPart:r}),{appName:i.appName}),o=i.target?' target="'.concat(i.target,'"'):"",s="_blank"===i.target?' rel="noreferrer"':"";return t.replace(i.pattern,"<a".concat(o,' href="$1"').concat(s,">").concat(a,"</a>"))}var bt="esri-feature-fields",_t={base:bt,fieldHeader:"".concat(bt,"__field-header"),fieldData:"".concat(bt,"__field-data"),fieldDataDate:"".concat(bt,"__field-data--date"),esriTable:"esri-widget__table"},wt=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n))._featureElementInfo=null,r.viewModel=new yt,r.messages=null,r.messagesURIUtils=null,r}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new tt,this.addHandles((0,m.YP)((function(){var t,i;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(i=e.viewModel)||void 0===i?void 0:i.title]}),(function(){return e._setupFeatureElementInfo()}),m.nn))}},{key:"destroy",value:function(){var e;null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"attributes",get:function(){return this.viewModel.attributes},set:function(e){this.viewModel.attributes=e}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"expressionInfos",get:function(){return this.viewModel.expressionInfos},set:function(e){this.viewModel.expressionInfos=e}},{key:"fieldInfos",get:function(){return this.viewModel.fieldInfos},set:function(e){this.viewModel.fieldInfos=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"renderFieldInfo",value:function(e,t){var i=this.viewModel.attributes,n=e.fieldName,r=e.label||n,o=i?null==i[n]?"":i[n]:"",s=!(!e.format||!e.format.dateFormat),l="number"!=typeof o||s?mt(this.messagesURIUtils,o):this._forceLTR(o),u=(0,a.Z)({},_t.fieldDataDate,s);return(0,ze.u)("tr",{key:"fields-element-info-row-".concat(n,"-").concat(t)},(0,ze.u)("th",{key:"fields-element-info-row-header-".concat(n,"-").concat(t),class:_t.fieldHeader,innerHTML:r}),(0,ze.u)("td",{key:"fields-element-info-row-data-".concat(n,"-").concat(t),class:this.classes(_t.fieldData,u),innerHTML:l}))}},{key:"renderFields",value:function(){var e=this,t=this.viewModel.formattedFieldInfos;return null!==t&&void 0!==t&&t.length?(0,ze.u)("table",{class:_t.esriTable,summary:this.messages.fieldsSummary},(0,ze.u)("tbody",null,t.map((function(t,i){return e.renderFieldInfo(t,i)})))):null}},{key:"render",value:function(){var e;return(0,ze.u)("div",{class:_t.base},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this.renderFields())}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,i=this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i})}},{key:"_forceLTR",value:function(e){return"&lrm;".concat(e)}}]),i}(M.Z);(0,d._)([(0,_.Cb)()],wt.prototype,"attributes",null),(0,d._)([(0,_.Cb)()],wt.prototype,"description",null),(0,d._)([(0,_.Cb)()],wt.prototype,"expressionInfos",null),(0,d._)([(0,_.Cb)()],wt.prototype,"fieldInfos",null),(0,d._)([(0,_.Cb)()],wt.prototype,"title",null),(0,d._)([(0,_.Cb)({type:yt,nonNullable:!0})],wt.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Feature/t9n/Feature")],wt.prototype,"messages",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/support/t9n/uriUtils")],wt.prototype,"messagesURIUtils",void 0);var kt=wt=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureFields")],wt),xt=i(97326),Mt=i(37762),Ct=i(77427);var Zt={maximumFractionDigits:20};i(57203);var Pt=i(74579),At=i(51995),Tt=(i(51508),i(16851),"<"),It=">",Ot=(0,L.Ze)("short-date");function Dt(e,t,i,n){var r="";0===t?r="".concat(Tt," "):t===i&&(r="".concat(It," "));var a;return a=n?(0,L.p6)(e,Ot):function(e){return(0,T.uf)(e,Zt)}(e),r+a}var Ft=new At.Z([64,64,64]);function Et(e,t){var i=[],n=e.length-1;return 5===e.length?i.push(0,2,4):i.push(0,n),e.map((function(e,r){return i.includes(r)?Dt(e,r,n,t):null}))}function St(e,t,i){return Lt.apply(this,arguments)}function Lt(){return Lt=(0,r.Z)((0,n.Z)().mark((function e(t,a,o){var s,l,u,c,h,d,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!1,l=[],u=[],t.stops&&(c=t.stops,l=c.map((function(e){return e.value})),s=c.some((function(e){return!!e.label})),s&&(u=c.map((function(e){return e.label})))),h=l[0],d=l[l.length-1],null!=h||null!=d){e.next=5;break}return e.abrupt("return",null);case 5:return f=s?null:Et(l,null!==o&&void 0!==o&&o),e.next=8,Promise.all(l.map(function(){var e=(0,r.Z)((0,n.Z)().mark((function e(r,o){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r,"opacity"!==t.type){e.next=7;break}return e.next=4,Bt(r,t,a);case 4:e.t1=e.sent,e.next=10;break;case 7:return e.next=9,Promise.resolve().then(i.bind(i,56011));case 9:e.t1=e.sent.getColor(t,r);case 10:return e.t2=e.t1,e.t3=s?u[o]:null!==(l=null===f||void 0===f?void 0:f[o])&&void 0!==l?l:"",e.abrupt("return",{value:e.t0,color:e.t2,label:e.t3});case 13:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()));case 8:return e.abrupt("return",e.sent.reverse());case 9:case"end":return e.stop()}}),e)}))),Lt.apply(this,arguments)}function Bt(e,t,i){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)((0,n.Z)().mark((function e(t,r,a){var o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new At.Z(null!==a&&void 0!==a?a:Ft),e.next=3,Promise.resolve().then(i.bind(i,56011));case 3:return s=e.sent.getOpacity(r,t),e.abrupt("return",(null!=s&&(o.a=s),o));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rt=i(6711);function Nt(e){if(!e.colorStops)return[];var t=(0,S.Z)(e.colorStops).filter((function(e){var t;return(null===(t=e.color)||void 0===t?void 0:t.a)>0})),i=t.length-1;if(t&&t[0]){var n=t[i];n&&1!==n.ratio&&(t.push(new Rt.Z({ratio:1,color:n.color})),i++)}return t.map((function(t,n){var r,a,o="";return 0===n?o=(null===(r=e.legendOptions)||void 0===r?void 0:r.minLabel)||"low":n===i&&(o=(null===(a=e.legendOptions)||void 0===a?void 0:a.maxLabel)||"high"),{color:t.color,label:o,ratio:t.ratio}})).reverse()}g.Z.getLogger("esri.renderers.support.utils"),(0,L.Ze)("short-date");function zt(e,t,i){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,r.Z)((0,n.Z)().mark((function e(t,i,r){var a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=(0,Ct.s1)(t,i,(function(){return[]}))).push.apply(a,(0,S.Z)(r));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vt(e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,x,M,C,Z,P,A,T,I,O,D;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Map,t){e.next=3;break}return e.abrupt("return",r);case 3:if(!("visualVariables"in t)||!t.visualVariables){e.next=34;break}a=t.visualVariables.filter((function(e){return"color"===e.type})),o=(0,Mt.Z)(a),e.prev=6,o.s();case 8:if((s=o.n()).done){e.next=26;break}return u=s.value,e.next=12,St(u);case 12:if(e.t1=l=e.sent,e.t0=null!==e.t1,!e.t0){e.next=16;break}e.t0=void 0!==l;case 16:if(!e.t0){e.next=20;break}e.t2=l,e.next=21;break;case 20:e.t2=[];case 21:return c=e.t2.map((function(e){return e.color})),e.next=24,zt(r,u.field||u.valueExpression,c);case 24:e.next=8;break;case 26:e.next=31;break;case 28:e.prev=28,e.t3=e.catch(6),o.e(e.t3);case 31:return e.prev=31,o.f(),e.finish(31);case 34:if("heatmap"!==t.type){e.next=40;break}return h=Nt(t).map((function(e){return e.color})),e.next=38,zt(r,t.field||t.valueExpression,h);case 38:e.next=130;break;case 40:if("pie-chart"!==t.type){e.next=62;break}f=(0,Mt.Z)(t.attributes),e.prev=42,f.s();case 44:if((p=f.n()).done){e.next=50;break}return v=p.value,e.next=48,zt(r,v.field||v.valueExpression,[v.color]);case 48:e.next=44;break;case 50:e.next=55;break;case 52:e.prev=52,e.t4=e.catch(42),f.e(e.t4);case 55:return e.prev=55,f.f(),e.finish(55);case 58:return e.next=60,zt(r,"default",[null===t||void 0===t||null===(d=t.othersCategory)||void 0===d?void 0:d.color,(0,Pt._h)(t.backgroundFillSymbol,null)]);case 60:e.next=130;break;case 62:if("dot-density"!==t.type){e.next=84;break}y=(0,Mt.Z)(t.attributes),e.prev=64,y.s();case 66:if((g=y.n()).done){e.next=72;break}return m=g.value,e.next=70,zt(r,m.field||m.valueExpression,[m.color]);case 70:e.next=66;break;case 72:e.next=77;break;case 74:e.prev=74,e.t5=e.catch(64),y.e(e.t5);case 77:return e.prev=77,y.f(),e.finish(77);case 80:return e.next=82,zt(r,"default",[t.backgroundColor]);case 82:e.next=130;break;case 84:if("unique-value"!==t.type){e.next=120;break}if("predominance"!==(null===(i=t.authoringInfo)||void 0===i?void 0:i.type)){e.next=105;break}_=(0,Mt.Z)(null!==(b=t.uniqueValueInfos)&&void 0!==b?b:[]),e.prev=87,_.s();case 89:if((w=_.n()).done){e.next=95;break}return x=w.value,e.next=93,zt(r,x.value.toString(),[(0,Pt._h)(x.symbol,null)]);case 93:e.next=89;break;case 95:e.next=100;break;case 97:e.prev=97,e.t6=e.catch(87),_.e(e.t6);case 100:return e.prev=100,_.f(),e.finish(100);case 103:e.next=118;break;case 105:if(C=(null!==(M=t.uniqueValueInfos)&&void 0!==M?M:[]).map((function(e){return(0,Pt._h)(e.symbol,null)})),Z=t.field,P=t.field2,A=t.field3,T=t.valueExpression,e.t7=Z||T,!e.t7){e.next=110;break}return e.next=110,zt(r,Z||T,C);case 110:if(e.t8=P,!e.t8){e.next=114;break}return e.next=114,zt(r,P,C);case 114:if(e.t9=A,!e.t9){e.next=118;break}return e.next=118,zt(r,A,C);case 118:e.next=130;break;case 120:if("class-breaks"!==t.type){e.next=126;break}return I=t.classBreakInfos.map((function(e){return(0,Pt._h)(e.symbol,null)})),O=t.field,D=t.valueExpression,e.next=124,zt(r,null!==O&&void 0!==O?O:D,I);case 124:e.next=130;break;case 126:if(e.t10="simple"===t.type,!e.t10){e.next=130;break}return e.next=130,zt(r,"default",[(0,Pt._h)(t.symbol,null)]);case 130:if(e.t11="defaultSymbol"in t&&t.defaultSymbol,!e.t11){e.next=134;break}return e.next=134,zt(r,"default",[(0,Pt._h)(t.defaultSymbol,null)]);case 134:return r.forEach((function(e,t){var i=(0,k.Tw)(e.filter(Boolean),(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}));r.set(t,i)})),e.abrupt("return",r);case 136:case"end":return e.stop()}}),e,null,[[6,28,31,34],[42,52,55,58],[64,74,77,80],[87,97,100,103]])})))).apply(this,arguments)}var Yt=i(60260),Ut=i(76200),qt=i(66978),Gt=(i(64020),i(77946)),Xt=(i(42265),i(19545),i(35995),i(92975),i(83406),i(53866),i(32238),i(77577),i(585)),Kt=(i(80885),i(29909),i(91340),i(78084),i(49818),i(86638)),$t=(i(59486),i(99086)),Qt=(i(54307),i(33997)),Jt=g.Z.getLogger("esri.widgets.Feature.support.relatedFeatureUtils"),ei=new Map;function ti(e){if(!Pe(e))return null;var t=e.split("/").slice(1),i=(0,s.Z)(t,2);return{layerId:i[0],fieldName:i[1]}}function ii(e){var t=e.originRelationship,i=e.relationships,n=e.layerId,r=null;return i&&i.some((function(e){return"".concat(e.relatedTableId)===n&&e.id===(null===t||void 0===t?void 0:t.id)&&(r=e),!!r})),r}function ni(e,t){var i=t.toLowerCase();for(var n in e)if(n.toLowerCase()===i)return e[n];return null}function ri(e,t){var i=function(e,t){if(!t.relationships)return null;var i=null;return t.relationships.some((function(t){return t.id===parseInt(e,10)&&(i=t,!0)})),i}(e,t);if(i)return{url:"".concat(t.url,"/").concat(i.relatedTableId),sourceSpatialReference:t.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function ai(e,t){if(t&&e){var i=e.features,n=e.statsFeatures,r=i&&i.value;t.relatedFeatures=r?r.features:[];var a=n&&n.value;t.relatedStatsFeatures=a?a.features:[]}}function oi(e,t,i,n){var r,a,o=new $t.default;return o.outFields=["*"],o.relationshipId="number"==typeof t.id?t.id:parseInt(t.id,10),o.objectIds=[e.attributes[i.objectIdField]],null!==(r=null===(a=i.queryRelatedFeatures)||void 0===a?void 0:a.call(i,o,n))&&void 0!==r?r:Promise.resolve({})}function si(e,t,i){for(var n=0,r=[];n<t.length;)r.push("".concat(e," IN (").concat(t.slice(n,i+n),")")),n+=i;return r.join(" OR ")}function li(){return li=(0,r.Z)((0,n.Z)().mark((function e(t,i,r,a){var o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,k,x,M;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.layerId.toString(),s=i.layerInfo,l=i.relation,u=i.relatedFields,c=i.outStatistics,h=i.url,d=i.sourceSpatialReference,s&&l){e.next=3;break}return e.abrupt("return",null);case 3:if(null===(f=ii({originRelationship:l,relationships:s.relationships,layerId:o}))||void 0===f||!f.relationshipTableId||!f.keyFieldInRelationshipTable){e.next=17;break}return e.next=7,oi(t,f,r,a);case 7:if(e.t0=t.attributes[r.objectIdField],p=e.sent[e.t0]){e.next=11;break}return e.abrupt("return",null);case 11:if(v=p.features.map((function(e){return e.attributes[s.objectIdField]})),null===c||void 0===c||!c.length||!s.supportsStatistics){e.next=17;break}return(y=new Kt.Z).where=si(s.objectIdField,v,1e3),y.outFields=u,y.outStatistics=c,y.sourceSpatialReference=d,g={features:Promise.resolve(p),statsFeatures:(0,Gt.e)(h,y)},e.abrupt("return",(0,qt.as)(g));case 17:if(!(m=null===f||void 0===f?void 0:f.keyField)){e.next=21;break}return b=(0,B.H7)(hi(s.fields,m)),_=ni(t.attributes,l.keyField),w=b?"".concat(m,"=").concat(_):"".concat(m,"='").concat(_,"'"),k=(0,Gt.e)(h,new Kt.Z({where:w,outFields:i.relatedFields,sourceSpatialReference:d}),a),x=i.outStatistics&&i.outStatistics.length>0&&s.supportsStatistics?(0,Gt.e)(h,new Kt.Z({where:w,outFields:i.relatedFields,outStatistics:i.outStatistics,sourceSpatialReference:d}),a):null,M={features:k},e.abrupt("return",(x&&(M.statsFeatures=x),(0,qt.as)(M)));case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e)}))),li.apply(this,arguments)}function ui(e,t){var i=e.relatedInfos,n=e.layer,r={};return i.forEach((function(e,t){var i=e.relation;if(!i){var a=new C.Z("relation-required","A relation is required on a layer to retrieve related records.");throw Jt.error(a),a}var o=i.relatedTableId;if("number"!=typeof o){var s=new C.Z("A related table ID is required on a layer to retrieve related records.");throw Jt.error(s),s}var l="".concat(n.url,"/").concat(o),u=ei.get(l),c=null!==u&&void 0!==u?u:function(e,t){return(0,Ut.default)(e,{query:{f:"json"},signal:t&&t.signal})}(l);u||ei.set(l,c),r[t]=c})),(0,qt.Hl)((0,qt.as)(r),t)}function ci(e,t){var i=e.graphic,n=e.relatedInfos,r=e.layer,a={};return n.forEach((function(e,n){e.layerInfo&&(a[n]=function(e,t,i,n){return li.apply(this,arguments)}(i,e,r,t))})),(0,qt.as)(a)}function hi(e,t){if(null!=e){t=t.toLowerCase();var i,n=(0,Mt.Z)(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;if(r&&r.name.toLowerCase()===t)return r}}catch(a){n.e(a)}finally{n.f()}}return null}var di={chartAnimation:!0},fi=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e)).abilities=(0,o.Z)({},di),n.activeMediaInfoIndex=0,n.attributes=null,n.description=null,n.fieldInfoMap=null,n.formattedAttributes=null,n.expressionAttributes=null,n.isAggregate=!1,n.layer=null,n.mediaInfos=null,n.popupTemplate=null,n.relatedInfos=null,n.title=null,n}return(0,u.Z)(i,[{key:"castAbilities",value:function(e){return(0,o.Z)((0,o.Z)({},di),e)}},{key:"activeMediaInfo",get:function(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}},{key:"formattedMediaInfos",get:function(){return this._formatMediaInfos()||[]}},{key:"formattedMediaInfoCount",get:function(){return this.formattedMediaInfos.length}},{key:"setActiveMedia",value:function(e){this._setContentElementMedia(e)}},{key:"next",value:function(){this._pageContentElementMedia(1)}},{key:"previous",value:function(){this._pageContentElementMedia(-1)}},{key:"_setContentElementMedia",value:function(e){var t=this.formattedMediaInfoCount,i=(e+t)%t;this.activeMediaInfoIndex=i}},{key:"_pageContentElementMedia",value:function(e){var t=this.activeMediaInfoIndex+e;this._setContentElementMedia(t)}},{key:"_formatMediaInfos",value:function(){var e,t,i,n,r,a=this,o=this.mediaInfos,s=this.layer,l=null!==(e=this.attributes)&&void 0!==e?e:{},u=null!==(t=this.formattedAttributes)&&void 0!==t?t:{},c=null!==(i=this.expressionAttributes)&&void 0!==i?i:{},h=null!==(n=this.fieldInfoMap)&&void 0!==n?n:new Map;return null!==(r=null===o||void 0===o?void 0:o.map((function(e){var t=null===e||void 0===e?void 0:e.clone();if(!t)return null;if(t.title=se({attributes:l,fieldInfoMap:h,globalAttributes:u,expressionAttributes:c,layer:s,text:t.title}),t.caption=se({attributes:l,fieldInfoMap:h,globalAttributes:u,expressionAttributes:c,layer:s,text:t.caption}),t.altText=se({attributes:l,fieldInfoMap:h,globalAttributes:u,expressionAttributes:c,layer:s,text:t.altText}),"image"===t.type){var i=t.value;return a._setImageValue({value:i,formattedAttributes:u,layer:s}),t.value.sourceURL?t:void 0}if("pie-chart"===t.type||"line-chart"===t.type||"column-chart"===t.type||"bar-chart"===t.type){var n=t.value;return a._setChartValue({value:n,chartType:t.type,attributes:l,formattedAttributes:u,layer:s,expressionAttributes:c}),t}return null})).filter(k.pC))&&void 0!==r?r:[]}},{key:"_setImageValue",value:function(e){var t,i=null!==(t=this.fieldInfoMap)&&void 0!==t?t:new Map,n=e.value,r=e.formattedAttributes,a=e.layer,o=n.linkURL,s=n.sourceURL;if(s){var l=ce(s,a);n.sourceURL=le({formattedAttributes:r,template:l,fieldInfoMap:i})}if(o){var u=ce(o,a);n.linkURL=le({formattedAttributes:r,template:u,fieldInfoMap:i})}}},{key:"_setChartValue",value:function(e){var t,i=this,n=e.value,r=e.attributes,a=e.formattedAttributes,o=e.chartType,s=e.layer,l=e.expressionAttributes,u=this.popupTemplate,c=this.relatedInfos,h=n.fields,d=n.normalizeField,f=s;if(n.fields=function(e,t){return e&&e.map((function(e){return re(e,t)}))}(h,f),d&&(n.normalizeField=re(d,f)),h.some((function(e){return!!(null!=a[e]||Pe(e)&&null!==c&&void 0!==c&&c.size)}))){var p=null!==(t=null===u||void 0===u?void 0:u.fieldInfos)&&void 0!==t?t:[];h.forEach((function(e){if(Pe(e))n.series=[].concat((0,S.Z)(n.series),(0,S.Z)(i._getRelatedChartInfos({fieldInfos:p,fieldName:e,formattedAttributes:a,chartType:o,value:n})));else{var t=i._getChartOption({value:n,attributes:r,chartType:o,formattedAttributes:a,expressionAttributes:l,fieldName:e,fieldInfos:p});n.series.push(t)}}))}}},{key:"_getRelatedChartInfos",value:function(e){var t,i=this,n=e.fieldInfos,r=e.fieldName,a=e.formattedAttributes,o=e.chartType,s=e.value,l=[],u=ti(r),c=u&&(null===(t=this.relatedInfos)||void 0===t?void 0:t.get(u.layerId.toString()));if(!c)return l;var h=c.relatedFeatures,d=c.relation;if(!d||!h)return l;var f=d.cardinality;return h.forEach((function(e){var t=e.attributes;t&&Object.keys(t).forEach((function(e){e===u.fieldName&&l.push(i._getChartOption({value:s,attributes:t,formattedAttributes:a,fieldName:r,chartType:o,relatedFieldName:e,hasMultipleRelatedFeatures:(null===h||void 0===h?void 0:h.length)>1,fieldInfos:n}))}))})),"one-to-many"===f||"many-to-many"===f?l:[l[0]]}},{key:"_getTooltip",value:function(e){var t=e.label,i=e.value;return"pie-chart"===e.chartType?"".concat(t):"".concat(t,": ").concat(i)}},{key:"_getChartOption",value:function(e){var t,i,n=e.value,r=e.attributes,a=e.formattedAttributes,o=e.expressionAttributes,s=e.fieldName,l=e.relatedFieldName,u=e.fieldInfos,c=e.chartType,h=e.hasMultipleRelatedFeatures,d=this.layer,f=null!==(t=this.fieldInfoMap)&&void 0!==t?t:new Map,p=n.normalizeField,v=n.tooltipField,y=p?Pe(p)?r[ti(p).fieldName]:r[p]:null,g=ie(s)&&o&&void 0!==o[s]?o[s]:l&&void 0!==r[l]?r[l]:void 0!==r[s]?r[s]:a[s],m=new Yt.Z({fieldName:s,value:void 0===g?null:g&&y?g/y:g});if(Pe(s)){var b,_,w,k,x,M=f.get(s.toLowerCase()),C=v&&f.get(v.toLowerCase()),Z=null!==(b=null===M||void 0===M?void 0:M.fieldName)&&void 0!==b?b:s,P=h&&v?ti(v).fieldName:null!==(_=null===C||void 0===C?void 0:C.fieldName)&&void 0!==_?_:v,A=h&&P?r[P]:null!==(w=null!==(k=null!==(x=a[P])&&void 0!==x?x:null===M||void 0===M?void 0:M.label)&&void 0!==k?k:null===M||void 0===M?void 0:M.fieldName)&&void 0!==w?w:l,T=h&&l?r[l]:a[Z];return m.tooltip=this._getTooltip({label:A,value:T,chartType:c}),m}var I=ve(u,s),O=re(s,d),D=v&&void 0!==a[v]?a[v]:ne(I||new pt.Z({fieldName:O}),null===(i=this.popupTemplate)||void 0===i?void 0:i.expressionInfos),F=a[O];return m.tooltip=this._getTooltip({label:D,value:F,chartType:c}),m}}]),i}(D.Z);(0,d._)([(0,_.Cb)()],fi.prototype,"abilities",void 0),(0,d._)([(0,w.p)("abilities")],fi.prototype,"castAbilities",null),(0,d._)([(0,_.Cb)()],fi.prototype,"activeMediaInfoIndex",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],fi.prototype,"activeMediaInfo",null),(0,d._)([(0,_.Cb)()],fi.prototype,"attributes",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"description",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"fieldInfoMap",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"formattedAttributes",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"expressionAttributes",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],fi.prototype,"formattedMediaInfos",null),(0,d._)([(0,_.Cb)()],fi.prototype,"isAggregate",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"layer",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],fi.prototype,"formattedMediaInfoCount",null),(0,d._)([(0,_.Cb)()],fi.prototype,"mediaInfos",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"popupTemplate",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"relatedInfos",void 0),(0,d._)([(0,_.Cb)()],fi.prototype,"title",void 0);var pi=fi=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],fi),vi=i(86798),yi=i(37384),gi=i(8704),mi="esri-feature-media",bi={base:mi,mediaContainer:"".concat(mi,"__container"),mediaItemContainer:"".concat(mi,"__item-container"),mediaItem:"".concat(mi,"__item"),mediaItemText:"".concat(mi,"__item-text"),mediaItemTitle:"".concat(mi,"__item-title"),mediaItemCaption:"".concat(mi,"__item-caption"),mediaNavigation:"".concat(mi,"__item-navigation"),mediaPagination:"".concat(mi,"__pagination"),mediaPaginationText:"".concat(mi,"__pagination-text"),mediaPrevious:"".concat(mi,"__previous"),mediaPreviousIconLTR:"".concat(mi,"__previous-icon"),mediaPreviousIconRTL:"".concat(mi,"__previous-icon--rtl"),mediaNext:"".concat(mi,"__next"),mediaNextIconLTR:"".concat(mi,"__next-icon"),mediaNextIconRTL:"".concat(mi,"__next-icon--rtl"),mediaChart:"".concat(mi,"__chart"),mediaPaginationButton:"".concat(mi,"__pagination-button"),mediaPaginationIcon:"".concat(mi,"__pagination-icon"),mediaChartRendered:"".concat(mi,"__chart--rendered")},_i="category",wi="value",ki=function(e){(0,c.Z)(o,e);var t=(0,h.Z)(o);function o(e,a){var s;return(0,l.Z)(this,o),(s=t.call(this,e,a))._refreshTimer=null,s._refreshIntervalInfo=null,s._featureElementInfo=null,s._chartRootMap=new WeakMap,s.viewModel=new pi,s.messages=null,s._disposeChart=function(e){var t;null!==(t=s._chartRootMap.get(e))&&void 0!==t&&t.dispose(),s._chartRootMap.delete(e)},s._createChart=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var r,a,o,l,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,xt.Z)(s),a=r.destroyed,o=r.viewModel,!a&&o&&t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Promise.resolve().then(i.bind(i,86798));case 5:return l=e.sent,u=l.createRoot,e.next=9,u(t);case 9:c=e.sent,s._chartRootMap.set(t,c),s._renderChart({mediaInfo:o.activeMediaInfo,root:c});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s}return(0,u.Z)(o,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new tt,this.addHandles([(0,m.YP)((function(){var t,i;return[null===(t=e.viewModel)||void 0===t?void 0:t.activeMediaInfo,null===(i=e.viewModel)||void 0===i?void 0:i.activeMediaInfoIndex]}),(function(){return e._setupMediaRefreshTimer()}),m.nn),(0,m.YP)((function(){var t,i;return[null===(t=e.viewModel)||void 0===t?void 0:t.description,null===(i=e.viewModel)||void 0===i?void 0:i.title]}),(function(){return e._setupFeatureElementInfo()}),m.nn)])}},{key:"loadDependencies",value:function(){return(0,je.h)({icon:function(){return i.e(7474).then(i.bind(i,87474))}})}},{key:"destroy",value:function(){var e;this._clearMediaRefreshTimer(),null===(e=this._featureElementInfo)||void 0===e||e.destroy()}},{key:"attributes",get:function(){return this.viewModel.attributes},set:function(e){this.viewModel.attributes=e}},{key:"activeMediaInfoIndex",get:function(){return this.viewModel.activeMediaInfoIndex},set:function(e){this.viewModel.activeMediaInfoIndex=e}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"fieldInfoMap",get:function(){return this.viewModel.fieldInfoMap},set:function(e){this.viewModel.fieldInfoMap=e}},{key:"layer",get:function(){return this.viewModel.layer},set:function(e){this.viewModel.layer=e}},{key:"mediaInfos",get:function(){return this.viewModel.mediaInfos},set:function(e){this.viewModel.mediaInfos=e}},{key:"popupTemplate",get:function(){return this.viewModel.popupTemplate},set:function(e){this.viewModel.popupTemplate=e}},{key:"relatedInfos",get:function(){return this.viewModel.relatedInfos},set:function(e){this.viewModel.relatedInfos=e}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"render",value:function(){var e;return(0,ze.u)("div",{bind:this,class:bi.base,onkeyup:this._handleMediaKeyup},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),this.renderMedia())}},{key:"renderMedia",value:function(){var e=this.viewModel,t=e.formattedMediaInfoCount,i=e.activeMediaInfoIndex,n=this.renderMediaText();return t?(0,ze.u)("div",{key:"media-element-container",class:bi.mediaContainer},this.renderMediaInfo(),(0,ze.u)("div",{class:bi.mediaNavigation},n,(0,ze.u)("div",{class:bi.mediaPagination},this.renderMediaPageButton("previous"),(0,ze.u)("span",{class:bi.mediaPaginationText},(0,gi.n)(this.messages.pageText,{index:i+1,total:t})),this.renderMediaPageButton("next")))):null}},{key:"renderMediaText",value:function(){var e=this.viewModel.activeMediaInfo;if(!e)return null;var t=e&&e.title?(0,ze.u)("div",{key:"media-title",class:bi.mediaItemTitle,innerHTML:e.title}):null,i=e&&e.caption?(0,ze.u)("div",{key:"media-caption",class:bi.mediaItemCaption,innerHTML:e.caption}):null;return t||i?(0,ze.u)("div",{key:"media-text",class:bi.mediaItemText},t,i):null}},{key:"renderImageMediaInfo",value:function(e){var t,i=this._refreshIntervalInfo,n=this.viewModel,r=n.activeMediaInfoIndex,a=n.formattedMediaInfoCount,o=e.value,s=e.refreshInterval,l=e.altText,u=e.title,c=e.type,h=o.sourceURL,d=o.linkURL,f=te(null!==d&&void 0!==d?d:void 0)?"_blank":"_self",p="_blank"===f?"noreferrer":"",v=s?i:null,y=v?v.timestamp:0,g=v?v.sourceURL:h,m=(0,ze.u)("img",{alt:l||u,key:"media-".concat(c,"-").concat(r,"-").concat(a,"-").concat(y),src:null!==g&&void 0!==g?g:void 0});return null!==(t=d?(0,ze.u)("a",{title:u,href:d,rel:p,target:f},m):null)&&void 0!==t?t:m}},{key:"renderChartMediaInfo",value:function(e){var t=this.viewModel,i=t.activeMediaInfoIndex,n=t.formattedMediaInfoCount;return(0,ze.u)("div",{key:"media-".concat(e.type,"-").concat(i,"-").concat(n),bind:this,class:bi.mediaChart,afterCreate:this._createChart,afterRemoved:this._disposeChart})}},{key:"renderMediaInfoType",value:function(){var e=this.viewModel.activeMediaInfo;return e?"image"===e.type?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}},{key:"renderMediaInfo",value:function(){return this.viewModel.activeMediaInfo?(0,ze.u)("div",{key:"media-container",class:bi.mediaItemContainer},(0,ze.u)("div",{key:"media-item-container",class:bi.mediaItem},this.renderMediaInfoType())):null}},{key:"renderMediaPageButton",value:function(e){if(this.viewModel.formattedMediaInfoCount<2)return null;var t="previous"===e,i=t?this.messages.previous:this.messages.next,n=t?"chevron-left":"chevron-right",r=t?"media-previous":"media-next",a=t?this._previous:this._next;return(0,ze.u)("button",{type:"button",key:r,title:i,"aria-label":i,tabIndex:0,class:bi.mediaPaginationButton,bind:this,onclick:a},(0,ze.u)("calcite-icon",{class:bi.mediaPaginationIcon,scale:"s",icon:n}))}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.description,i=this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:t,title:i})}},{key:"_next",value:function(){this.viewModel.next()}},{key:"_previous",value:function(){this.viewModel.previous()}},{key:"_getRenderer",value:function(){if(this.viewModel){var e=this.viewModel,t=e.isAggregate,i=e.layer;return t&&null!==i&&void 0!==i&&i.featureReduction&&"renderer"in i.featureReduction?i.featureReduction.renderer:null===i||void 0===i?void 0:i.renderer}}},{key:"_getRendererColors",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,r,a,o,s,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(6715).then(i.bind(i,96715));case 2:if(t=e.sent,r=t.colorAm5,a=new Map,o=this._getRenderer(),s="default",o){e.next=9;break}return e.abrupt("return",a);case 9:return e.next=11,Vt(o);case 11:return(l=e.sent).delete(s),e.abrupt("return",Array.from(l.values()).every((function(e){return 1===(null===e||void 0===e?void 0:e.length)}))?(Array.from(l.keys()).forEach((function(e){var t,i=null===(t=l.get(e))||void 0===t||null===(t=t[0])||void 0===t?void 0:t.toCss(!0);i&&a.set(e,r(i))})),a):a);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleMediaKeyup",value:function(e){var t=(0,v.kK)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.viewModel.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.viewModel.next())}},{key:"_canAnimateChart",value:function(){return!!this.viewModel&&!!this.viewModel.abilities.chartAnimation&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches}},{key:"_getChartAnimationMS",value:function(){return this._canAnimateChart()?250:0}},{key:"_getChartSeriesAnimationMS",value:function(){return this._canAnimateChart()?500:0}},{key:"_renderChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var r,o,s,l,u,c,h,d,f,p,v,y,g,m,b;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.root,o=t.mediaInfo,s=o.value,l=o.type,e.next=6,i.e(6715).then(i.bind(i,96715));case 6:return u=e.sent,c=u.ResponsiveThemeAm5,h=u.DarkThemeAm5,d=u.AnimatedThemeAm5,f=u.ColorSetAm5,p=u.ThemeAm5,(v=p.new(r)).rule("ColorSet").set("colors",vi.esriChartColorSet),y=[c.new(r),v],(0,yi.$o)()&&y.push(h.new(r)),this._canAnimateChart()&&y.push(d.new(r)),r.setThemes(y),e.next=18,this._getRendererColors();case 18:g=e.sent,m=f.new(r,{}),b=s.series.map((function(e,t){var i,n=g.get(e.fieldName)||m.getIndex(t);return i={},(0,a.Z)(i,_i,e.tooltip),(0,a.Z)(i,wi,e.value),(0,a.Z)(i,"columnSettings",{fill:n,stroke:n}),i})).filter((function(e){return"pie-chart"!==l||null!=e.value&&e.value>0})),"pie-chart"===l?this._createPieChart(t,b):this._createXYChart(t,b);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDirection",value:function(){return(0,Re.dZ)(this.container)?"rtl":"ltr"}},{key:"_isInversed",value:function(){return!!(0,Re.dZ)(this.container)}},{key:"_customizeChartTooltip",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var r,a,o,s,l=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"horizontal",e.next=3,i.e(6715).then(i.bind(i,96715));case 3:o=e.sent,s=o.colorAm5,t.setAll({pointerOrientation:a}),null!==(r=t.get("background"))&&void 0!==r&&r.setAll({stroke:s("rgba(50, 50, 50, 1)")}),t.label.setAll({direction:this._getDirection(),oversizedBehavior:"wrap",maxWidth:200});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createPieChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,l,u,c,h,d,f,p,v,y,g;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(6715).then(i.bind(i,96715));case 2:return a=e.sent,o=a.TooltipAm5,e.next=6,Promise.all([i.e(7228),i.e(6568)]).then(i.bind(i,77011));case 6:s=e.sent,l=s.PieChartAm5,u=s.PieSeriesAm5,c=t.mediaInfo,h=t.root,d=c.title,5,f=(null===c||void 0===c?void 0:c.altText)||(null===c||void 0===c?void 0:c.title)||"",p=h.container.children.push(l.new(h,{ariaLabel:f,focusable:!0,paddingBottom:5,paddingTop:5,paddingLeft:5,paddingRight:5})),v="{category}: {valuePercentTotal.formatNumber('0.00')}%\n ({value})",y=o.new(h,{labelText:v}),(g=p.series.push(u.new(h,{name:d,valueField:wi,categoryField:_i,tooltip:y}))).ticks.template.set("forceHidden",!0),g.labels.template.set("forceHidden",!0),g.slices.template.states.create("active",{shiftRadius:5}),this._customizeChartTooltip(y),g.slices.template.setAll({ariaLabel:v,focusable:!0,templateField:"columnSettings"}),g.data.setAll(r),g.appear(this._getChartSeriesAnimationMS()),p.appear(this._getChartAnimationMS()),p.root.dom.classList.toggle(bi.mediaChartRendered,!0);case 19:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getMinSeriesValue",value:function(e){var t=0;return e.forEach((function(e){return t=Math.min(e.value,t)})),t}},{key:"_createColumnChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r,a){var o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,k,x;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(6715).then(i.bind(i,96715));case 2:return o=e.sent,s=o.TooltipAm5,l=o.ScrollbarAm5,e.next=7,Promise.all([i.e(7228),i.e(6436)]).then(i.bind(i,96436));case 7:u=e.sent,c=u.CategoryAxisAm5,h=u.AxisRendererXAm5,d=u.ValueAxisAm5,f=u.AxisRendererYAm5,p=u.ColumnSeriesAm5,v=r.mediaInfo,y=r.root,g=v.value,m=v.title,t.setAll({wheelX:"panX",wheelY:"zoomX"}),(b=t.xAxes.push(c.new(y,{renderer:h.new(y,{inversed:this._isInversed()}),categoryField:_i}))).get("renderer").labels.template.setAll({forceHidden:!0}),(_=t.yAxes.push(d.new(y,{renderer:f.new(y,{inside:!1}),min:this._getMinSeriesValue(g.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),w="{categoryX}",k=s.new(y,{labelText:w}),x=t.series.push(p.new(y,{name:m,xAxis:b,yAxis:_,valueYField:wi,categoryXField:_i,tooltip:k})),this._customizeChartTooltip(k),x.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),g.series.length>15&&t.set("scrollbarX",l.new(y,{orientation:"horizontal"})),b.data.setAll(a),x.data.setAll(a),x.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 24:case"end":return e.stop()}}),e,this)})));return function(t,i,n){return e.apply(this,arguments)}}()},{key:"_createBarChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r,a){var o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,k,x;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(6715).then(i.bind(i,96715));case 2:return o=e.sent,s=o.TooltipAm5,l=o.ScrollbarAm5,e.next=7,Promise.all([i.e(7228),i.e(6436)]).then(i.bind(i,96436));case 7:u=e.sent,c=u.CategoryAxisAm5,h=u.AxisRendererXAm5,d=u.ValueAxisAm5,f=u.AxisRendererYAm5,p=u.ColumnSeriesAm5,v=r.mediaInfo,y=r.root,g=v.value,m=v.title,t.setAll({wheelX:"panY",wheelY:"zoomY"}),(b=t.yAxes.push(c.new(y,{renderer:f.new(y,{inversed:!0}),categoryField:_i}))).get("renderer").labels.template.setAll({forceHidden:!0}),(_=t.xAxes.push(d.new(y,{renderer:h.new(y,{inside:!1,inversed:this._isInversed()}),min:this._getMinSeriesValue(g.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),w="{categoryY}",k=s.new(y,{labelText:w}),x=t.series.push(p.new(y,{name:m,xAxis:_,yAxis:b,valueXField:wi,categoryYField:_i,tooltip:k})),this._customizeChartTooltip(k,"vertical"),x.columns.template.setAll({ariaLabel:w,focusable:!0,templateField:"columnSettings"}),g.series.length>15&&t.set("scrollbarY",l.new(y,{orientation:"vertical"})),b.data.setAll(a),x.data.setAll(a),x.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 24:case"end":return e.stop()}}),e,this)})));return function(t,i,n){return e.apply(this,arguments)}}()},{key:"_createLineChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r,a){var o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,k;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.e(6715).then(i.bind(i,96715));case 2:return o=e.sent,s=o.TooltipAm5,l=o.ScrollbarAm5,e.next=7,Promise.all([i.e(7228),i.e(6436)]).then(i.bind(i,96436));case 7:u=e.sent,c=u.CategoryAxisAm5,h=u.AxisRendererXAm5,d=u.ValueAxisAm5,f=u.AxisRendererYAm5,p=u.LineSeriesAm5,v=r.root,y=r.mediaInfo,g=y.value,m=y.title,t.setAll({wheelX:"panX",wheelY:"zoomX"}),(b=t.xAxes.push(c.new(v,{renderer:h.new(v,{inversed:this._isInversed()}),categoryField:_i}))).get("renderer").labels.template.setAll({forceHidden:!0}),(_=t.yAxes.push(d.new(v,{renderer:f.new(v,{inside:!1}),min:this._getMinSeriesValue(g.series)}))).get("renderer").labels.template.setAll({direction:this._getDirection()}),"{categoryX}",w=s.new(v,{labelText:"{categoryX}"}),k=t.series.push(p.new(v,{name:m,xAxis:b,yAxis:_,valueYField:wi,categoryXField:_i,tooltip:w})),this._customizeChartTooltip(w,"vertical"),g.series.length>15&&t.set("scrollbarX",l.new(v,{orientation:"horizontal"})),b.data.setAll(a),k.data.setAll(a),k.appear(this._getChartSeriesAnimationMS()),t.appear(this._getChartAnimationMS());case 24:case"end":return e.stop()}}),e,this)})));return function(t,i,n){return e.apply(this,arguments)}}()},{key:"_createXYChart",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,l,u,c,h,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([i.e(7228),i.e(6436)]).then(i.bind(i,96436));case 2:if(a=e.sent,o=a.XYChartAm5,s=a.XYCursorAm5,l=t.root,u=t.mediaInfo,c=u.type,h=(null===u||void 0===u?void 0:u.altText)||(null===u||void 0===u?void 0:u.title)||"",(d=l.container.children.push(o.new(l,{ariaLabel:h,focusable:!0,panX:!0,panY:!0}))).set("cursor",s.new(l,{})),e.t0="column-chart"===c,!e.t0){e.next=15;break}return e.next=15,this._createColumnChart(d,t,r);case 15:if(e.t1="bar-chart"===c,!e.t1){e.next=19;break}return e.next=19,this._createBarChart(d,t,r);case 19:if(e.t2="line-chart"===c,!e.t2){e.next=23;break}return e.next=23,this._createLineChart(d,t,r);case 23:d.root.dom.classList.toggle(bi.mediaChartRendered,!0);case 24:case"end":return e.stop()}}),e,this)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_clearMediaRefreshTimer",value:function(){var e=this._refreshTimer;e&&(clearTimeout(e),this._refreshTimer=null)}},{key:"_updateMediaInfoTimestamp",value:function(e){var t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:e&&this._getImageSource(e,t)}}},{key:"_setupMediaRefreshTimer",value:function(){this._clearMediaRefreshTimer();var e=this.viewModel.activeMediaInfo;e&&"image"===e.type&&e.refreshInterval&&this._setRefreshTimeout(e)}},{key:"_setRefreshTimeout",value:function(e){var t=this,i=e.refreshInterval,n=e.value;if(i){var r=6e4*i;this._updateMediaInfoTimestamp(n.sourceURL);var a=setInterval((function(){t._updateMediaInfoTimestamp(n.sourceURL)}),r);this._refreshTimer=a}}},{key:"_getImageSource",value:function(e,t){var i=e.includes("?")?"&":"?",n=e.split("#"),r=(0,s.Z)(n,2),a=r[0],o=r[1],l=void 0===o?"":o;return"".concat(a).concat(i,"timestamp=").concat(t).concat(l?"#":"").concat(l)}}]),o}(M.Z);(0,d._)([(0,_.Cb)()],ki.prototype,"_refreshIntervalInfo",void 0),(0,d._)([(0,_.Cb)()],ki.prototype,"attributes",null),(0,d._)([(0,_.Cb)()],ki.prototype,"activeMediaInfoIndex",null),(0,d._)([(0,_.Cb)()],ki.prototype,"description",null),(0,d._)([(0,_.Cb)()],ki.prototype,"fieldInfoMap",null),(0,d._)([(0,_.Cb)()],ki.prototype,"layer",null),(0,d._)([(0,_.Cb)()],ki.prototype,"mediaInfos",null),(0,d._)([(0,_.Cb)()],ki.prototype,"popupTemplate",null),(0,d._)([(0,_.Cb)()],ki.prototype,"relatedInfos",null),(0,d._)([(0,_.Cb)()],ki.prototype,"title",null),(0,d._)([(0,_.Cb)({type:pi})],ki.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Feature/t9n/Feature")],ki.prototype,"messages",void 0);var xi=ki=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureMedia")],ki),Mi=(i(26418),i(23046),i(1374),i(39384),i(29230)),Ci=i(29514),Zi=(i(44051),i(98752)),Pi=i(26538),Ai=i(64326),Ti=["$datastore","$map","$layer","$aggregatedfeatures"],Ii=g.Z.getLogger("esri.widgets.Feature.support.arcadeFeatureUtils");function Oi(e){return"string"==typeof e?me(ge(e)):Array.isArray(e)?function(e){return'<ul class="esri-widget__list">'.concat(e.map((function(e){return"<li>".concat("string"==typeof e?me(ge(e)):e,"</li>")})).join(""),"</ul>")}(e):"esri.arcade.Dictionary"===(null===e||void 0===e?void 0:e.declaredClass)?function(e){return'<table class="esri-widget__table">'.concat(e.keys().map((function(t){var i=e.field(t);return"<tr><th>".concat(t,"</th><td>").concat("string"==typeof i?me(ge(i)):i,"</td></tr>")})).join(""),"</table>")}(e):e}function Di(e){var t=e.aggregatedFeatures,i=e.arcadeUtils,n=e.featureSetVars,r=e.context,a=e.viewInfo,s=e.map,l=e.graphic,u=e.interceptor;n.forEach((function(e){var n=e.toLowerCase(),c=a.sr,h={map:s,spatialReference:c,interceptor:u};if("$map"===n&&(r.vars[n]=i.convertMapToFeatureSetCollection(h)),"$layer"===n&&(r.vars[n]=i.convertFeatureLayerToFeatureSet({layer:l.sourceLayer,spatialReference:c,interceptor:u})),"$datastore"===n&&(r.vars[n]=i.convertServiceUrlToWorkspace({url:l.sourceLayer.url,spatialReference:c,interceptor:u})),"$aggregatedfeatures"===n){var d=l.layer,f=d.fields,p=d.objectIdField,v=d.geometryType,y=d.spatialReference,g=d.displayField,m=new Ai.default((0,o.Z)((0,o.Z)({fields:f,objectIdField:p,geometryType:v,spatialReference:y,displayField:g},"feature"===d.type?{templates:d.templates,typeIdField:d.typeIdField,types:d.types}:null),{},{source:t}));r.vars[n]=i.convertFeatureLayerToFeatureSet({layer:m,spatialReference:y,interceptor:u})}}))}function Fi(){return Promise.all([i.e(8016),i.e(7027)]).then(i.bind(i,70718))}function Ei(e){return"createQuery"in e&&"queryFeatures"in e}function Si(e){return Li.apply(this,arguments)}function Li(){return(Li=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.graphic,r=t.view,a=i.isAggregate,o=i.layer,a&&o&&"2d"===(null===r||void 0===r?void 0:r.type)){e.next=4;break}return e.abrupt("return",[]);case 4:return e.next=6,r.whenLayerView(o);case 6:if(Ei(s=e.sent)){e.next=9;break}return e.abrupt("return",[]);case 9:return l=s.createQuery(),u=i.getObjectId(),l.aggregateIds=null!=u?[u]:[],e.next=13,s.queryFeatures(l);case 13:return c=e.sent,h=c.features,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bi(e){return ji.apply(this,arguments)}function ji(){return ji=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,l,u,c,h,d,f,p,v,y,g,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.expressionInfo,r=t.arcadeUtils,a=t.interceptor,o=t.spatialReference,l=t.map,u=t.graphic,c=t.view,i&&i.expression){e.next=3;break}return e.abrupt("return",null);case 3:return h=r.createSyntaxTree(i.expression),d=Ti.filter((function(e){return r.hasVariable(h,e)})),e.next=7,Promise.all([Si({graphic:u,view:c}),r.loadScriptDependencies(h,!0,d)]);case 7:return f=e.sent,p=(0,s.Z)(f,1),v=p[0],y=r.getViewInfo({spatialReference:o}),(g=r.createExecContext(u,y)).interceptor=a,g.useAsync=!0,Di({aggregatedFeatures:v,arcadeUtils:r,featureSetVars:d,context:g,viewInfo:y,map:l,graphic:u,interceptor:a}),m=r.createFunction(h,g),e.abrupt("return",r.executeAsyncFunction(m,g).catch((function(e){return Ii.error("arcade-execution-error",{error:e,graphic:u,expressionInfo:i})})));case 15:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Ri(e){return Ni.apply(this,arguments)}function Ni(){return Ni=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h,d,f,p,v,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.expressionInfos,r=t.spatialReference,a=t.graphic,o=t.interceptor,s=t.map,l=t.view,i&&i.length){e.next=3;break}return e.abrupt("return",{});case 3:return e.next=5,Fi();case 5:u=e.sent,c={},h=(0,Mt.Z)(i);try{for(h.s();!(d=h.n()).done;)f=d.value,c["expression/".concat(f.name)]=Bi({expressionInfo:f,arcadeUtils:u,interceptor:o,spatialReference:r,map:s,graphic:a,view:l})}catch(n){h.e(n)}finally{h.f()}return e.next=11,(0,qt.as)(c);case 11:for(y in p=e.sent,v={},p)v[y]=Oi(p[y].value);return e.abrupt("return",v);case 15:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}var zi=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var a;return(0,l.Z)(this,i),(a=t.call(this,e))._abortController=null,a.expressionInfo=null,a.graphic=null,a.contentElement=null,a.contentElementViewModel=null,a.interceptor=null,a.view=null,a._cancelQuery=function(){var e=(0,xt.Z)(a)._abortController;e&&e.abort(),a._abortController=null},a._createVM=function(){var e,t,i=null===(e=a.contentElement)||void 0===e?void 0:e.type;null===(t=a.contentElementViewModel)||void 0===t||t.destroy();var n="fields"===i?new yt:"media"===i?new pi:"text"===i?new st:null;a._set("contentElementViewModel",n)},a._compile=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._cancelQuery(),t=new AbortController,a._abortController=t,e.next=5,a._compileExpression();case 5:a._abortController===t&&(a._abortController=null);case 6:case"end":return e.stop()}}),e)}))),a._compileThrottled=(0,b.P)(a._compile,1,(0,xt.Z)(a)),a._compileExpression=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,o,s,l,u,c,h,d,f,p,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,xt.Z)(a),i=t.expressionInfo,r=t.graphic,o=t.interceptor,s=t.spatialReference,l=t.map,u=t.view,c=t._abortController,i&&r&&s&&l){e.next=3;break}return e.abrupt("return",void a._set("contentElement",null));case 3:return e.next=5,Fi();case 5:if(h=e.sent,c===a._abortController){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Bi({arcadeUtils:h,expressionInfo:i,graphic:r,interceptor:o,map:l,spatialReference:s,view:u});case 10:if((d=e.sent)&&"esri.arcade.Dictionary"===d.declaredClass){e.next=13;break}return e.abrupt("return",void a._set("contentElement",null));case 13:return e.next=15,d.castAsJsonAsync(null===c||void 0===c?void 0:c.signal);case 15:f=e.sent,p=null===f||void 0===f?void 0:f.type,v="media"===p?Ci.Z.fromJSON(f):"text"===p?Zi.Z.fromJSON(f):"fields"===p?Mi.Z.fromJSON(f):null,a._set("contentElement",v);case 19:case"end":return e.stop()}}),e)}))),a.handles.add([(0,m.YP)((function(){return[a.expressionInfo,a.graphic,a.map,a.spatialReference,a.view]}),(function(){return a._compileThrottled()}),m.nn),(0,m.YP)((function(){return[a.contentElement]}),(function(){return a._createVM()}),m.nn)]),a}return(0,u.Z)(i,[{key:"initialize",value:function(){this.addHandles(this._compileThrottled)}},{key:"destroy",value:function(){var e;this._cancelQuery(),null!==(e=this.contentElementViewModel)&&void 0!==e&&e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}},{key:"spatialReference",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null},set:function(e){this._override("spatialReference",e)}},{key:"state",get:function(){var e=this._abortController,t=this.contentElement,i=this.contentElementViewModel;return e?"loading":t||i?"ready":"disabled"}},{key:"map",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.map)&&void 0!==e?e:null},set:function(e){this._override("map",e)}}]),i}((0,at.p)(D.Z));(0,d._)([(0,_.Cb)()],zi.prototype,"_abortController",void 0),(0,d._)([(0,_.Cb)({type:Pi.Z})],zi.prototype,"expressionInfo",void 0),(0,d._)([(0,_.Cb)({type:O.Z})],zi.prototype,"graphic",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],zi.prototype,"contentElement",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],zi.prototype,"contentElementViewModel",void 0),(0,d._)([(0,_.Cb)()],zi.prototype,"interceptor",void 0),(0,d._)([(0,_.Cb)()],zi.prototype,"spatialReference",null),(0,d._)([(0,_.Cb)({readOnly:!0})],zi.prototype,"state",null),(0,d._)([(0,_.Cb)()],zi.prototype,"map",null),(0,d._)([(0,_.Cb)()],zi.prototype,"view",void 0);var Hi=zi=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],zi),Vi="esri-icon-loading-indicator esri-rotating",Wi="esri-feature-expression",Yi="esri-feature__loading-container",Ui="esri-feature__loading-spinner",qi=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n))._contentWidget=null,r.viewModel=new Hi,r}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles((0,m.YP)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.contentElementViewModel}),(function(){return e._setupExpressionWidget()}),m.nn))}},{key:"destroy",value:function(){this._destroyContentWidget()}},{key:"renderLoading",value:function(){return(0,ze.u)("div",{key:"loading-container",class:Yi},(0,ze.u)("span",{class:this.classes(Vi,Ui)}))}},{key:"render",value:function(){var e,t=this.viewModel.state;return(0,ze.u)("div",{class:Wi},"loading"===t?this.renderLoading():"disabled"===t?null:null===(e=this._contentWidget)||void 0===e?void 0:e.render())}},{key:"_destroyContentWidget",value:function(){var e=this._contentWidget;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}},{key:"_setupExpressionWidget",value:function(){var e=this.viewModel,t=e.contentElementViewModel,i=e.contentElement,n=null===i||void 0===i?void 0:i.type;this._destroyContentWidget();var r=t?"fields"===n?new kt({viewModel:t}):"media"===n?new xi({viewModel:t}):"text"===n?new dt({viewModel:t}):null:null;this._contentWidget=r,this.scheduleRender()}}]),i}(M.Z);(0,d._)([(0,_.Cb)({type:Hi})],qi.prototype,"viewModel",void 0);var Gi=qi=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureExpression")],qi),Xi=i(92026),Ki=i(11582),$i=i(79056);i(39638);function Qi(e,t,i){var n=Object.keys(t).filter((function(t){return(0,A.pZ)(e,t)})),r=n.map((function(e){return t[e]})),a=n.map((function(e){return i.get(e)})).filter(k.pC);return function(e,t){return(0,A.gx)((0,A.gx)(e,(function(e){return"{".concat(e.toLowerCase(),"}")})),Object.fromEntries(Object.entries(t).map((function(e){var t=(0,s.Z)(e,2),i=t[0],n=t[1];return[i.toLowerCase(),n]}))))}(e,Ji(r,a))}function Ji(e,t){var i=t.map((function(t,i){var n=e[i];if(t.domain&&"coded-value"===t.domain.type){var r=t.domain.codedValues.find((function(e){return e.code===n}));(null===r||void 0===r?void 0:r.name)&&(n=r.name)}return(0,B.y2)(t)&&(n=function(e,t){if(!e||null==t)return null;switch(e.type){case"date":return(0,L.p6)(t);case"date-only":return(0,L.o8)(t);case"time-only":return(0,L.LJ)(t);case"timestamp-offset":return(0,L.i$)(t);default:return null}}(t,n)),[t.name,n]}));return Object.fromEntries(i)}new Set(["date-only","time-only","timestamp-offset"]);var en;!function(e){e.TOO_SHORT="length-validation-error::too-short"}(en||(en={}));var tn=function(e){var t=[];if(e.formTemplate){var i,n=e.formTemplate,r=n.description,a=n.title;null===(i=e.fields)||void 0===i||i.forEach((function(e){var i=a&&(0,A.pZ)(a,e.name),n=r&&(0,A.pZ)(r,e.name);(i||n)&&t.push(e.name)}))}return t};var nn=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var a;return(0,l.Z)(this,i),(a=t.call(this,e))._loaded=!1,a._queryAbortController=null,a._queryPageAbortController=null,a._queryFeatureCountAbortController=null,a.featuresPerPage=10,a.description=null,a.graphic=null,a.layer=null,a.map=null,a.orderByFields=null,a.featureCount=0,a.relationshipId=null,a.showAllEnabled=!1,a.title=null,a._cancelQuery=function(){var e=(0,xt.Z)(a)._queryAbortController;e&&e.abort(),a._queryAbortController=null},a._cancelQueryFeatureCount=function(){var e=(0,xt.Z)(a)._queryFeatureCountAbortController;e&&e.abort(),a._queryFeatureCountAbortController=null},a._cancelQueryPage=function(){var e=(0,xt.Z)(a)._queryPageAbortController;e&&e.abort(),a._queryPageAbortController=null},a._queryController=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._cancelQuery(),t=new AbortController,a._queryAbortController=t,e.next=5,(0,qt.R8)(a._query());case 5:a._queryAbortController===t&&(a._queryAbortController=null);case 6:case"end":return e.stop()}}),e)}))),a._queryFeatureCountController=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._loaded=!1,a._cancelQueryFeatureCount(),t=new AbortController,a._queryFeatureCountAbortController=t,e.next=5,(0,qt.R8)(a._queryFeatureCount());case 5:a._queryFeatureCountAbortController===t&&(a._queryFeatureCountAbortController=null),a._loaded=!0;case 7:case"end":return e.stop()}}),e)}))),a._queryPageController=(0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new AbortController,a._queryPageAbortController=t,e.next=4,(0,qt.R8)(a._queryPage());case 4:a._queryPageAbortController===t&&(a._queryPageAbortController=null);case 5:case"end":return e.stop()}}),e)}))),a._queryDebounced=(0,qt.Ds)(a._queryController,100),a._queryFeatureCountDebounced=(0,qt.Ds)(a._queryFeatureCountController,100),a._queryPageDebounced=(0,qt.Ds)(a._queryPageController,100),a._query=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,xt.Z)(a),i=t._queryAbortController,r=t.relatedFeatures,e.t0=a.featureCount,!e.t0){e.next=15;break}if(a._destroyRelatedFeatureViewModels(),a.featurePage=1,r.removeAll(),e.t1=a.destroyed,e.t1){e.next=15;break}return e.t2=r,e.t3=a,e.next=12,a._queryRelatedFeatures({signal:null===i||void 0===i?void 0:i.signal});case 12:e.t4=e.sent,e.t5=e.t3._sliceFeatures.call(e.t3,e.t4),e.t2.addMany.call(e.t2,e.t5);case 15:case"end":return e.stop()}}),e)}))),a.handles.add([(0,m.YP)((function(){var e;return[a.displayCount,a.graphic,a.layer,null===(e=a.layer)||void 0===e?void 0:e.loaded,a.map,a.orderByFields,a.relationshipId,a.featuresPerPage,a.showAllEnabled,a.canQuery,a.featureCount]}),(function(){return a._queryDebounced()}),m.nn),(0,m.YP)((function(){return[a.featurePage,a.showAllEnabled]}),(function(){return a._queryPageDebounced()})),(0,m.YP)((function(){return[a.layer,a.relationshipId,a.objectId,a.canQuery]}),(function(){return a._queryFeatureCountDebounced()}))]),a}return(0,u.Z)(i,[{key:"destroy",value:function(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}},{key:"featurePage",get:function(){return this._get("featurePage")},set:function(e){var t=this.featuresPerPage,i=this.featureCount,n=Math.ceil(i/t)||1;this._set("featurePage",Math.min(Math.max(e,1),n))}},{key:"orderByFieldsFixedCasing",get:function(){var e=this.orderByFields,t=this.relatedLayer;return e&&null!==t&&void 0!==t&&t.loaded?e.map((function(e){var i=e.clone();return i.field=re(e.field,t),i})):null!==e&&void 0!==e?e:[]}},{key:"supportsCacheHint",get:function(){var e;return!(null===(e=this.layer)||void 0===e||null===(e=e.capabilities)||void 0===e||null===(e=e.queryRelated)||void 0===e||!e.supportsCacheHint)}},{key:"canLoad",get:function(){return!!this.map&&"number"==typeof this.relationshipId&&"number"==typeof this.objectId}},{key:"canQuery",get:function(){var e,t=null===(e=this.layer)||void 0===e||null===(e=e.capabilities)||void 0===e?void 0:e.queryRelated;return!!(this.relatedLayer&&this.relationship&&"number"==typeof this.relationshipId&&"number"==typeof this.objectId&&null!==t&&void 0!==t&&t.supportsCount&&null!==t&&void 0!==t&&t.supportsPagination)}},{key:"itemDescriptionFieldName",get:function(){var e;return(null===(e=this.orderByFieldsFixedCasing[0])||void 0===e?void 0:e.field)||null}},{key:"displayCount",get:function(){return this._get("displayCount")},set:function(e){this._set("displayCount",Math.min(Math.max(e,0),10))}},{key:"objectId",get:function(){var e,t;return null!==(e=this.objectIdField&&(null===(t=this.graphic)||void 0===t||null===(t=t.attributes)||void 0===t?void 0:t[this.objectIdField]))&&void 0!==e?e:null}},{key:"objectIdField",get:function(){var e;return(null===(e=this.layer)||void 0===e?void 0:e.objectIdField)||null}},{key:"relatedFeatures",get:function(){return this._get("relatedFeatures")||new f.Z}},{key:"relatedFeatureInfos",get:function(){var e=this.itemDescriptionFieldName,t=this.relatedFeatures,i=this.relatedLayer;if(!t.length||!i)return[];var n=i&&"formTemplate"in i&&i.formTemplate,r=n&&(null===n||void 0===n?void 0:n.title)||void 0;return t.map((function(t){var n;if(e){var a=t.getAttribute(e),o=i.fieldsIndex.get(e);if(o){var s=Ji([a],[o])[e];null!=s&&(n=s.toString())}}return{feature:t,description:n,title:r?Qi(r,t.attributes,i.fieldsIndex):void 0}})).toArray()}},{key:"relatedLayer",get:function(){var e,t=this.layer,i=this.map,n=this.relationship;return null!==t&&void 0!==t&&t.loaded&&i&&n&&null!==(e=function(e,t,i){return e&&t&&i?Oe(e.allLayers,t,i)||Oe(e.allTables,t,i):null}(i,t,n))&&void 0!==e?e:null}},{key:"relationship",get:function(){var e,t,i=this.relationshipId,n=this.layer;return"number"==typeof i&&null!==(e=null===n||void 0===n||null===(t=n.relationships)||void 0===t?void 0:t.find((function(e){return e.id===i})))&&void 0!==e?e:null}},{key:"relatedFeatureViewModels",get:function(){return this._get("relatedFeatureViewModels")||new f.Z}},{key:"state",get:function(){var e=this._queryAbortController,t=this._queryFeatureCountAbortController,i=this._queryPageAbortController,n=this.canQuery,r=this._loaded,a=this.canLoad;return t||a&&!r?"loading":e||i?"querying":n?"ready":"disabled"}},{key:"getRelatedFeatureByObjectId",value:function(e){return this.relatedFeatures.find((function(t){return t.getObjectId()===e}))}},{key:"_destroyRelatedFeatureViewModels",value:function(){var e;null!==(e=this.relatedFeatureViewModels)&&void 0!==e&&e.forEach((function(e){return!e.destroyed&&e.destroy()})),this.relatedFeatureViewModels.removeAll()}},{key:"_queryFeatureCount",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o,s,l,u,c,h,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.layer,r=this.relatedLayer,a=this.relationshipId,o=this.objectId,s=this._queryFeatureCountAbortController,l=this.canQuery,u=this.supportsCacheHint,e.next=3,null===i||void 0===i?void 0:i.load();case 3:return e.next=5,null===r||void 0===r?void 0:r.load();case 5:if(l&&i&&r){e.next=7;break}return e.abrupt("return",void this._set("featureCount",0));case 7:return c=r.createQuery(),h=new $t.default({cacheHint:u,relationshipId:a,returnGeometry:!1,objectIds:[o],where:null!==(t=c.where)&&void 0!==t?t:void 0}),e.next=11,i.queryRelatedFeaturesCount(h,{signal:null===s||void 0===s?void 0:s.signal});case 11:d=e.sent,this._set("featureCount",d[o]||0);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_sliceFeatures",value:function(e){var t=this.showAllEnabled,i=this.displayCount;return t?e:i?e.slice(0,i):[]}},{key:"_queryPage",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.relatedFeatures,i=this.featurePage,r=this.showAllEnabled,a=this._queryPageAbortController,o=this.featureCount,e.t0=!r||i<2||!o,e.t0){e.next=8;break}return e.t1=t,e.next=6,this._queryRelatedFeatures({signal:null===a||void 0===a?void 0:a.signal});case 6:e.t2=e.sent,e.t1.addMany.call(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_queryRelatedFeatures",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,x,M,C,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.orderByFieldsFixedCasing,o=this.showAllEnabled,s=this.featuresPerPage,l=this.displayCount,u=this.layer,c=this.relationshipId,h=this.featurePage,d=this.featureCount,f=this.relatedLayer,p=this.supportsCacheHint,v=this.canQuery,y=this.objectId,v&&u&&f){e.next=3;break}return e.abrupt("return",[]);case 3:return g=o?((h-1)*s+d)%d:0,m=o?s:l,b=f.objectIdField,_=[].concat((0,S.Z)(a.map((function(e){return e.field}))),(0,S.Z)(tn(f)),[b]).filter(k.pC),w=a.map((function(e){return"".concat(e.field," ").concat(e.order)})),x=f.createQuery(),M=new $t.default({orderByFields:w,start:g,num:m,outFields:_,cacheHint:p,relationshipId:c,returnGeometry:!1,objectIds:[y],where:null!==(i=x.where)&&void 0!==i?i:void 0}),e.next=12,u.queryRelatedFeatures(M,{signal:null===t||void 0===t?void 0:t.signal});case 12:return C=e.sent,Z=(null===(r=C[y])||void 0===r?void 0:r.features)||[],e.abrupt("return",(Z.forEach((function(e){e.sourceLayer=f,e.layer=f})),Z));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),i}((0,Ki.J)((0,$i.IG)((0,at.p)(D.Z))));(0,d._)([(0,_.Cb)()],nn.prototype,"_loaded",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"_queryAbortController",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"_queryPageAbortController",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"_queryFeatureCountAbortController",void 0),(0,d._)([(0,_.Cb)({value:1})],nn.prototype,"featurePage",null),(0,d._)([(0,_.Cb)()],nn.prototype,"featuresPerPage",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"orderByFieldsFixedCasing",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"supportsCacheHint",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"canLoad",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"canQuery",null),(0,d._)([(0,_.Cb)()],nn.prototype,"description",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"itemDescriptionFieldName",null),(0,d._)([(0,_.Cb)({value:3})],nn.prototype,"displayCount",null),(0,d._)([(0,_.Cb)({type:O.Z})],nn.prototype,"graphic",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"layer",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"map",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"objectId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"objectIdField",null),(0,d._)([(0,_.Cb)()],nn.prototype,"orderByFields",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"relatedFeatures",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"relatedFeatureInfos",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"relatedLayer",null),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"relationship",null),(0,d._)([(0,_.Cb)()],nn.prototype,"featureCount",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],nn.prototype,"relatedFeatureViewModels",null),(0,d._)([(0,_.Cb)()],nn.prototype,"relationshipId",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"showAllEnabled",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"state",null),(0,d._)([(0,_.Cb)()],nn.prototype,"title",void 0),(0,d._)([(0,_.Cb)()],nn.prototype,"getRelatedFeatureByObjectId",null);var rn=nn=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],nn),an="esri-feature",on="".concat(an,"-relationship"),sn={base:on,esriWidget:"esri-widget",listContainer:"".concat(on,"__list"),listItem:"".concat(on,"__list-item"),listItemHidden:"".concat(on,"__list-item--hidden"),listContainerQuerying:"".concat(on,"__list--querying"),featureObserver:"".concat(an,"__feature-observer"),stickySpinnerContainer:"".concat(an,"__sticky-loading-container"),loadingSpinnerContainer:"".concat(an,"__loading-container"),spinner:"".concat(an,"__loading-spinner"),iconLoading:"esri-icon-loading-indicator esri-rotating"},ln={title:!0,description:!0},un=function(e){(0,c.Z)(d,e);var t=(0,h.Z)(d);function d(e,i){var n;return(0,l.Z)(this,d),(n=t.call(this,e,i))._featureElementInfo=null,n._relatedFeatureIntersectionObserverNode=null,n._relatedFeatureIntersectionObserver=new IntersectionObserver((function(e){var t=(0,s.Z)(e,1)[0];(null===t||void 0===t?void 0:t.isIntersecting)&&n._increaseFeaturePage()}),{root:window.document}),n.headingLevel=2,n.viewModel=new rn,n.messages=null,n.messagesCommon=null,n.visibleElements=(0,o.Z)({},ln),n._increaseFeaturePage=function(){var e=n.viewModel,t=e.state,i=e.showAllEnabled,r=e.relatedFeatures,a=e.featuresPerPage,o=e.featurePage;"ready"===t&&i&&r.length>=a*o&&n.viewModel.featurePage++},n}return(0,u.Z)(d,[{key:"initialize",value:function(){var e=this;this._featureElementInfo=new tt,this.addHandles([(0,m.YP)((function(){return[e.viewModel.description,e.viewModel.title,e.headingLevel]}),(function(){return e._setupFeatureElementInfo()}),m.nn),(0,m.YP)((function(){return[e.viewModel.state,e.viewModel.showAllEnabled,e._relatedFeatureIntersectionObserverNode]}),(function(){return e._handleRelatedFeatureObserverChange()})),(0,m.on)((function(){return e.viewModel.relatedFeatureViewModels}),"change",(function(){return e._setupRelatedFeatureViewModels()}))])}},{key:"loadDependencies",value:function(){return(0,je.h)({icon:function(){return i.e(7474).then(i.bind(i,87474))},list:function(){return Promise.all([i.e(8440),i.e(3104),i.e(8501)]).then(i.bind(i,18501))},"list-item":function(){return Promise.all([i.e(8440),i.e(5138),i.e(7205)]).then(i.bind(i,7205))},notice:function(){return Promise.all([i.e(8440),i.e(6502)]).then(i.bind(i,76502))}})}},{key:"destroy",value:function(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=(0,Xi.SC)(this._featureElementInfo)}},{key:"displayShowAllButton",get:function(){var e=this.viewModel,t=e.showAllEnabled,i=e.featureCount,n=e.displayCount,r=e.state;return!t&&!!i&&"ready"===r&&(i>n||0===n)}},{key:"displayListItems",get:function(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}},{key:"description",get:function(){return this.viewModel.description},set:function(e){this.viewModel.description=e}},{key:"featureCountDescription",get:function(){var e=this.messages,t=this.viewModel.featureCount;return(0,gi.n)(null===e||void 0===e?void 0:e.numberRecords,{number:t})}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"castVisibleElements",value:function(e){return(0,o.Z)((0,o.Z)({},ln),e)}},{key:"renderStickyLoading",value:function(){return"querying"===this.viewModel.state?(0,ze.u)("div",{key:"sticky-loader",class:sn.stickySpinnerContainer},this.renderLoadingIcon()):null}},{key:"renderLoadingIcon",value:function(){return(0,ze.u)("span",{class:this.classes(sn.iconLoading,sn.spinner)})}},{key:"renderLoading",value:function(){return(0,ze.u)("div",{key:"loading-container",class:sn.loadingSpinnerContainer},this.renderLoadingIcon())}},{key:"renderShowAllIconNode",value:function(){return(0,ze.u)("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}},{key:"renderChevronIconNode",value:function(){var e=(0,Re.dZ)(this.container)?"chevron-left":"chevron-right";return(0,ze.u)("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}},{key:"renderRelatedFeature",value:function(e){var t,i,n=this,r=this.viewModel.itemDescriptionFieldName,o=e.title;e.description=r&&(null===(t=e.formattedAttributes)||void 0===t?void 0:t.global[r]);var s="loading"===e.state;return(0,ze.u)("calcite-list-item",{class:this.classes(sn.listItem,(0,a.Z)({},sn.listItemHidden,s)),key:e.uid,label:o,description:null!==(i=e.description)&&void 0!==i?i:"",onCalciteListItemSelect:function(){return n.emit("select-record",{featureViewModel:e})}},this.renderChevronIconNode())}},{key:"renderShowAllListItem",value:function(){var e,t=this;return this.displayShowAllButton?(0,ze.u)("calcite-list-item",{key:"show-all-item",label:null===(e=this.messages)||void 0===e?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:function(){return t.emit("show-all-records")}},this.renderShowAllIconNode()):null}},{key:"renderNoRelatedFeaturesMessage",value:function(){var e;return(0,ze.u)("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},(0,ze.u)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.noRelatedFeatures))}},{key:"renderFeatureObserver",value:function(){return(0,ze.u)("div",{key:"feature-observer",class:sn.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}},{key:"renderList",value:function(){var e=this,t=this.viewModel.relatedFeatureViewModels;return(0,ze.u)("calcite-list",null,t.toArray().map((function(t){return e.renderRelatedFeature(t)})),this.renderShowAllListItem())}},{key:"renderRelatedFeatures",value:function(){var e=this.displayListItems,t=this.viewModel.state;return(0,ze.u)("div",{key:"list-container",class:this.classes(sn.listContainer,(0,a.Z)({},sn.listContainerQuerying,"querying"===t))},e?this.renderList():"ready"===t?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}},{key:"renderRelationshipNotFound",value:function(){var e;return(0,ze.u)("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},(0,ze.u)("div",{slot:"message"},null===(e=this.messages)||void 0===e?void 0:e.relationshipNotFound))}},{key:"render",value:function(){var e,t=this.viewModel.state;return(0,ze.u)("div",{class:this.classes(sn.base,sn.esriWidget)},null===(e=this._featureElementInfo)||void 0===e?void 0:e.render(),"loading"===t?this.renderLoading():"disabled"===t?this.renderRelationshipNotFound():this.renderRelatedFeatures())}},{key:"_setupRelatedFeatureViewModels",value:function(){var e=this,t=this.viewModel.relatedFeatureViewModels,i="related-feature-viewmodels";this.removeHandles(i),null!==t&&void 0!==t&&t.forEach((function(t){e.addHandles((0,m.YP)((function(){return[t.title,t.state]}),(function(){return e.scheduleRender()}),m.nn),i)})),this.scheduleRender()}},{key:"_setupFeatureElementInfo",value:function(){var e,t=this.headingLevel,i=this.visibleElements,n=i.description&&this.description,r=i.title&&this.title;null===(e=this._featureElementInfo)||void 0===e||e.set({description:n,title:r,headingLevel:t})}},{key:"_handleRelatedFeatureObserverChange",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._unobserveRelatedFeatureObserver(),t=this.viewModel,i=t.state,r=t.showAllEnabled,e.next=4,(0,qt.e4)(0);case 4:this._relatedFeatureIntersectionObserverNode&&"ready"===i&&r&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_relatedFeatureIntersectionObserverCreated",value:function(e){this._relatedFeatureIntersectionObserverNode=e}},{key:"_unobserveRelatedFeatureObserver",value:function(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}}]),d}(M.Z);(0,d._)([(0,_.Cb)()],un.prototype,"_relatedFeatureIntersectionObserverNode",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],un.prototype,"displayShowAllButton",null),(0,d._)([(0,_.Cb)({readOnly:!0})],un.prototype,"displayListItems",null),(0,d._)([(0,_.Cb)()],un.prototype,"description",null),(0,d._)([(0,_.Cb)({readOnly:!0})],un.prototype,"featureCountDescription",null),(0,d._)([(0,_.Cb)()],un.prototype,"headingLevel",void 0),(0,d._)([(0,_.Cb)()],un.prototype,"title",null),(0,d._)([(0,_.Cb)({type:rn})],un.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Feature/t9n/Feature")],un.prototype,"messages",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/t9n/common")],un.prototype,"messagesCommon",void 0),(0,d._)([(0,_.Cb)()],un.prototype,"visibleElements",void 0),(0,d._)([(0,w.p)("visibleElements")],un.prototype,"castVisibleElements",null);var cn,hn=un=(0,d._)([(0,x.j)("esri.widgets.Feature.FeatureRelationship")],un),dn=(0,u.Z)((function e(t,i){(0,l.Z)(this,e),this.preLayerQueryCallback=t,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=function(e){}),this.preRequestCallback||(this.preLayerQueryCallback=function(e){})})),fn="content-view-models",pn="relationship-view-models",vn={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0},yn=cn=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e))._handles=new y.Z,n._error=null,n._featureAbortController=null,n._graphicChangedThrottled=(0,b.P)(n._graphicChanged,1,(0,xt.Z)(n)),n._expressionAttributes=null,n._graphicExpressionAttributes=null,n.abilities=(0,o.Z)({},vn),n.content=null,n.contentViewModels=[],n.description=null,n.defaultPopupTemplateEnabled=!1,n.formattedAttributes=null,n.lastEditInfo=null,n.relatedInfos=new Map,n.title="",n.view=null,n._isAllowedContentType=function(e){var t=(0,xt.Z)(n).abilities;return"attachments"===e.type&&!!t.attachmentsContent||"custom"===e.type&&!!t.customContent||"fields"===e.type&&!!t.fieldsContent||"media"===e.type&&!!t.mediaContent||"text"===e.type&&!!t.textContent||"expression"===e.type&&!!t.expressionContent||"relationship"===e.type&&!!t.relationshipContent},n._handles.add((0,m.YP)((function(){return[n.graphic,n._effectivePopupTemplate,n.abilities]}),(function(){return n._graphicChangedThrottled()}),m.nn)),n}return(0,u.Z)(i,[{key:"initialize",value:function(){this.addHandles(this._graphicChangedThrottled)}},{key:"destroy",value:function(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}},{key:"_effectivePopupTemplate",get:function(){return null!=this.graphic?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}},{key:"_fieldInfoMap",get:function(){return function(e,t){var i=new Map;return e?(e.forEach((function(e){var n=re(e.fieldName,t);e.fieldName=n,i.set(n.toLowerCase(),e)})),i):i}(ye(this._effectivePopupTemplate),this._sourceLayer)}},{key:"_sourceLayer",get:function(){return Q(this.graphic)}},{key:"castAbilities",value:function(e){return(0,o.Z)((0,o.Z)({},vn),e)}},{key:"isTable",get:function(){var e;return(null===(e=this._sourceLayer)||void 0===e?void 0:e.isTable)||!1}},{key:"state",get:function(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}},{key:"graphic",set:function(e){this._set("graphic",e?e.clone():null)}},{key:"spatialReference",get:function(){var e,t;return null!==(e=null===(t=this.view)||void 0===t?void 0:t.spatialReference)&&void 0!==e?e:null},set:function(e){this._override("spatialReference",e)}},{key:"map",get:function(){var e;return(null===(e=this.view)||void 0===e?void 0:e.map)||null},set:function(e){this._override("map",e)}},{key:"waitingForContent",get:function(){return!!this._featureAbortController}},{key:"setActiveMedia",value:function(e,t){var i=this.contentViewModels[e];i instanceof pi&&i.setActiveMedia(t)}},{key:"nextMedia",value:function(e){var t=this.contentViewModels[e];t instanceof pi&&t.next()}},{key:"previousMedia",value:function(e){var t=this.contentViewModels[e];t instanceof pi&&t.previous()}},{key:"updateGeometry",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o,s,l,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.graphic,r=this.spatialReference,a=this._sourceLayer,e.next=3,null===a||void 0===a?void 0:a.load();case 3:if((o=null===a||void 0===a?void 0:a.objectIdField)&&i&&a){e.next=6;break}return e.abrupt("return");case 6:if(null!=(s=null===i||void 0===i||null===(t=i.attributes)||void 0===t?void 0:t[o])){e.next=9;break}return e.abrupt("return");case 9:if(l=[s],i.geometry){e.next=16;break}return e.next=13,we({layer:a,graphic:i,outFields:[],objectIds:l,returnGeometry:!0,spatialReference:r});case 13:u=e.sent,(c=null===u||void 0===u?void 0:u.geometry)&&(i.geometry=c);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_clear",value:function(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}},{key:"_graphicChanged",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cancelFeatureQuery(),this._error=null,this._clear(),t=this.graphic){e.next=4;break}return e.abrupt("return");case 4:return i=new AbortController,this._featureAbortController=i,e.prev=6,e.next=9,this._queryFeature({signal:i.signal});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),(0,qt.D_)(e.t0)||(this._error=e.t0,g.Z.getLogger(this).error("error","The popupTemplate could not be displayed for this feature.",{error:e.t0,graphic:t,popupTemplate:this._effectivePopupTemplate}));case 14:this._featureAbortController===i&&(this._featureAbortController=null);case 15:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"_cancelFeatureQuery",value:function(){var e=this._featureAbortController;e&&e.abort(),this._featureAbortController=null}},{key:"_compileContentElement",value:function(e,t){return"attachments"===e.type?this._compileAttachments(e,t):"custom"===e.type?this._compileCustom(e,t):"fields"===e.type?this._compileFields(e,t):"media"===e.type?this._compileMedia(e,t):"text"===e.type?this._compileText(e,t):"expression"===e.type?this._compileExpression(e,t):"relationship"===e.type?this._compileRelationship(e,t):void 0}},{key:"_compileContent",value:function(e){var t=this;if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((function(e,i){return t._compileContentElement(e,i)})).filter(k.pC):"string"==typeof e?this._compileText(new Zi.Z({text:e}),0).text:e}},{key:"_destroyContentViewModels",value:function(){var e,t;null!==(e=this._handles)&&void 0!==e&&e.remove(pn),null!==(t=this._handles)&&void 0!==t&&t.remove(fn),this.contentViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("contentViewModels",[])}},{key:"_matchesFeature",value:function(e,t){var i,n=null===e||void 0===e||null===(i=e.graphic)||void 0===i?void 0:i.getObjectId(),r=null===t||void 0===t?void 0:t.getObjectId();return null!=n&&null!=r&&n===r}},{key:"_setRelatedFeaturesViewModels",value:function(e){var t=this,i=e.relatedFeatureViewModels,n=e.relatedFeatures,r=e.map,a=this.view,o=this.spatialReference;null!==n&&void 0!==n&&n.filter(Boolean).forEach((function(e){i.find((function(i){return t._matchesFeature(i,e)}))||i.add(new cn({abilities:{relationshipContent:!1},map:r,view:a,spatialReference:o,graphic:e}))})),i.forEach((function(e){var r=null===n||void 0===n?void 0:n.find((function(i){return t._matchesFeature(e,i)}));r||i.remove(e)}))}},{key:"_setExpressionContentVM",value:function(e,t){var i=this.formattedAttributes,n=e.contentElement,r=e.contentElementViewModel,a=null===n||void 0===n?void 0:n.type;r&&a&&("fields"===a&&(this._createFieldsFormattedAttributes({contentElement:n,contentElementIndex:t,formattedAttributes:i}),r.set(this._createFieldsVMParams(n,t))),"media"===a&&(this._createMediaFormattedAttributes({contentElement:n,contentElementIndex:t,formattedAttributes:i}),r.set(this._createMediaVMParams(n,t))),"text"===a&&r.set(this._createTextVMParams(n)))}},{key:"_compileRelationship",value:function(e,t){var i=this,n=e.displayCount,r=e.orderByFields,a=e.relationshipId,s=e.title,l=e.description,u=this._sourceLayer,c=this.graphic,h=this.map;if(fe(u)){var d=new rn((0,o.Z)({displayCount:n,graphic:c,orderByFields:r,relationshipId:a,layer:u,map:h},this._compileTitleAndDesc({title:s,description:l})));return this.contentViewModels[t]=d,this._handles.add((0,m.on)((function(){return d.relatedFeatures}),"change",(function(){return i._setRelatedFeaturesViewModels(d)})),pn),e}}},{key:"_compileExpression",value:function(e,t){var i=this,n=e.expressionInfo,r=this.graphic,a=this.map,o=this.spatialReference,s=this.view,l=new Hi({expressionInfo:n,graphic:r,interceptor:cn.interceptor,map:a,spatialReference:o,view:s});return this.contentViewModels[t]=l,this._handles.add((0,m.YP)((function(){return l.contentElementViewModel}),(function(){return i._setExpressionContentVM(l,t)}),m.nn),fn),e}},{key:"_compileAttachments",value:function(e,t){var i=this.graphic,n=e.description,r=e.title;return this.contentViewModels[t]=new Ke((0,o.Z)({graphic:i},this._compileTitleAndDesc({title:r,description:n}))),e}},{key:"_compileCustom",value:function(e,t){var i=this.graphic,n=e.creator,r=e.destroyer;return this.contentViewModels[t]=new st({graphic:i,creator:n,destroyer:r}),e}},{key:"_compileTitleAndDesc",value:function(e){var t=e.title,i=e.description,n=this._fieldInfoMap,r=this._sourceLayer,a=this.graphic,o=this.formattedAttributes,s=null===a||void 0===a?void 0:a.attributes,l=this._expressionAttributes,u=o.global;return{title:se({attributes:s,fieldInfoMap:n,globalAttributes:u,expressionAttributes:l,layer:r,text:t}),description:se({attributes:s,fieldInfoMap:n,globalAttributes:u,expressionAttributes:l,layer:r,text:i})}}},{key:"_createFieldsVMParams",value:function(e,t){var i=this._effectivePopupTemplate,n=this.formattedAttributes,r=(0,o.Z)((0,o.Z)({},null===n||void 0===n?void 0:n.global),null===n||void 0===n?void 0:n.content[t]),a=(null===e||void 0===e?void 0:e.fieldInfos)||(null===i||void 0===i?void 0:i.fieldInfos),s=null===a||void 0===a?void 0:a.filter((function(e){var t=e.fieldName;return ie(t)||Pe(t)||r.hasOwnProperty(t)})),l=null===i||void 0===i?void 0:i.expressionInfos,u=e.description,c=e.title;return(0,o.Z)({attributes:r,expressionInfos:l,fieldInfos:s},this._compileTitleAndDesc({title:c,description:u}))}},{key:"_compileFields",value:function(e,t){var i=e.clone(),n=new yt(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=n,i.fieldInfos=n.formattedFieldInfos.slice(0),i}},{key:"_createMediaVMParams",value:function(e,t){var i,n=this.abilities,r=this.graphic,a=this._fieldInfoMap,s=this._effectivePopupTemplate,l=this.relatedInfos,u=this._sourceLayer,c=this._expressionAttributes,h=this.formattedAttributes,d=null!==(i=null===r||void 0===r?void 0:r.attributes)&&void 0!==i?i:{},f=e.description,p=e.mediaInfos,v=e.title;return(0,o.Z)({abilities:{chartAnimation:n.chartAnimation},activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:d,isAggregate:null===r||void 0===r?void 0:r.isAggregate,layer:u,fieldInfoMap:a,formattedAttributes:(0,o.Z)((0,o.Z)({},null===h||void 0===h?void 0:h.global),null===h||void 0===h?void 0:h.content[t]),expressionAttributes:c,mediaInfos:p,popupTemplate:s,relatedInfos:l},this._compileTitleAndDesc({title:v,description:f}))}},{key:"_compileMedia",value:function(e,t){var i=e.clone(),n=new pi(this._createMediaVMParams(e,t));return i.mediaInfos=n.formattedMediaInfos.slice(0),this.contentViewModels[t]=n,i}},{key:"_createTextVMParams",value:function(e){var t=this.graphic,i=this._fieldInfoMap,n=this._sourceLayer,r=this._expressionAttributes;if(e&&e.text){var a,o,s,l=null!==(a=null===t||void 0===t?void 0:t.attributes)&&void 0!==a?a:{},u=null!==(o=null===(s=this.formattedAttributes)||void 0===s?void 0:s.global)&&void 0!==o?o:{};e.text=se({attributes:l,fieldInfoMap:i,globalAttributes:u,expressionAttributes:r,layer:n,text:e.text})}return{graphic:t,creator:e.text}}},{key:"_compileText",value:function(e,t){var i=e.clone();return this.contentViewModels[t]=new st(this._createTextVMParams(i)),i}},{key:"_compileLastEditInfo",value:function(){var e=this._effectivePopupTemplate,t=this._sourceLayer,i=this.graphic;if(e){var n=e.lastEditInfoEnabled,r=null===t||void 0===t?void 0:t.editFieldsInfo;return n&&r?function(e,t){var i=e.creatorField,n=e.creationDateField,r=e.editorField,a=e.editDateField;if(t){var o=t[a];if("number"==typeof o){var s=t[r];return{type:"edit",date:(0,L.p6)(o,$),user:s}}var l=t[n];if("number"==typeof l){var u=t[i];return{type:"create",date:(0,L.p6)(l,$),user:u}}return null}}(r,null===i||void 0===i?void 0:i.attributes):void 0}}},{key:"_compileTitle",value:function(e){var t,i,n,r=this._fieldInfoMap,a=this._sourceLayer,o=this.graphic,s=this._expressionAttributes;return se({attributes:null!==(t=null===o||void 0===o?void 0:o.attributes)&&void 0!==t?t:{},fieldInfoMap:r,globalAttributes:null!==(i=null===(n=this.formattedAttributes)||void 0===n?void 0:n.global)&&void 0!==i?i:{},expressionAttributes:s,layer:a,text:e})}},{key:"_getTitle",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._effectivePopupTemplate,i=this.graphic){e.next=3;break}return e.abrupt("return",null);case 3:return r=null===t||void 0===t?void 0:t.title,e.abrupt("return",J(r,{graphic:i}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getContent",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._effectivePopupTemplate,i=this.graphic){e.next=3;break}return e.abrupt("return",null);case 3:return r=null===t||void 0===t?void 0:t.content,e.abrupt("return",J(r,{graphic:i}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_queryFeature",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,s,l,u,c,h,d,f,p,v;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this._featureAbortController,r=this._sourceLayer,a=this.graphic,s=this._effectivePopupTemplate,l=this.map,u=this.view,c=this.spatialReference,i===this._featureAbortController&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Ce({graphic:a,popupTemplate:s,layer:r,spatialReference:c},t);case 5:return e.next=7,(0,qt.as)({content:this._getContent(),title:this._getTitle()});case 7:return h=e.sent,d=h.content.value,f=h.title.value,e.next=12,(0,qt.as)({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:Ri({expressionInfos:null===s||void 0===s?void 0:s.expressionInfos,spatialReference:c,graphic:a,map:l,interceptor:cn.interceptor,view:u})});case 12:p=e.sent,v=p.expressionAttributes.value,i===this._featureAbortController&&a&&(this._expressionAttributes=v,this._graphicExpressionAttributes=(0,o.Z)((0,o.Z)({},a.attributes),v),this._set("formattedAttributes",this._createFormattedAttributes(d)),this._set("title",this._compileTitle(f)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(d)||null));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createMediaFormattedAttributes",value:function(e){var t=e.contentElement,i=e.contentElementIndex,n=e.formattedAttributes,r=this._effectivePopupTemplate,a=this.graphic,s=this.relatedInfos,l=this._sourceLayer,u=this._fieldInfoMap,c=this._graphicExpressionAttributes;n.content[i]=_e({fieldInfos:null===r||void 0===r?void 0:r.fieldInfos,graphic:a,attributes:(0,o.Z)((0,o.Z)({},c),t.attributes),layer:l,fieldInfoMap:u,relatedInfos:s})}},{key:"_createFieldsFormattedAttributes",value:function(e){var t=e.contentElement,i=e.contentElementIndex,n=e.formattedAttributes;if(t.fieldInfos){var r=this.graphic,a=this.relatedInfos,s=this._sourceLayer,l=this._fieldInfoMap,u=this._graphicExpressionAttributes;n.content[i]=_e({fieldInfos:t.fieldInfos,graphic:r,attributes:(0,o.Z)((0,o.Z)({},u),t.attributes),layer:s,fieldInfoMap:l,relatedInfos:a})}}},{key:"_createFormattedAttributes",value:function(e){var t=this,i=this._effectivePopupTemplate,n=this.graphic,r=this.relatedInfos,a=this._sourceLayer,o=this._fieldInfoMap,s=this._graphicExpressionAttributes,l={global:_e({fieldInfos:null===i||void 0===i?void 0:i.fieldInfos,graphic:n,attributes:s,layer:a,fieldInfoMap:o,relatedInfos:r}),content:[]};return Array.isArray(e)&&e.forEach((function(e,i){"fields"===e.type&&t._createFieldsFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:l}),"media"===e.type&&t._createMediaFormattedAttributes({contentElement:e,contentElementIndex:i,formattedAttributes:l})})),l}},{key:"_checkForRelatedFeatures",value:function(e){var t=this.graphic,i=this._effectivePopupTemplate;return this._queryRelatedInfos(t,ye(i),e)}},{key:"_queryRelatedInfos",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,i,r){var a,o,s,l,u,c,h=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.relatedInfos,o=this._sourceLayer,a.clear(),null==(null===o||void 0===o?void 0:o.associatedLayer)){e.next=8;break}return e.next=5,null===o||void 0===o?void 0:o.associatedLayer.load(r);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=o;case 9:if((s=e.t0)&&t){e.next=12;break}return e.abrupt("return");case 12:if(l=i.filter((function(e){return e&&Pe(e.fieldName)})),l&&l.length){e.next=15;break}return e.abrupt("return");case 15:return i.forEach((function(e){return h._configureRelatedInfo(e,s)})),e.next=18,ui({relatedInfos:a,layer:s},r);case 18:return u=e.sent,Object.keys(u).forEach((function(e){var t,i=a.get(e.toString()),n=null===(t=u[e])||void 0===t?void 0:t.value;i&&n&&(i.layerInfo=n.data)})),e.next=22,ci({graphic:t,relatedInfos:a,layer:s},r);case 22:c=e.sent,Object.keys(c).forEach((function(e){var t;ai(null===(t=c[e])||void 0===t?void 0:t.value,a.get(e.toString()))}));case 24:case"end":return e.stop()}}),e,this)})));return function(t,i,n){return e.apply(this,arguments)}}()},{key:"_configureRelatedInfo",value:function(e,t){var i=this.relatedInfos,n=ti(e.fieldName);if(n){var r=n.layerId,a=n.fieldName;if(r){var o=i.get(r.toString())||ri(r,t);o&&(function(e){var t,i=e.relatedInfo,n=e.fieldName,r=e.fieldInfo;if(null!==(t=i.relatedFields)&&void 0!==t&&t.push(n),r.statisticType){var a,o=new Qt.Z({statisticType:r.statisticType,onStatisticField:n,outStatisticFieldName:n});null===(a=i.outStatistics)||void 0===a||a.push(o)}}({relatedInfo:o,fieldName:a,fieldInfo:e}),this.relatedInfos.set(r,o))}}}}]),i}((0,$i.IG)(D.Z));yn.interceptor=new dn((function(e){var t=e.query,i=e.layer,n=e.method;Ie({layer:i,method:n,query:t,definitionExpression:"".concat(i.definitionExpression," ").concat(i.serviceDefinitionExpression)})}),(function(e){var t=e.queryPayload,i=e.layer,n=e.method;Ie({layer:i,method:n,query:t,definitionExpression:"".concat(i.definitionExpression," ").concat(i.serviceDefinitionExpression)})})),(0,d._)([(0,_.Cb)()],yn.prototype,"_error",void 0),(0,d._)([(0,_.Cb)()],yn.prototype,"_featureAbortController",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"_effectivePopupTemplate",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"_fieldInfoMap",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"_sourceLayer",null),(0,d._)([(0,_.Cb)()],yn.prototype,"abilities",void 0),(0,d._)([(0,w.p)("abilities")],yn.prototype,"castAbilities",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"content",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"contentViewModels",void 0),(0,d._)([(0,_.Cb)()],yn.prototype,"description",void 0),(0,d._)([(0,_.Cb)({type:Boolean})],yn.prototype,"defaultPopupTemplateEnabled",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"isTable",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"state",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"formattedAttributes",void 0),(0,d._)([(0,_.Cb)({type:O.Z,value:null})],yn.prototype,"graphic",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"lastEditInfo",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"relatedInfos",void 0),(0,d._)([(0,_.Cb)()],yn.prototype,"spatialReference",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"title",void 0),(0,d._)([(0,_.Cb)()],yn.prototype,"map",null),(0,d._)([(0,_.Cb)({readOnly:!0})],yn.prototype,"waitingForContent",null),(0,d._)([(0,_.Cb)()],yn.prototype,"view",void 0);var gn,mn=yn=cn=(0,d._)([(0,x.j)("esri.widgets.FeatureViewModel")],yn),bn="esri-feature",_n={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:bn,container:"".concat(bn,"__size-container"),title:"".concat(bn,"__title"),main:"".concat(bn,"__main-container"),btn:"".concat(bn,"__button"),icon:"".concat(bn,"__icon"),content:"".concat(bn,"__content"),contentNode:"".concat(bn,"__content-node"),contentElement:"".concat(bn,"__content-element"),text:"".concat(bn,"__text"),lastEditedInfo:"".concat(bn,"__last-edited-info"),fields:"".concat(bn,"__fields"),fieldHeader:"".concat(bn,"__field-header"),fieldData:"".concat(bn,"__field-data"),fieldDataDate:"".concat(bn,"__field-data--date"),loadingSpinnerContainer:"".concat(bn,"__loading-container"),spinner:"".concat(bn,"__loading-spinner")},wn=function(e){var t=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,l.Z)(this,i),(e=t.apply(this,arguments)).renderNodeContent=function(t){return(0,lt.Qd)(t)&&!t.destroyed?(0,ze.u)("div",{class:_n.contentNode,key:t},t.render()):t instanceof HTMLElement?(0,ze.u)("div",{class:_n.contentNode,key:t,bind:t,afterCreate:e._attachToNode}):(0,lt.o)(t)?(0,ze.u)("div",{class:_n.contentNode,key:t,bind:t.domNode,afterCreate:e._attachToNode}):null},e}return(0,u.Z)(i,[{key:"_attachToNode",value:function(e){e.appendChild(this)}}]),i}(e);return t=(0,d._)([(0,x.j)("esri.widgets.Feature.ContentMixin")],t)},kn={title:!0,content:!0,lastEditedInfo:!0},xn="relationship-handles",Mn=gn=function(e){(0,c.Z)(n,e);var t=(0,h.Z)(n);function n(e,i){var r;return(0,l.Z)(this,n),(r=t.call(this,e,i))._contentWidgets=[],r.flowItems=null,r.headingLevel=2,r.messages=null,r.messagesCommon=null,r.messagesURIUtils=null,r.visibleElements=(0,o.Z)({},kn),r.viewModel=new mn,r}return(0,u.Z)(n,[{key:"initialize",value:function(){var e=this;this.addHandles((0,m.YP)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.contentViewModels}),(function(){return e._setupContentWidgets()}),m.nn))}},{key:"loadDependencies",value:function(){return(0,je.h)({notice:function(){return Promise.all([i.e(8440),i.e(6502)]).then(i.bind(i,76502))}})}},{key:"destroy",value:function(){this._destroyContentWidgets()}},{key:"graphic",get:function(){return this.viewModel.graphic},set:function(e){this.viewModel.graphic=e}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(e){this.viewModel.defaultPopupTemplateEnabled=e}},{key:"isTable",get:function(){return this.viewModel.isTable}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"spatialReference",get:function(){return this.viewModel.spatialReference},set:function(e){this.viewModel.spatialReference=e}},{key:"title",get:function(){return this.viewModel.title}},{key:"castVisibleElements",value:function(e){return(0,o.Z)((0,o.Z)({},kn),e)}},{key:"map",get:function(){return this.viewModel.map},set:function(e){this.viewModel.map=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"render",value:function(){var e=this.viewModel.state,t=(0,ze.u)("div",{class:_n.container,key:"container"},this.renderTitle(),"error"===e?this.renderError():"loading"===e?this.renderLoading():this.renderContentContainer());return(0,ze.u)("div",{class:this.classes(_n.base,_n.esriWidget)},t)}},{key:"setActiveMedia",value:function(e,t){return this.viewModel.setActiveMedia(e,t)}},{key:"nextMedia",value:function(e){return this.viewModel.nextMedia(e)}},{key:"previousMedia",value:function(e){return this.viewModel.previousMedia(e)}},{key:"renderError",value:function(){var e=this.messagesCommon,t=this.messages,i=this.visibleElements;return(0,ze.u)("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?(0,ze.u)("div",{key:"error-title",slot:"title"},e.errorMessage):null,(0,ze.u)("div",{key:"error-message",slot:"message"},t.loadingError))}},{key:"renderLoading",value:function(){return(0,ze.u)("div",{key:"loading-container",class:_n.loadingSpinnerContainer},(0,ze.u)("span",{class:this.classes(_n.iconLoading,_n.spinner)}))}},{key:"renderContentContainer",value:function(){return this.visibleElements.content?(0,ze.u)("div",{class:_n.main},[this.renderContent(),this.renderLastEditInfo()]):null}},{key:"renderTitle",value:function(){var e=this.visibleElements,t=this.title;return e.title?(0,ze.u)($e.X6,{level:this.headingLevel,class:_n.title,innerHTML:t}):null}},{key:"renderContent",value:function(){var e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?(0,ze.u)("div",{class:_n.contentNode,key:"".concat(t,"-content-elements")},e.map(this.renderContentElement,this)):null;if("string"==typeof e){var i=this._contentWidgets[0];return!i||i.destroyed?null:(0,ze.u)("div",{class:_n.contentNode,key:"".concat(t,"-content")},i.render())}return this.renderNodeContent(e)}},{key:"renderContentElement",value:function(e,t){var i,n=this.visibleElements;if("boolean"!=typeof n.content&&(null===(i=n.content)||void 0===i||!i[e.type]))return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);case"relationship":return this.renderRelationship(t);default:return null}}},{key:"renderAttachments",value:function(e){var t=this._contentWidgets[e];if(!t||t.destroyed)return null;var i=t.viewModel,n=i.state,r=i.attachmentInfos;return"loading"===n||r.length>0?(0,ze.u)("div",{key:this._buildKey("attachments-element",e),class:this.classes(_n.contentElement)},t.render()):null}},{key:"renderRelationship",value:function(e){var t=this._contentWidgets[e];return t&&!t.destroyed&&this.flowItems?(0,ze.u)("div",{key:this._buildKey("relationship-element",e),class:_n.contentElement},t.render()):null}},{key:"renderExpression",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,ze.u)("div",{key:this._buildKey("expression-element",e),class:_n.contentElement},t.render())}},{key:"renderCustom",value:function(e,t){var i=e.creator,n=this._contentWidgets[t];return!n||n.destroyed?null:i?(0,ze.u)("div",{key:this._buildKey("custom-element",t),class:_n.contentElement},n.render()):null}},{key:"renderFields",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,ze.u)("div",{key:this._buildKey("fields-element",e),class:_n.contentElement},t.render())}},{key:"renderMedia",value:function(e){var t=this._contentWidgets[e];return!t||t.destroyed?null:(0,ze.u)("div",{key:this._buildKey("media-element",e),class:_n.contentElement},t.render())}},{key:"renderLastEditInfo",value:function(){var e=this.visibleElements,t=this.messages,i=this.viewModel.lastEditInfo;if(!i||!e.lastEditedInfo)return null;var n=i.date,r=i.user,a="edit"===i.type?r?t.lastEditedByUser:t.lastEdited:r?t.lastCreatedByUser:t.lastCreated,o=(0,gi.n)(a,{date:n,user:r});return(0,ze.u)("div",{key:"edit-info-element",class:this.classes(_n.lastEditedInfo,_n.contentElement)},o)}},{key:"renderText",value:function(e,t){var i=e.text,n=this._contentWidgets[t];return!n||n.destroyed?null:i?(0,ze.u)("div",{key:this._buildKey("text-element",t),class:this.classes(_n.contentElement,_n.text)},n.render()):null}},{key:"_buildKey",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return"".concat(e,"__").concat(this.get("viewModel.graphic.uid")||"0","-").concat(i.join("-"))}},{key:"_destroyContentWidget",value:function(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}},{key:"_destroyContentWidgets",value:function(){var e=this;this.removeHandles(xn),this._contentWidgets.forEach((function(t){return e._destroyContentWidget(t)})),this._contentWidgets=[]}},{key:"_addFeatureRelationshipHandles",value:function(e){var t=this,i=this.flowItems,n=this.visibleElements;this.addHandles([(0,m.on)((function(){return e}),"select-record",(function(e){var t=e.featureViewModel;i&&(t.abilities={relationshipContent:!0},i.push(new gn({flowItems:i,viewModel:t,visibleElements:n})))})),(0,m.on)((function(){return e}),"show-all-records",(function(){if(i){var n=e.viewModel;n.showAllEnabled=!0;var r=new hn({visibleElements:{title:!1,description:!1},viewModel:n});t._addFeatureRelationshipHandles(r),i.push(r)}}))],xn)}},{key:"_setupContentWidgets",value:function(){var e=this;this._destroyContentWidgets();var t=this.headingLevel,i=this.visibleElements,n=this.get("viewModel.content"),r=this.viewModel.contentViewModels;if(Array.isArray(n))n.forEach((function(n,a){if("attachments"===n.type&&(e._contentWidgets[a]=new rt({displayType:n.displayType,headingLevel:i.title?t+1:t,viewModel:r[a]})),"fields"===n.type&&(e._contentWidgets[a]=new kt({viewModel:r[a]})),"media"===n.type&&(e._contentWidgets[a]=new xi({viewModel:r[a]})),"text"===n.type&&(e._contentWidgets[a]=new dt({viewModel:r[a]})),"custom"===n.type&&(e._contentWidgets[a]=new dt({viewModel:r[a]})),"expression"===n.type&&(e._contentWidgets[a]=new Gi({viewModel:r[a]})),"relationship"===n.type){var o=new hn({viewModel:r[a]});e._addFeatureRelationshipHandles(o),e._contentWidgets[a]=o}}),this);else{var a=r[0];a&&!a.destroyed&&(this._contentWidgets[0]=new dt({viewModel:a}))}this.scheduleRender()}}]),n}(wn(M.Z));(0,d._)([(0,_.Cb)()],Mn.prototype,"graphic",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"defaultPopupTemplateEnabled",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"flowItems",void 0),(0,d._)([(0,_.Cb)()],Mn.prototype,"headingLevel",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Mn.prototype,"isTable",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"label",null),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Feature/t9n/Feature")],Mn.prototype,"messages",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/t9n/common")],Mn.prototype,"messagesCommon",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/support/t9n/uriUtils")],Mn.prototype,"messagesURIUtils",void 0),(0,d._)([(0,_.Cb)()],Mn.prototype,"spatialReference",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mn.prototype,"title",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"visibleElements",void 0),(0,d._)([(0,w.p)("visibleElements")],Mn.prototype,"castVisibleElements",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"map",null),(0,d._)([(0,_.Cb)()],Mn.prototype,"view",null),(0,d._)([(0,_.Cb)({type:mn})],Mn.prototype,"viewModel",void 0);var Cn,Zn=Mn=gn=(0,d._)([(0,x.j)("esri.widgets.Feature")],Mn),Pn=i(91505),An=Symbol("anchorHandles"),Tn=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e))[Cn]=new y.Z,n.location=null,n.screenLocationEnabled=!1,n.view=null,n[An].add([(0,m.gx)((function(){return(0,Xi.yw)(n.screenLocationEnabled?n.view:null,(function(e){return[e.size,"3d"===e.type?e.camera:e.viewpoint]}))}),(function(){return n.notifyChange("screenLocation")})),(0,m.YP)((function(){return n.screenLocation}),(function(e,t){null!=e&&null!=t&&n.emit("view-change")}))]),n}return(0,u.Z)(i,[{key:"destroy",value:function(){this.view=null,this[An]=(0,Xi.SC)(this[An])}},{key:"screenLocation",get:function(){var e,t=this.location,i=this.view;return this.screenLocationEnabled&&null!=t&&null!=i&&i.ready?null===(e=i.toScreen)||void 0===e?void 0:e.call(i,t):null}}]),i}(Pn.Z.EventedAccessor);Cn=An,(0,d._)([(0,_.Cb)()],Tn.prototype,"location",void 0),(0,d._)([(0,_.Cb)()],Tn.prototype,"screenLocation",null),(0,d._)([(0,_.Cb)()],Tn.prototype,"screenLocationEnabled",void 0),(0,d._)([(0,_.Cb)()],Tn.prototype,"view",void 0);var In=Tn=(0,d._)([(0,x.j)("esri.widgets.support.AnchorElementViewModel")],Tn),On=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e)).visible=!1,n}return(0,u.Z)(i)}(In);(0,d._)([(0,_.Cb)()],On.prototype,"visible",void 0);var Dn=On=(0,d._)([(0,x.j)("esri.widgets.CompassViewModel")],On),Fn="esri-spinner",En={base:Fn,spinnerStart:"".concat(Fn,"--start"),spinnerFinish:"".concat(Fn,"--finish")},Sn=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,l.Z)(this,i),(r=t.call(this,e,n))._animationDelay=500,r._animationPromise=null,r.viewModel=new Dn,r}return(0,u.Z)(i,[{key:"initialize",value:function(){var e=this;this.addHandles((0,m.YP)((function(){return e.visible}),(function(t){return e._visibleChange(t)})))}},{key:"destroy",value:function(){this._animationPromise=null}},{key:"location",get:function(){return this.viewModel.location},set:function(e){this.viewModel.location=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"show",value:function(e){var t=this,i=null!==e&&void 0!==e?e:{},n=i.location,r=i.promise;n&&(this.viewModel.location=n),this.visible=!0;r&&r.catch((function(){})).then((function(){return t.hide()}))}},{key:"hide",value:function(){this.visible=!1}},{key:"render",value:function(){var e,t=this.visible,i=!!this.viewModel.screenLocation,n=t&&i,r=!t&&i,o=(e={},(0,a.Z)(e,En.spinnerStart,n),(0,a.Z)(e,En.spinnerFinish,r),e),s=this._getPositionStyles();return(0,ze.u)("div",{class:this.classes(En.base,o),styles:s})}},{key:"_visibleChange",value:function(e){var t=this;if(e)this.viewModel.screenLocationEnabled=!0;else{var i=(0,qt.e4)(this._animationDelay);this._animationPromise=i,i.catch((function(){})).then((function(){t._animationPromise===i&&(t.viewModel.screenLocationEnabled=!1,t._animationPromise=null)}))}}},{key:"_getPositionStyles",value:function(){var e=this.viewModel,t=e.screenLocation,i=e.view;if(null==i||null==t)return{};var n=i.padding;return{left:t.x-n.left+"px",top:t.y-n.top+"px"}}}]),i}(M.Z);(0,d._)([(0,_.Cb)()],Sn.prototype,"location",null),(0,d._)([(0,_.Cb)()],Sn.prototype,"view",null),(0,d._)([(0,_.Cb)({type:Dn})],Sn.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)()],Sn.prototype,"visible",null);var Ln=Sn=(0,d._)([(0,x.j)("esri.widgets.Spinner")],Sn),Bn=i(6945),jn=i(9676),Rn="esri-icon-zoom-in-magnifying-glass",Nn="esri-icon-trash",zn="esri-icon-table",Hn=new Bn.Z({icon:"magnifying-glass-plus",id:"zoom-to-feature",title:"{messages.zoom}",className:Rn}),Vn=new Bn.Z({icon:"trash",id:"remove-selected-feature",title:"{messages.remove}",className:Nn}),Wn=new Bn.Z({icon:"magnifying-glass-plus",id:"zoom-to-clustered-features",title:"{messages.zoom}",className:Rn}),Yn=new jn.Z({icon:"table",id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:zn,value:!1}),Un=g.Z.getLogger("esri.widgets.Popup.PopupViewModel"),qn=function(e){var t=e.event,i=e.view,n=e.viewModel,r=t.action;if(!r)return Promise.reject(new C.Z("trigger-action:missing-arguments","Event has no action"));var a=r.disabled,o=r.id;if(!o)return Promise.reject(new C.Z("trigger-action:invalid-action","action.id is missing"));if(a)return Promise.reject(new C.Z("trigger-action:invalid-action","Action is disabled"));if(o===Hn.id)return function(e){return Qn.apply(this,arguments)}(n).catch(qt.H9);if(o===Wn.id)return function(e){return Jn.apply(this,arguments)}(n);if(o===Yn.id)return n.browseClusterEnabled=!n.browseClusterEnabled,n.featureMenuOpen=n.browseClusterEnabled,Promise.resolve();if(o===Vn.id){n.visible=!1;var s=n.selectedFeature;if(!s)return Promise.reject(new C.Z("trigger-action:".concat(Vn.id),"selectedFeature is required",{selectedFeature:s}));var l=s.sourceLayer;return l?l.remove(s):null===i||void 0===i||i.graphics.remove(s),Promise.resolve()}return Promise.resolve()};function Gn(e){var t,i=e.selectedFeature,n=e.location,r=e.view;return r?"3d"===r.type?null!==(t=null!==i&&void 0!==i?i:n)&&void 0!==t?t:null:e.get("selectedFeature.geometry")||n:null}function Xn(e){var t;return!!e&&e.isAggregate&&"cluster"===(null===(t=e.sourceLayer)||void 0===t||null===(t=t.featureReduction)||void 0===t?void 0:t.type)}function Kn(e,t){return $n.apply(this,arguments)}function $n(){return($n=(0,r.Z)((0,n.Z)().mark((function e(t,i){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("3d"===(null===i||void 0===i?void 0:i.type)&&t&&"esri.Graphic"===t.declaredClass){e.next=2;break}return e.abrupt("return",!0);case 2:if(!(r=i.getViewForGraphic(t))||!("whenGraphicBounds"in r)){e.next=13;break}return e.prev=4,e.next=7,r.whenGraphicBounds(t,{useViewElevation:!0});case 7:a=e.sent,e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return e.abrupt("return",!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Qn(){return Qn=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,s,l,u,c,h,d,f,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.location,a=t.selectedFeature,o=t.view,s=t.zoomFactor,l=Gn(t),o&&l){e.next=4;break}throw u=new C.Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:l,view:o}),Un.error(u),u;case 4:if(c=o.scale/s,h=null===(i=t.selectedFeature)||void 0===i?void 0:i.geometry,d=null!==h&&void 0!==h?h:r,e.t0=null!=d&&"point"===d.type,!e.t0){e.next=12;break}return e.next=11,Kn(a,o);case 11:e.t0=e.sent;case 12:return f=e.t0,Hn.active=!0,Hn.disabled=!0,e.prev=14,e.next=17,t.zoomTo({target:{target:l,scale:f?c:void 0}});case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(14),p=new C.Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:a}),Un.error(p);case 23:return e.prev=23,Hn.active=!1,Hn.disabled=!1,t.zoomToLocation=null,f&&(t.location=d),e.finish(23);case 26:case"end":return e.stop()}}),e,null,[[14,19,23,26]])}))),Qn.apply(this,arguments)}function Jn(){return(Jn=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,l,u,c,h,d,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.selectedFeature,"2d"===(null===(r=t.view)||void 0===r?void 0:r.type)){e.next=4;break}throw a=new C.Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r}),Un.error(a),a;case 4:if(i&&Xn(i)){e.next=7;break}throw o=new C.Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:i}),Un.error(o),o;case 7:return e.next=9,rr(r,i);case 9:return l=e.sent,u=(0,s.Z)(l,2),c=u[0],h=u[1],Wn.active=!0,Wn.disabled=!0,e.next=16,c.queryExtent(h);case 16:return d=e.sent,f=d.extent,e.next=20,t.zoomTo({target:f});case 20:Wn.active=!1,Wn.disabled=!1;case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function er(e){return tr.apply(this,arguments)}function tr(){return(tr=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,l,u,c,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.view,r=t.selectedFeature,i&&r){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,rr(i,r);case 5:return a=e.sent,o=(0,s.Z)(a,2),l=o[0],u=o[1],e.next=11,l.queryExtent(u);case 11:c=e.sent,h=c.extent,t.selectedClusterBoundaryFeature.geometry=h,i.graphics.add(t.selectedClusterBoundaryFeature);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ir(e){return nr.apply(this,arguments)}function nr(){return(nr=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o,l,u,c,h;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.selectedFeature,(r=t.view)&&i){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,rr(r,i);case 5:return a=e.sent,o=(0,s.Z)(a,2),l=o[0],u=o[1],Yn.active=!0,Yn.disabled=!0,e.next=12,l.queryFeatures(u);case 12:c=e.sent,h=c.features,Yn.active=!1,Yn.disabled=!1,Yn.value=!0,null===t||void 0===t||t.open({features:[i].concat(h),featureMenuOpen:!0});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rr(e,t){return ar.apply(this,arguments)}function ar(){return(ar=(0,r.Z)((0,n.Z)().mark((function e(t,i){var r,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.whenLayerView(i.sourceLayer);case 2:return r=e.sent,a=r.createQuery(),o=i.getObjectId(),e.abrupt("return",(a.aggregateIds=null!=o?[o]:[],[r,a]));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function or(e){var t;if(null==e)return null;switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":return e.centroid;case"multipoint":case"polyline":return null===(t=e.extent)||void 0===t?void 0:t.center;default:return null}}var sr="esri-popup",lr="".concat(sr,"__header"),ur="".concat(sr,"--is-docked"),cr={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:sr,widget:"esri-widget",main:"".concat(sr,"__main-container"),loadingContainer:"".concat(sr,"__loading-container"),isCollapsible:"".concat(sr,"--is-collapsible"),isCollapsed:"".concat(sr,"--is-collapsed"),shadow:"".concat(sr,"--shadow"),isDocked:ur,isDockedTopLeft:"".concat(ur,"-top-left"),isDockedTopCenter:"".concat(ur,"-top-center"),isDockedTopRight:"".concat(ur,"-top-right"),isDockedBottomLeft:"".concat(ur,"-bottom-left"),isDockedBottomCenter:"".concat(ur,"-bottom-center"),isDockedBottomRight:"".concat(ur,"-bottom-right"),alignTopCenter:"".concat(sr,"--aligned-top-center"),alignBottomCenter:"".concat(sr,"--aligned-bottom-center"),alignTopLeft:"".concat(sr,"--aligned-top-left"),alignBottomLeft:"".concat(sr,"--aligned-bottom-left"),alignTopRight:"".concat(sr,"--aligned-top-right"),alignBottomRight:"".concat(sr,"--aligned-bottom-right"),isFeatureMenuOpen:"".concat(sr,"--feature-menu-open"),isActionsMenuOpen:"".concat(sr,"--actions-menu-open"),hasFeatureUpdated:"".concat(sr,"--feature-updated"),header:lr,headerButtons:"".concat(lr,"-buttons"),headerContainer:"".concat(lr,"-container"),headerContainerButton:"".concat(lr,"-container--button"),headerTitle:"".concat(lr,"-title"),content:"".concat(sr,"__content"),contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:"".concat(sr,"__footer"),footerHasPagination:"".concat(sr,"__footer--has-pagination"),footerHasActions:"".concat(sr,"__footer--has-actions"),footerHasActionsMenu:"".concat(sr,"__footer--has-actions-menu"),button:"".concat(sr,"__button"),buttonDisabled:"".concat(sr,"__button--disabled"),buttonDock:"".concat(sr,"__button--dock"),icon:"".concat(sr,"__icon"),iconDock:"".concat(sr,"__icon--dock-icon"),inlineActionsContainer:"".concat(sr,"__inline-actions-container"),actionsMenuButton:"".concat(sr,"__actions-menu-button"),actions:"".concat(sr,"__actions"),action:"".concat(sr,"__action"),actionImage:"".concat(sr,"__action-image"),actionText:"".concat(sr,"__action-text"),actionToggle:"".concat(sr,"__action-toggle"),actionToggleOn:"".concat(sr,"__action-toggle--on"),actionExit:"".concat(sr,"__action--exit"),actionSelectFeature:"".concat(sr,"__action--select-feature"),pointer:"".concat(sr,"__pointer"),pointerDirection:"".concat(sr,"__pointer-direction"),navigation:"".concat(sr,"__navigation"),paginationIcon:"".concat(sr,"__pagination-icon"),paginationPrevious:"".concat(sr,"__pagination-previous"),paginationNext:"".concat(sr,"__pagination-next"),featureMenu:"".concat(sr,"__feature-menu"),featureMenuList:"".concat(sr,"__feature-menu-list"),featureMenuItem:"".concat(sr,"__feature-menu-item"),featureMenuViewport:"".concat(sr,"__feature-menu-viewport"),featureMenuHeader:"".concat(sr,"__feature-menu-header"),featureMenuNote:"".concat(sr,"__feature-menu-note"),featureMenuSelected:"".concat(sr,"__feature-menu-item--selected"),featureMenuButton:"".concat(sr,"__feature-menu-button"),featureMenuButtonIcon:"".concat(sr,"__feature-menu-button-icon"),featureMenuTitle:"".concat(sr,"__feature-menu-title"),featureMenuObserver:"".concat(sr,"__feature-menu-observer"),featureMenuLoader:"".concat(sr,"__feature-menu-loader"),collapseButton:"".concat(sr,"__collapse-button"),collapseIcon:"".concat(sr,"__collapse-icon")},hr=i(81753),dr=i(30651),fr=i(57976),pr=(i(79563),i(37817),i(69157),i(99653),"esri-relationship-ramp"),vr="".concat(pr,"--diamond"),yr="".concat(pr,"--square");"".concat(vr,"__container"),"".concat(vr,"__left-column"),"".concat(vr,"__right-column"),"".concat(vr,"__middle-column"),"".concat(vr,"__middle-column--label"),"".concat(vr,"__middle-column--ramp"),"".concat(yr,"__table"),"".concat(yr,"__table-row"),"".concat(yr,"__table-cell"),"".concat(yr,"__table-label"),"".concat(yr,"__table-label--left-bottom"),"".concat(yr,"__table-label--right-bottom"),"".concat(yr,"__table-label--left-top"),"".concat(yr,"__table-label--right-top");i(84652),i(36009);function gr(e){return e&&"opacity"in e?e.opacity*gr(e.parent):1}function mr(e,t){return br.apply(this,arguments)}function br(){return br=(0,r.Z)((0,n.Z)().mark((function e(t,r){var a,s,l,u,c,h,d,f,p,v,y,g,m,b,_,w,k,x,M,C,Z,P,A,T,I,O,D,F,E;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(l=t.sourceLayer,u=null!==(a=null!=r&&r.useSourceLayer?l:t.layer)&&void 0!==a?a:l,c=gr(u),null==t.symbol||null!=r&&!0===r.ignoreGraphicSymbol){e.next=13;break}if("web-style"!==t.symbol.type){e.next=10;break}return e.next=7,(0,Pt.Q8)(t.symbol,(0,o.Z)((0,o.Z)({},r),{},{cache:null!=r?r.webStyleCache:null}));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=t.symbol.clone();case 11:return h=e.t0,e.abrupt("return",((0,Pt.tb)(h,null,c),h));case 13:if(!(d=null!==(s=null!=r?r.renderer:null)&&void 0!==s?s:u&&"renderer"in u?u.renderer:null)||!("getSymbolAsync"in d)){e.next=20;break}return e.next=17,d.getSymbolAsync(t,r);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1=null;case 21:if(f=e.t1){e.next=24;break}return e.abrupt("return");case 24:if("web-style"!==f.type){e.next=30;break}return e.next=27,f.fetchSymbol((0,o.Z)((0,o.Z)({},r),{},{cache:null!=r?r.webStyleCache:null}));case 27:e.t2=e.sent,e.next=31;break;case 30:e.t2=f.clone();case 31:if(f=e.t2,d&&"visualVariables"in d&&d.visualVariables&&d.visualVariables.length){e.next=34;break}return e.abrupt("return",((0,Pt.tb)(f,null,c),f));case 34:if(!("arcadeRequiredForVisualVariables"in d)||!d.arcadeRequiredForVisualVariables||null!=r&&null!=r.arcade){e.next=40;break}return p=(0,o.Z)({},r),e.next=38,(0,N.LC)();case 38:p.arcade=e.sent,r=p;case 40:return e.next=42,Promise.resolve().then(i.bind(i,56011));case 42:v=e.sent,y=v.getColor,g=v.getOpacity,m=v.getAllSizes,b=v.getRotationAngle,_=[],w=[],k=[],x=[],M=(0,Mt.Z)(d.visualVariables),e.prev=52,M.s();case 54:if((C=M.n()).done){e.next=68;break}Z=C.value,e.t3=Z.type,e.next="color"===e.t3?59:"opacity"===e.t3?61:"rotation"===e.t3?63:"size"===e.t3?65:66;break;case 59:return _.push(Z),e.abrupt("break",66);case 61:return w.push(Z),e.abrupt("break",66);case 63:return x.push(Z),e.abrupt("break",66);case 65:Z.target||k.push(Z);case 66:e.next=54;break;case 68:e.next=73;break;case 70:e.prev=70,e.t4=e.catch(52),M.e(e.t4);case 73:return e.prev=73,M.f(),e.finish(73);case 76:if(P=!!_.length&&_[_.length-1],A=P?y(P,t,r):null,T=!!w.length&&w[w.length-1],I=T?g(T,t,r):null,null!=c&&(I=null!=I?I*c:c),(0,Pt.tb)(f,A,I),!k.length){e.next=82;break}return O=m(k,t,r),e.next=82,(0,Pt.e3)(f,O);case 82:for(D=0,F=x;D<F.length;D++)E=F[D],(0,Pt.BR)(f,b(E,t,r),E.axis);return e.abrupt("return",f);case 84:case"end":return e.stop()}}),e,null,[[52,70,73,76]])}))),br.apply(this,arguments)}function _r(e){return e&&"function"==typeof e.highlight}var wr=i(99505),kr=i(61459),xr=f.Z.ofType({key:"type",defaultKeyValue:"button",base:fr.Z,typeMap:{button:Bn.Z,toggle:jn.Z}}),Mr=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this,e))._handles=new y.Z,n._pendingPromises=new Set,n._fetchFeaturesController=null,n._highlightSelectedFeaturePromise=null,n._highlightActiveFeaturePromise=null,n._selectedClusterFeature=null,n.featurePage=null,n.actions=new xr,n.activeFeature=null,n.defaultPopupTemplateEnabled=!1,n.autoCloseEnabled=!1,n.autoOpenEnabled=!0,n.browseClusterEnabled=!1,n.content=null,n.featuresPerPage=20,n.featureMenuOpen=!1,n.featureViewModelAbilities=null,n.featureViewModels=[],n.highlightEnabled=!0,n.includeDefaultActions=!0,n.selectedClusterBoundaryFeature=new O.Z({symbol:new kr.Z({outline:{width:1.5,color:"cyan"},style:"none"})}),n.title=null,n.updateLocationEnabled=!1,n.view=null,n.visible=!1,n.zoomFactor=4,n.zoomToLocation=null,n}return(0,u.Z)(i,[{key:"isLoadingFeature",get:function(){return this.featureViewModels.some((function(e){return e.waitingForContent}))}},{key:"initialize",value:function(){var e=this;this._handles.add([this.on("view-change",(function(){return e._autoClose()})),(0,m.YP)((function(){return[e.highlightEnabled,e.selectedFeature,e.visible,e.view]}),(function(){return e._highlightSelectedFeature()})),(0,m.YP)((function(){return[e.highlightEnabled,e.activeFeature,e.visible,e.view]}),(function(){return e._highlightActiveFeature()})),(0,m.YP)((function(){var t;return null===(t=e.view)||void 0===t||null===(t=t.animation)||void 0===t?void 0:t.state}),(function(t){return e._animationStateChange(t)})),(0,m.YP)((function(){return e.location}),(function(t){return e._locationChange(t)})),(0,m.YP)((function(){return e.selectedFeature}),(function(t){return e._selectedFeatureChange(t)})),(0,m.YP)((function(){return[e.selectedFeatureIndex,e.featureCount,e.featuresPerPage]}),(function(){return e._selectedFeatureIndexChange()})),(0,m.YP)((function(){return[e.featurePage,e.selectedFeatureIndex,e.featureCount,e.featuresPerPage,e.featureViewModels]}),(function(){return e._setGraphicOnFeatureViewModels()})),(0,m.YP)((function(){return e.featureViewModels}),(function(){return e._featureViewModelsChange()})),this.on("trigger-action",(function(t){return qn({event:t,viewModel:e,view:e.view})})),(0,m.gx)((function(){return!e.waitingForResult}),(function(){return e._waitingForResultChange()}),m.Z_),(0,m.YP)((function(){var t,i;return[e.features,null===(t=e.view)||void 0===t?void 0:t.map,null===(i=e.view)||void 0===i?void 0:i.spatialReference]}),(function(){return e._updateFeatureVMs()})),(0,m.YP)((function(){var t;return null===(t=e.view)||void 0===t?void 0:t.scale}),(function(){return e._viewScaleChange()})),(0,m.gx)((function(){return!e.visible}),(function(){return e.browseClusterEnabled=!1})),(0,m.YP)((function(){return e.browseClusterEnabled}),(function(t){return t?e.enableClusterBrowsing():e.disableClusterBrowsing()}))])}},{key:"destroy",value:function(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}},{key:"active",get:function(){return!(!this.visible||this.waitingForResult)}},{key:"allActions",get:function(){var e=this._get("allActions")||new xr;e.removeAll();var t=this.actions,i=this.defaultActions,n=this.defaultPopupTemplateEnabled,r=this.includeDefaultActions,a=this.selectedFeature,o=r?i.concat(t):t,s=a&&("function"==typeof a.getEffectivePopupTemplate&&a.getEffectivePopupTemplate(n)||a.popupTemplate),l=s&&s.actions,u=s&&s.overwriteActions?l:l?l.concat(o):o;return u&&u.filter(Boolean).forEach((function(t){return e.add(t)})),e}},{key:"defaultActions",get:function(){var e=this._get("defaultActions")||new xr;return e.removeAll(),e.addMany(Xn(this.selectedFeature)?[Wn.clone(),Yn.clone()]:[Hn.clone()]),e}},{key:"featureCount",get:function(){return this.features.length}},{key:"features",get:function(){return this._get("features")||[]},set:function(e){var t=e||[];this._set("features",t);var i=this.pendingPromisesCount,n=this.promiseCount,r=this.selectedFeatureIndex,a=n&&t.length;a&&i&&-1===r?this.selectedFeatureIndex=0:a&&-1!==r||(this.selectedFeatureIndex=t.length?0:-1)}},{key:"location",get:function(){return this._get("location")||null},set:function(e){var t,i,n=e,r=null===(t=this.view)||void 0===t||null===(t=t.spatialReference)||void 0===t?void 0:t.isWebMercator;e&&null!==e&&void 0!==e&&null!==(i=e.spatialReference)&&void 0!==i&&i.isWGS84&&r&&(n=(0,hr.$)(e)),this._set("location",n)}},{key:"pendingPromisesCount",get:function(){return this._pendingPromises.size}},{key:"waitingForResult",get:function(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||0!==this.featureCount)}},{key:"promiseCount",get:function(){return this.promises.length}},{key:"promises",get:function(){return this._get("promises")||[]},set:function(e){var t=this;if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach((function(e){t._pendingPromises.add(e);e.then((function(i){t._pendingPromises.has(e)&&t._updateFeatures(i),t._updatePendingPromises(e)}),(function(){return t._updatePendingPromises(e)}))})),this.notifyChange("pendingPromisesCount")}},{key:"selectedFeature",get:function(){var e=this.features,t=this.selectedFeatureIndex;return-1===t?null:e[t]||null}},{key:"selectedFeatureIndex",get:function(){var e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1},set:function(e){var t=this.featureCount;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this.activeFeature=null,this._set("selectedFeatureIndex",e)}},{key:"selectedFeatureViewModel",get:function(){return this.featureViewModels[this.selectedFeatureIndex]||null}},{key:"state",get:function(){return this.get("view.ready")?"ready":"disabled"}},{key:"centerAtLocation",value:function(){var e=this.view,t=Gn(this);return t&&e?this.callGoTo({target:{target:t,scale:e.scale}}):Promise.reject(new C.Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}))}},{key:"zoomTo",value:function(e){return this.callGoTo(e)}},{key:"clear",value:function(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}},{key:"fetchFeatures",value:function(e,t){var i=this.view;if(!i||!e)throw new C.Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:i});return i.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}},{key:"open",value:function(e){var t=(0,o.Z)((0,o.Z)({updateLocationEnabled:!1,promises:[],fetchFeatures:!1},e),{},{visible:!0}),i=t.fetchFeatures;delete t.fetchFeatures,i&&this._setFetchFeaturesPromises(t.location);for(var n=0,r=["actionsMenuOpen","collapsed"];n<r.length;n++){delete t[r[n]]}this.set(t)}},{key:"triggerAction",value:function(e){var t=this.allActions.at(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}},{key:"next",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}},{key:"previous",value:function(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}},{key:"disableClusterBrowsing",value:function(){(function(e){Yn.value=!1;var t=e.features.filter((function(e){return Xn(e)}));t.length&&(e.features=t)})(this),this._clearBrowsedClusterGraphics()}},{key:"enableClusterBrowsing",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.view,i=this.selectedFeature,"2d"!==(null===t||void 0===t?void 0:t.type)){e.next=12;break}if(!Xn(i)){e.next=9;break}return e.next=5,er(this);case 5:return e.next=7,ir(this);case 7:e.next=10;break;case 9:g.Z.getLogger(this).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i);case 10:e.next=13;break;case 12:g.Z.getLogger(this).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleViewClick",value:function(e){this.autoOpenEnabled&&this._fetchFeaturesAndOpen(e)}},{key:"_animationStateChange",value:function(e){this.zoomToLocation||(Hn.disabled="waiting-for-target"===e)}},{key:"_clearBrowsedClusterGraphics",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}},{key:"_viewScaleChange",value:function(){if(Xn(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}},{key:"_locationChange",value:function(e){var t=this.selectedFeature;this.updateLocationEnabled&&e&&(!t||t.geometry)&&this.centerAtLocation()}},{key:"_selectedFeatureIndexChange",value:function(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}},{key:"_featureViewModelsChange",value:function(){this.featurePage=this.featureCount>1?1:null}},{key:"_setGraphicOnFeatureViewModels",value:function(){var e=this.features,t=this.featureCount,i=this.featurePage,n=this.featuresPerPage,r=this.featureViewModels;if(null!==i){var a=((i-1)*n+t)%t,o=a+n;r.slice(a,o).forEach((function(t,i){t&&!t.graphic&&(t.graphic=e[a+i])}))}}},{key:"_selectedFeatureChange",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a,o=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.location,r=this.updateLocationEnabled,a=this.view,!t||!a){e.next=11;break}if(!this.browseClusterEnabled){e.next=10;break}if(this._selectedClusterFeature&&(a.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),!Xn(t)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,mr(t);case 7:return t.symbol=e.sent,this._selectedClusterFeature=t,e.abrupt("return",void a.graphics.add(this._selectedClusterFeature));case 10:!r&&i||!t.geometry?r&&!t.geometry&&this.centerAtLocation().then((function(){var e,t=null===(e=a.center)||void 0===e?void 0:e.clone();t&&(o.location=t)})):this.location=or(t.geometry);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_waitingForResultChange",value:function(){!this.featureCount&&this.promises&&(this.visible=!1)}},{key:"_setFetchFeaturesPromises",value:function(e){var t=this;return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then((function(e){var i=e.clientOnlyGraphics,n=e.promisesPerLayerView,r=Promise.resolve(i),a=n.map((function(e){return e.promise}));t.promises=[r].concat((0,S.Z)(a))}))}},{key:"_destroyFeatureVMs",value:function(){this.featureViewModels.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",[])}},{key:"_updateFeatureVMs",value:function(){var e=this,t=this.selectedFeature,i=this.features,n=this.featureViewModels;if(Xn(t)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),i&&i.length){var r=n.slice(0),a=[];i.forEach((function(i,n){if(i){var o=null;if(r.some((function(e,t){return e&&e.graphic===i&&(o=e,r.splice(t,1)),!!o})),o)a[n]=o;else{var s,l,u=new mn({abilities:e.featureViewModelAbilities,defaultPopupTemplateEnabled:e.defaultPopupTemplateEnabled,spatialReference:null===(s=e.view)||void 0===s?void 0:s.spatialReference,graphic:i===t?i:null,map:null===(l=e.view)||void 0===l?void 0:l.map,view:e.view});a[n]=u}}})),r.forEach((function(e){return e&&!e.destroyed&&e.destroy()})),this._set("featureViewModels",a)}}},{key:"_getScreenPoint",value:function(e){var t=this.view;return t&&e&&"function"==typeof t.toScreen?t.toScreen(e):null}},{key:"_cancelFetchingFeatures",value:function(){var e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}},{key:"_fetchFeaturesWithController",value:function(e,t){var i=this;this._cancelFetchingFeatures();var n=new AbortController,r=n.signal;this._fetchFeaturesController=n,this.notifyChange("waitingForResult");var a=this.fetchFeatures(e,{signal:r,event:t});return a.catch((function(){})).then((function(){i._fetchFeaturesController=null,i.notifyChange("waitingForResult")})),a}},{key:"_fetchFeaturesAndOpen",value:function(e){var t=e.screenPoint,i=e.mapPoint,n=this.view;this._fetchFeaturesWithController(t,e).then((function(e){var t=e.clientOnlyGraphics,r=e.promisesPerLayerView,a=e.location,o=[Promise.resolve(t)].concat((0,S.Z)(r.map((function(e){return e.promise}))));return null!==n&&void 0!==n&&n.popup&&"open"in n.popup&&n.popup.open({location:a||i,promises:o}),e}))}},{key:"_updatePendingPromises",value:function(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}},{key:"_autoClose",value:function(){this.autoCloseEnabled&&(this.visible=!1)}},{key:"_getLayerView",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.when();case 2:return e.abrupt("return",t.whenLayerView(i));case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}()},{key:"_getHighlightLayer",value:function(e){var t=e.layer,i=e.sourceLayer;return i&&"layer"in i&&i.layer?i.layer:"map-notes"===(null===i||void 0===i?void 0:i.type)||"subtype-group"===(null===i||void 0===i?void 0:i.type)?i:t}},{key:"_getHighlightTarget",value:function(e,t){var i="imagery"===t.type?void 0:"objectIdField"in t?t.objectIdField||"OBJECTID":null,n=e.attributes;return n&&i&&n[i]||e}},{key:"_highlightActiveFeature",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o,s,l,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="highlight-active-feature",this._handles.remove(t),i=this.highlightEnabled,r=this.view,a=this.activeFeature,o=this.visible,a&&r&&i&&o){e.next=5;break}return e.abrupt("return");case 5:if((s=this._getHighlightLayer(a))&&s instanceof dr.Z){e.next=8;break}return e.abrupt("return");case 8:return l=this._getLayerView(r,s),this._highlightActiveFeaturePromise=l,e.next=12,l;case 12:if((u=e.sent)&&_r(u)&&this._highlightActiveFeaturePromise===l&&this.activeFeature&&this.highlightEnabled){e.next=15;break}return e.abrupt("return");case 15:c=u.highlight(this._getHighlightTarget(a,s)),this._handles.add(c,t);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_highlightSelectedFeature",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,i,r,a,o,s,l,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="highlight-selected-feature",this._handles.remove(t),i=this.selectedFeature,r=this.highlightEnabled,a=this.view,o=this.visible,i&&a&&r&&o){e.next=5;break}return e.abrupt("return");case 5:if((s=this._getHighlightLayer(i))&&s instanceof dr.Z){e.next=8;break}return e.abrupt("return");case 8:return l=this._getLayerView(a,s),this._highlightSelectedFeaturePromise=l,e.next=12,l;case 12:if((u=e.sent)&&_r(u)&&this._highlightSelectedFeaturePromise===l&&this.selectedFeature&&this.highlightEnabled&&this.visible){e.next=15;break}return e.abrupt("return");case 15:c=u.highlight(this._getHighlightTarget(i,s)),this._handles.add(c,t);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_updateFeatures",value:function(e){var t=this.features;if(e&&e.length)if(t.length){var i=e.filter((function(e){return!t.includes(e)}));this.features=t.concat(i)}else this.features=e}}]),i}((0,wr._)(In));(0,d._)([(0,_.Cb)()],Mr.prototype,"featurePage",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"isLoadingFeature",null),(0,d._)([(0,_.Cb)({type:xr})],Mr.prototype,"actions",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"active",null),(0,d._)([(0,_.Cb)()],Mr.prototype,"activeFeature",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"allActions",null),(0,d._)([(0,_.Cb)({type:Boolean})],Mr.prototype,"defaultPopupTemplateEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"autoCloseEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"autoOpenEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"browseClusterEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"content",void 0),(0,d._)([(0,_.Cb)({type:xr,readOnly:!0})],Mr.prototype,"defaultActions",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"featureCount",null),(0,d._)([(0,_.Cb)()],Mr.prototype,"features",null),(0,d._)([(0,_.Cb)()],Mr.prototype,"featuresPerPage",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"featureMenuOpen",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"featureViewModelAbilities",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"featureViewModels",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"highlightEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"includeDefaultActions",void 0),(0,d._)([(0,_.Cb)({type:Xt.Z})],Mr.prototype,"location",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"pendingPromisesCount",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"selectedClusterBoundaryFeature",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"waitingForResult",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"promiseCount",null),(0,d._)([(0,_.Cb)()],Mr.prototype,"promises",null),(0,d._)([(0,_.Cb)({value:null,readOnly:!0})],Mr.prototype,"selectedFeature",null),(0,d._)([(0,_.Cb)({value:-1})],Mr.prototype,"selectedFeatureIndex",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"selectedFeatureViewModel",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Mr.prototype,"state",null),(0,d._)([(0,_.Cb)()],Mr.prototype,"title",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"updateLocationEnabled",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"view",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"visible",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"zoomFactor",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"zoomToLocation",void 0),(0,d._)([(0,_.Cb)()],Mr.prototype,"centerAtLocation",null);var Cr=Mr=(0,d._)([(0,x.j)("esri.widgets.Popup.PopupViewModel")],Mr),Zr=i(78088),Pr=i(28907),Ar="selected-index",Tr="popup-spinner",Ir={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},Or="esri-popup";function Dr(e,t){return void 0===t?"".concat(Or,"__").concat(e):"".concat(Or,"__").concat(e,"-").concat(t)}var Fr={closeButton:!0,featureNavigation:!0},Er=function(e){(0,c.Z)(d,e);var t=(0,h.Z)(d);function d(e,i){var n;return(0,l.Z)(this,d),(n=t.call(this,e,i))._blurClose=!1,n._blurContainer=!1,n._containerNode=null,n._mainContainerNode=null,n._featureMenuNode=null,n._actionsMenuNode=null,n._focusClose=!1,n._focusContainer=!1,n._focusDockButton=!1,n._focusFeatureMenuButton=!1,n._focusActionsMenuButton=!1,n._focusFirstFeature=!1,n._focusFirstAction=!1,n._handles=new y.Z,n._pointerOffsetInPx=16,n._spinner=null,n._feature=null,n._featureMenuIntersectionObserverNode=null,n._featureMenuViewportNode=null,n._rootFlowItemNode=null,n._featureMenuIntersectionObserverCallback=function(e){var t=(0,s.Z)(e,1)[0];(null===t||void 0===t?void 0:t.isIntersecting)&&null!=n.viewModel.featurePage&&n.viewModel.featurePage++},n._featureMenuIntersectionObserver=new IntersectionObserver(n._featureMenuIntersectionObserverCallback,{root:window.document}),n._displaySpinnerThrottled=(0,b.P)((function(){return n._displaySpinner()}),0),n._exitRelatedRecordsActions=new WeakMap,n._featureSelectionActions=new WeakMap,n._flowItems=new f.Z,n.alignment="auto",n.collapsed=!1,n.collapseEnabled=!0,n.dockEnabled=!1,n.headingLevel=2,n.maxInlineActions=3,n.messages=null,n.messagesCommon=null,n.spinnerEnabled=!0,n.viewModel=new Cr,n.visibleElements=(0,o.Z)({},Fr),n._handleOpenRelatedFeature=function(e){n._openRelatedFeature(e)},n._addSelectedFeatureIndexHandle(),n.addHandles([n._displaySpinnerThrottled,(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.screenLocation}),(function(){return n._positionContainer()})),(0,m.YP)((function(){var e;return[null===(e=n.viewModel)||void 0===e?void 0:e.active,n.dockEnabled]}),(function(){return n._toggleScreenLocationEnabled()})),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.screenLocation}),(function(e,t){!!e!=!!t&&n.reposition()})),(0,m.YP)((function(){var e,t,i,r;return[null===(e=n.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.padding,null===(t=n.viewModel)||void 0===t||null===(t=t.view)||void 0===t?void 0:t.size,null===(i=n.viewModel)||void 0===i?void 0:i.active,null===(r=n.viewModel)||void 0===r?void 0:r.location,n.alignment]}),(function(){return n.reposition()})),(0,m.YP)((function(){return n.spinnerEnabled}),(function(e){return n._spinnerEnabledChange(e)})),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.size}),(function(e,t){return n._updateDockEnabledForViewSize(e,t)})),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.view}),(function(e,t){return n._viewChange(e,t)})),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.ready}),(function(e,t){return n._viewReadyChange(null!==e&&void 0!==e&&e,null!==t&&void 0!==t&&t)})),(0,m.YP)((function(){var e,t;return[null===(e=n.viewModel)||void 0===e?void 0:e.waitingForResult,null===(t=n.viewModel)||void 0===t?void 0:t.location]}),(function(){n._hideSpinner(),n._displaySpinnerThrottled()})),(0,m.YP)((function(){return n.selectedFeatureWidget}),(function(){return n._destroyFlowItemWidgets()})),(0,m.YP)((function(){var e,t;return[null===(e=n.selectedFeatureWidget)||void 0===e||null===(e=e.viewModel)||void 0===e?void 0:e.title,null===(t=n.selectedFeatureWidget)||void 0===t||null===(t=t.viewModel)||void 0===t?void 0:t.state]}),(function(){return n._setTitleFromFeatureWidget()})),(0,m.YP)((function(){var e,t;return[null===(e=n.selectedFeatureWidget)||void 0===e||null===(e=e.viewModel)||void 0===e?void 0:e.content,null===(t=n.selectedFeatureWidget)||void 0===t||null===(t=t.viewModel)||void 0===t?void 0:t.state]}),(function(){return n._setContentFromFeatureWidget()})),(0,m.gx)((function(){return!n.collapsed}),(function(){var e;"xsmall"===(null===(e=n.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.widthBreakpoint)&&n.viewModel.active&&n.collapseEnabled&&n.viewModel.centerAtLocation()})),(0,m.on)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.allActions}),"change",(function(){return n._watchActions()})),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.allActions}),(function(){return n._watchActions()}),m.nn),(0,m.YP)((function(){var e;return null===(e=n.viewModel)||void 0===e?void 0:e.featureViewModels}),(function(){return n._featureMenuViewportScrollTop()})),(0,m.on)((function(){return n._flowItems}),"change",(function(){n.notifyChange("_activeFlowItemWidget"),n.scheduleRender()})),(0,m.YP)((function(){var e,t;return[null===(e=n._activeFlowItemWidget)||void 0===e||null===(e=e.viewModel)||void 0===e?void 0:e.state,null===(t=n._activeFlowItemWidget)||void 0===t||null===(t=t.viewModel)||void 0===t?void 0:t.title]}),(function(){return n.scheduleRender()}))]),n}return(0,u.Z)(d,[{key:"loadDependencies",value:function(){return(0,je.h)({action:function(){return Promise.all([i.e(8440),i.e(5138),i.e(6814)]).then(i.bind(i,6814))},flow:function(){return i.e(3049).then(i.bind(i,53049))},"flow-item":function(){return Promise.all([i.e(8440),i.e(5138),i.e(2356),i.e(9308)]).then(i.bind(i,59308))},icon:function(){return i.e(7474).then(i.bind(i,87474))},tooltip:function(){return Promise.all([i.e(2356),i.e(4730)]).then(i.bind(i,94730))}})}},{key:"initialize",value:function(){this.addHandles(this._displaySpinnerThrottled)}},{key:"destroy",value:function(){var e,t;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),null!==(e=this._handles)&&void 0!==e&&e.destroy(),this._unobserveFeatureMenuObserver(),null===(t=this._featureMenuIntersectionObserver)||void 0===t||t.disconnect()}},{key:"actionsMenuId",get:function(){return"".concat(this.id,"-actions-menu")}},{key:"actionsMenuButtonId",get:function(){return"".concat(this.id,"-actions-menu-button")}},{key:"featureMenuId",get:function(){return"".concat(this.id,"-feature-menu")}},{key:"titleId",get:function(){return"".concat(this.id,"-popup-title")}},{key:"contentId",get:function(){return"".concat(this.id,"-popup-content")}},{key:"hasContent",get:function(){var e=this.selectedFeatureWidget,t=this.viewModel;if(!e)return!(null===t||void 0===t||!t.content);var i=e.viewModel;if(null!==i&&void 0!==i&&i.waitingForContent||"error"===(null===i||void 0===i?void 0:i.state))return!0;var n=null===i||void 0===i?void 0:i.content;return Array.isArray(n)?!!n.length:!!n}},{key:"featureNavigationVisible",get:function(){return this.viewModel.active&&this.viewModel.featureCount>1&&!!this.visibleElements.featureNavigation}},{key:"collapsible",get:function(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}},{key:"featureMenuVisible",get:function(){return this.featureNavigationVisible&&this.featureMenuOpen}},{key:"contentCollapsed",get:function(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}},{key:"dividedActions",get:function(){return this._divideActions()}},{key:"_activeFlowItemWidget",get:function(){var e;return null!==(e=this._flowItems.at(-1))&&void 0!==e?e:null}},{key:"actions",get:function(){return this.viewModel.actions},set:function(e){this.viewModel.actions=e}},{key:"actionsMenuOpen",get:function(){return!!this.viewModel.active&&this._get("actionsMenuOpen")},set:function(e){this._set("actionsMenuOpen",!!e)}},{key:"autoCloseEnabled",get:function(){return this.viewModel.autoCloseEnabled},set:function(e){this.viewModel.autoCloseEnabled=e}},{key:"autoOpenEnabled",get:function(){return(0,p.Mr)(g.Z.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled},set:function(e){(0,p.Mr)(g.Z.getLogger(this),"autoOpenEnabled",{replacement:"MapView/SceneView.popupEnabled",version:"4.27"}),this.viewModel.autoOpenEnabled=e}},{key:"defaultPopupTemplateEnabled",get:function(){return this.viewModel.defaultPopupTemplateEnabled},set:function(e){this.viewModel.defaultPopupTemplateEnabled=e}},{key:"content",get:function(){return this.viewModel.content},set:function(e){this.viewModel.content=e}},{key:"currentAlignment",get:function(){return this._getCurrentAlignment()}},{key:"currentDockPosition",get:function(){return this._getCurrentDockPosition()}},{key:"dockOptions",get:function(){return this._get("dockOptions")||Ir},set:function(e){var t,i=(0,o.Z)({},Ir),n=null===(t=this.viewModel)||void 0===t||null===(t=t.view)||void 0===t?void 0:t.breakpoints,r={};n&&(r.width=n.xsmall,r.height=n.xsmall);var a=(0,o.Z)((0,o.Z)({},i),e),s=(0,o.Z)((0,o.Z)({},i.breakpoint),r),l=a.breakpoint;"object"==typeof l?a.breakpoint=(0,o.Z)((0,o.Z)({},s),l):l&&(a.breakpoint=s),this._set("dockOptions",a),this._setCurrentDockPosition(),this.reposition()}},{key:"featureCount",get:function(){return this.viewModel.featureCount}},{key:"featureMenuOpen",get:function(){return this.viewModel.featureMenuOpen},set:function(e){this.viewModel.featureMenuOpen=e}},{key:"features",get:function(){return this.viewModel.features},set:function(e){this.viewModel.features=e}},{key:"goToOverride",get:function(){return this.viewModel.goToOverride},set:function(e){this.viewModel.goToOverride=e}},{key:"highlightEnabled",get:function(){return this.viewModel.highlightEnabled},set:function(e){this.viewModel.highlightEnabled=e}},{key:"location",get:function(){return this.viewModel.location},set:function(e){this.viewModel.location=e}},{key:"label",get:function(){var e,t;return null!==(e=null===(t=this.messages)||void 0===t?void 0:t.widgetLabel)&&void 0!==e?e:""},set:function(e){this._overrideIfSome("label",e)}},{key:"promises",get:function(){return this.viewModel.promises},set:function(e){this.viewModel.promises=e}},{key:"selectedFeature",get:function(){return this.viewModel.selectedFeature}},{key:"selectedFeatureIndex",get:function(){return this.viewModel.selectedFeatureIndex},set:function(e){this.viewModel.selectedFeatureIndex=e}},{key:"selectedFeatureWidget",get:function(){var e=this._feature,t=this.visibleElements,i=this.headingLevel,n=this._flowItems,r=this.viewModel.selectedFeatureViewModel,a=(0,o.Z)((0,o.Z)({},t),{},{title:!1});return r?(e?(e.viewModel=r,e.visibleElements=a):this._feature=new Zn({flowItems:n,headingLevel:i+1,viewModel:r,visibleElements:a}),this._feature):null}},{key:"title",get:function(){return this.viewModel.title},set:function(e){this.viewModel.title=e}},{key:"updateLocationEnabled",get:function(){return this.viewModel.updateLocationEnabled},set:function(e){this.viewModel.updateLocationEnabled=e}},{key:"view",get:function(){return this.viewModel.view},set:function(e){this.viewModel.view=e}},{key:"visible",get:function(){return this.viewModel.visible},set:function(e){this.viewModel.visible=e}},{key:"castVisibleElements",value:function(e){return(0,o.Z)((0,o.Z)({},Fr),e)}},{key:"blur",value:function(){this.viewModel.active||g.Z.getLogger(this).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}},{key:"clear",value:function(){return this.viewModel.clear()}},{key:"close",value:function(){this.visible=!1}},{key:"fetchFeatures",value:function(e,t){return this.viewModel.fetchFeatures(e,t)}},{key:"focus",value:function(){this.viewModel.active||g.Z.getLogger(this).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}},{key:"next",value:function(){return this.viewModel.next()}},{key:"open",value:function(e){var t;this._handles.remove(Ar);var i=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:i};"xsmall"===(null===(t=this.viewModel)||void 0===t||null===(t=t.view)||void 0===t?void 0:t.widthBreakpoint)&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}},{key:"previous",value:function(){return this.viewModel.previous()}},{key:"reposition",value:function(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}},{key:"triggerAction",value:function(e){return this.viewModel.triggerAction(e)}},{key:"render",value:function(){var e,t,i,n=this.actionsMenuOpen,r=this.dockEnabled,o=this.featureMenuVisible,s=this.dividedActions,l=this.currentAlignment,u=this.currentDockPosition,c=this.viewModel.active,h=s.menuActions,d=c&&h.length>1&&n,f=c&&r,p=c&&!r,v=null===(e=this.selectedFeature)||void 0===e||null===(e=e.layer)||void 0===e?void 0:e.title,y=null===(t=this.selectedFeature)||void 0===t||null===(t=t.layer)||void 0===t?void 0:t.id,g=(i={},(0,a.Z)(i,cr.alignTopCenter,"top-center"===l),(0,a.Z)(i,cr.alignBottomCenter,"bottom-center"===l),(0,a.Z)(i,cr.alignTopLeft,"top-left"===l),(0,a.Z)(i,cr.alignBottomLeft,"bottom-left"===l),(0,a.Z)(i,cr.alignTopRight,"top-right"===l),(0,a.Z)(i,cr.alignBottomRight,"bottom-right"===l),(0,a.Z)(i,cr.isDocked,f),(0,a.Z)(i,cr.shadow,p),(0,a.Z)(i,cr.isDockedTopLeft,"top-left"===u),(0,a.Z)(i,cr.isDockedTopCenter,"top-center"===u),(0,a.Z)(i,cr.isDockedTopRight,"top-right"===u),(0,a.Z)(i,cr.isDockedBottomLeft,"bottom-left"===u),(0,a.Z)(i,cr.isDockedBottomCenter,"bottom-center"===u),(0,a.Z)(i,cr.isDockedBottomRight,"bottom-right"===u),(0,a.Z)(i,cr.isFeatureMenuOpen,o),(0,a.Z)(i,cr.isActionsMenuOpen,d),i);return(0,ze.u)("div",{class:this.classes(cr.base,g),role:"presentation","data-layer-title":v,"data-layer-id":y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},c?[this.renderMainContainer(),this.renderPointer()]:null)}},{key:"renderLoadingIcon",value:function(){return(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(cr.icon,cr.iconLoading,cr.rotating)})}},{key:"renderNavigationLoading",value:function(){var e=this.messagesCommon;return this.viewModel.pendingPromisesCount?(0,ze.u)("div",{key:Dr("loading-container"),role:"presentation",class:cr.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}},{key:"renderPreviousButton",value:function(){var e=this.messages;return(0,ze.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(cr.button,cr.paginationPrevious),"aria-label":e.previous,title:e.previous},(0,ze.u)("calcite-icon",{icon:"chevron-left",scale:"s",class:cr.paginationIcon}))}},{key:"renderNextButton",value:function(){var e=this.messages;return(0,ze.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(cr.button,cr.paginationNext),"aria-label":e.next,title:e.next},(0,ze.u)("calcite-icon",{icon:"chevron-right",scale:"s",class:cr.paginationIcon}))}},{key:"renderFeatureMenuButton",value:function(){var e=this.featureMenuOpen,t=this.featureMenuId,i=this.messagesCommon,n=this.viewModel,r=n.featureCount,a=n.selectedFeatureIndex;return(0,ze.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:cr.featureMenuButton,"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":i.menu,title:i.menu},(0,ze.u)("calcite-icon",{icon:"list-bullet",scale:"s",class:cr.featureMenuButtonIcon}),this._getPageText(r,a))}},{key:"renderNavigationButtons",value:function(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNextButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton()]:[]}},{key:"renderDockIcon",value:function(){var e,t=this.dockEnabled,i=this._wouldDockTo(),n=(e={},(0,a.Z)(e,cr.iconUndock,t),(0,a.Z)(e,cr.iconDock,!t),(0,a.Z)(e,cr.iconDockToRight,!t&&("top-right"===i||"bottom-right"===i)),(0,a.Z)(e,cr.iconDockToLeft,!t&&("top-left"===i||"bottom-left"===i)),(0,a.Z)(e,cr.iconDockToTop,!t&&"top-center"===i),(0,a.Z)(e,cr.iconDockToBottom,!t&&"bottom-center"===i),e);return(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(n,cr.icon)})}},{key:"renderDockButton",value:function(){var e,t,i=this.dockEnabled,n=this.messages,r=null===(e=this.viewModel)||void 0===e||null===(e=e.view)||void 0===e?void 0:e.widthBreakpoint,a=i?n.undock:n.dock;return"xsmall"!==r&&null!==(t=this.dockOptions)&&void 0!==t&&t.buttonEnabled?(0,ze.u)("div",{role:"button","aria-label":a,title:a,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(cr.button,cr.buttonDock)},this.renderDockIcon()):null}},{key:"renderTitle",value:function(){var e=this.viewModel.title,t=this.titleId,i=this.collapsible,n=this.contentCollapsed,r=this.messagesCommon,o=(0,a.Z)({},cr.headerContainerButton,i),s=(0,ze.u)($e.X6,{level:this.headingLevel,class:cr.headerTitle,innerHTML:null!==e&&void 0!==e?e:""}),l=i?(0,ze.u)("button",{key:"".concat(e,"--collapsible"),id:t,title:n?r.expand:r.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(cr.headerContainer,o),"aria-expanded":n?"false":"true",onclick:this._toggleCollapsed,type:"button"},s,(0,ze.u)("calcite-icon",{class:cr.collapseIcon,key:"collapse-icon",icon:n?"chevron-down":"chevron-up",scale:"m"})):(0,ze.u)("div",{key:null!==e&&void 0!==e?e:"title",id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(cr.headerContainer,o)},s);return e?l:null}},{key:"renderCloseIcon",value:function(){return(0,ze.u)("span",{"aria-hidden":"true",class:this.classes(cr.icon,cr.iconClose)})}},{key:"renderCloseButton",value:function(){var e=this.visibleElements,t=this.messagesCommon;return e.closeButton?(0,ze.u)("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:cr.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}},{key:"renderHeader",value:function(){return(0,ze.u)("header",{class:cr.header},this.renderTitle(),(0,ze.u)("div",{class:cr.headerButtons},this.renderDockButton(),this.renderCloseButton()))}},{key:"renderContentContainer",value:function(){var e=this,t=this.contentId,i=this.hasContent,n=this.contentCollapsed,r=this._flowItems,o=this.viewModel.content,s=r.toArray(),l=(0,a.Z)({},cr.contentHasFlows,!!s.length);return i&&!n?(0,ze.u)("div",{key:null!==o&&void 0!==o?o:"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:t,class:this.classes(cr.content,l)},(0,ze.u)("calcite-flow",{bind:this},(0,ze.u)("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Re.Yo,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),s.map((function(t){return e.renderFlowItem(t)}))),s.map((function(t){return e.renderFlowItemTooltips(t)}))):null}},{key:"renderFlowItem",value:function(e){var t,i,n,r=this,o=this.messages,s=(0,yi.$o)(),l="graphic"in e&&!e.isTable;return(0,ze.u)("calcite-flow-item",{bind:this,class:this.classes((t={},(0,a.Z)(t,cr.calciteThemeDark,!s),(0,a.Z)(t,cr.calciteThemeLight,s),t)),heading:null!==(i=e.title)&&void 0!==i?i:"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:"flow-item-".concat(e.viewModel.uid)},(0,ze.u)("calcite-action",{class:cr.actionExit,icon:"move-up",label:null===o||void 0===o?void 0:o.exitRelatedRecords,text:null===o||void 0===o?void 0:o.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:function(t){return r._storeExitRelatedRecordsAction(e,t)},onclick:this._destroyFlowItemWidgets}),l?(0,ze.u)("calcite-action",{class:cr.actionSelectFeature,icon:"zoom-to-object",label:null===o||void 0===o?void 0:o.selectFeature,text:null===o||void 0===o?void 0:o.selectFeature,slot:"header-actions-end",bind:this,afterCreate:function(t){return r._storeFeatureSelectionAction(e,t)},onclick:function(){return r._handleOpenRelatedFeature(e)}}):null,(0,ze.u)("div",{class:this.classes(cr.contentFlowItem,(n={},(0,a.Z)(n,cr.calciteThemeDark,s),(0,a.Z)(n,cr.calciteThemeLight,!s),n))},e.render()))}},{key:"renderFlowItemTooltips",value:function(e){var t,i,n=this.messages,r=this._exitRelatedRecordsActions,o=this._featureSelectionActions,s=(0,yi.$o)(),l=o.get(e);return[(0,ze.u)("calcite-tooltip",{class:this.classes((t={},(0,a.Z)(t,cr.calciteThemeDark,!s),(0,a.Z)(t,cr.calciteThemeLight,s),t)),key:"exit-related-records-tooltip-".concat(e.viewModel.uid),label:null===n||void 0===n?void 0:n.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:r.get(e),placement:"top"},null===n||void 0===n?void 0:n.exitRelatedRecords),l?(0,ze.u)("calcite-tooltip",{class:this.classes((i={},(0,a.Z)(i,cr.calciteThemeDark,!s),(0,a.Z)(i,cr.calciteThemeLight,s),i)),key:"select-related-record-tooltip-".concat(e.viewModel.uid),label:null===n||void 0===n?void 0:n.selectFeature,overlayPositioning:"fixed",referenceElement:l,placement:"top"},null===n||void 0===n?void 0:n.selectFeature):null]}},{key:"renderActionsMenuButton",value:function(){var e=this.actionsMenuId,t=this.actionsMenuButtonId,i=this.actionsMenuOpen,n=this.dividedActions,r=this.messagesCommon,a=i?r.close:r.open;return n.menuActions.length?(0,ze.u)("div",{key:Dr("actions-menu-button"),class:this.classes(cr.button,cr.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":i?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":a,title:a},(0,ze.u)("span",{"aria-hidden":"true",class:cr.iconActionsMenu})):null}},{key:"renderMenuActions",value:function(){var e=this,t=this.actionsMenuId,i=this.actionsMenuButtonId,n=this.actionsMenuOpen,r=this.dividedActions.menuActions;return r.length&&n?(0,ze.u)("ul",{id:t,role:"menu","aria-labelledby":i,key:Dr("actions"),class:cr.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},r.toArray().map((function(t){return e.renderAction({action:t,type:"menu-item"})}))):null}},{key:"renderInlineActions",value:function(){var e=this,t=this.dividedActions.inlineActions;return t.length?t.toArray().map((function(t){return e.renderAction({action:t,type:"inline"})})):[]}},{key:"renderInlineActionsContainer",value:function(){var e=this.dividedActions,t=e.inlineActions,i=e.menuActions,n=!!t.length,r=!!i.length;return n||r?(0,ze.u)("div",{key:"inline-actions-container","data-inline-actions":n.toString(),"data-menu-actions":r.toString(),class:cr.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}},{key:"renderNavigation",value:function(){return this.featureNavigationVisible?(0,ze.u)("section",{key:Dr("navigation"),class:this.classes(cr.navigation)},this.renderNavigationButtons()):null}},{key:"renderFooter",value:function(){var e,t=this.featureNavigationVisible,i=this.dividedActions,n=i.inlineActions,r=i.menuActions,o=!!n.length,s=!!r.length,l=(e={},(0,a.Z)(e,cr.footerHasPagination,t),(0,a.Z)(e,cr.footerHasActions,o),(0,a.Z)(e,cr.footerHasActionsMenu,s),e);return t||o?(0,ze.u)("div",{key:Dr("feature-buttons"),class:this.classes(cr.footer,l)},this.renderInlineActionsContainer(),this.renderNavigation()):null}},{key:"renderFeatureMenuContainer",value:function(){var e=this.messages,t=this.viewModel,i=t.featureViewModels,n=t.isLoadingFeature,r=(0,gi.n)(e.selectedFeatures,{total:i.length});return(0,ze.u)("section",{key:Dr("menu"),class:cr.featureMenu},(0,ze.u)("strong",{class:cr.featureMenuHeader},r),(0,ze.u)("nav",{bind:this,class:cr.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Re.Yo},this.renderFeatureMenu(),(0,ze.u)("div",{class:cr.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),n?(0,ze.u)("div",{class:cr.featureMenuLoader},this.renderLoadingIcon()):null))}},{key:"renderPointer",value:function(){return this.dockEnabled?null:(0,ze.u)("div",{key:Dr("pointer"),class:cr.pointer,role:"presentation"},(0,ze.u)("div",{class:this.classes(cr.pointerDirection,cr.shadow)}))}},{key:"renderMainContainer",value:function(){var e,t=this.dockEnabled,i=this.currentAlignment,n=this.currentDockPosition,r=this.titleId,o=this.contentId,s=this.collapsible,l=this.hasContent,u=this.contentCollapsed,c=this.visibleElements,h=this.viewModel.title,d="bottom-left"===i||"bottom-center"===i||"bottom-right"===i||"top-left"===n||"top-center"===n||"top-right"===n,f="top-left"===i||"top-center"===i||"top-right"===i||"bottom-left"===n||"bottom-center"===n||"bottom-right"===n,p=(e={},(0,a.Z)(e,cr.shadow,t),(0,a.Z)(e,cr.isCollapsible,s),(0,a.Z)(e,cr.isCollapsed,u),e);return(0,ze.u)("div",{class:this.classes(cr.main,cr.widget,p),tabIndex:c.closeButton?void 0:-1,role:"dialog","aria-live":"polite","aria-labelledby":h?r:"","aria-describedby":l&&!u?o:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}},{key:"renderContent",value:function(){var e,t=null===(e=this.viewModel)||void 0===e?void 0:e.content;return t?"string"==typeof t?(0,ze.u)("div",{class:_n.contentNode,key:t,innerHTML:t}):this.renderNodeContent(t):null}},{key:"renderActionText",value:function(e){return(0,ze.u)("span",{key:"text",class:cr.actionText},e)}},{key:"renderActionCalciteIcon",value:function(e,t){return(0,ze.u)("calcite-icon",{scale:"s",key:"calcite-icon-".concat(t),icon:e,class:cr.icon})}},{key:"renderActionIcon",value:function(e){var t,i=this._getActionClass(e),n=this._getActionImage(e),r=(t={},(0,a.Z)(t,cr.iconLoading,e.active),(0,a.Z)(t,cr.rotating,e.active),(0,a.Z)(t,cr.icon,!!i),(0,a.Z)(t,cr.actionImage,!e.active&&!!n),t);return i&&(r[i]=!e.active),(0,ze.u)("span",{key:"icon","aria-hidden":"true",class:this.classes(cr.icon,r),styles:this._getIconStyles(n)})}},{key:"renderAction",value:function(e){var t,i=e.action,n=e.type,r=this._getActionTitle(i),o=(t={},(0,a.Z)(t,cr.action,"toggle"!==i.type),(0,a.Z)(t,cr.actionToggle,"toggle"===i.type),(0,a.Z)(t,cr.actionToggleOn,"toggle"===i.type&&i.value),(0,a.Z)(t,cr.buttonDisabled,i.disabled),t),s=[i.icon&&!i.active?this.renderActionCalciteIcon(i.icon,i.uid):this.renderActionIcon(i),this.renderActionText(r)],l="menu-item"===n?(0,ze.u)("li",{key:i.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(cr.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):(0,ze.u)("div",{key:i.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(cr.button,o),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return i.visible?l:null}},{key:"renderFeatureMenuItem",value:function(e,t){var i=this.messages,n=this.messagesCommon,r=this.viewModel,o=r.selectedFeatureIndex,s=e===r.selectedFeatureViewModel,l=(0,a.Z)({},cr.featureMenuSelected,s),u=s?(0,ze.u)("span",{key:Dr("feature-menu-selected-feature-".concat(o)),title:i.selectedFeature,"aria-label":i.selectedFeature,class:cr.iconCheckMark}):null,c=(0,ze.u)("span",{innerHTML:e.title||n.untitled});return(0,ze.u)("li",{role:"menuitem",tabIndex:-1,key:Dr("feature-menu-feature-".concat(o)),class:this.classes(l,cr.featureMenuItem),bind:this,"data-feature-index":t,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},(0,ze.u)("span",{class:cr.featureMenuTitle},c,u))}},{key:"renderFeatureMenu",value:function(){var e=this,t=this.featureMenuId,i=this.viewModel.featureViewModels;return i.length>1?(0,ze.u)("ol",{class:cr.featureMenuList,id:t,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},i.filter((function(e){return!!e.graphic})).map((function(t,i){return e.renderFeatureMenuItem(t,i)}))):null}},{key:"_storeFeatureSelectionAction",value:function(e,t){this._featureSelectionActions.set(e,t),this.scheduleRender()}},{key:"_storeExitRelatedRecordsAction",value:function(e,t){this._exitRelatedRecordsActions.set(e,t),this.scheduleRender()}},{key:"_getFlowItemDescription",value:function(e){var t;return"featureCountDescription"in e?e.featureCountDescription:null!==(t=e.viewModel.description)&&void 0!==t?t:""}},{key:"_openRelatedFeature",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.viewModel.updateGeometry();case 2:if(i=t.graphic,null!=(r=null===i||void 0===i?void 0:i.geometry)&&null!=i){e.next=5;break}return e.abrupt("return");case 5:return this._destroyFlowItemWidgets(),e.next=8,this.viewModel.zoomTo({target:r});case 8:a=or(r),this.open({features:[i],location:null!=a?a:void 0});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_destroyFlowItemWidgets",value:function(){this._flowItems.removeAll().forEach((function(e){"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()}))}},{key:"_handleBackClick",value:function(){var e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}},{key:"_getActionTitle",value:function(e){var t,i=this.messages,n=this.selectedFeature,r=this.messagesCommon,a=e.id,o=null===n||void 0===n?void 0:n.attributes,s=null!==(t=e.title)&&void 0!==t?t:"",l="zoom-to-feature"===a?(0,gi.n)(s,{messages:i}):"remove-selected-feature"===a?(0,gi.n)(s,{messages:r}):"zoom-to-clustered-features"===a||"browse-clustered-features"===a?(0,gi.n)(s,{messages:i}):e.title;return l&&o?(0,gi.n)(l,o):null!==l&&void 0!==l?l:""}},{key:"_getActionClass",value:function(e){var t=this.selectedFeature,i=null===t||void 0===t?void 0:t.attributes,n=e.className,r=e.image||n?n:cr.iconDefaultAction;return r&&i?(0,gi.n)(r,i):null!==r&&void 0!==r?r:""}},{key:"_getActionImage",value:function(e){if(e.active)return"";var t=this.selectedFeature,i=null===t||void 0===t?void 0:t.attributes,n=e.image;return n&&i?(0,gi.n)(n,i):null!==n&&void 0!==n?n:""}},{key:"_createFeatureUpdatedAnimation",value:function(){return(0,Re.vU)("enter",cr.hasFeatureUpdated)}},{key:"_getInlineActionCount",value:function(){var e=this.maxInlineActions,t=this.featureNavigationVisible;if("number"!=typeof e)return null;var i=Math.round(e);return Math.max(t?i-1:i,0)}},{key:"_watchActions",value:function(){var e=this,t=this.viewModel.allActions;this.notifyChange("dividedActions");var i="actions";this._handles.remove(i),t&&t.forEach((function(t){e._handles.add((0,m.YP)((function(){return[t.uid,t.active,t.className,t.disabled,t.id,t.title,t.image,t.visible]}),(function(){return e.scheduleRender()})),i)}))}},{key:"_divideActions",value:function(){var e=this.viewModel.allActions.filter((function(e){return e.visible})),t=this._getInlineActionCount(),i=null===t,n=0===t;return{inlineActions:i?e.slice(0):n?new f.Z:e.slice(0,t),menuActions:i?new f.Z:n?e.slice(0):e.slice(t)}}},{key:"_featureMenuOpenChanged",value:function(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}},{key:"_actionsMenuOpenChanged",value:function(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}},{key:"_setTitleFromFeatureWidget",value:function(){var e,t,i=this.selectedFeatureWidget,n=this.messagesCommon;i&&(this.viewModel.title="error"===(null===(e=i.viewModel)||void 0===e?void 0:e.state)?n.errorMessage:(null===(t=i.viewModel)||void 0===t?void 0:t.title)||"")}},{key:"_setContentFromFeatureWidget",value:function(){var e=this.selectedFeatureWidget;e&&(this.viewModel.content=e)}},{key:"_unobserveFeatureMenuObserver",value:function(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}},{key:"_featureMenuIntersectionObserverCreated",value:function(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}},{key:"_handleFeatureMenuKeyup",value:function(e){"Escape"===(0,v.kK)(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}},{key:"_handleActionMenuKeyup",value:function(e){"Escape"===(0,v.kK)(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}},{key:"_setActiveFeature",value:function(e){var t=this.viewModel,i=Sr(e.currentTarget);t.activeFeature=t.features[i]||null}},{key:"_removeActiveFeature",value:function(){this.viewModel.activeFeature=null}},{key:"_handleFeatureMenuItemKeyup",value:function(e){var t=(0,v.kK)(e),i=this._featureMenuNode,n=Sr(e.currentTarget);if(i){var r=i.querySelectorAll("li"),a=r.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),r[r.length-1].focus()):(e.stopPropagation(),r[0].focus()):(e.stopPropagation(),r[(n+1+a)%a].focus()):(e.stopPropagation(),r[(n-1+a)%a].focus())}}},{key:"_handleActionMenuItemKeyup",value:function(e){var t=(0,v.kK)(e),i=this._actionsMenuNode,n=e.currentTarget.dataset.actionUid,r=this.dividedActions.menuActions.findIndex((function(e){return e.uid===n}));if(i){var a=i.querySelectorAll("li"),o=a.length;"ArrowUp"!==t?"ArrowDown"!==t?"Home"!==t?"End"!==t||(e.stopPropagation(),a[a.length-1].focus()):(e.stopPropagation(),a[0].focus()):(e.stopPropagation(),a[(r+1+o)%o].focus()):(e.stopPropagation(),a[(r-1+o)%o].focus())}}},{key:"_handleMainKeyup",value:function(e){var t=(0,v.kK)(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())}},{key:"_spinnerEnabledChange",value:function(e){if(this._destroySpinner(),e){var t=this.get("viewModel.view");this._createSpinner(t)}}},{key:"_hideSpinner",value:function(){var e=this._spinner;e&&(e.location=null,e.hide())}},{key:"_displaySpinner",value:function(){var e=this._spinner;if(e){var t=this.viewModel,i=t.location;t.waitingForResult&&i?e.show({location:i}):e.hide()}}},{key:"_getIconStyles",value:function(e){return{"background-image":e?"url(".concat(e,")"):""}}},{key:"_shouldFocus",value:function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var i=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=null===t||void 0===t?void 0:t.shouldFocus,!e.t0){e.next=5;break}return e.next=4,(0,m.N1)((function(){var e;return!0===(null===(e=i.viewModel)||void 0===e?void 0:e.active)}));case 4:this.focus();case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addSelectedFeatureIndexHandle",value:function(){var e=this,t=(0,m.YP)((function(){var t;return null===(t=e.viewModel)||void 0===t?void 0:t.selectedFeatureIndex}),(function(t,i){return e._selectedFeatureIndexUpdated(t,i)}));this._handles.add(t,Ar)}},{key:"_selectedFeatureIndexUpdated",value:function(e,t){this.featureCount&&e!==t&&-1!==e&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}},{key:"_destroySelectedFeatureWidget",value:function(){var e=this._feature;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}},{key:"_isScreenLocationWithinView",value:function(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}},{key:"_isOutsideView",value:function(e){var t=e.popupHeight,i=e.popupWidth,n=e.screenLocation,r=e.side,a=e.view;if(isNaN(i)||isNaN(t)||!a||!n)return!1;var o=a.padding;return"right"===r&&n.x+i/2>a.width-o.right||"left"===r&&n.x-i/2<o.left||"top"===r&&n.y-t<o.top||"bottom"===r&&n.y+t>a.height-o.bottom}},{key:"_calculateAutoAlignment",value:function(e){if("auto"!==e)return e;var t=this._pointerOffsetInPx,i=this._containerNode,n=this._mainContainerNode,r=this.viewModel,a=r.screenLocation,o=r.view;if(null==a||!o||!i)return"top-center";if(!this._isScreenLocationWithinView(a,o))return this._get("currentAlignment")||"top-center";function s(e){return parseInt(e.replaceAll(/[^-\d\.]/g,""),10)}var l=n?window.getComputedStyle(n,null):null,u=l?s(l.getPropertyValue("max-height")):0,c=l?s(l.getPropertyValue("height")):0,h=i.getBoundingClientRect(),d=h.height,f=h.width+t,p=Math.max(d,u,c)+t,v=this._isOutsideView({popupHeight:p,popupWidth:f,screenLocation:a,side:"right",view:o}),y=this._isOutsideView({popupHeight:p,popupWidth:f,screenLocation:a,side:"left",view:o}),g=this._isOutsideView({popupHeight:p,popupWidth:f,screenLocation:a,side:"top",view:o}),m=this._isOutsideView({popupHeight:p,popupWidth:f,screenLocation:a,side:"bottom",view:o});return y?g?"bottom-right":"top-right":v?g?"bottom-left":"top-left":g?m?"top-center":"bottom-center":"top-center"}},{key:"_callCurrentAlignment",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getCurrentAlignment",value:function(){var e=this.alignment;return this.dockEnabled||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}},{key:"_setCurrentAlignment",value:function(){this._set("currentAlignment",this._getCurrentAlignment())}},{key:"_setCurrentDockPosition",value:function(){this._set("currentDockPosition",this._getCurrentDockPosition())}},{key:"_calculatePositionResult",value:function(e){var t=["left","right"];return(0,Re.dZ)(this.container)&&t.reverse(),null===e||void 0===e?void 0:e.replace(/leading/gi,t[0]).replaceAll(/trailing/gi,t[1])}},{key:"_callDockPosition",value:function(e){return"function"==typeof e?e.call(this):e}},{key:"_getDockPosition",value:function(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition(null===(e=this.dockOptions)||void 0===e?void 0:e.position)))}},{key:"_getCurrentDockPosition",value:function(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}},{key:"_wouldDockTo",value:function(){return this.dockEnabled?null:this._getDockPosition()}},{key:"_calculateAutoDockPosition",value:function(e){var t;if("auto"!==e)return e;var i=null===(t=this.viewModel)||void 0===t?void 0:t.view,n=(0,Re.dZ)(this.container)?"top-left":"top-right";if(!i)return n;var r=i.padding||{left:0,right:0,top:0,bottom:0},a=i.width-r.left-r.right,o=i.breakpoints;return o&&a<=o.xsmall?"bottom-center":n}},{key:"_positionContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._containerNode;if(e&&(this._containerNode=e),this._containerNode){var t=this.viewModel.screenLocation,i=this._containerNode.getBoundingClientRect().width,n=this._calculatePositionStyle(t,i);n&&Object.assign(this._containerNode.style,n)}}},{key:"_calculateFullWidth",value:function(e){var t=this.currentAlignment,i=this._pointerOffsetInPx;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+i:e}},{key:"_calculateAlignmentPosition",value:function(e,t,i,n){var r=this.currentAlignment,a=this._pointerOffsetInPx;if(i){var o=i.padding,s=n/2,l=i.height-t,u=i.width-e;return"bottom-center"===r?{top:t+a-o.top,left:e-s-o.left}:"top-left"===r?{bottom:l+a-o.bottom,right:u+a-o.right}:"bottom-left"===r?{top:t+a-o.top,right:u+a-o.right}:"top-right"===r?{bottom:l+a-o.bottom,left:e+a-o.left}:"bottom-right"===r?{top:t+a-o.top,left:e+a-o.left}:"top-center"===r?{bottom:l+a-o.bottom,left:e-s-o.left}:void 0}}},{key:"_calculatePositionStyle",value:function(e,t){var i=this.dockEnabled,n=this.view;if(n){if(i)return{left:"",top:"",right:"",bottom:""};if(null!=e&&t){var r=this._calculateFullWidth(t),a=this._calculateAlignmentPosition(e.x,e.y,n,r);return a?{top:void 0!==a.top?"".concat(a.top,"px"):"auto",left:void 0!==a.left?"".concat(a.left,"px"):"auto",bottom:void 0!==a.bottom?"".concat(a.bottom,"px"):"auto",right:void 0!==a.right?"".concat(a.right,"px"):"auto"}:void 0}}}},{key:"_viewChange",value:function(e,t){e&&t&&(this.close(),this.clear())}},{key:"_viewReadyChange",value:function(e,t){if(e){var i=this.get("viewModel.view");this._wireUpView(i)}else t&&(this.close(),this.clear())}},{key:"_wireUpView",value:function(e){(this._destroySpinner(),e)&&(this.spinnerEnabled&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions))}},{key:"_dockingThresholdCrossed",value:function(e,t,i){var n=(0,s.Z)(e,2),r=n[0],a=n[1],o=(0,s.Z)(t,2),l=o[0],u=o[1],c=null!==i&&void 0!==i?i:{},h=c.width,d=void 0===h?0:h,f=c.height,p=void 0===f?0:f;return r<=d&&l>d||r>d&&l<=d||a<=p&&u>p||a>p&&u<=p}},{key:"_updateDockEnabledForViewSize",value:function(e,t){if(e&&t){var i=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=i.left+i.right,r=i.top+i.bottom,a=[],o=[];a[0]=e[0]-n,a[1]=e[1]-r,o[0]=t[0]-n,o[1]=t[1]-r;var s=this.dockOptions,l=s.breakpoint;this._dockingThresholdCrossed(a,o,l)&&this._setDockEnabledForViewSize(s),this._setCurrentDockPosition()}}},{key:"_focusDockButtonNode",value:function(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}},{key:"_closeButtonNodeUpdated",value:function(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}},{key:"_mainContainerNodeUpdated",value:function(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}},{key:"_featureMenuNodeUpdated",value:function(e){if(this._featureMenuNode=e,e&&this._focusFirstFeature){this._focusFirstFeature=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_actionsMenuNodeUpdated",value:function(e){if(this._actionsMenuNode=e,e&&this._focusFirstAction){this._focusFirstAction=!1;var t=e.querySelectorAll("li");t.length&&t[0].focus()}}},{key:"_focusFeatureMenuButtonNode",value:function(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}},{key:"_focusActionsMenuButtonNode",value:function(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}},{key:"_featureMenuViewportScrollTop",value:function(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}},{key:"_toggleScreenLocationEnabled",value:function(){var e=this.dockEnabled,t=this.viewModel;if(t){var i=t.active&&!e;t.screenLocationEnabled=i}}},{key:"_shouldDockAtCurrentViewSize",value:function(e){var t,i,n,r=e.breakpoint,a=null===(t=this.viewModel)||void 0===t||null===(t=t.view)||void 0===t?void 0:t.ui;if(!a)return!1;var o=a.width,s=a.height;if(isNaN(o)||isNaN(s))return!1;if(!r)return!1;var l=r.hasOwnProperty("width")&&o<=(null!==(i=r.width)&&void 0!==i?i:0),u=r.hasOwnProperty("height")&&s<=(null!==(n=r.height)&&void 0!==n?n:0);return l||u}},{key:"_setDockEnabledForViewSize",value:function(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}},{key:"_getPageText",value:function(e,t){return this.featureNavigationVisible?(0,gi.n)(this.messages.pageText,{index:t+1,total:e}):null}},{key:"_destroySpinner",value:function(){var e;this._spinner&&(null!==(e=this.view)&&void 0!==e&&null!==(e=e.ui)&&void 0!==e&&e.remove(this._spinner,Tr),this._spinner.destroy(),this._spinner=null)}},{key:"_createSpinner",value:function(e){e&&(this._spinner=new Ln({view:e}),e.ui.add(this._spinner,{key:Tr,position:"manual",internal:!0}))}},{key:"_toggleCollapsed",value:function(){this.collapsed=!this.collapsed}},{key:"_close",value:function(){this.close(),this.view&&this.view.focus()}},{key:"_toggleDockEnabled",value:function(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}},{key:"_toggleFeatureMenu",value:function(){var e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}},{key:"_toggleActionsMenu",value:function(){var e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}},{key:"_triggerAction",value:function(e){var t=e.currentTarget.dataset.actionUid,i=this.viewModel.allActions,n=i.findIndex((function(e){return e.uid===t})),r=i.at(n);r&&"toggle"===r.type&&(r.value=!r.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(n)}},{key:"_selectFeature",value:function(e){var t=Sr(e.currentTarget);null==t||isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}},{key:"_next",value:function(){this.next()}},{key:"_previous",value:function(){this.previous()}}]),d}(wn(M.Z));function Sr(e){return null===e||void 0===e?void 0:e["data-feature-index"]}(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"actionsMenuId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"actionsMenuButtonId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"featureMenuId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"titleId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"contentId",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"hasContent",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"featureNavigationVisible",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"collapsible",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"featureMenuVisible",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"contentCollapsed",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"dividedActions",null),(0,d._)([(0,_.Cb)({readOnly:!0,dependsOn:["_flowItems.length"]})],Er.prototype,"_activeFlowItemWidget",null),(0,d._)([(0,_.Cb)()],Er.prototype,"actions",null),(0,d._)([(0,_.Cb)()],Er.prototype,"actionsMenuOpen",null),(0,d._)([(0,_.Cb)()],Er.prototype,"alignment",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"autoCloseEnabled",null),(0,d._)([(0,_.Cb)()],Er.prototype,"autoOpenEnabled",null),(0,d._)([(0,_.Cb)()],Er.prototype,"defaultPopupTemplateEnabled",null),(0,d._)([(0,_.Cb)()],Er.prototype,"content",null),(0,d._)([(0,_.Cb)()],Er.prototype,"collapsed",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"collapseEnabled",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"currentAlignment",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"currentDockPosition",null),(0,d._)([(0,_.Cb)()],Er.prototype,"dockOptions",null),(0,d._)([(0,_.Cb)()],Er.prototype,"dockEnabled",void 0),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"featureCount",null),(0,d._)([(0,_.Cb)()],Er.prototype,"featureMenuOpen",null),(0,d._)([(0,_.Cb)()],Er.prototype,"features",null),(0,d._)([(0,_.Cb)()],Er.prototype,"goToOverride",null),(0,d._)([(0,_.Cb)()],Er.prototype,"headingLevel",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"highlightEnabled",null),(0,d._)([(0,_.Cb)()],Er.prototype,"location",null),(0,d._)([(0,_.Cb)()],Er.prototype,"label",null),(0,d._)([(0,_.Cb)()],Er.prototype,"maxInlineActions",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/widgets/Popup/t9n/Popup")],Er.prototype,"messages",void 0),(0,d._)([(0,_.Cb)(),(0,Ne.H)("esri/t9n/common")],Er.prototype,"messagesCommon",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"promises",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"selectedFeature",null),(0,d._)([(0,_.Cb)()],Er.prototype,"selectedFeatureIndex",null),(0,d._)([(0,_.Cb)({readOnly:!0})],Er.prototype,"selectedFeatureWidget",null),(0,d._)([(0,_.Cb)()],Er.prototype,"spinnerEnabled",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"title",null),(0,d._)([(0,_.Cb)()],Er.prototype,"updateLocationEnabled",null),(0,d._)([(0,_.Cb)()],Er.prototype,"view",null),(0,d._)([(0,_.Cb)({type:Cr}),(0,Pr.s)(["triggerAction","trigger-action"])],Er.prototype,"viewModel",void 0),(0,d._)([(0,_.Cb)()],Er.prototype,"visible",null),(0,d._)([(0,_.Cb)()],Er.prototype,"visibleElements",void 0),(0,d._)([(0,w.p)("visibleElements")],Er.prototype,"castVisibleElements",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_close",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_toggleDockEnabled",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_toggleFeatureMenu",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_toggleActionsMenu",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_triggerAction",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_selectFeature",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_next",null),(0,d._)([(0,Zr.h)()],Er.prototype,"_previous",null);var Lr=Er=(0,d._)([(0,x.j)("esri.widgets.Popup")],Er)},86798:function(e,t,i){i.r(t),i.d(t,{createRoot:function(){return Oe},esriChartColorSet:function(){return Fe}});var n=i(74165),r=i(15861),a=i(37762),o=i(82963),s=i(97326),l=i(11752),u=i(61120),c=i(60136),h=i(29388),d=i(15671),f=i(43144),p=(i(59166),i(24390)),v=i(32390),y=i(98266),g=i(36257),m=function(){function e(){var t=this;(0,d.Z)(this,e),Object.defineProperty(this,"_observer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this._observer=new ResizeObserver((function(e){(0,p.e)(e,(function(e){(0,p.e)(t._targets,(function(t){t.target===e.target&&t.callback()}))}))}))}return(0,f.Z)(e,[{key:"addTarget",value:function(e,t){this._observer.observe(e,{box:"border-box"}),this._targets.push({target:e,callback:t})}},{key:"removeTarget",value:function(e){this._observer.unobserve(e),(0,p.k)(this._targets,(function(t){return t.target!==e}))}}]),e}(),b=function(){function e(){(0,d.Z)(this,e),Object.defineProperty(this,"_timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_targets",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return(0,f.Z)(e,[{key:"addTarget",value:function(t,i){var n=this;if(null===this._timer){var r=null;this._timer=requestAnimationFrame((function t(){var i=Date.now();(null===r||i>r+e.delay)&&(r=i,(0,p.e)(n._targets,(function(e){var t=e.target.getBoundingClientRect();t.width===e.size.width&&t.height===e.size.height||(e.size=t,e.callback())}))),0===n._targets.length?n._timer=null:n._timer=requestAnimationFrame(t)}))}this._targets.push({target:t,callback:i,size:{width:0,height:0,left:0,right:0,top:0,bottom:0,x:0,y:0}})}},{key:"removeTarget",value:function(e){(0,p.k)(this._targets,(function(t){return t.target!==e})),0===this._targets.length&&null!==this._timer&&(cancelAnimationFrame(this._timer),this._timer=null)}}]),e}();Object.defineProperty(b,"delay",{enumerable:!0,configurable:!0,writable:!0,value:200});var _=null;var w=function(){function e(t,i){(0,d.Z)(this,e),Object.defineProperty(this,"_sensor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_listener",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_disposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this._sensor=(null===_&&(_="undefined"!=typeof ResizeObserver?new m:new b),_),this._element=t,this._listener=(0,p.o)(i),this._sensor.addTarget(t,i)}return(0,f.Z)(e,[{key:"isDisposed",value:function(){return this._disposed}},{key:"dispose",value:function(){this._disposed||(this._disposed=!0,this._sensor.removeTarget(this._element),this._listener.dispose())}},{key:"sensor",get:function(){return this._sensor}}]),e}(),k=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i)}(p.E);Object.defineProperty(k,"className",{enumerable:!0,configurable:!0,writable:!0,value:"InterfaceColors"}),Object.defineProperty(k,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:p.E.classNames.concat([k.className])});var x=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"_setDefaults",value:function(){this._setDefault("negativeBase",0),this._setDefault("numberFormat","#,###.#####"),this._setDefault("smallNumberThreshold",1);var e="_big_number_suffix_",t="_small_number_suffix_",n="_byte_suffix_";this._setDefault("bigNumberPrefixes",[{number:1e3,suffix:this._t(e+"3")},{number:1e6,suffix:this._t(e+"6")},{number:1e9,suffix:this._t(e+"9")},{number:1e12,suffix:this._t(e+"12")},{number:1e15,suffix:this._t(e+"15")},{number:1e18,suffix:this._t(e+"18")},{number:1e21,suffix:this._t(e+"21")},{number:1e24,suffix:this._t(e+"24")}]),this._setDefault("smallNumberPrefixes",[{number:1e-24,suffix:this._t(t+"24")},{number:1e-21,suffix:this._t(t+"21")},{number:1e-18,suffix:this._t(t+"18")},{number:1e-15,suffix:this._t(t+"15")},{number:1e-12,suffix:this._t(t+"12")},{number:1e-9,suffix:this._t(t+"9")},{number:1e-6,suffix:this._t(t+"6")},{number:.001,suffix:this._t(t+"3")}]),this._setDefault("bytePrefixes",[{number:1,suffix:this._t(n+"B")},{number:1024,suffix:this._t(n+"KB")},{number:1048576,suffix:this._t(n+"MB")},{number:1073741824,suffix:this._t(n+"GB")},{number:1099511627776,suffix:this._t(n+"TB")},{number:0x4000000000000,suffix:this._t(n+"PB")}]),(0,l.Z)((0,u.Z)(i.prototype),"_setDefaults",this).call(this)}},{key:"_beforeChanged",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"_beforeChanged",this).call(this)}},{key:"format",value:function(e,t,i){var n;(null==t||(0,p.i)(t)&&"number"===t.toLowerCase())&&(t=this.get("numberFormat",""));var r=Number(e);if((0,p.a)(t))try{return this.get("intlLocales")?new Intl.NumberFormat(this.get("intlLocales"),t).format(r):new Intl.NumberFormat(void 0,t).format(r)}catch(s){return"Invalid"}else{t=(0,p.c)(t);var a,o=this.parseFormat(t,this._root.language);a=r>this.get("negativeBase")?o.positive:r<this.get("negativeBase")?o.negative:o.zero,null==i||a.mod||((a=(0,p.b)(a)).decimals.active=0==r?0:i),n=a.template.split(p.P).join(this.applyFormat(r,a))}return n}},{key:"parseFormat",value:function(e,t){var i=this,n=t.translateEmpty("_thousandSeparator"),r=t.translateEmpty("_decimalSeparator"),a={positive:{thousands:{active:-1,passive:-1,interval:-1,separator:n},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},negative:{thousands:{active:-1,passive:-1,interval:-1,separator:n},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1},zero:{thousands:{active:-1,passive:-1,interval:-1,separator:n},decimals:{active:-1,passive:-1,separator:r},template:"",source:"",parsed:!1}},o=(e=e.replace("||",p.d)).split("|");return a.positive.source=o[0],void 0===o[2]?a.zero=a.positive:a.zero.source=o[2],void 0===o[1]?a.negative=a.positive:a.negative.source=o[1],(0,p.f)(a,(function(e,t){if(!t.parsed){var n=t.source;"number"===n.toLowerCase()&&(n=i.get("numberFormat","#,###.#####"));for(var r=p.T.chunk(n,!0),a=0;a<r.length;a++){var o=r[a];if(o.text=o.text.replace(p.d,"|"),"value"===o.type){var s=o.text.match(/[#0.,]+[ ]?[abespABESP%!]?[abespABESP\u2030!]?/);if(s)if(null===s||""===s[0])t.template+=o.text;else{var l=s[0].match(/[abespABESP%\u2030!]{2}|[abespABESP%\u2030]{1}$/);l&&(t.mod=l[0].toLowerCase(),t.modSpacing=!!s[0].match(/[ ]{1}[abespABESP%\u2030!]{1}$/));var u=s[0].split(".");if(""===u[0]);else{t.thousands.active=(u[0].match(/0/g)||[]).length,t.thousands.passive=(u[0].match(/\#/g)||[]).length+t.thousands.active;var c=u[0].split(",");1===c.length||(t.thousands.interval=(c.pop()||"").length,0===t.thousands.interval&&(t.thousands.interval=-1))}void 0===u[1]||(t.decimals.active=(u[1].match(/0/g)||[]).length,t.decimals.passive=(u[1].match(/\#/g)||[]).length+t.decimals.active),t.template+=o.text.split(s[0]).join(p.P)}}else t.template+=o.text}t.parsed=!0}})),a}},{key:"applyFormat",value:function(e,t){var i=e<0;e=Math.abs(e);var n,r="",a="",o=t.mod?t.mod.split(""):[];if(-1!==o.indexOf("b")){var s=this.applyPrefix(e,this.get("bytePrefixes"),-1!==o.indexOf("!"));e=s[0],r=s[1],a=s[2],t.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("a")){var l=this.applyPrefix(e,e<this.get("smallNumberThreshold")?this.get("smallNumberPrefixes"):this.get("bigNumberPrefixes"),-1!==o.indexOf("!"));e=l[0],r=l[1],a=l[2],t.modSpacing&&(a=" "+a)}else if(-1!==o.indexOf("p")){var u=Math.min(e.toString().length+2,21);e=parseFloat(e.toPrecision(u)),r=this._root.language.translate("_percentPrefix"),a=this._root.language.translate("_percentSuffix"),""==r&&""==a&&(a="%")}else if(-1!==o.indexOf("%")){var c=Math.min(e.toString().length+2,21);e*=100,e=parseFloat(e.toPrecision(c)),a="%"}else if(-1!==o.indexOf("\u2030")){var h=Math.min(e.toString().length+3,21);e*=1e3,e=parseFloat(e.toPrecision(h)),a="\u2030"}if(-1!==o.indexOf("e"))n=t.decimals.passive>=0?e.toExponential(t.decimals.passive).split("e"):e.toExponential().split("e"),e=Number(n[0]),a="e"+n[1],t.modSpacing&&(a=" "+a);else if(0===t.decimals.passive)e=Math.round(e);else if(t.decimals.passive>0){var d=Math.pow(10,t.decimals.passive);e=Math.round(e*d)/d}var f="",v=(0,p.n)(e).split("."),y=v[0];if(y.length<t.thousands.active&&(y=Array(t.thousands.active-y.length+1).join("0")+y),t.thousands.interval>0){for(var g=[],m=y.split("").reverse().join(""),b=0,_=y.length;b<=_;b+=t.thousands.interval){var w=m.substr(b,t.thousands.interval).split("").reverse().join("");""!==w&&g.unshift(w)}y=g.join(t.thousands.separator)}f+=y,1===v.length&&v.push("");var k=v[1];return k.length<t.decimals.active&&(k+=Array(t.decimals.active-k.length+1).join("0")),""!==k&&(f+=t.decimals.separator+k),""===f&&(f="0"),0!==e&&i&&-1===o.indexOf("s")&&(f="-"+f),r&&(f=r+f),a&&(f+=a),f}},{key:"applyPrefix",value:function(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e,r="",a="",o=!1,s=1,l=0,u=t.length;l<u;l++)t[l].number<=e&&(0===t[l].number?n=0:(n=e/t[l].number,s=t[l].number),r=t[l].prefix,a=t[l].suffix,o=!0);return!o&&i&&t.length&&0!=e&&(n=e/t[0].number,r=t[0].prefix,a=t[0].suffix,o=!0),o&&(n=parseFloat(n.toPrecision(Math.min(s.toString().length+Math.floor(n).toString().replace(/[^0-9]*/g,"").length,21)))),[n,r,a]}},{key:"escape",value:function(e){return e.replace("||",p.d)}},{key:"unescape",value:function(e){return e.replace(p.d,"|")}}]),i}(p.E);function M(e,t){var i=0,n=0,r=1,a=0,o=0,s=0,l=0,u=0;return e.formatToParts(t).forEach((function(e){switch(e.type){case"year":i=+e.value;break;case"month":n=+e.value-1;break;case"day":r=+e.value;break;case"hour":a=+e.value;break;case"minute":o=+e.value;break;case"second":s=+e.value;break;case"fractionalSecond":l=+e.value;break;case"weekday":switch(e.value){case"Sun":u=0;break;case"Mon":u=1;break;case"Tue":u=2;break;case"Wed":u=3;break;case"Thu":u=4;break;case"Fri":u=5;break;case"Sat":u=6}}})),24===a&&(a=0),{year:i,month:n,day:r,hour:a,minute:o,second:s,millisecond:l,weekday:u}}function C(e,t){var i=M(e,t),n=i.year,r=i.month,a=i.day,o=i.hour,s=i.minute,l=i.second,u=i.millisecond;return Date.UTC(n,r,a,o,s,l,u)}var Z=function(){function e(t,i){if((0,d.Z)(this,e),Object.defineProperty(this,"_utc",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_dtf",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!i)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");this.name=t,this._utc=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3}),this._dtf=new Intl.DateTimeFormat("UTC",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",fractionalSecondDigits:3})}return(0,f.Z)(e,[{key:"convertLocal",value:function(e){var t=this.offsetUTC(e),i=e.getTimezoneOffset(),n=new Date(e);n.setUTCMinutes(n.getUTCMinutes()-(t-i));var r=n.getTimezoneOffset();return i!=r&&n.setUTCMinutes(n.getUTCMinutes()+r-i),n}},{key:"offsetUTC",value:function(e){return(C(this._utc,e)-C(this._dtf,e))/6e4}},{key:"parseDate",value:function(e){return M(this._dtf,e)}}],[{key:"new",value:function(e){return new this(e,!0)}}]),e}(),P=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"_setDefaults",value:function(){this._setDefault("capitalize",!0),this._setDefault("dateFormat","yyyy-MM-dd"),(0,l.Z)((0,u.Z)(i.prototype),"_setDefaults",this).call(this)}},{key:"_beforeChanged",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"_beforeChanged",this).call(this)}},{key:"format",value:function(e,t){var i;void 0!==t&&""!==t||(t=this.get("dateFormat","yyyy-MM-dd"));var n=e;if((0,p.a)(t))try{var r=this.get("intlLocales");return r?new Intl.DateTimeFormat(r,t).format(n):new Intl.DateTimeFormat(void 0,t).format(n)}catch(s){return"Invalid"}var a=this.parseFormat(t),o=this._root.timezone;return o&&!this._root.utc&&(n=o.convertLocal(n)),(0,p.g)(n.getTime())?(i=this.applyFormat(n,a),this.get("capitalize")&&(i=i.replace(/^.{1}/,i.substr(0,1).toUpperCase())),i):"Invalid date"}},{key:"applyFormat",value:function(e,t){var i,n,r,a,o,s,l,u,c=t.template,h=e.getTime();this._root.utc?(i=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),a=e.getUTCDate(),o=e.getUTCHours(),s=e.getUTCMinutes(),l=e.getUTCSeconds(),u=e.getUTCMilliseconds()):(i=e.getFullYear(),n=e.getMonth(),r=e.getDay(),a=e.getDate(),o=e.getHours(),s=e.getMinutes(),l=e.getSeconds(),u=e.getMilliseconds());for(var d=0,f=t.parts.length;d<f;d++){var v="";switch(t.parts[d]){case"G":v=this._t(i<0?"_era_bc":"_era_ad");break;case"yyyy":v=Math.abs(i).toString(),i<0&&(v+=this._t("_era_bc"));break;case"yyy":case"yy":case"y":v=Math.abs(i).toString().substr(-t.parts[d].length),i<0&&(v+=this._t("_era_bc"));break;case"YYYY":case"YYY":case"YY":case"Y":var y=(0,p.s)(e,this._root.utc);v="YYYY"==t.parts[d]?Math.abs(y).toString():Math.abs(y).toString().substr(-t.parts[d].length),y<0&&(v+=this._t("_era_bc"));break;case"u":case"F":case"g":break;case"q":v=""+Math.ceil((e.getMonth()+1)/3);break;case"MMMMM":v=this._t(this._getMonth(n)).substr(0,1);break;case"MMMM":v=this._t(this._getMonth(n));break;case"MMM":v=this._t(this._getShortMonth(n));break;case"MM":v=(0,p.p)(n+1,2,"0");break;case"M":v=(n+1).toString();break;case"ww":v=(0,p.p)((0,p.r)(e,this._root.utc),2,"0");break;case"w":v=(0,p.r)(e,this._root.utc).toString();break;case"W":v=(0,p.q)(e,this._root.utc).toString();break;case"dd":v=(0,p.p)(a,2,"0");break;case"d":v=a.toString();break;case"DD":case"DDD":v=(0,p.p)((0,p.m)(e,this._root.utc).toString(),t.parts[d].length,"0");break;case"D":v=(0,p.m)(e,this._root.utc).toString();break;case"t":v=this._root.language.translateFunc("_dateOrd").call(this,a);break;case"E":v=(r||7).toString();break;case"EE":v=(0,p.p)((r||7).toString(),2,"0");break;case"EEE":case"eee":v=this._t(this._getShortWeekday(r));break;case"EEEE":case"eeee":v=this._t(this._getWeekday(r));break;case"EEEEE":case"eeeee":v=this._t(this._getShortWeekday(r)).substr(0,1);break;case"e":case"ee":v=(r-(this._root.locale.firstDayOfWeek||1)+1).toString(),"ee"==t.parts[d]&&(v=(0,p.p)(v,2,"0"));break;case"a":v=o>=12?this._t("PM"):this._t("AM");break;case"aa":v=o>=12?this._t("P.M."):this._t("A.M.");break;case"aaa":v=o>=12?this._t("P"):this._t("A");break;case"h":v=(0,p.l)(o).toString();break;case"hh":v=(0,p.p)((0,p.l)(o),2,"0");break;case"H":v=o.toString();break;case"HH":v=(0,p.p)(o,2,"0");break;case"K":v=(0,p.l)(o,0).toString();break;case"KK":v=(0,p.p)((0,p.l)(o,0),2,"0");break;case"k":v=(o+1).toString();break;case"kk":v=(0,p.p)(o+1,2,"0");break;case"m":v=s.toString();break;case"mm":v=(0,p.p)(s,2,"0");break;case"s":v=l.toString();break;case"ss":v=(0,p.p)(l,2,"0");break;case"S":case"SS":case"SSS":v=Math.round(u/1e3*Math.pow(10,t.parts[d].length)).toString();break;case"x":v=h.toString();break;case"n":case"nn":case"nnn":v=(0,p.p)(u,t.parts[d].length,"0");break;case"z":v=(0,p.j)(e,!1,!1,this._root.utc);break;case"zz":v=(0,p.j)(e,!0,!1,this._root.utc);break;case"zzz":v=(0,p.j)(e,!1,!0,this._root.utc);break;case"zzzz":v=(0,p.j)(e,!0,!0,this._root.utc);break;case"Z":case"ZZ":var g=this._root.utc?"UTC":this._root.timezone;g instanceof Z&&(g=g.name);var m=g?(0,p.h)(g):e.getTimezoneOffset(),b=Math.abs(m)/60,_=Math.floor(b),w=60*b-60*_;this._root.utc&&(_=0,w=0),"Z"==t.parts[d]?(v="GMT",v+=m>0?"-":"+",v+=(0,p.p)(_,2)+":"+(0,p.p)(w,2)):(v=m>0?"-":"+",v+=(0,p.p)(_,2)+(0,p.p)(w,2));break;case"i":v=e.toISOString();break;case"I":v=e.toUTCString()}c=c.replace(p.P,v)}return c}},{key:"parseFormat",value:function(e){for(var t={template:"",parts:[]},i=p.T.chunk(e,!0),n=0;n<i.length;n++){var r=i[n];if("value"===r.type){if(r.text.match(/^date$/i)){var a=this.get("dateFormat","yyyy-MM-dd");(0,p.i)(a)||(a="yyyy-MM-dd"),r.text=a}var o=r.text.match(/G|yyyy|yyy|yy|y|YYYY|YYY|YY|Y|u|q|MMMMM|MMMM|MMM|MM|M|ww|w|W|dd|d|DDD|DD|D|F|g|EEEEE|EEEE|EEE|EE|E|eeeee|eeee|eee|ee|e|aaa|aa|a|hh|h|HH|H|KK|K|kk|k|mm|m|ss|s|SSS|SS|S|A|zzzz|zzz|zz|z|ZZ|Z|t|x|nnn|nn|n|i|I/g);if(o)for(var s=0;s<o.length;s++)t.parts.push(o[s]),r.text=r.text.replace(o[s],p.P)}t.template+=r.text}return t}},{key:"_months",value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}},{key:"_getMonth",value:function(e){return this._months()[e]}},{key:"_shortMonths",value:function(){return["Jan","Feb","Mar","Apr","May(short)","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},{key:"_getShortMonth",value:function(e){return this._shortMonths()[e]}},{key:"_weekdays",value:function(){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},{key:"_getWeekday",value:function(e){return this._weekdays()[e]}},{key:"_shortWeekdays",value:function(){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}},{key:"_getShortWeekday",value:function(e){return this._shortWeekdays()[e]}},{key:"parse",value:function(e,t){if(e instanceof Date)return e;if((0,p.g)(e))return new Date(e);var i;(0,p.i)(e)||(e=e.toString());var n="";t=(t=(0,p.c)(t)).substr(0,e.length);for(var r=this.parseFormat(t),a={year:-1,year3:-1,year2:-1,year1:-1,month:-1,monthShort:-1,monthLong:-1,weekdayShort:-1,weekdayLong:-1,day:-1,yearDay:-1,week:-1,hourBase0:-1,hour12Base0:-1,hourBase1:-1,hour12Base1:-1,minute:-1,second:-1,millisecond:-1,millisecondDigits:-1,am:-1,zone:-1,timestamp:-1,iso:-1},o={year:1970,month:0,day:1,hour:0,minute:0,second:0,millisecond:0,timestamp:null,offset:0,utc:this._root.utc},s=0,l=0,u=0;u<r.parts.length;u++){switch(l=u+s+1,r.parts[u]){case"yyyy":case"YYYY":n+="([0-9]{4})",a.year=l;break;case"yyy":case"YYY":n+="([0-9]{3})",a.year3=l;break;case"yy":case"YY":n+="([0-9]{2})",a.year2=l;break;case"y":case"Y":n+="([0-9]{1})",a.year1=l;break;case"MMMM":n+="("+this.getStringList(this._months()).join("|")+")",a.monthLong=l;break;case"MMM":n+="("+this.getStringList(this._shortMonths()).join("|")+")",a.monthShort=l;break;case"MM":case"M":n+="([0-9]{2}|[0-9]{1})",a.month=l;break;case"ww":case"w":n+="([0-9]{2}|[0-9]{1})",a.week=l;break;case"dd":case"d":n+="([0-9]{2}|[0-9]{1})",a.day=l;break;case"DDD":case"DD":case"D":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.yearDay=l;break;case"dddd":n+="("+this.getStringList(this._weekdays()).join("|")+")",a.weekdayLong=l;break;case"ddd":n+="("+this.getStringList(this._shortWeekdays()).join("|")+")",a.weekdayShort=l;break;case"aaa":case"aa":case"a":n+="("+this.getStringList(["AM","PM","A.M.","P.M.","A","P"]).join("|")+")",a.am=l;break;case"hh":case"h":n+="([0-9]{2}|[0-9]{1})",a.hour12Base1=l;break;case"HH":case"H":n+="([0-9]{2}|[0-9]{1})",a.hourBase0=l;break;case"KK":case"K":n+="([0-9]{2}|[0-9]{1})",a.hour12Base0=l;break;case"kk":case"k":n+="([0-9]{2}|[0-9]{1})",a.hourBase1=l;break;case"mm":case"m":n+="([0-9]{2}|[0-9]{1})",a.minute=l;break;case"ss":case"s":n+="([0-9]{2}|[0-9]{1})",a.second=l;break;case"SSS":case"SS":case"S":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=l,a.millisecondDigits=r.parts[u].length;break;case"nnn":case"nn":case"n":n+="([0-9]{3}|[0-9]{2}|[0-9]{1})",a.millisecond=l;break;case"x":n+="([0-9]{1,})",a.timestamp=l;break;case"Z":n+="GMT([-+]+[0-9]{2}:[0-9]{2})",a.zone=l;break;case"ZZ":n+="([\\-+]+[0-9]{2}[0-9]{2})",a.zone=l;break;case"i":n+="([0-9]{4})-?([0-9]{2})-?([0-9]{2})T?([0-9]{2}):?([0-9]{2}):?([0-9]{2})\\.?([0-9]{0,3})([zZ]|[+\\-][0-9]{2}:?[0-9]{2}|$)",a.iso=l,s+=7;break;case"G":case"YYYY":case"YYY":case"YY":case"Y":case"MMMMM":case"W":case"EEEEE":case"EEEE":case"EEE":case"EE":case"E":case"eeeee":case"eeee":case"eee":case"ee":case"e":case"zzzz":case"zzz":case"zz":case"z":case"t":s--}n+="[^0-9]*"}var c=new RegExp(n),h=e.match(c);if(h){if(a.year>-1&&(o.year=parseInt(h[a.year])),a.year3>-1){var d=parseInt(h[a.year3]);d+=1e3,o.year=d}if(a.year2>-1){var f=parseInt(h[a.year2]);f+=f>50?1e3:2e3,o.year=f}if(a.year1>-1){var v=parseInt(h[a.year1]);v=10*Math.floor((new Date).getFullYear()/10)+v,o.year=v}if(a.monthLong>-1&&(o.month=this.resolveMonth(h[a.monthLong])),a.monthShort>-1&&(o.month=this.resolveShortMonth(h[a.monthShort])),a.month>-1&&(o.month=parseInt(h[a.month])-1),a.week>-1&&-1===a.day&&(o.month=0,o.day=(0,p.t)(parseInt(h[a.week]),o.year,1,this._root.utc)),a.day>-1&&(o.day=parseInt(h[a.day])),a.yearDay>-1&&(o.month=0,o.day=parseInt(h[a.yearDay])),a.hourBase0>-1&&(o.hour=parseInt(h[a.hourBase0])),a.hourBase1>-1&&(o.hour=parseInt(h[a.hourBase1])-1),a.hour12Base0>-1){var y=parseInt(h[a.hour12Base0]);11==y&&(y=0),a.am>-1&&!this.isAm(h[a.am])&&(y+=12),o.hour=y}if(a.hour12Base1>-1){var g=parseInt(h[a.hour12Base1]);12==g&&(g=0),a.am>-1&&!this.isAm(h[a.am])&&(g+=12),o.hour=g}if(a.minute>-1&&(o.minute=parseInt(h[a.minute])),a.second>-1&&(o.second=parseInt(h[a.second])),a.millisecond>-1){var m=parseInt(h[a.millisecond]);2==a.millisecondDigits?m*=10:1==a.millisecondDigits&&(m*=100),o.millisecond=m}if(a.timestamp>-1){o.timestamp=parseInt(h[a.timestamp]);var b=new Date(o.timestamp);o.year=b.getUTCFullYear(),o.month=b.getUTCMonth(),o.day=b.getUTCDate(),o.hour=b.getUTCHours(),o.minute=b.getUTCMinutes(),o.second=b.getUTCSeconds(),o.millisecond=b.getUTCMilliseconds()}a.zone>-1&&(o.offset=this.resolveTimezoneOffset(new Date(o.year,o.month,o.day),h[a.zone])),a.iso>-1&&(o.year=(0,p.u)(h[a.iso+0]),o.month=(0,p.u)(h[a.iso+1])-1,o.day=(0,p.u)(h[a.iso+2]),o.hour=(0,p.u)(h[a.iso+3]),o.minute=(0,p.u)(h[a.iso+4]),o.second=(0,p.u)(h[a.iso+5]),o.millisecond=(0,p.u)(h[a.iso+6]),"Z"==h[a.iso+7]||"z"==h[a.iso+7]?o.utc=!0:""!=h[a.iso+7]&&(o.offset=this.resolveTimezoneOffset(new Date(o.year,o.month,o.day),h[a.iso+7]))),i=o.utc?new Date(Date.UTC(o.year,o.month,o.day,o.hour,o.minute,o.second,o.millisecond)):new Date(o.year,o.month,o.day,o.hour,o.minute+o.offset,o.second,o.millisecond)}else i=new Date(e);return i}},{key:"resolveTimezoneOffset",value:function(e,t){if(t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/)){var i=t.match(/([+\-]?)([0-9]{2}):?([0-9]{2})/),n=i[1],r=i[2],a=i[3],o=60*parseInt(r)+parseInt(a);return"+"==n&&(o*=-1),o-(e||new Date).getTimezoneOffset()}return 0}},{key:"resolveMonth",value:function(e){var t=this._months().indexOf(e);return t>-1||!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._months()).indexOf(e))>-1?t:0}},{key:"resolveShortMonth",value:function(e){var t=this._shortMonths().indexOf(e);return t>-1?t:(t=this._months().indexOf(e))>-1||this._root.language&&!this._root.language.isDefault()&&(t=this._root.language.translateAll(this._shortMonths()).indexOf(e))>-1?t:0}},{key:"isAm",value:function(e){return this.getStringList(["AM","A.M.","A"]).indexOf(e.toUpperCase())>-1}},{key:"getStringList",value:function(e){for(var t=[],i=0;i<e.length;i++)this._root.language?t.push((0,p.v)(this._t(e[i]))):t.push((0,p.v)(e[i]));return t}}]),i}(p.E),A=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,d.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,s.Z)(e),"_unitAliases",{enumerable:!0,configurable:!0,writable:!0,value:{Y:"y",D:"d",H:"h",K:"h",k:"h",n:"S"}}),e}return(0,f.Z)(i,[{key:"_setDefaults",value:function(){var e="_duration_millisecond",t="_duration_second",n="_duration_minute",r="_duration_hour",a="_duration_day",o="_duration_week",s="_duration_month",c="_minute",h="_hour",d="_day",f="_week",p="_week",v="_year";this._setDefault("negativeBase",0),this._setDefault("baseUnit","second"),this._setDefault("durationFormats",{millisecond:{millisecond:this._t(e),second:this._t(e+"_second"),minute:this._t(e+c),hour:this._t(e+h),day:this._t(e+d),week:this._t(e+f),month:this._t(e+p),year:this._t(e+v)},second:{second:this._t(t),minute:this._t(t+c),hour:this._t(t+h),day:this._t(t+d),week:this._t(t+f),month:this._t(t+p),year:this._t(t+v)},minute:{minute:this._t(n),hour:this._t(n+h),day:this._t(n+d),week:this._t(n+f),month:this._t(n+p),year:this._t(n+v)},hour:{hour:this._t(r),day:this._t(r+d),week:this._t(r+f),month:this._t(r+p),year:this._t(r+v)},day:{day:this._t(a),week:this._t(a+f),month:this._t(a+p),year:this._t(a+v)},week:{week:this._t(o),month:this._t(o+p),year:this._t(o+v)},month:{month:this._t(s),year:this._t(s+v)},year:{year:this._t("_duration_year")}}),(0,l.Z)((0,u.Z)(i.prototype),"_setDefaults",this).call(this)}},{key:"_beforeChanged",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"_beforeChanged",this).call(this)}},{key:"format",value:function(e,t,i){var n=i||this.get("baseUnit");void 0!==t&&""!==t||(t=null!=this.get("durationFormat")?this.get("durationFormat"):this.getFormat((0,p.u)(e),void 0,n)),t=(0,p.c)(t);var r,a=this.parseFormat(t,n),o=Number(e);r=o>this.get("negativeBase")?a.positive:o<this.get("negativeBase")?a.negative:a.zero;var s=this.applyFormat(o,r);return""!==r.color&&(s="["+r.color+"]"+s+"[/]"),s}},{key:"parseFormat",value:function(e,t){var i=this,n=t||this.get("baseUnit"),r={positive:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1},negative:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1},zero:{color:"",template:"",parts:[],source:"",baseUnit:n,parsed:!1,absolute:!1}},a=(e=e.replace("||",p.d)).split("|");return r.positive.source=a[0],void 0===a[2]?r.zero=r.positive:r.zero.source=a[2],void 0===a[1]?r.negative=r.positive:r.negative.source=a[1],(0,p.f)(r,(function(e,t){if(!t.parsed){var n,r=t.source;(n=t.source.match(/^\[([^\]]*)\]/))&&n.length&&""!==n[0]&&(r=t.source.substr(n[0].length),t.color=n[1]);for(var a=p.T.chunk(r,!0),o=0;o<a.length;o++){var s=a[o];if(s.text=s.text.replace(p.d,"|"),"value"===s.type){s.text.match(/[yYMdDwhHKkmsSn]+a/)&&(t.absolute=!0,s.text=s.text.replace(/([yYMdDwhHKkmsSn]+)a/,"$1"));var l=s.text.match(/y+|Y+|M+|d+|D+|w+|h+|H+|K+|k+|m+|s+|S+|n+/g);if(l)for(var u=0;u<l.length;u++)null==l[u]&&(l[u]=i._unitAliases[l[u]]),t.parts.push(l[u]),s.text=s.text.replace(l[u],p.P)}t.template+=s.text}t.parsed=!0}})),r}},{key:"applyFormat",value:function(e,t){var i=!t.absolute&&e<this.get("negativeBase");e=Math.abs(e);for(var n=this.toTimeStamp(e,t.baseUnit),r=t.template,a=0,o=t.parts.length;a<o;a++){var s=t.parts[a],l=this._toTimeUnit(s.substr(0,1)),u=s.length,c=Math.floor(n/this._getUnitValue(l));r=r.replace(p.P,(0,p.p)(c,u,"0")),n-=c*this._getUnitValue(l)}return i&&(r="-"+r),r}},{key:"toTimeStamp",value:function(e,t){return e*this._getUnitValue(t)}},{key:"_toTimeUnit",value:function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year"}}},{key:"getFormat",value:function(e,t,i){if(null!=this.get("durationFormat"))return this.get("durationFormat");if(i||(i=this.get("baseUnit")),null!=t&&e!=t){e=Math.abs(e),t=Math.abs(t);var n=this.getValueUnit(Math.max(e,t),i);return this.get("durationFormats")[i][n]}var r=this.getValueUnit(e,i);return this.get("durationFormats")[i][r]}},{key:"getValueUnit",value:function(e,t){var i;t||(t=this.get("baseUnit"));var n=this.getMilliseconds(e,t);return(0,p.w)(this._getUnitValues(),(function(e,r){if(e==t||i){if(n/r<=1)return i||(i=e),!1;i=e}return!0})),i}},{key:"getMilliseconds",value:function(e,t){return t||(t=this.get("baseUnit")),e*this._getUnitValue(t)}},{key:"_getUnitValue",value:function(e){return this._getUnitValues()[e]}},{key:"_getUnitValues",value:function(){return{millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:2592e6,year:31536e6}}}]),i}(p.E),T={firstDayOfWeek:1,_decimalSeparator:".",_thousandSeparator:",",_percentPrefix:null,_percentSuffix:"%",_big_number_suffix_3:"k",_big_number_suffix_6:"M",_big_number_suffix_9:"G",_big_number_suffix_12:"T",_big_number_suffix_15:"P",_big_number_suffix_18:"E",_big_number_suffix_21:"Z",_big_number_suffix_24:"Y",_small_number_suffix_3:"m",_small_number_suffix_6:"\u03bc",_small_number_suffix_9:"n",_small_number_suffix_12:"p",_small_number_suffix_15:"f",_small_number_suffix_18:"a",_small_number_suffix_21:"z",_small_number_suffix_24:"y",_byte_suffix_B:"B",_byte_suffix_KB:"KB",_byte_suffix_MB:"MB",_byte_suffix_GB:"GB",_byte_suffix_TB:"TB",_byte_suffix_PB:"PB",_date:"yyyy-MM-dd",_date_millisecond:"mm:ss SSS",_date_millisecond_full:"HH:mm:ss SSS",_date_second:"HH:mm:ss",_date_second_full:"HH:mm:ss",_date_minute:"HH:mm",_date_minute_full:"HH:mm - MMM dd, yyyy",_date_hour:"HH:mm",_date_hour_full:"HH:mm - MMM dd, yyyy",_date_day:"MMM dd",_date_day_full:"MMM dd, yyyy",_date_week:"ww",_date_week_full:"MMM dd, yyyy",_date_month:"MMM",_date_month_full:"MMM, yyyy",_date_year:"yyyy",_duration_millisecond:"SSS",_duration_millisecond_second:"ss.SSS",_duration_millisecond_minute:"mm:ss SSS",_duration_millisecond_hour:"hh:mm:ss SSS",_duration_millisecond_day:"d'd' mm:ss SSS",_duration_millisecond_week:"d'd' mm:ss SSS",_duration_millisecond_month:"M'm' dd'd' mm:ss SSS",_duration_millisecond_year:"y'y' MM'm' dd'd' mm:ss SSS",_duration_second:"ss",_duration_second_minute:"mm:ss",_duration_second_hour:"hh:mm:ss",_duration_second_day:"d'd' hh:mm:ss",_duration_second_week:"d'd' hh:mm:ss",_duration_second_month:"M'm' dd'd' hh:mm:ss",_duration_second_year:"y'y' MM'm' dd'd' hh:mm:ss",_duration_minute:"mm",_duration_minute_hour:"hh:mm",_duration_minute_day:"d'd' hh:mm",_duration_minute_week:"d'd' hh:mm",_duration_minute_month:"M'm' dd'd' hh:mm",_duration_minute_year:"y'y' MM'm' dd'd' hh:mm",_duration_hour:"hh'h'",_duration_hour_day:"d'd' hh'h'",_duration_hour_week:"d'd' hh'h'",_duration_hour_month:"M'm' dd'd' hh'h'",_duration_hour_year:"y'y' MM'm' dd'd' hh'h'",_duration_day:"d'd'",_duration_day_week:"d'd'",_duration_day_month:"M'm' dd'd'",_duration_day_year:"y'y' MM'm' dd'd'",_duration_week:"w'w'",_duration_week_month:"w'w'",_duration_week_year:"w'w'",_duration_month:"M'm'",_duration_month_year:"y'y' MM'm'",_duration_year:"y'y'",_era_ad:"AD",_era_bc:"BC",A:"",P:"",AM:"",PM:"","A.M.":"","P.M.":"",January:"",February:"",March:"",April:"",May:"",June:"",July:"",August:"",September:"",October:"",November:"",December:"",Jan:"",Feb:"",Mar:"",Apr:"","May(short)":"May",Jun:"",Jul:"",Aug:"",Sep:"",Oct:"",Nov:"",Dec:"",Sunday:"",Monday:"",Tuesday:"",Wednesday:"",Thursday:"",Friday:"",Saturday:"",Sun:"",Mon:"",Tue:"",Wed:"",Thu:"",Fri:"",Sat:"",_dateOrd:function(e){var t="th";if(e<11||e>13)switch(e%10){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd"}return t},"Zoom Out":"",Play:"",Stop:"",Legend:"","Press ENTER to toggle":"",Loading:"",Home:"",Chart:"","Serial chart":"","X/Y chart":"","Pie chart":"","Gauge chart":"","Radar chart":"","Sankey diagram":"","Flow diagram":"","Chord diagram":"","TreeMap chart":"","Force directed tree":"","Sliced chart":"",Series:"","Candlestick Series":"","OHLC Series":"","Column Series":"","Line Series":"","Pie Slice Series":"","Funnel Series":"","Pyramid Series":"","X/Y Series":"",Map:"","Press ENTER to zoom in":"","Press ENTER to zoom out":"","Use arrow keys to zoom in and out":"","Use plus and minus keys on your keyboard to zoom in and out":"",Export:"",Image:"",Data:"",Print:"","Press ENTER or use arrow keys to navigate":"","Press ENTER to open":"","Press ENTER to print.":"","Press ENTER to export as %1.":"","(Press ESC to close this message)":"","Image Export Complete":"","Export operation took longer than expected. Something might have gone wrong.":"","Saved from":"",PNG:"",JPG:"",GIF:"",SVG:"",PDF:"",JSON:"",CSV:"",XLSX:"",HTML:"","Use TAB to select grip buttons or left and right arrows to change selection":"","Use left and right arrows to move selection":"","Use left and right arrows to move left selection":"","Use left and right arrows to move right selection":"","Use TAB select grip buttons or up and down arrows to change selection":"","Use up and down arrows to move selection":"","Use up and down arrows to move lower selection":"","Use up and down arrows to move upper selection":"","From %1 to %2":"","From %1":"","To %1":"","No parser available for file: %1":"","Error parsing file: %1":"","Unable to load file: %1":"","Invalid date":"",Close:"",Minimize:""},I=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"_setDefaults",value:function(){this.setPrivate("defaultLocale",T),(0,l.Z)((0,u.Z)(i.prototype),"_setDefaults",this).call(this)}},{key:"translate",value:function(e,t){t||(t=this._root.locale||this.getPrivate("defaultLocale"));for(var i=e,n=t[e],r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];if(null===n)i="";else if(null!=n)n&&(i=n);else if(t!==this.getPrivate("defaultLocale"))return this.translate.apply(this,[e,this.getPrivate("defaultLocale")].concat(a));if(a.length)for(var s=a.length,l=0;l<s;++l)i=i.split("%"+(l+1)).join(a[l]);return i}},{key:"translateAny",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return this.translate.apply(this,[e,t].concat(n))}},{key:"setTranslationAny",value:function(e,t,i){(i||this._root.locale)[e]=t}},{key:"setTranslationsAny",value:function(e,t){var i=this;(0,p.f)(e,(function(e,n){i.setTranslationAny(e,n,t)}))}},{key:"translateEmpty",value:function(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];var a=this.translate.apply(this,[e,t].concat(n));return a==e?"":a}},{key:"translateFunc",value:function(e,t){return this._root.locale[e]?this._root.locale[e]:t!==this.getPrivate("defaultLocale")?this.translateFunc(e,this.getPrivate("defaultLocale")):function(){return""}}},{key:"translateAll",value:function(e,t){var i=this;return this.isDefault()?e:(0,p.x)(e,(function(e){return i.translate(e,t)}))}},{key:"isDefault",value:function(){return this.getPrivate("defaultLocale")===this._root.locale}}]),i}(p.E),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(0,d.Z)(this,e),Object.defineProperty(this,"a",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"b",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"c",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"d",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tx",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.a=t,this.b=i,this.c=n,this.d=r,this.tx=a,this.ty=o}return(0,f.Z)(e,[{key:"setTransform",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this.a=Math.cos(r)*a,this.b=Math.sin(r)*a,this.c=-Math.sin(r)*a,this.d=Math.cos(r)*a,this.tx=e-(i*this.a+n*this.c),this.ty=t-(i*this.b+n*this.d)}},{key:"apply",value:function(e){return{x:this.a*e.x+this.c*e.y+this.tx,y:this.b*e.x+this.d*e.y+this.ty}}},{key:"applyInverse",value:function(e){var t=1/(this.a*this.d+this.c*-this.b);return{x:this.d*t*e.x+-this.c*t*e.y+(this.ty*this.c-this.tx*this.d)*t,y:this.a*t*e.y+-this.b*t*e.x+(-this.ty*this.a+this.tx*this.b)*t}}},{key:"append",value:function(e){var t=this.a,i=this.b,n=this.c,r=this.d;this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*r+this.ty}},{key:"prepend",value:function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty}},{key:"copyFrom",value:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty}}]),e}(),D=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(l){r=!0,a=l}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},F=2*Math.PI,E=function(e,t,i,n,r,a,o){var s=e.x,l=e.y;return{x:n*(s*=t)-r*(l*=i)+a,y:r*s+n*l+o}},S=function(e,t){var i=1.5707963267948966===t?.551915024494:-1.5707963267948966===t?-.551915024494:4/3*Math.tan(t/4),n=Math.cos(e),r=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:n-r*i,y:r+n*i},{x:a+o*i,y:o-a*i},{x:a,y:o}]},L=function(e,t,i,n){var r=e*i+t*n;return r>1&&(r=1),r<-1&&(r=-1),(e*n-t*i<0?-1:1)*Math.acos(r)},B=function(e){var t=e.px,i=e.py,n=e.cx,r=e.cy,a=e.rx,o=e.ry,s=e.xAxisRotation,l=void 0===s?0:s,u=e.largeArcFlag,c=void 0===u?0:u,h=e.sweepFlag,d=void 0===h?0:h,f=[];if(0===a||0===o)return[];var p=Math.sin(l*F/360),v=Math.cos(l*F/360),y=v*(t-n)/2+p*(i-r)/2,g=-p*(t-n)/2+v*(i-r)/2;if(0===y&&0===g)return[];a=Math.abs(a),o=Math.abs(o);var m=Math.pow(y,2)/Math.pow(a,2)+Math.pow(g,2)/Math.pow(o,2);m>1&&(a*=Math.sqrt(m),o*=Math.sqrt(m));var b=function(e,t,i,n,r,a,o,s,l,u,c,h){var d=Math.pow(r,2),f=Math.pow(a,2),p=Math.pow(c,2),v=Math.pow(h,2),y=d*f-d*v-f*p;y<0&&(y=0),y/=d*v+f*p;var g=(y=Math.sqrt(y)*(o===s?-1:1))*r/a*h,m=y*-a/r*c,b=u*g-l*m+(e+i)/2,_=l*g+u*m+(t+n)/2,w=(c-g)/r,k=(h-m)/a,x=(-c-g)/r,M=(-h-m)/a,C=L(1,0,w,k),Z=L(w,k,x,M);return 0===s&&Z>0&&(Z-=F),1===s&&Z<0&&(Z+=F),[b,_,C,Z]}(t,i,n,r,a,o,c,d,p,v,y,g),_=D(b,4),w=_[0],k=_[1],x=_[2],M=_[3],C=Math.abs(M)/(F/4);Math.abs(1-C)<1e-7&&(C=1);var Z=Math.max(Math.ceil(C),1);M/=Z;for(var P=0;P<Z;P++)f.push(S(x,M)),x+=M;return f.map((function(e){var t=E(e[0],a,o,v,p,w,k),i=t.x,n=t.y,r=E(e[1],a,o,v,p,w,k),s=r.x,l=r.y,u=E(e[2],a,o,v,p,w,k);return{x1:i,y1:n,x2:s,y2:l,x:u.x,y:u.y}}))};function j(e,t,i){if(t!==i)throw new Error("Required "+i+" arguments for "+e+" but got "+t)}function R(e,t,i){if(t<i)throw new Error("Required at least "+i+" arguments for "+e+" but got "+t)}function N(e,t,i){if(R(e,t,i),t%i!=0)throw new Error("Arguments for "+e+" must be in pairs of "+i)}function z(e){for(var t=0;t<e.length;t+=7){var i=t+3,n=e[i];if(n.length>1){var r=/^([01])([01])(.*)$/.exec(n);null!==r&&(e.splice(i,0,r[1]),++i,e.splice(i,0,r[2]),++i,r[3].length>0?e[i]=r[3]:e.splice(i,1))}if((n=e[++i]).length>1){var a=/^([01])(.+)$/.exec(n);null!==a&&(e.splice(i,0,a[1]),e[++i]=a[2])}}}function H(e){if(0===e||1===e)return e;throw new Error("Flag must be 0 or 1")}function V(e,t){for(;(!e.interactive||t(e))&&e._parent;)e=e._parent}function W(e,t,i){return(0,p.z)(e,(0,p.H)(t),(function(e){var t=(0,p.I)(e),n=e.touches;n?(0==n.length&&(n=e.changedTouches),i((0,p.K)(n),t)):i([e],t)}))}function Y(e){var t=document.createElement("canvas");t.width=1,t.height=1;var i=t.getContext("2d",{willReadFrequently:!0});i.drawImage(e,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch(n){return console.warn('Image "'+e.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function U(e){e.width=0,e.height=0,e.style.width="0px",e.style.height="0px"}var q=function(){function e(){(0,d.Z)(this,e),Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}return(0,f.Z)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e}},{key:"y",get:function(){return this._y},set:function(e){this._y=e}}]),e}(),G=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty((0,s.Z)(n),"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,s.Z)(n),"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,s.Z)(n),"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty((0,s.Z)(n),"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty((0,s.Z)(n),"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty((0,s.Z)(n),"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new q}),Object.defineProperty((0,s.Z)(n),"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new O}),Object.defineProperty((0,s.Z)(n),"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new O}),Object.defineProperty((0,s.Z)(n),"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new O}),Object.defineProperty((0,s.Z)(n),"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n._renderer=e,n}return(0,f.Z)(i,[{key:"_dispose",value:function(){this._renderer._removeObject(this),this.getLayer().dirty=!0}},{key:"getCanvas",value:function(){return this.getLayer().view}},{key:"getLayer",value:function(){for(var e=this;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}},{key:"setLayer",value:function(e,t){if(null==e)this._layer=void 0;else{this._layer=this._renderer.getLayer(e,true),this._layer.visible=true,this._layer.margin=t,t&&(0,p.W)(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost()}}},{key:"markDirtyLayer",value:function(){this.getLayer().dirty=!0}},{key:"clear",value:function(){this.invalidateBounds()}},{key:"invalidateBounds",value:function(){this._localBounds=void 0}},{key:"_addBounds",value:function(e){}},{key:"_getColorId",value:function(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}},{key:"_isInteractive",value:function(){return 0==this.inactive&&(this.interactive||this._renderer._forceInteractive>0)}},{key:"_isInteractiveMask",value:function(){return this._isInteractive()}},{key:"contains",value:function(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}},{key:"toGlobal",value:function(e){return this._matrix.apply(e)}},{key:"toLocal",value:function(e){return this._matrix.applyInverse(e)}},{key:"getLocalMatrix",value:function(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}},{key:"getLocalBounds",value:function(){if(!this._localBounds){var e=1e7;this._localBounds={left:e,top:e,right:-e,bottom:-e},this._addBounds(this._localBounds)}return this._localBounds}},{key:"getAdjustedBounds",value:function(e){this._setMatrix();var t=this.getLocalMatrix(),i=t.apply({x:e.left,y:e.top}),n=t.apply({x:e.right,y:e.top}),r=t.apply({x:e.right,y:e.bottom}),a=t.apply({x:e.left,y:e.bottom});return{left:Math.min(i.x,n.x,r.x,a.x),top:Math.min(i.y,n.y,r.y,a.y),right:Math.max(i.x,n.x,r.x,a.x),bottom:Math.max(i.y,n.y,r.y,a.y)}}},{key:"on",value:function(e,t,i){return this.interactive?this._renderer._addEvent(this,e,t,i):new p.D((function(){}))}},{key:"_setMatrix",value:function(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}},{key:"_transform",value:function(e,t){var i=this._matrix,n=i.tx*t,r=i.ty*t;this.crisp&&(n=Math.floor(n)+.5,r=Math.floor(r)+.5),e.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,n,r)}},{key:"_transformMargin",value:function(e,t,i){var n=this._matrix;e.setTransform(n.a*t,n.b*t,n.c*t,n.d*t,(n.tx+i.left)*t,(n.ty+i.top)*t)}},{key:"_transformLayer",value:function(e,t,i){i.margin?this._transformMargin(e,i.scale||t,i.margin):this._transform(e,i.scale||t)}},{key:"render",value:function(e){var t=this;if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();var i=this._renderer.resolution,n=this._renderer.layers,r=this._renderer._ghostLayer,a=r.context,o=this.mask;o&&o._setMatrix(),(0,p.e)(n,(function(e){if(e){var n=e.context;n.save(),o&&(o._transformLayer(n,i,e),o._runPath(n),n.clip()),n.globalAlpha=t.compoundAlpha*t.alpha,t._transformLayer(n,i,e),t.filter&&(n.filter=t.filter)}})),a.save(),o&&this._isInteractiveMask()&&(o._transformMargin(a,i,r.margin),o._runPath(a),a.clip()),this._transformMargin(a,i,r.margin),this._render(e),a.restore(),(0,p.e)(n,(function(e){e&&e.context.restore()}))}}},{key:"_render",value:function(e){!1===this.exportable&&((this._layer||e).tainted=!0)}},{key:"hovering",value:function(){return this._renderer._hovering.has(this)}},{key:"dragging",value:function(){var e=this;return this._renderer._dragging.some((function(t){return t.value===e}))}},{key:"shouldCancelTouch",value:function(){var e=this._renderer;return!(e.tapToActivate&&!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}]),i}(p.V),X=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,d.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,s.Z)(e),"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,s.Z)(e),"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(e),"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]}),e}return(0,f.Z)(i,[{key:"_isInteractiveMask",value:function(){return this.interactiveChildren||(0,l.Z)((0,u.Z)(i.prototype),"_isInteractiveMask",this).call(this)}},{key:"addChild",value:function(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}},{key:"addChildAt",value:function(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}},{key:"removeChild",value:function(e){e._parent=void 0,(0,p.J)(this._children,e)}},{key:"_render",value:function(e){var t=this;(0,l.Z)((0,u.Z)(i.prototype),"_render",this).call(this,e);var n=this._renderer;this.interactive&&this.interactiveChildren&&++n._forceInteractive;var r=this._layer||e;(0,p.e)(this._children,(function(e){e.compoundAlpha=t.compoundAlpha*t.alpha,e.render(r)})),this.interactive&&this.interactiveChildren&&--n._forceInteractive}},{key:"registerChildLayer",value:function(e){this._childLayers||(this._childLayers=[]),(0,p.L)(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}},{key:"markDirtyLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,l.Z)((0,u.Z)(i.prototype),"markDirtyLayer",this).call(this),e&&this._childLayers&&(0,p.e)(this._childLayers,(function(e){return e.dirty=!0}))}},{key:"_dispose",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"_dispose",this).call(this),this._childLayers&&(0,p.e)(this._childLayers,(function(e){e.dirty=!0}))}}]),i}(G);function K(e,t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x),e.bottom=Math.max(e.bottom,t.y)}var $=function(){function e(){(0,d.Z)(this,e)}return(0,f.Z)(e,[{key:"colorize",value:function(e,t){}},{key:"path",value:function(e){}},{key:"addBounds",value:function(e){}}]),e}(),Q=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.beginPath()}}]),i}($),J=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.fillStyle=void 0!==t?t:this.color}}]),i}($),ee=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}]),i}($),te=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.stroke()}}]),i}($),ie=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r){var a;return(0,d.Z)(this,i),a=t.call(this),Object.defineProperty((0,s.Z)(a),"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(a),"color",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(a),"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:r}),a}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.strokeStyle=void 0!==t?t:this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}]),i}($),ne=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"dash",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.setLineDash(this.dash)}}]),i}($),re=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;return(0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e}),n}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){e.lineDashOffset=this.dashOffset}}]),i}($),ae=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a){var o;return(0,d.Z)(this,i),o=t.call(this),Object.defineProperty((0,s.Z)(o),"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(o),"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(o),"width",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(o),"height",{enumerable:!0,configurable:!0,writable:!0,value:a}),o}return(0,f.Z)(i,[{key:"path",value:function(e){e.rect(this.x,this.y,this.width,this.height)}},{key:"addBounds",value:function(e){var t=this.x,i=this.y,n=t+this.width,r=i+this.height;K(e,{x:t,y:i}),K(e,{x:n,y:i}),K(e,{x:t,y:r}),K(e,{x:n,y:r})}}]),i}($),oe=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r){var a;return(0,d.Z)(this,i),a=t.call(this),Object.defineProperty((0,s.Z)(a),"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(a),"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(a),"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),a}return(0,f.Z)(i,[{key:"path",value:function(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}},{key:"addBounds",value:function(e){K(e,{x:this.x-this.radius,y:this.y-this.radius}),K(e,{x:this.x+this.radius,y:this.y+this.radius})}}]),i}($),se=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a){var o;return(0,d.Z)(this,i),o=t.call(this),Object.defineProperty((0,s.Z)(o),"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(o),"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(o),"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(o),"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:a}),o}return(0,f.Z)(i,[{key:"path",value:function(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}},{key:"addBounds",value:function(e){K(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),K(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}]),i}($),le=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,o,l){var u;return(0,d.Z)(this,i),u=t.call(this),Object.defineProperty((0,s.Z)(u),"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(u),"cy",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(u),"radius",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(u),"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty((0,s.Z)(u),"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty((0,s.Z)(u),"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:l}),u}return(0,f.Z)(i,[{key:"path",value:function(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}},{key:"addBounds",value:function(e){var t=(0,p.X)(this.cx,this.cy,this.startAngle*p.Y,this.endAngle*p.Y,this.radius);K(e,{x:t.left,y:t.top}),K(e,{x:t.right,y:t.bottom})}}]),i}($),ue=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,o){var l;return(0,d.Z)(this,i),l=t.call(this),Object.defineProperty((0,s.Z)(l),"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(l),"y1",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(l),"x2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(l),"y2",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty((0,s.Z)(l),"radius",{enumerable:!0,configurable:!0,writable:!0,value:o}),l}return(0,f.Z)(i,[{key:"path",value:function(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}},{key:"addBounds",value:function(e){}}]),i}($),ce=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,d.Z)(this,i),r=t.call(this),Object.defineProperty((0,s.Z)(r),"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(r),"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,f.Z)(i,[{key:"path",value:function(e){e.lineTo(this.x,this.y)}},{key:"addBounds",value:function(e){K(e,{x:this.x,y:this.y})}}]),i}($),he=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,d.Z)(this,i),r=t.call(this),Object.defineProperty((0,s.Z)(r),"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(r),"y",{enumerable:!0,configurable:!0,writable:!0,value:n}),r}return(0,f.Z)(i,[{key:"path",value:function(e){e.moveTo(this.x,this.y)}},{key:"addBounds",value:function(e){K(e,{x:this.x,y:this.y})}}]),i}($),de=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){return(0,d.Z)(this,i),t.apply(this,arguments)}return(0,f.Z)(i,[{key:"path",value:function(e){e.closePath()}}]),i}($),fe=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,o,l){var u;return(0,d.Z)(this,i),u=t.call(this),Object.defineProperty((0,s.Z)(u),"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(u),"cpY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(u),"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(u),"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty((0,s.Z)(u),"toX",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty((0,s.Z)(u),"toY",{enumerable:!0,configurable:!0,writable:!0,value:l}),u}return(0,f.Z)(i,[{key:"path",value:function(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}},{key:"addBounds",value:function(e){K(e,{x:this.cpX,y:this.cpY}),K(e,{x:this.cpX2,y:this.cpY2}),K(e,{x:this.toX,y:this.toY})}}]),i}($),pe=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a){var o;return(0,d.Z)(this,i),o=t.call(this),Object.defineProperty((0,s.Z)(o),"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(o),"cpY",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(o),"toX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(o),"toY",{enumerable:!0,configurable:!0,writable:!0,value:a}),o}return(0,f.Z)(i,[{key:"path",value:function(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}},{key:"addBounds",value:function(e){K(e,{x:this.cpX,y:this.cpY}),K(e,{x:this.toX,y:this.toY})}}]),i}($),ve=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,o){var l;return(0,d.Z)(this,i),l=t.call(this),Object.defineProperty((0,s.Z)(l),"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(l),"blur",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(l),"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(l),"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty((0,s.Z)(l),"opacity",{enumerable:!0,configurable:!0,writable:!0,value:o}),l}return(0,f.Z)(i,[{key:"colorize",value:function(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}]),i}($),ye=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r,a,o){var l;return(0,d.Z)(this,i),l=t.call(this),Object.defineProperty((0,s.Z)(l),"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty((0,s.Z)(l),"width",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty((0,s.Z)(l),"height",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty((0,s.Z)(l),"x",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty((0,s.Z)(l),"y",{enumerable:!0,configurable:!0,writable:!0,value:o}),l}return(0,f.Z)(i,[{key:"path",value:function(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}},{key:"addBounds",value:function(e){K(e,{x:this.x,y:this.y}),K(e,{x:this.width,y:this.height})}}]),i}($),ge=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,d.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,s.Z)(e),"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,s.Z)(e),"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:p.N.NORMAL}),Object.defineProperty((0,s.Z)(e),"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(e),"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(e),"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e}return(0,f.Z)(i,[{key:"clear",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"clear",this).call(this),this._operations.length=0}},{key:"_pushOp",value:function(e){this._operations.push(e)}},{key:"beginFill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fillAlpha=t,e?e instanceof p.C?this._pushOp(new J(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new J(e))):this._pushOp(new J("rgba(0, 0, 0, "+t+")"))}},{key:"endFill",value:function(){this._pushOp(new ee(this._hasShadows))}},{key:"endStroke",value:function(){this._pushOp(new te)}},{key:"beginPath",value:function(){this._pushOp(new Q)}},{key:"lineStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0;this._strokeAlpha=i,t?t instanceof p.C?this._pushOp(new ie(e,t.toCSS(i),n)):this._pushOp(new ie(e,t,n)):this._pushOp(new ie(e,"rgba(0, 0, 0, "+i+")",n))}},{key:"setLineDash",value:function(e){this._pushOp(new ne(e||[]))}},{key:"setLineDashOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._pushOp(new re(e))}},{key:"drawRect",value:function(e,t,i,n){this._pushOp(new ae(e,t,i,n))}},{key:"drawCircle",value:function(e,t,i){this._pushOp(new oe(e,t,i))}},{key:"drawEllipse",value:function(e,t,i,n){this._pushOp(new se(e,t,i,n))}},{key:"arc",value:function(e,t,i,n,r){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this._pushOp(new le(e,t,i,n,r,a))}},{key:"arcTo",value:function(e,t,i,n,r){this._pushOp(new ue(e,t,i,n,r))}},{key:"lineTo",value:function(e,t){this._pushOp(new ce(e,t))}},{key:"moveTo",value:function(e,t){this._pushOp(new he(e,t))}},{key:"bezierCurveTo",value:function(e,t,i,n,r,a){this._pushOp(new fe(e,t,i,n,r,a))}},{key:"quadraticCurveTo",value:function(e,t,i,n){this._pushOp(new pe(e,t,i,n))}},{key:"closePath",value:function(){this._pushOp(new de)}},{key:"shadow",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4?arguments[4]:void 0;this._hasShadows=!0,this._pushOp(new ve(r?e.toCSS(r):e.toCSS(this._fillAlpha||this._strokeAlpha),t,i,n))}},{key:"image",value:function(e,t,i,n,r){this._pushOp(new ye(e,t,i,n,r))}},{key:"svgPath",value:function(e){for(var t,i=this,n=0,r=0,a=null,o=null,s=null,l=null,u=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,c=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;null!==(t=u.exec(e));){for(var h=t[1],d=t[2],f=[];null!==(t=c.exec(d));)f.push(t[1]);switch("S"!==h&&"s"!==h&&"C"!==h&&"c"!==h&&(a=null,o=null),"Q"!==h&&"q"!==h&&"T"!==h&&"t"!==h&&(s=null,l=null),h){case"M":N(h,f.length,2),n=+f[0],r=+f[1],this.moveTo(n,r);for(var v=2;v<f.length;v+=2)n=+f[v],r=+f[v+1],this.lineTo(n,r);break;case"m":N(h,f.length,2),n+=+f[0],r+=+f[1],this.moveTo(n,r);for(var y=2;y<f.length;y+=2)n+=+f[y],r+=+f[y+1],this.lineTo(n,r);break;case"L":N(h,f.length,2);for(var g=0;g<f.length;g+=2)n=+f[g],r=+f[g+1],this.lineTo(n,r);break;case"l":N(h,f.length,2);for(var m=0;m<f.length;m+=2)n+=+f[m],r+=+f[m+1],this.lineTo(n,r);break;case"H":R(h,f.length,1);for(var b=0;b<f.length;++b)n=+f[b],this.lineTo(n,r);break;case"h":R(h,f.length,1);for(var _=0;_<f.length;++_)n+=+f[_],this.lineTo(n,r);break;case"V":R(h,f.length,1);for(var w=0;w<f.length;++w)r=+f[w],this.lineTo(n,r);break;case"v":R(h,f.length,1);for(var k=0;k<f.length;++k)r+=+f[k],this.lineTo(n,r);break;case"C":N(h,f.length,6);for(var x=0;x<f.length;x+=6){var M=+f[x],C=+f[x+1];a=+f[x+2],o=+f[x+3],n=+f[x+4],r=+f[x+5],this.bezierCurveTo(M,C,a,o,n,r)}break;case"c":N(h,f.length,6);for(var Z=0;Z<f.length;Z+=6){var P=+f[Z]+n,A=+f[Z+1]+r;a=+f[Z+2]+n,o=+f[Z+3]+r,n+=+f[Z+4],r+=+f[Z+5],this.bezierCurveTo(P,A,a,o,n,r)}break;case"S":N(h,f.length,4),null!==a&&null!==o||(a=n,o=r);for(var T=0;T<f.length;T+=4){var I=2*n-a,O=2*r-o;a=+f[T],o=+f[T+1],n=+f[T+2],r=+f[T+3],this.bezierCurveTo(I,O,a,o,n,r)}break;case"s":N(h,f.length,4),null!==a&&null!==o||(a=n,o=r);for(var D=0;D<f.length;D+=4){var F=2*n-a,E=2*r-o;a=+f[D]+n,o=+f[D+1]+r,n+=+f[D+2],r+=+f[D+3],this.bezierCurveTo(F,E,a,o,n,r)}break;case"Q":N(h,f.length,4);for(var S=0;S<f.length;S+=4)s=+f[S],l=+f[S+1],n=+f[S+2],r=+f[S+3],this.quadraticCurveTo(s,l,n,r);break;case"q":N(h,f.length,4);for(var L=0;L<f.length;L+=4)s=+f[L]+n,l=+f[L+1]+r,n+=+f[L+2],r+=+f[L+3],this.quadraticCurveTo(s,l,n,r);break;case"T":N(h,f.length,2),null!==s&&null!==l||(s=n,l=r);for(var V=0;V<f.length;V+=2)s=2*n-s,l=2*r-l,n=+f[V],r=+f[V+1],this.quadraticCurveTo(s,l,n,r);break;case"t":N(h,f.length,2),null!==s&&null!==l||(s=n,l=r);for(var W=0;W<f.length;W+=2)s=2*n-s,l=2*r-l,n+=+f[W],r+=+f[W+1],this.quadraticCurveTo(s,l,n,r);break;case"A":case"a":var Y="a"===h;z(f),N(h,f.length,7);for(var U=0;U<f.length;U+=7){var q=+f[U+5],G=+f[U+6];Y&&(q+=n,G+=r);var X=B({px:n,py:r,rx:+f[U],ry:+f[U+1],xAxisRotation:+f[U+2],largeArcFlag:H(+f[U+3]),sweepFlag:H(+f[U+4]),cx:q,cy:G});(0,p.e)(X,(function(e){i.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),n=e.x,r=e.y}))}break;case"Z":case"z":j(h,f.length,0),this.closePath()}}}},{key:"_runPath",value:function(e){e.beginPath(),(0,p.e)(this._operations,(function(t){t.path(e)}))}},{key:"_render",value:function(e){(0,l.Z)((0,u.Z)(i.prototype),"_render",this).call(this,e);var t=this._layer||e,n=t.dirty,r=this._isInteractive();if(n||r){var a,o=t.context,s=this._renderer._ghostLayer.context;n&&(o.globalCompositeOperation=this.blendMode,o.beginPath()),r&&(s.beginPath(),a=this._getColorId()),(0,p.e)(this._operations,(function(e){n&&(e.path(o),e.colorize(o,void 0)),r&&(e.path(s),e.colorize(s,a))}))}}},{key:"renderDetached",value:function(e){if(this.visible){this._setMatrix(),e.save();var t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),(0,p.e)(this._operations,(function(t){t.path(e),t.colorize(e,void 0)})),e.restore()}}},{key:"_addBounds",value:function(e){this.visible&&this.isMeasured&&(0,p.e)(this._operations,(function(t){t.addBounds(e)}))}}]),i}(G),me=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n,r){var a;return(0,d.Z)(this,i),a=t.call(this,e),Object.defineProperty((0,s.Z)(a),"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(a),"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(a),"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty((0,s.Z)(a),"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,s.Z)(a),"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(a),"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),a.text=n,a.style=r,a}return(0,f.Z)(i,[{key:"invalidateBounds",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"invalidateBounds",this).call(this),this._textInfo=void 0}},{key:"_shared",value:function(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}},{key:"_prerender",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,l.Z)((0,u.Z)(i.prototype),"_render",this).call(this,e);var r=e.context,a=this._renderer._ghostLayer.context,o=this.style,s=this._getFontStyle(void 0,n);r.font=s,this._isInteractive()&&!t&&(a.font=s),o.fill&&(o.fill instanceof p.C?r.fillStyle=o.fill.toCSS(null!=o.fillOpacity?o.fillOpacity:1):r.fillStyle=o.fill),o.shadowColor&&(e.context.shadowColor=o.shadowColor.toCSS(o.shadowOpacity||1)),o.shadowBlur&&(e.context.shadowBlur=o.shadowBlur),o.shadowOffsetX&&(e.context.shadowOffsetX=o.shadowOffsetX),o.shadowOffsetY&&(e.context.shadowOffsetY=o.shadowOffsetY),this._shared(r),this._isInteractive()&&!t&&(a.fillStyle=this._getColorId(),this._shared(a))}},{key:"_getFontStyle",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.style,n=[];return e&&e.fontVariant?n.push(e.fontVariant):i.fontVariant&&n.push(i.fontVariant),t||(e&&e.fontWeight?n.push(e.fontWeight):i.fontWeight&&n.push(i.fontWeight)),e&&e.fontStyle?n.push(e.fontStyle):i.fontStyle&&n.push(i.fontStyle),e&&e.fontSize?((0,p.g)(e.fontSize)&&(e.fontSize=e.fontSize+"px"),n.push(e.fontSize)):i.fontSize&&((0,p.g)(i.fontSize)&&(i.fontSize=i.fontSize+"px"),n.push(i.fontSize)),e&&e.fontFamily?n.push(e.fontFamily):i.fontFamily?n.push(i.fontFamily):n.length&&n.push("Arial"),n.join(" ")}},{key:"_render",value:function(e){var t=this,i=this._layer||e;if(this._textInfo||this._measure(i),this.textVisible){var n=this._isInteractive(),r=i.context,a=i.dirty,o=this._renderer._ghostLayer.context;r.save(),o.save(),this._prerender(i),(0,p.e)(this._textInfo,(function(e,i){(0,p.e)(e.textChunks,(function(i,s){if(i.style&&(r.save(),o.save(),r.font=i.style,t._isInteractive()&&(o.font=i.style)),i.fill&&(r.save(),r.fillStyle=i.fill.toCSS()),a&&r.fillText(i.text,i.offsetX,e.offsetY+i.offsetY),"underline"==i.textDecoration||"line-through"==i.textDecoration){var l,u=1,c=1,h=i.height,d=i.offsetX;switch(t.style.textAlign){case"right":case"end":d-=i.width;break;case"center":d-=i.width/2}if(i.style)switch(p.T.getTextStyle(i.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":u=2}h&&(c=h/20),l="line-through"==i.textDecoration?u+e.offsetY+i.offsetY-i.height/2:u+1.5*c+e.offsetY+i.offsetY,r.save(),r.beginPath(),i.fill?r.strokeStyle=i.fill.toCSS():t.style.fill&&t.style.fill instanceof p.C&&(r.strokeStyle=t.style.fill.toCSS()),r.lineWidth=u*c,r.moveTo(d,l),r.lineTo(d+i.width,l),r.stroke(),r.restore()}n&&t.interactive&&o.fillText(i.text,i.offsetX,e.offsetY+i.offsetY),i.fill&&r.restore(),i.style&&(r.restore(),o.restore())}))})),r.restore(),o.restore()}}},{key:"_addBounds",value:function(e){if(this.visible&&this.isMeasured){var t=this._measure(this.getLayer());K(e,{x:t.left,y:t.top}),K(e,{x:t.right,y:t.bottom})}}},{key:"_ignoreFontWeight",value:function(){return/apple/i.test(navigator.vendor)}},{key:"_measure",value:function(e){var t=this,i=e.context,n=this._renderer._ghostLayer.context,r="rtl"==this.style.direction;this._textInfo=[];var a=this.style.oversizedBehavior,o=this.style.maxWidth,s=(0,p.g)(o)&&"truncate"==a,l=(0,p.g)(o)&&("wrap"==a||"wrap-no-break"==a);i.save(),n.save(),this._prerender(e,!0,this._ignoreFontWeight());var u,c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",h=this.text.toString().replace(/\r/g,"").split(/\n/),d=!0,f=0,v=0,y=0;(0,p.e)(h,(function(e,r){var a,h=function(){var e,r={offsetY:y,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},h=t._measureText(c,i),g=h.actualBoundingBoxAscent+h.actualBoundingBoxDescent;r.height=g,r.ascent=h.actualBoundingBoxAscent;var m,b,_,w=t.style.textDecoration,k=!1,x=!0,M=[];(0,p.O)(a,(function(h,f){if("format"==h.type)if("[/]"==h.text)d||(i.restore(),n.restore(),d=!0),m=void 0,u=void 0,b=void 0,w=t.style.textDecoration,_=void 0,e=h.text;else{d||(i.restore(),n.restore());var v=p.T.getTextStyle(h.text),y=t._getFontStyle(v);i.save(),n.save(),i.font=y,u=y,e=h.text,v.textDecoration&&(w=v.textDecoration),v.fill&&(m=v.fill),v.width&&(b=(0,p.u)(v.width)),v.verticalAlign&&(_=v.verticalAlign),d=!1;var g=t._measureText(c,i),C=g.actualBoundingBoxAscent+g.actualBoundingBoxDescent;C>r.height&&(r.height=C),g.actualBoundingBoxAscent>r.ascent&&(r.ascent=g.actualBoundingBoxAscent)}else if("value"==h.type&&!k){var Z=t._measureText(h.text,i),P=Z.actualBoundingBoxLeft+Z.actualBoundingBoxRight;if(s){var A=x||t.style.breakWords||!1,T=t.style.ellipsis||"",I=t._measureText(T,i),O=I.actualBoundingBoxLeft+I.actualBoundingBoxRight;if(r.width+P>o){var D=o-r.width-O;h.text=t._truncateText(i,h.text,D,A),h.text+=T,k=!0}}else if(l&&r.width+P>o){var F=o-r.width,E=t._truncateText(i,h.text,F,!1,x&&"wrap-no-break"!=t.style.oversizedBehavior);if(""==E)return t.textVisible=!0,!1;M=a.slice(f+1),(0,p.Z)(E)!=(0,p.Z)(h.text)&&(M.unshift({type:"value",text:h.text.substr(E.length)}),e&&M.unshift({type:"format",text:e})),h.text=(0,p.Z)(E),a=[],k=!0}var S=1,L=1;if(u&&b&&b>P){var B=P/b;switch(t.style.textAlign){case"right":case"end":S=B;break;case"center":S=B,L=B;break;default:L=B}P=b}var j=Z.actualBoundingBoxAscent+Z.actualBoundingBoxDescent;j>r.height&&(r.height=j),Z.actualBoundingBoxAscent>r.ascent&&(r.ascent=Z.actualBoundingBoxAscent),r.width+=P,r.left+=Z.actualBoundingBoxLeft/S,r.right+=Z.actualBoundingBoxRight/L,r.textChunks.push({style:u,fill:m,text:h.text,width:P,height:j,left:Z.actualBoundingBoxLeft,right:Z.actualBoundingBoxRight,ascent:Z.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:w,verticalAlign:_}),x=!1}return!0})),t.style.lineHeight instanceof p.Q?(r.height*=t.style.lineHeight.value,r.ascent*=t.style.lineHeight.value):(r.height*=t.style.lineHeight||1.2,r.ascent*=t.style.lineHeight||1.2),f<r.left&&(f=r.left),v<r.right&&(v=r.right),t._textInfo.push(r),y+=r.height,a=M||[]};for(a=""==e?[{type:"value",text:""}]:p.T.chunk(e,!1,t.style.ignoreFormatting);a.length>0;)h()})),d||(i.restore(),n.restore()),(0,p.e)(this._textInfo,(function(e,i){var n=0;(0,p.e)(e.textChunks,(function(i){if(i.offsetX=n+i.left-e.left,i.offsetY+=e.height-e.height*(t.style.baselineRatio||.19),n+=i.width,i.verticalAlign)switch(i.verticalAlign){case"super":i.offsetY-=e.height/2-i.height/2;break;case"sub":i.offsetY+=i.height/2}}))}));var g={left:r?-v:-f,top:0,right:r?f:v,bottom:y};if("none"!==a){var m=this._fitRatio(g);if(m<1)if("fit"==a)(0,p.g)(this.style.minScale)&&m<this.style.minScale?(this.textVisible=!1,g.left=0,g.top=0,g.right=0,g.bottom=0):(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=m,this.textVisible=!0);else if("hide"==a)this.textVisible=!1,g.left=0,g.top=0,g.right=0,g.bottom=0;else{switch(this.style.textAlign){case"right":case"end":g.left=-o,g.right=0;break;case"center":g.left=-o/2,g.right=o/2;break;default:g.left=0,g.right=o}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),n.restore(),g}},{key:"_fitRatio",value:function(e){var t=this.style.maxWidth,i=this.style.maxHeight;if(!(0,p.g)(t)&&!(0,p.g)(i))return 1;var n=e.right-e.left,r=e.bottom-e.top;return Math.min(t/n||1,i/r||1)}},{key:"_truncateText",value:function(e,t,i){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];do{if(r)t=t.slice(0,-1);else{var o=t.replace(/[^,;:!?\\\/\s]+[,;:!?\\\/\s]*$/g,"");if(""==o&&a)r=!0;else{if(""==o)return t;t=o}}var s=this._measureText(t,e);n=s.actualBoundingBoxLeft+s.actualBoundingBoxRight}while(n>i&&""!=t);return t}},{key:"_measureText",value:function(e,t){var i=t.measureText(e),n={};if(null==i.actualBoundingBoxAscent){var r=document.createElement("div");r.innerText=e,r.style.visibility="hidden",r.style.position="absolute",r.style.top="-1000000px;",r.style.fontFamily=this.style.fontFamily||"",r.style.fontSize=this.style.fontSize+"",document.body.appendChild(r);var a=r.getBoundingClientRect();document.body.removeChild(r);var o=a.height,s=i.width;n={actualBoundingBoxAscent:o,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:s,fontBoundingBoxAscent:o,fontBoundingBoxDescent:0,width:s}}else n={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};var l=i.width;switch(this.style.textAlign){case"right":case"end":n.actualBoundingBoxLeft=l,n.actualBoundingBoxRight=0;break;case"center":n.actualBoundingBoxLeft=l/2,n.actualBoundingBoxRight=l/2;break;default:n.actualBoundingBoxLeft=0,n.actualBoundingBoxRight=l}return n}}]),i}(G),be=(0,f.Z)((function e(){(0,d.Z)(this,e),Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:(0,p.R)(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"\u2026"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})})),_e=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(){var e;return(0,d.Z)(this,i),e=t.apply(this,arguments),Object.defineProperty((0,s.Z)(e),"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty((0,s.Z)(e),"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(e),"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(e),"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(e),"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty((0,s.Z)(e),"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(e),"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),e}return(0,f.Z)(i,[{key:"_render",value:function(e){"circular"===this.textType?this._renderCircular(e):(0,l.Z)((0,u.Z)(i.prototype),"_render",this).call(this,e)}},{key:"_renderCircular",value:function(e){if(this.textVisible){var t=this._layer||e;this._prerender(t);var i=this._isInteractive(),n=t.context,r=t.dirty,a=this._renderer._ghostLayer.context;n.save(),i&&a.save(),this._textInfo||this._measure(t);var o=this.radius||0,s=this.startAngle||0,l=0,u=this.orientation,c="auto"==u?"auto":"inward"==u,h=this.inside,d=this.style.textAlign||"left",f=this.kerning||0,v="left"==d?1:-1,y=!this._textReversed;if("auto"==c){var g=0,m=0;(0,p.e)(this._textInfo,(function(e,t){var i=s+e.width/(o-e.height)/2*-v;i>g&&(g=i)})),m="left"==d?(g+l/2)*p.Y:"right"==d?(g-l/2)*p.Y:s*p.Y,m=(0,p.S)(m),c=m>=270||m<=90}1==c&&y&&(this._textInfo.reverse(),this._textReversed=!0),(0,p.e)(this._textInfo,(function(e,t){var u=e.height;h||(o+=u),(-1==v&&c||1==v&&!c)&&y&&e.textChunks.reverse();var g=s;l=0,"center"==d&&(g+=e.width/(o-u)/2*-v,l=g-s),g+=Math.PI*(c?0:1),n.save(),i&&a.save(),n.rotate(g),i&&a.rotate(g);var m=0;(0,p.e)(e.textChunks,(function(e,t){var s=e.text,l=e.width;m=l/2/(o-u)*v,n.rotate(m),i&&a.rotate(m),e.style&&(n.save(),a.save(),n.font=e.style,i&&(a.font=e.style)),e.fill&&(n.save(),n.fillStyle=e.fill.toCSS()),n.textBaseline="middle",n.textAlign="center",i&&(a.textBaseline="middle",a.textAlign="center"),r&&n.fillText(s,0,(c?1:-1)*(0-o+u/2)),i&&a.fillText(s,0,(c?1:-1)*(0-o+u/2)),e.fill&&n.restore(),e.style&&(n.restore(),a.restore()),m=(l/2+f)/(o-u)*v,n.rotate(m),i&&a.rotate(m)})),n.restore(),i&&a.restore(),h&&(o-=u)})),n.restore(),i&&a.restore()}}},{key:"_measure",value:function(e){return"circular"===this.textType?this._measureCircular(e):(0,l.Z)((0,u.Z)(i.prototype),"_measure",this).call(this,e)}},{key:"_measureCircular",value:function(e){var t,i=this,n=e.context,r=this._renderer._ghostLayer.context,a="rtl"==this.style.direction,o=this.style.oversizedBehavior,s=this.style.maxWidth,l=(0,p.g)(s)&&"truncate"==o,u=this.style.ellipsis||"";this.textVisible=!0,this._textInfo=[],this._textReversed=!1,n.save(),r.save(),this._prerender(e,!0);var c=this.text.toString().replace(/\r/g,"").split(/\n/),h=!0,d=0,f=0;return(0,p.e)(c,(function(e,o){var c,v,y,g=p.T.chunk(e,!1,i.style.ignoreFormatting),m={offsetY:f,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};(0,p.e)(g,(function(e,o){if("format"==e.type){if("[/]"==e.text)h||(n.restore(),r.restore(),h=!0),v=void 0,c=void 0,y=void 0;else{var f=p.T.getTextStyle(e.text),g=i._getFontStyle(f);n.save(),r.save(),n.font=g,c=g,f.fill&&(v=f.fill),f.width&&(y=(0,p.u)(f.width)),h=!1}l&&(t=i._measureText(u,n))}else if("value"==e.type){var b=e.text.match(/(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g)||[];a&&b.reverse();for(var _=0;_<b.length;_++){var w=b[_],k=i._measureText(w,n),x=k.width;c&&y&&y>x&&(x=y);var M=k.actualBoundingBoxAscent+k.actualBoundingBoxDescent;if(M>m.height&&(m.height=M),k.actualBoundingBoxAscent>m.ascent&&(m.ascent=k.actualBoundingBoxAscent),m.width+=x,m.left+=k.actualBoundingBoxLeft,m.right+=k.actualBoundingBoxRight,m.textChunks.push({style:c,fill:v,text:w,width:x,height:M+k.actualBoundingBoxDescent,left:k.actualBoundingBoxLeft,right:k.actualBoundingBoxRight,ascent:k.actualBoundingBoxAscent,offsetX:0,offsetY:M,textDecoration:void 0}),d+=x,l){t||(t=i._measureText(u,n));var C=t.actualBoundingBoxLeft+t.actualBoundingBoxRight;if((d+=C)+C>s){1==m.textChunks.length?i.textVisible=!1:(m.width+=C,m.left+=t.actualBoundingBoxLeft,m.right+=t.actualBoundingBoxRight,m.textChunks.push({style:c,fill:v,text:u,width:C,height:M+t.actualBoundingBoxDescent,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight,ascent:t.actualBoundingBoxAscent,offsetX:0,offsetY:M,textDecoration:void 0}));break}}if(a)break}}})),i.style.lineHeight instanceof p.Q?m.height*=i.style.lineHeight.value:m.height*=i.style.lineHeight||1.2,i._textInfo.push(m),f+=m.height})),h||(n.restore(),r.restore()),"hide"==o&&d>s&&(this.textVisible=!1),(0,p.e)(this._textInfo,(function(e){(0,p.e)(e.textChunks,(function(t){t.offsetY+=Math.round((e.height-t.height+(e.ascent-t.ascent))/2)}))})),n.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}]),i}(me),we=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e,n){var r;return(0,d.Z)(this,i),r=t.call(this,e),Object.defineProperty((0,s.Z)(r),"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(r),"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r.image=n,r}return(0,f.Z)(i,[{key:"_dispose",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"_dispose",this).call(this),this._imageMask&&U(this._imageMask)}},{key:"getLocalBounds",value:function(){if(!this._localBounds){var e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}},{key:"_render",value:function(e){if((0,l.Z)((0,u.Z)(i.prototype),"_render",this).call(this,e),this.image){var t=this._layer||e;if(void 0===this.tainted&&(this.tainted=Y(this.image),t.tainted=!0),this.tainted&&this._renderer._omitTainted)return;if(t.dirty){this.shadowColor&&(t.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(t.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(t.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(t.context.shadowOffsetY=this.shadowOffsetY);var n=this.width||this.image.naturalWidth,r=this.height||this.image.naturalHeight;t.context.drawImage(this.image,0,0,n,r)}if(this.interactive&&this._isInteractive()){var a=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(a,0,0)}}}},{key:"clear",value:function(){(0,l.Z)((0,u.Z)(i.prototype),"clear",this).call(this),this.image=void 0,this._imageMask=void 0}},{key:"_getMask",value:function(e){if(void 0===this._imageMask){var t=this.width||e.naturalWidth,i=this.height||e.naturalHeight,n=document.createElement("canvas");n.width=t,n.height=i;var r=n.getContext("2d");r.imageSmoothingEnabled=!1,r.fillStyle=this._getColorId(),r.fillRect(0,0,t,i),Y(e)||(r.globalCompositeOperation="destination-in",r.drawImage(e,0,0,t,i)),this._imageMask=n}return this._imageMask}}]),i}(G),ke=(0,f.Z)((function e(t,i,n,r){(0,d.Z)(this,e),Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),(0,p.y)("touchevents")&&t instanceof Touch?this.id=t.identifier:this.id=null})),xe=function(e){(0,c.Z)(i,e);var t=(0,h.Z)(i);function i(e){var n;if((0,d.Z)(this,i),n=t.call(this),Object.defineProperty((0,s.Z)(n),"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty((0,s.Z)(n),"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty((0,s.Z)(n),"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,s.Z)(n),"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,s.Z)(n),"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:n.getLayer(0)}),Object.defineProperty((0,s.Z)(n),"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new Me}),Object.defineProperty((0,s.Z)(n),"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty((0,s.Z)(n),"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:n._patternCanvas.getContext("2d")}),Object.defineProperty((0,s.Z)(n),"_domWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"_domHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"_canvasWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"_canvasHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty((0,s.Z)(n),"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,s.Z)(n),"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,s.Z)(n),"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty((0,s.Z)(n),"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty((0,s.Z)(n),"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty((0,s.Z)(n),"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,s.Z)(n),"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty((0,s.Z)(n),"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty((0,s.Z)(n),"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty((0,s.Z)(n),"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty((0,s.Z)(n),"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n.resolution=null!==e&&void 0!==e?e:window.devicePixelRatio,n.view.style.position="absolute",n.view.appendChild(n._layerDom),n._disposers.push(new p.D((function(){(0,p.f)(n._events,(function(e,t){t.disposer.dispose()})),(0,p.e)(n.layers,(function(e){U(e.view),e.exportableView&&U(e.exportableView)})),U(n._ghostLayer.view),U(n._patternCanvas)}))),n._disposers.push((0,p.o)((function(){null==e&&(n.resolution=window.devicePixelRatio)}))),(0,p.y)("touchevents")){var r=function(e){0!==n._dragging.length&&(0,p.O)(n._dragging,(function(t){return!t.value.shouldCancelTouch()||(e.preventDefault(),!1)})),n._touchActiveTimeout&&n._delayTouchDeactivate()};n._disposers.push((0,p.z)(window,"touchstart",r,{passive:!1})),n._disposers.push((0,p.z)(n.view,"touchstart",r,{passive:!1})),n._disposers.push((0,p.z)(n.view,"touchmove",(function(){n._touchActiveTimeout&&n._delayTouchDeactivate()}),{passive:!0})),n._disposers.push((0,p.z)(window,"click",(function(e){n._touchActive=!1}),{passive:!0})),n._disposers.push((0,p.z)(n.view,"click",(function(e){window.setTimeout((function(){n._touchActive=!0,n._delayTouchDeactivate()}),100)}),{passive:!0}))}return(0,p.y)("wheelevents")&&n._disposers.push((0,p.z)(n.view,"wheel",(function(e){var t=!1;n._hovering.forEach((function(e){if(e.wheelable)return t=!0,!1})),t&&e.preventDefault()}),{passive:!1})),(0,o.Z)(n)}return(0,f.Z)(i,[{key:"_delayTouchDeactivate",value:function(){var e=this;this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout((function(){e._touchActive=!1}),this.tapToActivateTimeout))}},{key:"debugGhostView",get:function(){return!!this._ghostLayer.view.parentNode},set:function(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}},{key:"createLinearGradient",value:function(e,t,i,n){return this.defaultLayer.context.createLinearGradient(e,t,i,n)}},{key:"createRadialGradient",value:function(e,t,i,n,r,a){return this.defaultLayer.context.createRadialGradient(e,t,i,n,r,a)}},{key:"createPattern",value:function(e,t,i,n,r){return this._patternCanvas.width=n,this._patternCanvas.height=r,this._patternContext.clearRect(0,0,n,r),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}},{key:"makeContainer",value:function(){return new X(this)}},{key:"makeGraphics",value:function(){return new ge(this)}},{key:"makeText",value:function(e,t){return new me(this,e,t)}},{key:"makeTextStyle",value:function(){return new be}},{key:"makeRadialText",value:function(e,t){return new _e(this,e,t)}},{key:"makePicture",value:function(e){return new we(this,e)}},{key:"resizeLayer",value:function(e){e.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}},{key:"resizeGhost",value:function(){this._ghostLayer.resize(this._canvasWidth,this._canvasHeight,this._domWidth,this._domHeight,this.resolution)}},{key:"resize",value:function(e,t,i,n){var r=this;this._canvasWidth=e,this._canvasHeight=t,this._domWidth=i,this._domHeight=n,(0,p.e)(this.layers,(function(e){e&&(e.dirty=!0,r.resizeLayer(e))})),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=n+"px"}},{key:"createDetachedLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:e}),n=new Ce(t,i);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",n}},{key:"getLayerByOrder",value:function(e){for(var t=this.layers,i=t.length,n=0;n<i;n++){var r=t[n];if(r.order==e)return r}}},{key:"getLayer",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getLayerByOrder(e);if(i)return i;var n=this.createDetachedLayer(99==e);n.order=e,n.visible=t,n.visible&&this.resizeLayer(n);var r=this.layers;r.push(n),r.sort((function(e,t){return e.order>t.order?1:e.order<t.order?-1:0}));for(var a,o=r.length,s=(0,p.B)(r,n)+1;s<o;s++)if(r[s].visible){a=r[s];break}return n.visible&&(void 0===a?this._layerDom.appendChild(n.view):this._layerDom.insertBefore(n.view,a.view)),n}},{key:"render",value:function(e){var t=this;if(this._dirtyLayers.length=0,(0,p.e)(this.layers,(function(e){e&&e.dirty&&e.visible&&(t._dirtyLayers.push(e),e.clear())})),this._ghostLayer.clear(),e.render(this.defaultLayer),this._ghostLayer.context.restore(),(0,p.e)(this.layers,(function(e){if(e){var t=e.context;t.beginPath(),t.moveTo(0,0),t.stroke()}})),(0,p.e)(this._dirtyLayers,(function(e){e.context.restore(),e.dirty=!1})),this._hovering.size&&this._lastPointerMoveEvent){var i=this._lastPointerMoveEvent,n=i.events,r=i.target,a=i.native;(0,p.e)(n,(function(e){t._dispatchGlobalMousemove(e,r,a)}))}}},{key:"paintId",value:function(e){var t=function(e){for(var t=[0,0,0],i=0;i<24;i++)t[i%3]<<=1,t[i%3]|=1&e,e>>=1;return(0|t[2])+(t[1]<<8)+(t[0]<<16)}(++this._colorId),i=p.C.fromHex(t).toCSS();return this._colorMap[i]=e,i}},{key:"_removeObject",value:function(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}},{key:"_adjustBoundingBox",value:function(e){var t=this._ghostLayer.margin;return new DOMRect(e.left-t.left,e.top-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}},{key:"getEvent",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.view.getBoundingClientRect(),n={x:e.clientX||0,y:e.clientY||0},r={x:n.x-(t?i.left:0),y:n.y-(t?i.top:0)};return new ke(e,n,r,this._adjustBoundingBox(i))}},{key:"_getHitTarget",value:function(e,t,i){if(!(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom)&&i&&this._layerDom.contains(i)){var n=this._ghostLayer.getImageData(e,t);if(0===n.data[0]&&0===n.data[1]&&0===n.data[2])return!1;var r=p.C.fromRGB(n.data[0],n.data[1],n.data[2]).toCSS();return this._colorMap[r]}}},{key:"_withEvents",value:function(e,t){var i=this._events[e];if(void 0!==i){i.dispatching=!0;try{t(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,(0,p.k)(i.callbacks,(function(e){return!e.disposed})),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[e]))}}}},{key:"_dispatchEventAll",value:function(e,t){this.interactionsEnabled&&this._withEvents(e,(function(e){(0,p.e)(e.callbacks,(function(e){e.disposed||e.callback.call(e.context,t)}))}))}},{key:"_dispatchEvent",value:function(e,t,i){if(!this.interactionsEnabled)return!1;var n=!1;return this._withEvents(e,(function(e){(0,p.e)(e.callbacks,(function(e){e.disposed||e.object!==t||(e.callback.call(e.context,i),n=!0)}))})),n}},{key:"_dispatchMousedown",value:function(e,t){var i=this,n=e.button;if(0==n||2==n||1==n||void 0===n){var r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);if(a){var o=r.id,s=!1;V(a,(function(e){var t={id:o,value:e};return i._mousedown.push(t),!s&&i._dispatchEvent("pointerdown",e,r)&&(s=!0,i._dragging.some((function(t){return t.value===e&&t.id===o}))||i._dragging.push(t)),!0}))}}}},{key:"_dispatchGlobalMousemove",value:function(e,t,i){var n=this,r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);r.native=i,a?(this._hovering.forEach((function(e){e.contains(a)||(n._hovering.delete(e),e.cursorOverStyle&&(0,p.F)(document.body,"cursor",e._replacedCursorStyle),n._dispatchEvent("pointerout",e,r))})),r.native&&V(a,(function(e){return n._hovering.has(e)||(n._hovering.add(e),e.cursorOverStyle&&(e._replacedCursorStyle=(0,p.U)(document.body,"cursor"),(0,p.F)(document.body,"cursor",e.cursorOverStyle)),n._dispatchEvent("pointerover",e,r)),!0}))):(this._hovering.forEach((function(e){e.cursorOverStyle&&(0,p.F)(document.body,"cursor",e._replacedCursorStyle),n._dispatchEvent("pointerout",e,r)})),this._hovering.clear()),this._dispatchEventAll("globalpointermove",r)}},{key:"_dispatchGlobalMouseup",value:function(e,t){var i=this.getEvent(e);i.native=t,this._dispatchEventAll("globalpointerup",i)}},{key:"_dispatchDragMove",value:function(e){var t=this;if(0!==this._dragging.length){var i=this.getEvent(e),n=i.id;this._dragging.forEach((function(e){e.id===n&&t._dispatchEvent("pointermove",e.value,i)}))}}},{key:"_dispatchDragEnd",value:function(e,t){var i,n=this,r=e.button;if(0==r||void 0===r)i="click";else if(2==r)i="rightclick";else{if(1!=r)return;i="middleclick"}var a=this.getEvent(e),o=a.id;if(0!==this._mousedown.length){var s=this._getHitTarget(a.originalPoint,a.bbox,t);s&&this._mousedown.forEach((function(e){e.id===o&&e.value.contains(s)&&n._dispatchEvent(i,e.value,a)})),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach((function(e){e.id===o&&n._dispatchEvent("pointerup",e.value,a)})),this._dragging.length=0)}},{key:"_dispatchDoubleClick",value:function(e,t){var i=this,n=this.getEvent(e),r=this._getHitTarget(n.originalPoint,n.bbox,t);r&&V(r,(function(e){return!i._dispatchEvent("dblclick",e,n)}))}},{key:"_dispatchWheel",value:function(e,t){var i=this,n=this.getEvent(e),r=this._getHitTarget(n.originalPoint,n.bbox,t);r&&V(r,(function(e){return!i._dispatchEvent("wheel",e,n)}))}},{key:"_makeSharedEvent",value:function(e,t){var i=this;if(void 0===this._listeners[e]){var n=t();this._listeners[e]=new p.G((function(){delete i._listeners[e],n.dispose()}))}return this._listeners[e].increment()}},{key:"_onPointerEvent",value:function(e,t){var i=!1,n=null;function r(){n=null,i=!1}return new p.M([new p.D((function(){null!==n&&clearTimeout(n),r()})),(0,p.z)(this.view,(0,p.H)(e),(function(e){i=!0,null!==n&&clearTimeout(n),n=window.setTimeout(r,0)})),W(window,e,(function(e,r){null!==n&&(clearTimeout(n),n=null),t(e,r,i),i=!1}))])}},{key:"_initEvent",value:function(e){var t=this;switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",(function(){var e=function(e,i,n){t._lastPointerMoveEvent={events:e,target:i,native:n},(0,p.e)(e,(function(e){t._dispatchGlobalMousemove(e,i,n)}))};return new p.M([t._onPointerEvent("pointerdown",e),t._onPointerEvent("pointermove",e)])}));case"globalpointerup":return this._makeSharedEvent("pointerup",(function(){var e=t._onPointerEvent("pointerup",(function(e,i,n){(0,p.e)(e,(function(e){t._dispatchGlobalMouseup(e,n)})),t._lastPointerMoveEvent={events:e,target:i,native:n}})),i=t._onPointerEvent("pointercancel",(function(e,i,n){(0,p.e)(e,(function(e){t._dispatchGlobalMouseup(e,n)})),t._lastPointerMoveEvent={events:e,target:i,native:n}}));return new p.D((function(){e.dispose(),i.dispose()}))}));case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",(function(){var e=t._onPointerEvent("pointerdown",(function(e,i){(0,p.e)(e,(function(e){t._dispatchMousedown(e,i)}))})),i=t._onPointerEvent("pointermove",(function(e){(0,p.e)(e,(function(e){t._dispatchDragMove(e)}))})),n=t._onPointerEvent("pointerup",(function(e,i){(0,p.e)(e,(function(e){t._dispatchDragEnd(e,i)}))})),r=t._onPointerEvent("pointercancel",(function(e,i){(0,p.e)(e,(function(e){t._dispatchDragEnd(e,i)}))}));return new p.D((function(){e.dispose(),i.dispose(),n.dispose(),r.dispose()}))}));case"dblclick":return this._makeSharedEvent("dblclick",(function(){return t._onPointerEvent("dblclick",(function(e,i){(0,p.e)(e,(function(e){t._dispatchDoubleClick(e,i)}))}))}));case"wheel":return this._makeSharedEvent("wheel",(function(){return(0,p.z)(window,(0,p.H)("wheel"),(function(e){t._dispatchWheel(e,(0,p.I)(e))}),{passive:!1})}))}}},{key:"_addEvent",value:function(e,t,i,n){var r=this,a=this._events[t];void 0===a&&(a=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});var o={object:e,context:n,callback:i,disposed:!1};return a.callbacks.push(o),new p.D((function(){o.disposed=!0,a.dispatching?a.cleanup=!0:((0,p.J)(a.callbacks,o),0===a.callbacks.length&&(a.disposer.dispose(),delete r._events[t]))}))}},{key:"getCanvas",value:function(e,t){var i=this;this.render(e),t||(t={});var n=this.resolution,r=Math.floor(this._canvasWidth*this.resolution),a=Math.floor(this._canvasHeight*this.resolution);if(t.minWidth&&t.minWidth>r){var o=t.minWidth/r;o>n&&(n=o*this.resolution)}if(t.minHeight&&t.minHeight>a){var s=t.minHeight/a;s>n&&(n=s*this.resolution)}if(t.maxWidth&&t.maxWidth<r){var l=t.maxWidth/r;l<n&&(n=l*this.resolution)}if(t.maxHeight&&t.maxHeight>a){var u=t.maxHeight/a;u<n&&(n=u*this.resolution)}t.maintainPixelRatio&&(n/=this.resolution);var c=[],h=!1,d=document.createElement("canvas");n!=this.resolution&&(h=!0,r=r*n/this.resolution,a=a*n/this.resolution),d.width=r,d.height=a,d.style.position="fixed",d.style.top="-10000px",this.view.appendChild(d),c.push(d);var f=d.getContext("2d"),v=0,y=0,g=!1;return(0,p.e)(this.layers,(function(e){if(e&&e.visible&&(e.tainted||h)){g=!0,e.exportableView=e.view,e.exportableContext=e.context,e.view=document.createElement("canvas"),e.view.style.position="fixed",e.view.style.top="-10000px",i.view.appendChild(e.view),c.push(e.view);var t=0,o=0;e.margin&&(t+=e.margin.left||0+e.margin.right||0,o+=e.margin.top||0+e.margin.bottom||0),e.view.width=r+t,e.view.height=a+o,e.context=e.view.getContext("2d"),e.dirty=!0,e.scale=n}})),g&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),(0,p.e)(this.layers,(function(e){if(e&&e.visible){var t=0,n=0;e.margin&&(t=-(e.margin.left||0)*i.resolution,n=-(e.margin.top||0)*i.resolution),f.drawImage(e.view,t,n),e.exportableView&&(e.view=e.exportableView,e.exportableView=void 0),e.exportableContext&&(e.context=e.exportableContext,e.exportableContext=void 0),v<e.view.clientWidth&&(v=e.view.clientWidth),y<e.view.clientHeight&&(y=e.view.clientHeight),e.scale=void 0}})),d.style.width=v+"px",d.style.height=y+"px",(0,p.e)(c,(function(e){e.style.position="",e.style.top="",i.view.removeChild(e)})),d}}]),i}(p.A),Me=function(){function e(){(0,d.Z)(this,e),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}return(0,f.Z)(e,[{key:"resize",value:function(e,t,i,n,r){e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*r),this._height=Math.floor(t*r),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=n+"px"}},{key:"getImageData",value:function(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}},{key:"setMargin",value:function(e){var t=this;this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,(0,p.e)(e,(function(e){e.margin&&(t.margin.left=Math.max(t.margin.left,e.margin.left),t.margin.right=Math.max(t.margin.right,e.margin.right),t.margin.top=Math.max(t.margin.top,e.margin.top),t.margin.bottom=Math.max(t.margin.bottom,e.margin.bottom))}))}},{key:"clear",value:function(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}]),e}(),Ce=function(){function e(t,i){(0,d.Z)(this,e),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=t,this.context=i}return(0,f.Z)(e,[{key:"resize",value:function(e,t,i,n,r){null!=this.width&&(e=this.width,i=this.width),null!=this.height&&(t=this.height,n=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,n+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*r),this._height=Math.floor(t*r),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=n+"px"}},{key:"clear",value:function(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}]),e}();function Ze(e,t){null==e?requestAnimationFrame(t):setTimeout((function(){requestAnimationFrame(t)}),1e3/e)}var Pe=function(){function e(t){var i,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if((0,d.Z)(this,e),Object.defineProperty(this,"dom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_inner",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_isDirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_dirty",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyParents",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyBounds",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_dirtyPositions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_ticker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_tickers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_updateTick",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new p._}),Object.defineProperty(this,"animationTime",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_animations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rootContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tooltipContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipContainerSettings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltip",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"language",{enumerable:!0,configurable:!0,writable:!0,value:I.new(this,{})}),Object.defineProperty(this,"locale",{enumerable:!0,configurable:!0,writable:!0,value:T}),Object.defineProperty(this,"utc",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timezone",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"numberFormatter",{enumerable:!0,configurable:!0,writable:!0,value:x.new(this,{})}),Object.defineProperty(this,"dateFormatter",{enumerable:!0,configurable:!0,writable:!0,value:P.new(this,{})}),Object.defineProperty(this,"durationFormatter",{enumerable:!0,configurable:!0,writable:!0,value:A.new(this,{})}),Object.defineProperty(this,"tabindex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_tabindexes",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_a11yD",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_focusElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_focusedSprite",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isShift",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_keyboardDragPoint",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_readerAlertElement",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_logo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltipDiv",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nonce",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interfaceColors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"verticalLayout",{enumerable:!0,configurable:!0,writable:!0,value:p.$.new(this,{})}),Object.defineProperty(this,"horizontalLayout",{enumerable:!0,configurable:!0,writable:!0,value:p.a0.new(this,{})}),Object.defineProperty(this,"gridLayout",{enumerable:!0,configurable:!0,writable:!0,value:p.a1.new(this,{})}),Object.defineProperty(this,"_paused",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"autoResize",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_fontHash",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"_isDisposed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_disposers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_resizeSensorDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tooltips",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_htmlElementContainer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_htmlEnabledContainers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),!a)throw new Error("You cannot use `new Class()`, instead use `Class.new()`");if(this._settings=r,0==r.accessible&&(this._a11yD=!0),null==r.useSafeResolution&&(r.useSafeResolution=!0),r.useSafeResolution&&(i=(0,p.ah)()),this._renderer=new xe(i),n=t instanceof HTMLElement?t:document.getElementById(t),(0,p.e)(p.a2.rootElements,(function(e){if(e.dom===n)throw new Error("You cannot have multiple Roots on the same DOM node")})),this.interfaceColors=k.new(this,{}),null===n)throw new Error("Could not find HTML element with id `"+t+"`");this.dom=n;var o=document.createElement("div");o.style.position="relative",o.style.height="100%",n.appendChild(o);var s=r.tooltipContainerBounds;s&&(this._tooltipContainerSettings=s),this._inner=o,this._updateComputedStyles(),p.a2.rootElements.push(this)}return(0,f.Z)(e,[{key:"moveDOM",value:function(e){var t;if(t=e instanceof HTMLElement?e:document.getElementById(e)){for(;this.dom.childNodes.length>0;)t.appendChild(this.dom.childNodes[0]);this.dom=t,this._initResizeSensor(),this.resize()}}},{key:"_handleLogo",value:function(){if(this._logo){var e=this.dom.offsetWidth,t=this.dom.offsetHeight;e<=150||t<=60?this._logo.hide():this._logo.show()}}},{key:"_showBranding",value:function(){if(!this._logo){var e=this.tooltipContainer.children.push(p.a3.new(this,{interactive:!0,interactiveChildren:!1,position:"absolute",setStateOnChildren:!0,paddingTop:9,paddingRight:9,paddingBottom:9,paddingLeft:9,scale:.6,y:(0,p.R)(100),centerY:p.a4,tooltipText:"Created using amCharts 5",tooltipX:p.a4,cursorOverStyle:"pointer",background:p.a5.new(this,{fill:(0,p.a6)(4671320),fillOpacity:0,tooltipY:5})})),t=v.T.new(this,{pointerOrientation:"horizontal",paddingTop:4,paddingRight:7,paddingBottom:4,paddingLeft:7});t.label.setAll({fontSize:12}),t.get("background").setAll({fill:this.interfaceColors.get("background"),stroke:this.interfaceColors.get("grid"),strokeOpacity:.3}),e.set("tooltip",t),e.events.on("click",(function(){window.open("https://www.amcharts.com/","_blank")})),e.states.create("hover",{}),e.children.push(p.a7.new(this,{stroke:(0,p.a6)(13421772),strokeWidth:3,svgPath:"M5 25 L13 25h13.6c3.4 0 6 0 10.3-4.3s5.2-12 8.6-12c3.4 0 4.3 8.6 7.7 8.6M83.4 25H79.8c-3.4 0-6 0-10.3-4.3s-5.2-12-8.6-12-4.3 8.6-7.7 8.6"})).states.create("hover",{stroke:(0,p.a6)(3976191)}),e.children.push(p.a7.new(this,{stroke:(0,p.a6)(8947848),strokeWidth:3,svgPath:"M83.4 25h-31C37 25 39.5 4.4 28.4 4.4S18.9 24.2 4.3 25H0"})).states.create("hover",{stroke:(0,p.a6)(4671320)}),this._logo=e,this._handleLogo()}}},{key:"_getRealSize",value:function(){return this.dom.getBoundingClientRect()}},{key:"_getCalculatedSize",value:function(e){return this._settings.calculateSize?this._settings.calculateSize(e):{width:e.width,height:e.height}}},{key:"_init",value:function(){var e=this,t=this._renderer,i=this._getRealSize(),n=this._getCalculatedSize(i),r=Math.floor(n.width),a=Math.floor(n.height),o=Math.floor(i.width),s=Math.floor(i.height),l=p.a3.new(this,{visible:!0,width:o,height:s});this._rootContainer=l,this._rootContainer._defaultThemes.push(y.D.new(this));var u=l.children.push(p.a3.new(this,{visible:!0,width:p.a4,height:p.a4}));this.container=u,t.resize(o,s,r,a),this._inner.appendChild(t.view),this._initResizeSensor();var c=document.createElement("div");if(this._htmlElementContainer=c,c.className="am5-html-container",c.style.position="absolute",c.style.pointerEvents="none",this._tooltipContainerSettings||(c.style.overflow="hidden"),this._inner.appendChild(c),!0!==this._a11yD){var h=document.createElement("div");h.className="am5-reader-container",h.setAttribute("role","alert"),h.style.position="absolute",h.style.width="1px",h.style.height="1px",h.style.overflow="hidden",h.style.clip="rect(1px, 1px, 1px, 1px)",this._readerAlertElement=h,this._inner.appendChild(this._readerAlertElement);var d=document.createElement("div");d.className="am5-focus-container",d.style.position="absolute",d.style.pointerEvents="none",d.style.top="0px",d.style.left="0px",d.style.overflow="hidden",d.style.width=r+"px",d.style.height=a+"px",d.setAttribute("role","application"),(0,p.W)(d,!1),this._focusElementContainer=d,this._inner.appendChild(this._focusElementContainer);var f=document.createElement("div");this._tooltipElementContainer=f,f.className="am5-tooltip-container",this._inner.appendChild(f),(0,p.y)("keyboardevents")&&(this._disposers.push((0,p.z)(window,"keydown",(function(t){16==t.keyCode?e._isShift=!0:9==t.keyCode&&(e._isShift=t.shiftKey)}))),this._disposers.push((0,p.z)(window,"keyup",(function(t){16==t.keyCode&&(e._isShift=!1)}))),this._disposers.push((0,p.z)(d,"keydown",(function(i){var n=e._focusedSprite;if(n){27==i.keyCode&&((0,p.a8)(),e._focusedSprite=void 0);var r=0,a=0;switch(i.keyCode){case 13:i.preventDefault();var o=t.getEvent(new MouseEvent("click"));return void n.events.dispatch("click",{type:"click",originalEvent:o.event,point:o.point,simulated:!0,target:n});case 37:r=-6;break;case 39:r=6;break;case 38:a=-6;break;case 40:a=6;break;default:return}if(0!=r||0!=a){if(i.preventDefault(),!n.isDragging()){e._keyboardDragPoint={x:0,y:0};var s=t.getEvent(new MouseEvent("mousedown",{clientX:0,clientY:0}));n.events.isEnabled("pointerdown")&&n.events.dispatch("pointerdown",{type:"pointerdown",originalEvent:s.event,point:s.point,simulated:!0,target:n})}var l=e._keyboardDragPoint;l.x+=r,l.y+=a;var u=t.getEvent(new MouseEvent("mousemove",{clientX:l.x,clientY:l.y}),!1);n.events.isEnabled("globalpointermove")&&n.events.dispatch("globalpointermove",{type:"globalpointermove",originalEvent:u.event,point:u.point,simulated:!0,target:n})}}}))),this._disposers.push((0,p.z)(d,"keyup",(function(i){if(e._focusedSprite){var n=e._focusedSprite,r=i.keyCode;switch(r){case 37:case 39:case 38:case 40:if(n.isDragging()){var a=e._keyboardDragPoint,o=t.getEvent(new MouseEvent("mouseup",{clientX:a.x,clientY:a.y}));return n.events.isEnabled("globalpointerup")&&n.events.dispatch("globalpointerup",{type:"globalpointerup",originalEvent:o.event,point:o.point,simulated:!0,target:n}),void(e._keyboardDragPoint=void 0)}if(n.get("focusableGroup")){var s=n.get("focusableGroup"),l=e._tabindexes.filter((function(e){return e.get("focusableGroup")==s})),u=l.indexOf(n),c=l.length-1;(u+=39==r||40==r?1:-1)<0?u=c:u>c&&(u=0),(0,p.a9)(l[u].getPrivate("focusElement").dom)}}}}))))}this._startTicker(),this.setThemes([]),this._addTooltip(),this._hasLicense()||this._showBranding()}},{key:"_initResizeSensor",value:function(){var e=this;this._resizeSensorDisposer&&this._resizeSensorDisposer.dispose(),this._resizeSensorDisposer=new w(this.dom,(function(){e.autoResize&&e.resize()})),this._disposers.push(this._resizeSensorDisposer)}},{key:"resize",value:function(){var e=this._getRealSize(),t=this._getCalculatedSize(e),i=Math.floor(t.width),n=Math.floor(t.height);if(i>0&&n>0){var r=Math.floor(e.width),a=Math.floor(e.height),o=this._htmlElementContainer;if(o.style.width=i+"px",o.style.height=n+"px",!0!==this._a11yD){var s=this._focusElementContainer;s.style.width=i+"px",s.style.height=n+"px"}this._renderer.resize(r,a,i,n);var l=this._rootContainer;l.setPrivate("width",r),l.setPrivate("height",a),this._render(),this._handleLogo()}}},{key:"_render",value:function(){this._renderer.render(this._rootContainer._display),this._focusElementDirty&&(this._updateCurrentFocus(),this._focusElementDirty=!1)}},{key:"_runTickers",value:function(e){(0,p.e)(this._tickers,(function(t){t(e)}))}},{key:"_runAnimations",value:function(e){(0,p.k)(this._animations,(function(t){return t._runAnimation(e)}))}},{key:"_runDirties",value:function(){for(var e=this,t={};this._isDirtyParents;)this._isDirtyParents=!1,(0,p.aa)(this._dirtyParents).forEach((function(i){var n=e._dirtyParents[i];delete e._dirtyParents[i],n.isDisposed()||(t[n.uid]=n,n._prepareChildren())}));(0,p.aa)(t).forEach((function(e){t[e]._updateChildren()}));var i=[];(0,p.aa)(this._dirty).forEach((function(t){var n=e._dirty[t];n.isDisposed()?delete e._dirty[n.uid]:(i.push(n),n._beforeChanged())})),i.forEach((function(t){t._changed(),delete e._dirty[t.uid],t._clearDirty()})),this._isDirty=!1;var n={},r=[];(0,p.aa)(this._dirtyBounds).forEach((function(t){var i=e._dirtyBounds[t];delete e._dirtyBounds[t],i.isDisposed()||(n[i.uid]=i.depth(),r.push(i))})),this._positionHTMLElements(),r.sort((function(e,t){return(0,p.ab)(n[t.uid],n[e.uid])})),r.forEach((function(e){e._updateBounds()}));var a=this._dirtyPositions;(0,p.aa)(a).forEach((function(e){var t=a[e];delete a[e],t.isDisposed()||t._updatePosition()})),i.forEach((function(e){e._afterChanged()}))}},{key:"_renderFrame",value:function(e){return!this._updateTick||(this.events.isEnabled("framestarted")&&this.events.dispatch("framestarted",{type:"framestarted",target:this,timestamp:e}),this._checkComputedStyles(),this._runTickers(e),this._runAnimations(e),this._runDirties(),this._render(),this._positionHTMLElements(),this.events.isEnabled("frameended")&&this.events.dispatch("frameended",{type:"frameended",target:this,timestamp:e}),0===this._tickers.length&&0===this._animations.length&&!this._isDirty)}},{key:"_runTicker",value:function(e,t){this.isDisposed()||(this.animationTime=e,this._renderFrame(e)?(this._ticker=null,this.animationTime=null):this._paused||(t?this._ticker:Ze(this.fps,this._ticker)))}},{key:"_runTickerNow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;if(!this.isDisposed())for(var t=performance.now()+e;;){var i=performance.now();if(i>=t){this.animationTime=null;break}if(this.animationTime=i,this._renderFrame(i)){this.animationTime=null;break}}}},{key:"_startTicker",value:function(){var e=this;null===this._ticker&&(this.animationTime=null,this._ticker=function(t){e._runTicker(t)},Ze(this.fps,this._ticker))}},{key:"updateTick",get:function(){return this._updateTick},set:function(e){this._updateTick=e,e&&this._startTicker()}},{key:"_addDirtyEntity",value:function(e){void 0===this._dirty[e.uid]&&(this._isDirty=!0,this._dirty[e.uid]=e,this._startTicker())}},{key:"_addDirtyParent",value:function(e){void 0===this._dirtyParents[e.uid]&&(this._isDirty=!0,this._isDirtyParents=!0,this._dirtyParents[e.uid]=e,this._startTicker())}},{key:"_addDirtyBounds",value:function(e){void 0===this._dirtyBounds[e.uid]&&(this._isDirty=!0,this._dirtyBounds[e.uid]=e,this._startTicker())}},{key:"_addDirtyPosition",value:function(e){void 0===this._dirtyPositions[e.uid]&&(this._isDirty=!0,this._dirtyPositions[e.uid]=e,this._startTicker())}},{key:"_addAnimation",value:function(e){-1===this._animations.indexOf(e)&&(this._animations.push(e),this._startTicker())}},{key:"_markDirty",value:function(){this._isDirty=!0}},{key:"_markDirtyRedraw",value:function(){var e=this;this.events.once("frameended",(function(){e._isDirty=!0,e._startTicker()}))}},{key:"eachFrame",value:function(e){var t=this;return this._tickers.push(e),this._startTicker(),new p.D((function(){(0,p.J)(t._tickers,e)}))}},{key:"markDirtyGlobal",value:function(e){var t=this;e||(e=this.container),e.walkChildren((function(e){e instanceof p.a3&&t.markDirtyGlobal(e),e.markDirty(),e.markDirtyBounds()}))}},{key:"width",value:function(){return Math.floor(this._getCalculatedSize(this._getRealSize()).width)}},{key:"height",value:function(){return Math.floor(this._getCalculatedSize(this._getRealSize()).height)}},{key:"dispose",value:function(){this._isDisposed||(this._isDisposed=!0,this._rootContainer.dispose(),this._renderer.dispose(),this.horizontalLayout.dispose(),this.verticalLayout.dispose(),this.interfaceColors.dispose(),(0,p.e)(this._disposers,(function(e){e.dispose()})),this._inner&&(0,p.ac)(this._inner),(0,p.ad)(p.a2.rootElements,this))}},{key:"isDisposed",value:function(){return this._isDisposed}},{key:"readerAlert",value:function(e){!0!==this._a11yD&&(this._readerAlertElement.innerHTML=(0,p.ae)(e))}},{key:"setThemes",value:function(e){this._rootContainer.set("themes",e);var t=this.tooltipContainer;t&&t._applyThemes();var i=this.interfaceColors;i&&i._applyThemes()}},{key:"_addTooltip",value:function(){if(!this.tooltipContainer){var e=this._tooltipContainerSettings,t=this._rootContainer.children.push(p.a3.new(this,{position:"absolute",isMeasured:!1,width:p.a4,height:p.a4,layer:e?35:30,layerMargin:e||void 0}));this.tooltipContainer=t;var i=v.T.new(this,{});this.container.set("tooltip",i),i.hide(0),this._tooltip=i}}},{key:"_registerTabindexOrder",value:function(e){1!=this._a11yD&&(e.get("focusable")?(0,p.L)(this._tabindexes,e):(0,p.ad)(this._tabindexes,e),this._invalidateTabindexes())}},{key:"_unregisterTabindexOrder",value:function(e){1!=this._a11yD&&((0,p.ad)(this._tabindexes,e),this._invalidateTabindexes())}},{key:"_invalidateTabindexes",value:function(){var e=this;if(1!=this._a11yD){this._tabindexes.sort((function(e,t){var i=e.get("tabindexOrder",0),n=t.get("tabindexOrder",0);return i==n?0:i>n?1:-1}));var t=[];(0,p.e)(this._tabindexes,(function(i,n){i.getPrivate("focusElement")?e._moveFocusElement(n,i):e._makeFocusElement(n,i);var r=i.get("focusableGroup");r&&(-1!==t.indexOf(r)?i.getPrivate("focusElement").dom.setAttribute("tabindex","-1"):t.push(r))}))}}},{key:"_updateCurrentFocus",value:function(){1!=this._a11yD&&this._focusedSprite&&(this._decorateFocusElement(this._focusedSprite),this._positionFocusElement(this._focusedSprite))}},{key:"_decorateFocusElement",value:function(e,t){if(1!=this._a11yD&&(t||(t=e.getPrivate("focusElement").dom),t)){e.get("visible")&&"tooltip"!=e.get("role")&&!e.isHidden()?"-1"!=t.getAttribute("tabindex")&&t.setAttribute("tabindex",""+this.tabindex):t.removeAttribute("tabindex");var i=e.get("role");i?t.setAttribute("role",i):t.removeAttribute("role");var n=e.get("ariaLabel");if(n){var r=(0,p.af)(e,n);t.setAttribute("aria-label",r)}else t.removeAttribute("aria-label");var a=e.get("ariaLive");a?t.setAttribute("aria-live",a):t.removeAttribute("aria-live");var o=e.get("ariaChecked");null!=o?t.setAttribute("aria-checked",o?"true":"false"):t.removeAttribute("aria-checked"),e.get("ariaHidden")?t.setAttribute("aria-hidden","hidden"):t.removeAttribute("aria-hidden");var s=e.get("ariaOrientation");s?t.setAttribute("aria-orientation",s):t.removeAttribute("aria-orientation");var l=e.get("ariaValueNow");l?t.setAttribute("aria-valuenow",l):t.removeAttribute("aria-valuenow");var u=e.get("ariaValueMin");u?t.setAttribute("aria-valuemin",u):t.removeAttribute("aria-valuemin");var c=e.get("ariaValueMax");c?t.setAttribute("aria-valuemax",c):t.removeAttribute("aria-valuemax");var h=e.get("ariaValueText");h?t.setAttribute("aria-valuetext",h):t.removeAttribute("aria-valuetext");var d=e.get("ariaControls");d?t.setAttribute("aria-controls",d):t.removeAttribute("aria-controls")}}},{key:"_makeFocusElement",value:function(e,t){var i=this;if(!t.getPrivate("focusElement")&&1!=this._a11yD){var n=document.createElement("div");"tooltip"!=t.get("role")&&(n.tabIndex=this.tabindex),n.style.position="absolute",(0,p.W)(n,!1);var r=[];t.setPrivate("focusElement",{dom:n,disposers:r}),this._decorateFocusElement(t),r.push((0,p.z)(n,"focus",(function(t){i._handleFocus(t,e)}))),r.push((0,p.z)(n,"blur",(function(t){i._handleBlur(t,e)}))),this._moveFocusElement(e,t)}}},{key:"_removeFocusElement",value:function(e){if(1!=this._a11yD){(0,p.ad)(this._tabindexes,e);var t=e.getPrivate("focusElement");t&&(this._focusElementContainer.removeChild(t.dom),(0,p.e)(t.disposers,(function(e){e.dispose()})))}}},{key:"_hideFocusElement",value:function(e){1!=this._a11yD&&(e.getPrivate("focusElement").dom.style.display="none")}},{key:"_moveFocusElement",value:function(e,t){if(1!=this._a11yD){var i=this._focusElementContainer,n=t.getPrivate("focusElement").dom;if(n!==this._focusElementContainer.children[e]){var r=this._focusElementContainer.children[e+1];r?i.insertBefore(n,r):i.append(n)}}}},{key:"_positionFocusElement",value:function(e){if(1!=this._a11yD){var t=e.globalBounds(),i=t.right==t.left?e.width():t.right-t.left,n=t.top==t.bottom?e.height():t.bottom-t.top,r=t.left-2,a=t.top-2;i<0&&(r+=i,i=Math.abs(i)),n<0&&(a+=n,n=Math.abs(n));var o=e.getPrivate("focusElement").dom;o.style.top=a+"px",o.style.left=r+"px",o.style.width=i+4+"px",o.style.height=n+4+"px"}}},{key:"_handleFocus",value:function(e,t){if(1!=this._a11yD){var i=this._tabindexes[t];i.isVisibleDeep()?(this._positionFocusElement(i),this._focusedSprite=i,i.events.isEnabled("focus")&&i.events.dispatch("focus",{type:"focus",originalEvent:e,target:i})):this._focusNext(e.target,this._isShift?-1:1)}}},{key:"_focusNext",value:function(e,t){if(1!=this._a11yD){var i=Array.from(document.querySelectorAll(["a[href]","area[href]","button:not([disabled])","details","input:not([disabled])","iframe:not([disabled])","select:not([disabled])","textarea:not([disabled])",'[contentEditable=""]','[contentEditable="true"]','[contentEditable="TRUE"]','[tabindex]:not([tabindex^="-"])'].join(","))),n=i.indexOf(e)+t;n<0?n=i.length-1:n>=i.length&&(n=0),i[n].focus()}}},{key:"_handleBlur",value:function(e,t){if(1!=this._a11yD){var i=this._focusedSprite;i&&i.events.isEnabled("blur")&&i.events.dispatch("blur",{type:"blur",originalEvent:e,target:i}),this._focusedSprite=void 0}}},{key:"updateTooltip",value:function(e){if(1!=this._a11yD){var t=(0,p.ae)(e._getText()),i=e.getPrivate("tooltipElement");"tooltip"==e.get("role")&&""!=t?(i||(i=this._makeTooltipElement(e)),i.innerHTML!=t&&(i.innerHTML=t)):i&&(i.remove(),e.removePrivate("tooltipElement"))}}},{key:"_makeTooltipElement",value:function(e){var t=this._tooltipElementContainer,i=document.createElement("div");return i.style.position="absolute",i.style.width="1px",i.style.height="1px",i.style.overflow="hidden",i.style.clip="rect(1px, 1px, 1px, 1px)",(0,p.W)(i,!1),this._decorateFocusElement(e,i),t.append(i),e.setPrivate("tooltipElement",i),i}},{key:"_removeTooltipElement",value:function(e){if(1!=this._a11yD){var t=e.getPrivate("tooltipElement");if(t){var i=t.parentElement;i&&i.removeChild(t)}}}},{key:"_invalidateAccessibility",value:function(e){if(1!=this._a11yD){this._focusElementDirty=!0;var t=e.getPrivate("focusElement");e.get("focusable")?t&&(this._decorateFocusElement(e),this._positionFocusElement(e)):t&&this._removeFocusElement(e)}}},{key:"focused",value:function(e){return this._focusedSprite===e}},{key:"documentPointToRoot",value:function(e){var t=this.dom.getBoundingClientRect();return{x:e.x-t.left,y:e.y-t.top}}},{key:"rootPointToDocument",value:function(e){var t=this.dom.getBoundingClientRect();return{x:e.x+t.left,y:e.y+t.top}}},{key:"addDisposer",value:function(e){return this._disposers.push(e),e}},{key:"_updateComputedStyles",value:function(){var e=window.getComputedStyle(this.dom),t="";(0,p.f)(e,(function(e,i){(0,p.i)(e)&&e.match(/^font/)&&(t+=i)}));var i=t!=this._fontHash;return i&&(this._fontHash=t),i}},{key:"_checkComputedStyles",value:function(){this._updateComputedStyles()&&this._invalidateLabelBounds(this.container)}},{key:"_invalidateLabelBounds",value:function(e){var t=this;e instanceof p.a3?e.children.each((function(e){t._invalidateLabelBounds(e)})):e instanceof p.ag&&e.markDirtyBounds()}},{key:"_hasLicense",value:function(){for(var e=0;e<p.a2.licenses.length;e++)if(p.a2.licenses[e].match(/^AM5C.{5,}/i))return!0;return!1}},{key:"_licenseApplied",value:function(){this._logo&&this._logo.set("forceHidden",!0)}},{key:"debugGhostView",get:function(){return this._renderer.debugGhostView},set:function(e){this._renderer.debugGhostView=e}},{key:"tapToActivate",get:function(){return this._renderer.tapToActivate},set:function(e){this._renderer.tapToActivate=e}},{key:"tapToActivateTimeout",get:function(){return this._renderer.tapToActivateTimeout},set:function(e){this._renderer.tapToActivateTimeout=e}},{key:"_makeHTMLElement",value:function(e){var t=this,i=this._htmlElementContainer,n=document.createElement("div");return e.setPrivate("htmlElement",n),n.style.position="absolute",n.style.overflow="auto",n.style.boxSizing="border-box",(0,p.W)(n,e.get("interactive",!1)),e.events.isEnabled("click")&&((0,p.W)(n,!0),this._disposers.push((0,p.z)(n,"click",(function(i){var n=t._renderer.getEvent(i);e.events.dispatch("click",{type:"click",originalEvent:n.event,point:n.point,simulated:!1,target:e})})))),this._positionHTMLElement(e),i.append(n),(0,p.L)(this._htmlEnabledContainers,e),n}},{key:"_positionHTMLElements",value:function(){var e=this;(0,p.e)(this._htmlEnabledContainers,(function(t){e._positionHTMLElement(t)}))}},{key:"_positionHTMLElement",value:function(e){var t=e.getPrivate("htmlElement");if(t){(0,p.e)(["paddingTop","paddingRight","paddingBottom","paddingLeft","minWidth","minHeight","maxWidth","maxHeight"],(function(i){var n=e.get(i);t.style[i]=n?n+"px":""}));var i=e.compositeOpacity();setTimeout((function(){t.style.opacity=i+""}),10);var n=e.isVisibleDeep();n&&(t.style.display="block");var r=e.globalBounds();t.style.top=r.top+"px",t.style.left=r.left+"px";var a=e.get("width"),o=e.get("height"),s=0,l=0;if(a&&(s=e.width()),o&&(l=e.height()),a&&o)e.removePrivate("minWidth"),e.removePrivate("minHeight");else{t.style.position="fixed",t.style.width="",t.style.height="";var u=t.getBoundingClientRect();t.style.position="absolute",s=u.width,l=u.height,e._adjustedLocalBounds={left:0,right:0,top:0,bottom:0},e.setPrivate("minWidth",s),e.setPrivate("minHeight",l)}s>0&&(t.style.minWidth=s+"px"),l>0&&(t.style.minHeight=l+"px"),n&&0!=i||(t.style.display="none")}}},{key:"_setHTMLContent",value:function(e,t){var i=e.getPrivate("htmlElement");i||(i=this._makeHTMLElement(e)),i.innerHTML!=t&&(i.innerHTML=t)}},{key:"_removeHTMLContent",value:function(e){var t=e.getPrivate("htmlElement");t&&this._htmlElementContainer.removeChild(t),(0,p.ad)(this._htmlEnabledContainers,e)}}],[{key:"new",value:function(t,i){var n=new e(t,i,!0);return n._init(),n}}]),e}();(0,p.ai)("AM5C241025748");var Ae="en-us",Te=new Map([["ar",function(){return i.e(5291).then(i.bind(i,79406))}],["bg-bg",function(){return i.e(73).then(i.bind(i,60073))}],["bs-ba",function(){return i.e(6636).then(i.bind(i,86636))}],["ca-es",function(){return i.e(9359).then(i.bind(i,69359))}],["cs-cz",function(){return i.e(99).then(i.bind(i,50099))}],["da-dk",function(){return i.e(2371).then(i.bind(i,92371))}],["de-de",function(){return i.e(9566).then(i.bind(i,19566))}],["de-ch",function(){return i.e(5155).then(i.bind(i,85155))}],["el-gr",function(){return i.e(5133).then(i.bind(i,75133))}],["en-us",function(){return i.e(7559).then(i.bind(i,87559))}],["en-ca",function(){return i.e(5970).then(i.bind(i,65970))}],["es-es",function(){return i.e(9722).then(i.bind(i,69722))}],["et-ee",function(){return i.e(9658).then(i.bind(i,19658))}],["fi-fi",function(){return i.e(8292).then(i.bind(i,18292))}],["fr-fr",function(){return i.e(9543).then(i.bind(i,69543))}],["he-il",function(){return i.e(4669).then(i.bind(i,44669))}],["hr-hr",function(){return i.e(2194).then(i.bind(i,12194))}],["hu-hu",function(){return i.e(9906).then(i.bind(i,59906))}],["id-id",function(){return i.e(8661).then(i.bind(i,68661))}],["it-it",function(){return i.e(321).then(i.bind(i,60321))}],["ja-jp",function(){return i.e(4625).then(i.bind(i,94625))}],["ko-kr",function(){return i.e(8244).then(i.bind(i,38244))}],["lt-lt",function(){return i.e(782).then(i.bind(i,10782))}],["lv-lv",function(){return i.e(1960).then(i.bind(i,71960))}],["nb-no",function(){return i.e(4263).then(i.bind(i,84263))}],["nl-nl",function(){return i.e(1428).then(i.bind(i,51428))}],["pl-pl",function(){return i.e(5979).then(i.bind(i,65979))}],["pt-br",function(){return i.e(8220).then(i.bind(i,88220))}],["pt-pt",function(){return i.e(6425).then(i.bind(i,46425))}],["ro-ro",function(){return i.e(9768).then(i.bind(i,79768))}],["ru-ru",function(){return i.e(9437).then(i.bind(i,59437))}],["sk-sk",function(){return i.e(4699).then(i.bind(i,64699))}],["sl-sl",function(){return i.e(9613).then(i.bind(i,29613))}],["sr-rs",function(){return i.e(8191).then(i.bind(i,8191))}],["sv-se",function(){return i.e(4230).then(i.bind(i,44230))}],["th-th",function(){return i.e(4104).then(i.bind(i,64104))}],["tr-tr",function(){return i.e(5431).then(i.bind(i,12215))}],["uk-ua",function(){return i.e(9514).then(i.bind(i,88191))}],["vi-vn",function(){return i.e(2838).then(i.bind(i,92838))}],["zh-cn",function(){return i.e(6867).then(i.bind(i,6867))}],["zh-hk",function(){return i.e(9014).then(i.bind(i,69014))}],["zh-tw",function(){return i.e(9014).then(i.bind(i,69014))}]]);function Ie(e){return e?Te.has(e.toLowerCase())?e.toLowerCase():function(e){var t,i=e.split("-")[0].toLowerCase(),n=null,r=(0,a.Z)(Te.keys());try{for(r.s();!(t=r.n()).done;){var o=t.value;if(o.startsWith(i)){n=o;break}}}catch(s){r.e(s)}finally{r.f()}return n}(e)||Ae:Ae}function Oe(e){return De.apply(this,arguments)}function De(){return De=(0,r.Z)((0,n.Z)().mark((function e(t){var i,r,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:(0,g.Kd)(),r=Pe.new(t),e.next=4,Te.get(Ie(i))();case 4:return r.locale=e.sent.default,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),De.apply(this,arguments)}var Fe=["#7ABEE5","#B39BD5","#F8AE83","#92E6E4","#FBC487","#EE967A","#CEA2D6","#89D594","#CEE68F","#F1A6D5"].map((function(e){return(0,p.a6)(e)}))}}]);
//# sourceMappingURL=8082.57b9edfb.chunk.js.map