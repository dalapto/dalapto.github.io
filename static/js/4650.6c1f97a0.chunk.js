"use strict";(self.webpackChunkreact=self.webpackChunkreact||[]).push([[4650],{94650:function(e,r,t){t.r(r),t.d(r,{fromUrl:function(){return f}});var n=t(74165),a=t(1413),u=t(15861),s=t(10064),l=t(35995),o=t(25899),c=t(74368),i=t(37933),p=t(19610),d=t(41226),y={FeatureLayer:!0,SceneLayer:!0};function f(e){return v.apply(this,arguments)}function v(){return(v=(0,u.Z)((0,n.Z)().mark((function e(r){var u,s,l,o,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===(u=r.properties)||void 0===u?void 0:u.customParameters,e.next=3,m(r.url,s);case 3:if(l=e.sent,o=(0,a.Z)((0,a.Z)({},r.properties),{},{url:r.url}),l.sublayerIds){e.next=7;break}return e.abrupt("return",(null!=l.layerOrTableId&&(o.layerId=l.layerOrTableId,o.sourceJSON=l.sourceJSON),new l.Constructor(o)));case 7:return e.next=10,t.e(8048).then(t.bind(t,18048));case 10:return e.t0=e.sent.default,e.t1={title:l.parsedUrl.title},c=new e.t0(e.t1),e.abrupt("return",(h(c,l,o),c));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,r){return e?e.find((function(e){return e.id===r})):null}function h(e,r,t){function n(e,n){var u=(0,a.Z)((0,a.Z)({},t),{},{layerId:e,sublayerTitleMode:"service-name"});return null!=n&&(u.sourceJSON=n),new r.Constructor(u)}r.sublayerIds.forEach((function(t){var a=n(t,b(r.sublayerInfos,t));e.add(a)})),r.tableIds.forEach((function(t){var a=n(t,b(r.tableInfos,t));e.tables.add(a)}))}function m(e,r){return I.apply(this,arguments)}function I(){return I=(0,u.Z)((0,n.Z)().mark((function e(r,t){var a,u,l,c,p,f,v,b,h,m,I,S,w,T,O,P,C,g,F,N,J;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=(0,o.Qc)(r),e.t0=null==a,!e.t0){e.next=6;break}return e.next=5,x(r,t);case 5:a=e.sent;case 6:if(null!=a){e.next=8;break}throw new s.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:r});case 8:l=(u=a).serverType,c=u.sublayer,f={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},e.t1=l,e.next="MapServer"===e.t1?13:"ImageServer"===e.t1?26:"SceneServer"===e.t1?33:38;break;case 13:if(null==c){e.next=17;break}p="FeatureLayer",e.next=25;break;case 17:return e.next=19,L(r,t);case 19:if(!e.sent){e.next=23;break}e.t2="TileLayer",e.next=24;break;case 23:e.t2="MapImageLayer";case 24:p=e.t2;case 25:return e.abrupt("break",39);case 26:return e.next=28,(0,d.T)(r,{customParameters:t});case 28:return b=e.sent,h=b.tileInfo,m=b.cacheType,p=h?"LERC"!==(null===h||void 0===h||null===(v=h.format)||void 0===v?void 0:v.toUpperCase())||m&&"elevation"!==m.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer",e.abrupt("break",39);case 33:return e.next=35,(0,d.T)(a.url.path,{customParameters:t});case 35:return I=e.sent,p="SceneLayer",I&&(S=null===I||void 0===I?void 0:I.layers,"Voxel"===(null===I||void 0===I?void 0:I.layerType)?p="VoxelLayer":null!==S&&void 0!==S&&S.length&&null!=(T=null===(w=S[0])||void 0===w?void 0:w.layerType)&&null!=i.fb[T]&&(p=i.fb[T])),e.abrupt("break",39);case 38:p=f[l];case 39:if(P={parsedUrl:a,Constructor:null,layerOrTableId:(O="FeatureServer"===l)?c:void 0,sublayerIds:null,tableIds:null},!y[p]||null!=c){e.next=46;break}return e.next=43,k(r,l,t);case 43:J=e.sent,O&&(P.sublayerInfos=J.layerInfos,P.tableInfos=J.tableInfos),1!==J.layerIds.length+J.tableIds.length?(P.sublayerIds=J.layerIds,P.tableIds=J.tableIds):O&&(P.layerOrTableId=null!==(C=J.layerIds[0])&&void 0!==C?C:J.tableIds[0],P.sourceJSON=null!==(g=null===(F=J.layerInfos)||void 0===F?void 0:F[0])&&void 0!==g?g:null===(N=J.tableInfos)||void 0===N?void 0:N[0]);case 46:return e.next=48,Z(p);case 48:return P.Constructor=e.sent,e.abrupt("return",P);case 50:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function x(e,r){return S.apply(this,arguments)}function S(){return S=(0,u.Z)((0,n.Z)().mark((function e(r,t){var a,u,s,c,i,p,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.T)(r,{customParameters:t});case 2:if(s=e.sent,c=null,i=null,"Feature Layer"===(p=s.type)||"Table"===p?(c="FeatureServer",i=null!==(a=s.id)&&void 0!==a?a:null):"indexedVector"===p?c="VectorTileServer":s.hasOwnProperty("mapName")?c="MapServer":s.hasOwnProperty("bandCount")&&s.hasOwnProperty("pixelSizeX")?c="ImageServer":s.hasOwnProperty("maxRecordCount")&&s.hasOwnProperty("allowGeometryUpdates")?c="FeatureServer":s.hasOwnProperty("streamUrls")?c="StreamServer":w(s)?(c="SceneServer",i=s.id):s.hasOwnProperty("layers")&&w(null===(u=s.layers)||void 0===u?void 0:u[0])&&(c="SceneServer"),c){e.next=7;break}return e.abrupt("return",null);case 7:return y=null!=i?(0,o.DR)(r):null,e.abrupt("return",{title:null!=y&&s.name||(0,l.vt)(r),serverType:c,sublayer:i,url:{path:null!=y?y.serviceUrl:(0,l.mN)(r).path}});case 9:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function w(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}function k(e,r,t){return T.apply(this,arguments)}function T(){return(T=(0,u.Z)((0,n.Z)().mark((function e(r,t,a){var u,s,l,o,i,p,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,"FeatureServer"!==t){e.next=8;break}return e.next=4,(0,c.V)(r,{customParameters:a});case 4:i=e.sent,o=!!i.layersJSON,l=i.layersJSON||i.serviceJSON,e.next=11;break;case 8:return e.next=10,(0,d.T)(r,{customParameters:a});case 10:l=e.sent;case 11:return p=null===(u=l)||void 0===u?void 0:u.layers,y=null===(s=l)||void 0===s?void 0:s.tables,e.abrupt("return",{layerIds:(null===p||void 0===p?void 0:p.map((function(e){return e.id})).reverse())||[],tableIds:(null===y||void 0===y?void 0:y.map((function(e){return e.id})).reverse())||[],layerInfos:o?p:[],tableInfos:o?y:[]});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return O.apply(this,arguments)}function O(){return(O=(0,u.Z)((0,n.Z)().mark((function e(r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,p.T[r])());case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,r){return P.apply(this,arguments)}function P(){return(P=(0,u.Z)((0,n.Z)().mark((function e(r,t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.T)(r,{customParameters:t});case 2:return e.abrupt("return",e.sent.tileInfo);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=4650.6c1f97a0.chunk.js.map