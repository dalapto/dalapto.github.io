"use strict";(self.webpackChunkreact_arcgis=self.webpackChunkreact_arcgis||[]).push([[8257,1340],{91340:function(e,t,r){r.d(t,{aX:function(){return x},or:function(){return P}});var o=r(74165),n=r(29439),i=r(15861),a=r(37762),l=r(42265),s=r(10064),u=r(32718),p=r(80885),c=r(29909),y=r(76335),d=r(92975),f=r(81753),v=r(1413),m=(r(59486),r(76200)),h=r(77981),b=r(23084);function g(e,t,r,o){return w.apply(this,arguments)}function w(){return w=(0,i.Z)((0,o.Z)().mark((function e(t,r,n,i){var a,l,s,u,p,c,y,d;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(0,b.en)(t),l=r[0].spatialReference,s=(0,v.Z)((0,v.Z)({},i),{},{query:(0,v.Z)((0,v.Z)({},a.query),{},{f:"json",sr:JSON.stringify(l),target:JSON.stringify({geometryType:(0,h.Ji)(r[0]),geometries:r}),cutter:JSON.stringify(n)})}),e.next=5,(0,m.default)(a.path+"/cut",s);case 5:return u=e.sent,p=u.data,c=p.cutIndexes,y=p.geometries,d=void 0===y?[]:y,e.abrupt("return",{cutIndexes:c,geometries:d.map((function(e){var t=(0,h.im)(e);return t.spatialReference=l,t}))});case 11:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var Z=r(35995),_=r(35594);function S(e,t,r){return C.apply(this,arguments)}function C(){return C=(0,i.Z)((0,o.Z)().mark((function e(t,r,n){var i,a,l,s,u,p,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="string"==typeof t?(0,Z.mN)(t):t,l=r[0].spatialReference,s=(0,h.Ji)(r[0]),u=(0,v.Z)((0,v.Z)({},n),{},{query:(0,v.Z)((0,v.Z)({},a.query),{},{f:"json",sr:null!==(i=l.wkid)&&void 0!==i?i:JSON.stringify(l),geometries:JSON.stringify((0,_.F)(r))})}),e.next=6,(0,m.default)(a.path+"/simplify",u);case 6:return p=e.sent,c=p.data,e.abrupt("return",(0,_.o)(c.geometries,s,l));case 9:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}var B=u.Z.getLogger("esri.geometry.support.normalizeUtils");function T(e,t,r){if(t){var o=function(e,t){if(!(e instanceof c.Z||e instanceof p.Z)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw B.error(r),new s.Z(r)}var o,n=(0,y.x3)(e),i=[],l=(0,a.Z)(n);try{for(l.s();!(o=l.n()).done;){var u=o.value,d=[];i.push(d),d.push([u[0][0],u[0][1]]);for(var f=0;f<u.length-1;f++){var v=u[f][0],m=u[f][1],h=u[f+1][0],b=u[f+1][1],g=Math.sqrt((h-v)*(h-v)+(b-m)*(b-m)),w=(b-m)/g,Z=(h-v)/g,_=g/t;if(_>1){for(var S=1;S<=_-1;S++){var C=S*t,T=Z*C+v,k=w*C+m;d.push([T,k])}var N=(g+Math.floor(_-1)*t)/2,x=Z*N+v,R=w*N+m;d.push([x,R])}d.push([h,b])}}}catch(P){l.e(P)}finally{l.f()}return function(e){return"polygon"===e.type}(e)?new p.Z({rings:i,spatialReference:e.spatialReference}):new c.Z({paths:i,spatialReference:e.spatialReference})}(e,1e6);e=(0,f.Sx)(o,!0)}return r&&(e=(0,y.Sy)(e,r)),e}function k(e,t,r){if(Array.isArray(e)){var o=e[0];if(o>t){var n=(0,y.XZ)(o,t);e[0]=o+n*(-2*t)}else if(o<r){var i=(0,y.XZ)(o,r);e[0]=o+i*(-2*r)}}else{var a=e.x;if(a>t){var l=(0,y.XZ)(a,t);e=e.clone().offset(l*(-2*t),0)}else if(a<r){var s=(0,y.XZ)(a,r);e=e.clone().offset(s*(-2*r),0)}}return e}function N(e,t){for(var r=-1,o=function(){for(var o=t.cutIndexes[n],i=t.geometries[n],l=(0,y.x3)(i),s=function(e){var t=l[e];t.some((function(r){if(r[0]<180)return!0;for(var o=0,n=0;n<t.length;n++){var a=t[n][0];o=a>o?a:o}o=Number(o.toFixed(9));for(var l=-360*(0,y.XZ)(o,180),s=0;s<t.length;s++){var u=i.getPoint(e,s);i.setPoint(e,s,u.clone().offset(l,0))}return!0}))},u=0;u<l.length;u++)s(u);if(o===r){if(function(e){return"polygon"===e[0].type}(e)){var p,c=(0,a.Z)((0,y.x3)(i));try{for(c.s();!(p=c.n()).done;){var d=p.value;e[o]=e[o].addRing(d)}}catch(h){c.e(h)}finally{c.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var f,v=(0,a.Z)((0,y.x3)(i));try{for(v.s();!(f=v.n()).done;){var m=f.value;e[o]=e[o].addPath(m)}}catch(h){v.e(h)}finally{v.f()}}}else r=o,e[o]=i},n=0;n<t.cutIndexes.length;n++)o();return e}function x(e,t,r){return R.apply(this,arguments)}function R(){return R=(0,i.Z)((0,o.Z)().mark((function e(t,r,n){var i,s,u,v,m,h,b,w,Z,_,C,R,P,L,j,I,A,J,O,D,M,U,F,E,G,q,W,X,z,V,K,$,Q,H,Y,ee,te,re,oe,ne,ie;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",x([t],r));case 2:r&&"string"!=typeof r&&B.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead"),s="string"==typeof r?r:null!==(i=null===r||void 0===r?void 0:r.url)&&void 0!==i?i:l.Z.geometryServiceUrl,C=0,R=[],P=[],L=(0,a.Z)(t);try{for(L.s();!(j=L.n()).done;)null!=(I=j.value)?(u||(u=I.spatialReference,v=(0,d.C5)(u),m=u.isWebMercator,w=m?102100:4326,h=y.UZ[w].maxX,b=y.UZ[w].minX,Z=y.UZ[w].plus180Line,_=y.UZ[w].minus180Line),v?"mesh"===I.type?P.push(I):"point"===I.type?P.push(k(I.clone(),h,b)):"multipoint"===I.type?((A=I.clone()).points=A.points.map((function(e){return k(e,h,b)})),P.push(A)):"extent"===I.type?(J=I.clone()._normalize(!1,!1,v),P.push(J.rings?new p.Z(J):J)):I.extent?(O=I.extent,D=(0,y.XZ)(O.xmin,b)*(2*h),M=0===D?I.clone():(0,y.Sy)(I.clone(),D),O.offset(D,0),O.intersects(Z)&&O.xmax!==h?(C=O.xmax>C?O.xmax:C,M=T(M,m),R.push(M),P.push("cut")):O.intersects(_)&&O.xmin!==b?(C=O.xmax*(2*h)>C?O.xmax*(2*h):C,M=T(M,m,360),R.push(M),P.push("cut")):P.push(M)):P.push(I.clone()):P.push(I)):P.push(I)}catch(o){L.e(o)}finally{L.f()}for(U=(0,y.XZ)(C,h),F=-90,E=U,G=new c.Z;U>0;)q=360*U-180,G.addPath([[q,F],[q,-1*F]]),F*=-1,U--;if(!(R.length>0&&E>0)){e.next=29;break}return e.t0=N,e.t1=R,e.next=16,g(s,R,G,n);case 16:for(e.t2=e.sent,W=(0,e.t0)(e.t1,e.t2),X=[],z=[],V=0;V<P.length;V++)"cut"!==(K=P[V])?z.push(K):($=W.shift(),null!=(Q=t[V])&&"polygon"===Q.type&&Q.rings&&Q.rings.length>1&&$.rings.length>=Q.rings.length?(X.push($),z.push("simplify")):z.push(m?(0,f.$)($):$));if(X.length){e.next=23;break}return e.abrupt("return",z);case 23:return e.next=25,S(s,X,n);case 25:for(H=e.sent,Y=[],ee=0;ee<z.length;ee++)"simplify"!==(te=z[ee])?Y.push(te):Y.push(m?(0,f.$)(H.shift()):H.shift());return e.abrupt("return",Y);case 29:for(re=[],oe=0;oe<P.length;oe++)"cut"!==(ne=P[oe])?re.push(ne):(ie=R.shift(),re.push(!0===m?(0,f.$)(ie):ie));return e.abrupt("return",re);case 32:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}function P(e,t){var r=(0,d.C5)(t);if(r){var o=(0,n.Z)(r.valid,2),i=o[0],a=o[1],l=a-i;if(e<i)for(;e<i;)e+=l;if(e>a)for(;e>a;)e-=l}return e}},76335:function(e,t,r){r.d(t,{Sy:function(){return u},UZ:function(){return l},XZ:function(){return s},x3:function(){return p}});var o=r(37762),n=r(29909),i=r(78952),a=r(77981),l={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator}),minus180Line:new n.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:i.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.Z({paths:[[[180,-180],[180,180]]],spatialReference:i.Z.WGS84}),minus180Line:new n.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:i.Z.WGS84})}};function s(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){var r,n=p(e),i=(0,o.Z)(n);try{for(i.s();!(r=i.n()).done;){var a,l=r.value,s=(0,o.Z)(l);try{for(s.s();!(a=s.n()).done;){a.value[0]+=t}}catch(u){s.e(u)}finally{s.f()}}}catch(u){i.e(u)}finally{i.f()}return e}function p(e){return(0,a.oU)(e)?e.rings:e.paths}},88257:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ft}});var o=r(93433),n=r(74165),i=r(15671),a=r(43144),l=r(60136),s=r(29388),u=r(15861),p=r(37762),c=r(27366),y=r(42265),d=r(59486),f=r(52639),v=r(44055),m=(r(94931),r(78451),r(98689),r(57823),r(32066),r(49018),r(34999),r(28189),r(9014)),h=r(40281),b=r(10064),g=r(41691),w=r(32718),Z=r(97642),_=r(18202),S=r(66978),C=r(94172),B=r(68860),T=r(35995),k=r(49861),N=r(25243),x=r(63780),R=(r(93169),r(38511)),P=r(69912),L=r(31201),j=r(15909),I=r(53866),A=r(52587),J=r(92975),O=r(30651),D=r(6693),M=r(6061),U=r(29598),F=r(56811),E=r(25899),G=r(51508),q=r(46784),W=r(16072),X=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).break=new W.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),o.first=new W.Z({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),o.unlocated=new W.Z({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),o.last=new W.Z({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),o.middle=new W.Z({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),o.waypoint=new W.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"break",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"first",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"unlocated",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"last",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"middle",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],X.prototype,"waypoint",void 0);var z=X=(0,c._)([(0,P.j)("esri.layers.support.RouteStopSymbols")],X),V=r(16851),K=r(61459),$=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).directionLines=new V.Z({color:[0,122,194],width:6}),o.directionPoints=new W.Z({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),o.pointBarriers=new W.Z({style:"x",size:10,outline:{color:[255,0,0],width:3}}),o.polygonBarriers=new K.Z({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),o.polylineBarriers=new V.Z({width:7.5,color:[255,85,0,.7]}),o.routeInfo=new V.Z({width:8,color:[20,89,127]}),o.stops=new z,o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"directionLines",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"directionPoints",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"pointBarriers",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"polygonBarriers",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"polylineBarriers",void 0),(0,c._)([(0,k.Cb)({types:G.LB})],$.prototype,"routeInfo",void 0),(0,c._)([(0,k.Cb)({type:z})],$.prototype,"stops",void 0);var Q=$=(0,c._)([(0,P.j)("esri.layers.support.RouteSymbols")],$),H=r(7575),Y=r(98995),ee=r(73117),te=r(76200),re=r(23084),oe=r(27135),ne=r(49022),ie=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).dataType=null,o.name=null,o.parameterNames=null,o.restrictionUsageParameterName=null,o.timeNeutralAttributeName=null,o.trafficSupport=null,o.units=null,o.usageType=null,o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({type:String})],ie.prototype,"dataType",void 0),(0,c._)([(0,oe.J)(ne.Ul,{ignoreUnknown:!1})],ie.prototype,"name",void 0),(0,c._)([(0,k.Cb)({type:[String]})],ie.prototype,"parameterNames",void 0),(0,c._)([(0,k.Cb)({type:String})],ie.prototype,"restrictionUsageParameterName",void 0),(0,c._)([(0,oe.J)(ne.ZI,{ignoreUnknown:!1})],ie.prototype,"timeNeutralAttributeName",void 0),(0,c._)([(0,k.Cb)({type:String})],ie.prototype,"trafficSupport",void 0),(0,c._)([(0,oe.J)(ne.dg)],ie.prototype,"units",void 0),(0,c._)([(0,oe.J)(ne.E2)],ie.prototype,"usageType",void 0);var ae=ie=(0,c._)([(0,P.j)("esri.rest.support.NetworkAttribute")],ie),le=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).buildTime=null,o.name=null,o.networkAttributes=null,o.networkSources=null,o.state=null,o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({type:Number})],le.prototype,"buildTime",void 0),(0,c._)([(0,k.Cb)({type:String})],le.prototype,"name",void 0),(0,c._)([(0,k.Cb)({type:[ae]})],le.prototype,"networkAttributes",void 0),(0,c._)([(0,k.Cb)()],le.prototype,"networkSources",void 0),(0,c._)([(0,k.Cb)({type:String})],le.prototype,"state",void 0);var se=le=(0,c._)([(0,P.j)("esri.rest.support.NetworkDataset")],le),ue=r(77279),pe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).accumulateAttributeNames=null,o.attributeParameterValues=null,o.currentVersion=null,o.defaultTravelMode=null,o.directionsLanguage=null,o.directionsLengthUnits=null,o.directionsSupportedLanguages=null,o.directionsTimeAttribute=null,o.hasZ=null,o.impedance=null,o.networkDataset=null,o.supportedTravelModes=null,o}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return null==e?null:e.map((function(e){return ne.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ne.Ul.toJSON(e)})))}},{key:"readDefaultTravelMode",value:function(e,t){var r,o,n,i=null!==(r=null===(o=t.supportedTravelModes)||void 0===o?void 0:o.find((function(e){return e.id===t.defaultTravelMode})))&&void 0!==r?r:null===(n=t.supportedTravelModes)||void 0===n?void 0:n.find((function(e){return e.itemId===t.defaultTravelMode}));return i?ue.Z.fromJSON(i):null}}]),r}(q.wq);(0,c._)([(0,k.Cb)()],pe.prototype,"accumulateAttributeNames",void 0),(0,c._)([(0,R.r)("accumulateAttributeNames")],pe.prototype,"readAccumulateAttributes",null),(0,c._)([(0,L.c)("accumulateAttributeNames")],pe.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,k.Cb)()],pe.prototype,"attributeParameterValues",void 0),(0,c._)([(0,k.Cb)()],pe.prototype,"currentVersion",void 0),(0,c._)([(0,k.Cb)()],pe.prototype,"defaultTravelMode",void 0),(0,c._)([(0,R.r)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],pe.prototype,"readDefaultTravelMode",null),(0,c._)([(0,k.Cb)()],pe.prototype,"directionsLanguage",void 0),(0,c._)([(0,oe.J)(ne.GX)],pe.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,k.Cb)()],pe.prototype,"directionsSupportedLanguages",void 0),(0,c._)([(0,oe.J)(ne.ZI,{ignoreUnknown:!1})],pe.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,k.Cb)()],pe.prototype,"hasZ",void 0),(0,c._)([(0,oe.J)(ne.Ul,{ignoreUnknown:!1})],pe.prototype,"impedance",void 0),(0,c._)([(0,k.Cb)({type:se})],pe.prototype,"networkDataset",void 0),(0,c._)([(0,k.Cb)({type:[ue.Z]})],pe.prototype,"supportedTravelModes",void 0);var ce=pe=(0,c._)([(0,P.j)("esri.rest.support.NetworkServiceDescription")],pe),ye=w.Z.getLogger("esri.rest.networkService");function de(e,t,r,o){o[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}function fe(e,t){for(var r=0;r<t.length;r++){var o=e[t[r]];if(o&&o.length){var n,i=(0,p.Z)(o);try{for(i.s();!(n=i.n()).done;){n.value.z=void 0}}catch(a){i.e(a)}finally{i.f()}}}ye.warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function ve(e,t){for(var r=0;r<t.length;r++){var o=e[t[r]];if(o&&o.length){var n,i=(0,p.Z)(o);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(null!=a&&a.hasZ)return!0}}catch(l){i.e(l)}finally{i.f()}}}return!1}function me(e,t,r){return he.apply(this,arguments)}function he(){return he=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,a,l,s,u,p,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new b.Z("network-service:missing-url","Url to Network service is missing");case 2:return i=(0,re.lA)({f:"json",token:r},o),e.next=5,(0,te.default)(t,i);case 5:return a=e.sent,l=a.data,s=l.currentVersion>=10.4?we(t,r,o):be(t,o),e.next=10,s;case 10:return u=e.sent,p=u.defaultTravelMode,c=u.supportedTravelModes,e.abrupt("return",(l.defaultTravelMode=p,l.supportedTravelModes=c,ce.fromJSON(l)));case 14:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function be(e,t){return ge.apply(this,arguments)}function ge(){return ge=(0,u.Z)((0,n.Z)().mark((function e(t,r){var o,i,a,l,s,u,c,y,d,f,v,m,h,b,g,w,Z,S,C,B,k,N,x,R,P;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,re.lA)({f:"json"},r),e.next=3,(0,te.default)(t.replace(/\/rest\/.*$/i,"/info"),i);case 3:if(a=e.sent,(l=a.data)&&l.owningSystemUrl){e.next=7;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 7:return s=l.owningSystemUrl,u=(0,T.Qj)(s)+"/sharing/rest/portals/self",e.next=11,(0,te.default)(u,i);case 11:if(c=e.sent,y=c.data,d=(0,_.hS)("helperServices.routingUtilities.url",y)){e.next=16;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 16:return f=(0,re.en)(s),v=/\/solve$/i.test(f.path)?"Route":/\/solveclosestfacility$/i.test(f.path)?"ClosestFacility":"ServiceAreas",m=(0,re.lA)({f:"json",serviceName:v},r),h=(0,T.Qj)(d)+"/GetTravelModes/execute",e.next=22,(0,te.default)(h,m);case 22:if(b=e.sent,g=[],w=null,null!==b&&void 0!==b&&null!==(o=b.data)&&void 0!==o&&null!==(o=o.results)&&void 0!==o&&o.length){Z=b.data.results,S=(0,p.Z)(Z);try{for(S.s();!(C=S.n()).done;)if("supportedTravelModes"===(B=C.value).paramName){if(null!==(k=B.value)&&void 0!==k&&k.features){N=(0,p.Z)(B.value.features);try{for(N.s();!(x=N.n()).done;)(R=x.value.attributes)&&(P=JSON.parse(R.TravelMode),g.push(P))}catch(n){N.e(n)}finally{N.f()}}}else"defaultTravelMode"===B.paramName&&(w=B.value)}catch(n){S.e(n)}finally{S.f()}}return e.abrupt("return",{supportedTravelModes:g,defaultTravelMode:w});case 27:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}function we(e,t,r){return Ze.apply(this,arguments)}function Ze(){return Ze=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,a,l,s,u,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,re.lA)({f:"json",token:r},o),a=(0,T.Qj)(t)+"/retrieveTravelModes",e.next=5,(0,te.default)(a,i);case 5:return l=e.sent,s=l.data,u=s.supportedTravelModes,p=s.defaultTravelMode,e.abrupt("return",{supportedTravelModes:u,defaultTravelMode:p});case 12:throw e.prev=12,e.t0=e.catch(0),new b.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Ze.apply(this,arguments)}var _e=r(1413),Se=r(91340),Ce=r(3321),Be=r(49818),Te=r(43404),ke=new Te.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),Ne=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).description=null,o.type=null,o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],Ne.prototype,"description",void 0),(0,c._)([(0,k.Cb)({type:String,json:{read:ke.read,write:ke.write}})],Ne.prototype,"type",void 0);var xe=Ne=(0,c._)([(0,P.j)("esri.rest.support.GPMessage")],Ne),Re=new Te.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),Pe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).type=null,o}return(0,a.Z)(r)}(xe);(0,c._)([(0,k.Cb)({type:String,json:{read:Re.read,write:Re.write}})],Pe.prototype,"type",void 0);var Le=Pe=(0,c._)([(0,P.j)("esri.rest.support.NAMessage")],Pe),je=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){return(0,i.Z)(this,r),t.call(this,e)}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({json:{read:{source:"string"}}})],je.prototype,"text",void 0),(0,c._)([(0,oe.J)(ne.Ks,{name:"stringType"})],je.prototype,"type",void 0);var Ie=je=(0,c._)([(0,P.j)("esri.rest.support.DirectionsString")],je),Ae=r(585),Je=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).arriveTime=null,o.arriveTimeOffset=null,o.geometry=null,o.strings=null,o}return(0,a.Z)(r,[{key:"readArriveTimeOffset",value:function(e,t){return(0,Ce.pQ)(t.ETA,t.arriveTimeUTC)}},{key:"readGeometry",value:function(e,t){return Ae.Z.fromJSON(t.point)}}]),r}(q.wq);(0,c._)([(0,k.Cb)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Je.prototype,"arriveTime",void 0),(0,c._)([(0,k.Cb)()],Je.prototype,"arriveTimeOffset",void 0),(0,c._)([(0,R.r)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Je.prototype,"readArriveTimeOffset",null),(0,c._)([(0,k.Cb)({type:Ae.Z})],Je.prototype,"geometry",void 0),(0,c._)([(0,R.r)("geometry",["point"])],Je.prototype,"readGeometry",null),(0,c._)([(0,k.Cb)({type:[Ie]})],Je.prototype,"strings",void 0);var Oe=Je=(0,c._)([(0,P.j)("esri.rest.support.DirectionsEvent")],Je),De=r(29909);var Me=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).events=null,o.strings=null,o}return(0,a.Z)(r,[{key:"readGeometry",value:function(e,t){var r=function(e){if(null==e||""===e)return null;var t,r,o,n,i,a,l,s,u=0,p=0,c=0,y=0,d=[],f=0,v=0,m=0;if((i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(i=[]),0===parseInt(i[f],32)){f=2;var h=parseInt(i[f],32);f++,a=parseInt(i[f],32),f++,1&h&&(v=i.indexOf("|")+1,l=parseInt(i[v],32),v++),2&h&&(m=i.indexOf("|",v)+1,s=parseInt(i[m],32),m++)}else a=parseInt(i[f],32),f++;for(;f<i.length&&"|"!==i[f];){t=parseInt(i[f],32)+u,f++,u=t,r=parseInt(i[f],32)+p,f++,p=r;var b=[t/a,r/a];v&&(n=parseInt(i[v],32)+c,v++,c=n,b.push(n/l)),m&&(o=parseInt(i[m],32)+y,m++,y=o,b.push(o/s)),d.push(b)}return{paths:[d],hasZ:v>0,hasM:m>0}}(t.compressedGeometry);return null!=r?De.Z.fromJSON(r):null}}]),r}(f.Z);(0,c._)([(0,k.Cb)({type:[Oe]})],Me.prototype,"events",void 0),(0,c._)([(0,R.r)("geometry",["compressedGeometry"])],Me.prototype,"readGeometry",null),(0,c._)([(0,k.Cb)({type:[Ie]})],Me.prototype,"strings",void 0);var Ue=Me=(0,c._)([(0,P.j)("esri.rest.support.DirectionsFeature")],Me),Fe=r(78952);var Ee=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).extent=null,o.features=[],o.geometryType="polyline",o.routeId=null,o.routeName=null,o.totalDriveTime=null,o.totalLength=null,o.totalTime=null,o}return(0,a.Z)(r,[{key:"readFeatures",value:function(e,t){var r;if(!e)return[];var o=null!==(r=t.summary.envelope.spatialReference)&&void 0!==r?r:t.spatialReference,n=o&&Fe.Z.fromJSON(o);return e.map((function(e){var t=Ue.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=n),null!=t.events){var r,o=(0,p.Z)(t.events);try{for(o.s();!(r=o.n()).done;){var i=r.value;null!=i.geometry&&(i.geometry.spatialReference=n)}}catch(a){o.e(a)}finally{o.f()}}return t}))}},{key:"mergedGeometry",get:function(){return this.features?function(e,t){if(0===e.length)return new De.Z({spatialReference:t});var r,n=[],i=(0,p.Z)(e);try{for(i.s();!(r=i.n()).done;){var a,l=r.value,s=(0,p.Z)(l.paths);try{for(s.s();!(a=s.n()).done;){var u=a.value;n.push.apply(n,(0,o.Z)(u))}}catch(v){s.e(v)}finally{s.f()}}}catch(v){i.e(v)}finally{i.f()}var c=[];n.forEach((function(e,t){0!==t&&e[0]===n[t-1][0]&&e[1]===n[t-1][1]||c.push(e)}));var y=e[0],d=y.hasM,f=y.hasZ;return new De.Z({hasM:d,hasZ:f,paths:[c],spatialReference:t})}(this.features.map((function(e){return e.geometry})),this.extent.spatialReference):null}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings})).flat().filter(x.pC)}}]),r}(Be.Z);(0,c._)([(0,k.Cb)({type:I.Z,json:{read:{source:"summary.envelope"}}})],Ee.prototype,"extent",void 0),(0,c._)([(0,k.Cb)({nonNullable:!0})],Ee.prototype,"features",void 0),(0,c._)([(0,R.r)("features")],Ee.prototype,"readFeatures",null),(0,c._)([(0,k.Cb)()],Ee.prototype,"geometryType",void 0),(0,c._)([(0,k.Cb)({readOnly:!0})],Ee.prototype,"mergedGeometry",null),(0,c._)([(0,k.Cb)()],Ee.prototype,"routeId",void 0),(0,c._)([(0,k.Cb)()],Ee.prototype,"routeName",void 0),(0,c._)([(0,k.Cb)({value:null,readOnly:!0})],Ee.prototype,"strings",null),(0,c._)([(0,k.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],Ee.prototype,"totalDriveTime",void 0),(0,c._)([(0,k.Cb)({json:{read:{source:"summary.totalLength"}}})],Ee.prototype,"totalLength",void 0),(0,c._)([(0,k.Cb)({json:{read:{source:"summary.totalTime"}}})],Ee.prototype,"totalTime",void 0);var Ge=Ee=(0,c._)([(0,P.j)("esri.rest.support.DirectionsFeatureSet")],Ee),qe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).directionLines=null,o.directionPoints=null,o.directions=null,o.route=null,o.routeName=null,o.stops=null,o.traversedEdges=null,o.traversedJunctions=null,o.traversedTurns=null,o}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,k.Cb)({type:Be.Z,json:{write:!0}})],qe.prototype,"directionLines",void 0),(0,c._)([(0,k.Cb)({type:Be.Z,json:{write:!0}})],qe.prototype,"directionPoints",void 0),(0,c._)([(0,k.Cb)({type:Ge,json:{write:!0}})],qe.prototype,"directions",void 0),(0,c._)([(0,k.Cb)({type:f.Z,json:{write:!0}})],qe.prototype,"route",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],qe.prototype,"routeName",void 0),(0,c._)([(0,k.Cb)({type:[f.Z],json:{write:!0}})],qe.prototype,"stops",void 0),(0,c._)([(0,k.Cb)({type:Be.Z,json:{write:!0}})],qe.prototype,"traversedEdges",void 0),(0,c._)([(0,k.Cb)({type:Be.Z,json:{write:!0}})],qe.prototype,"traversedJunctions",void 0),(0,c._)([(0,k.Cb)({type:Be.Z,json:{write:!0}})],qe.prototype,"traversedTurns",void 0);var We=qe=(0,c._)([(0,P.j)("esri.rest.support.RouteResult")],qe);function Xe(e){return e?Be.Z.fromJSON(e).features.filter(x.pC):[]}var ze=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).messages=null,o.pointBarriers=null,o.polylineBarriers=null,o.polygonBarriers=null,o.routeResults=null,o}return(0,a.Z)(r,[{key:"readPointBarriers",value:function(e,t){return Xe(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return Xe(e)}},{key:"readPolygonBarriers",value:function(e){return Xe(e)}}]),r}(q.wq);(0,c._)([(0,k.Cb)({type:[Le]})],ze.prototype,"messages",void 0),(0,c._)([(0,k.Cb)({type:[f.Z]})],ze.prototype,"pointBarriers",void 0),(0,c._)([(0,R.r)("pointBarriers",["barriers"])],ze.prototype,"readPointBarriers",null),(0,c._)([(0,k.Cb)({type:[f.Z]})],ze.prototype,"polylineBarriers",void 0),(0,c._)([(0,R.r)("polylineBarriers")],ze.prototype,"readPolylineBarriers",null),(0,c._)([(0,k.Cb)({type:[f.Z]})],ze.prototype,"polygonBarriers",void 0),(0,c._)([(0,R.r)("polygonBarriers")],ze.prototype,"readPolygonBarriers",null),(0,c._)([(0,k.Cb)({type:[We]})],ze.prototype,"routeResults",void 0);var Ve=ze=(0,c._)([(0,P.j)("esri.rest.support.RouteSolveResult")],ze);function Ke(e){return e instanceof Be.Z}function $e(e,t,r){return Qe.apply(this,arguments)}function Qe(){return Qe=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,a,l,s,u,p,c,y,d,f,v,m,h,b,g,w;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],a=[],l={},s={},u=(0,re.en)(t),p=u.path,Ke(r.stops)&&de(r.stops.features,a,"stops.features",l),Ke(r.pointBarriers)&&de(r.pointBarriers.features,a,"pointBarriers.features",l),Ke(r.polylineBarriers)&&de(r.polylineBarriers.features,a,"polylineBarriers.features",l),Ke(r.polygonBarriers)&&de(r.polygonBarriers.features,a,"polygonBarriers.features",l),e.next=4,(0,Se.aX)(a);case 4:for(y in c=e.sent,l)d=l[y],i.push(y),s[y]=c.slice(d[0],d[1]);if(!ve(s,i)){e.next=17;break}return f=null,e.prev=8,e.next=11,me(p,r.apiKey,o);case 11:f=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:f&&!f.hasZ&&fe(s,i);case 17:v=(0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s[t].forEach((function(e,o){r.get(t)[o].geometry=e}));case 1:case"end":return e.stop()}}),e)})),e.t1=(0,n.Z)().keys(s);case 19:if((e.t2=e.t1()).done){e.next=24;break}return m=e.t2.value,e.delegateYield(v(m),"t3",22);case 22:e.next=19;break;case 24:return h=(0,_e.Z)((0,_e.Z)({},o),{},{query:(0,_e.Z)((0,_e.Z)((0,_e.Z)({},u.query),(0,Ce.Yc)(r)),{},{f:"json"})}),b=p.endsWith("/solve")?p:"".concat(p,"/solve"),e.next=28,(0,te.default)(b,h);case 28:return g=e.sent,w=g.data,e.abrupt("return",He(w));case 31:case"end":return e.stop()}}),e,null,[[8,14]])}))),Qe.apply(this,arguments)}function He(e){var t,r=e.barriers,o=e.directionLines,n=e.directionPoints,i=e.directions,a=e.messages,l=e.polygonBarriers,s=e.polylineBarriers,u=e.routes,p=e.stops,c=e.traversedEdges,y=e.traversedJunctions,d=e.traversedTurns,f=function(e){var t=m.find((function(t){return t.routeName===e}));if(null!=t)return t;var r={routeId:m.length+1,routeName:e};return m.push(r),r},v=function(e){var t=m.find((function(t){return t.routeId===e}));if(null!=t)return t;var r={routeId:e,routeName:null};return m.push(r),r},m=[];null!==u&&void 0!==u&&u.features.forEach((function(e,t){var r;e.geometry.spatialReference=null!==(r=u.spatialReference)&&void 0!==r?r:void 0;var o=e.attributes.Name,n=t+1;m.push({routeId:n,routeName:o,route:e})})),null===i||void 0===i||i.forEach((function(e){var t=e.routeName;f(t).directions=e}));var h=null!==(t=null===p||void 0===p?void 0:p.features.every((function(e){return null==e.attributes.RouteName})))&&void 0!==t&&t&&m.length>0?m[0].routeName:null;return null!==p&&void 0!==p&&p.features.forEach((function(e){var t,r,o,n;e.geometry&&(null!==(r=(t=e.geometry).spatialReference)&&void 0!==r||(t.spatialReference=null!==(o=p.spatialReference)&&void 0!==o?o:void 0));var i=null!==h&&void 0!==h?h:e.attributes.RouteName,a=f(i);null!==(n=a.stops)&&void 0!==n||(a.stops=[]),a.stops.push(e)})),null!==o&&void 0!==o&&o.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=o.geometryType,a=o.spatialReference;null!==(t=n.directionLines)&&void 0!==t||(n.directionLines={features:[],geometryType:i,spatialReference:a}),n.directionLines.features.push(e)})),null!==n&&void 0!==n&&n.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),i=n.geometryType,a=n.spatialReference;null!==(t=o.directionPoints)&&void 0!==t||(o.directionPoints={features:[],geometryType:i,spatialReference:a}),o.directionPoints.features.push(e)})),null!==c&&void 0!==c&&c.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),n=c.geometryType,i=c.spatialReference;null!==(t=o.traversedEdges)&&void 0!==t||(o.traversedEdges={features:[],geometryType:n,spatialReference:i}),o.traversedEdges.features.push(e)})),null!==y&&void 0!==y&&y.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),n=y.geometryType,i=y.spatialReference;null!==(t=o.traversedJunctions)&&void 0!==t||(o.traversedJunctions={features:[],geometryType:n,spatialReference:i}),o.traversedJunctions.features.push(e)})),null!==d&&void 0!==d&&d.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r);null!==(t=o.traversedTurns)&&void 0!==t||(o.traversedTurns={features:[]}),o.traversedTurns.features.push(e)})),Ve.fromJSON({routeResults:m,barriers:r,polygonBarriers:l,polylineBarriers:s,messages:a})}var Ye=r(40653),et=r(54889),tt=r(16406),rt=r(44745),ot=r(21604),nt=r(99821),it=r(11582),at={type:String,json:{read:{source:"token"},write:{target:"token"}}},lt=r(77981),st=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o.geometry=null,o.geometryType=null,o.name=null,o.spatialRelationship=null,o.type="layer",o.where=null,o}return(0,a.Z)(r)}((0,it.J)(q.wq));(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],st.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,k.Cb)({types:d.qM,json:{read:lt.im,write:!0}})],st.prototype,"geometry",void 0),(0,c._)([(0,oe.J)(ne.KA)],st.prototype,"geometryType",void 0),(0,c._)([(0,k.Cb)({type:String,json:{name:"layerName",write:!0}})],st.prototype,"name",void 0),(0,c._)([(0,oe.J)(ne.S7,{name:"spatialRel"})],st.prototype,"spatialRelationship",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],st.prototype,"type",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],st.prototype,"where",void 0);var ut,pt=st=(0,c._)([(0,P.j)("esri.rest.support.DataLayer")],st),ct=ut=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o}return(0,a.Z)(r,[{key:"clone",value:function(){return new ut((0,_e.Z)({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements},this.cloneProperties()))}}]),r}(Be.Z);(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],ct.prototype,"doNotLocateOnRestrictedElements",void 0);var yt=ct=ut=(0,c._)([(0,P.j)("esri.rest.support.NetworkFeatureSet")],ct),dt=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o.url=null,o}return(0,a.Z)(r)}((0,it.J)(q.wq));(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],dt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],dt.prototype,"url",void 0);var ft,vt=dt=(0,c._)([(0,P.j)("esri.rest.support.NetworkUrl")],dt),mt=ft=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).accumulateAttributes=null,o.apiKey=null,o.attributeParameterValues=null,o.directionsLanguage=null,o.directionsLengthUnits=null,o.directionsOutputType=null,o.directionsStyleName=null,o.directionsTimeAttribute=null,o.findBestSequence=null,o.geometryPrecision=null,o.geometryPrecisionM=null,o.geometryPrecisionZ=null,o.ignoreInvalidLocations=null,o.impedanceAttribute=null,o.outputGeometryPrecision=null,o.outputGeometryPrecisionUnits=null,o.outputLines="true-shape",o.outSpatialReference=null,o.overrides=null,o.pointBarriers=null,o.polygonBarriers=null,o.polylineBarriers=null,o.preserveFirstStop=null,o.preserveLastStop=null,o.preserveObjectID=null,o.restrictionAttributes=null,o.restrictUTurns=null,o.returnBarriers=!1,o.returnDirections=!1,o.returnPolygonBarriers=!1,o.returnPolylineBarriers=!1,o.returnRoutes=!0,o.returnStops=!1,o.returnTraversedEdges=null,o.returnTraversedJunctions=null,o.returnTraversedTurns=null,o.returnZ=!0,o.startTime=null,o.startTimeIsUTC=!0,o.stops=null,o.timeWindowsAreUTC=null,o.travelMode=null,o.useHierarchy=null,o.useTimeWindows=null,o}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return null==e?null:e.map((function(e){return ne.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ne.Ul.toJSON(e)})))}},{key:"writePointBarriers",value:function(e,t,r){bt(e,t,r)}},{key:"writePolygonBarrier",value:function(e,t,r){bt(e,t,r)}},{key:"writePolylineBarrier",value:function(e,t,r){bt(e,t,r)}},{key:"readRestrictionAttributes",value:function(e){return null==e?null:e.map((function(e){return ne.kL.fromJSON(e)}))}},{key:"writeRestrictionAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ne.kL.toJSON(e)})))}},{key:"readStartTime",value:function(e,t){var r=t.startTime;return null==r?null:"now"===r?"now":new Date(r)}},{key:"writeStartTime",value:function(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}},{key:"readStops",value:function(e,t){return function(e){return function(e){return e&&"type"in e}(e)?pt.fromJSON(e):function(e){return e&&"url"in e}(e)?vt.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?yt.fromJSON(e):function(e){return e&&"features"in e}(e)?Be.Z.fromJSON(e):null}(t.stops)}},{key:"writeStops",value:function(e,t,r){bt(e,t,r)}}],[{key:"from",value:function(e){return(0,N.TJ)(ft,e)}}]),r}((0,it.J)(q.wq));(0,c._)([(0,k.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],mt.prototype,"accumulateAttributes",void 0),(0,c._)([(0,R.r)("accumulateAttributes")],mt.prototype,"readAccumulateAttributes",null),(0,c._)([(0,L.c)("accumulateAttributes")],mt.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,k.Cb)(at)],mt.prototype,"apiKey",void 0),(0,c._)([(0,k.Cb)({json:{write:!0}})],mt.prototype,"attributeParameterValues",void 0),(0,c._)([(0,k.Cb)({type:String,json:{write:!0}})],mt.prototype,"directionsLanguage",void 0),(0,c._)([(0,oe.J)(ne.GX)],mt.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,oe.J)(ne.$7)],mt.prototype,"directionsOutputType",void 0),(0,c._)([(0,oe.J)(ne.WP)],mt.prototype,"directionsStyleName",void 0),(0,c._)([(0,oe.J)(ne.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],mt.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"findBestSequence",void 0),(0,c._)([(0,k.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecision",void 0),(0,c._)([(0,k.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionM",void 0),(0,c._)([(0,k.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionZ",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"ignoreInvalidLocations",void 0),(0,c._)([(0,oe.J)(ne.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],mt.prototype,"impedanceAttribute",void 0),(0,c._)([(0,k.Cb)({type:Number,json:{write:!0}})],mt.prototype,"outputGeometryPrecision",void 0),(0,c._)([(0,oe.J)(ne.q$)],mt.prototype,"outputGeometryPrecisionUnits",void 0),(0,c._)([(0,oe.J)(ne.no)],mt.prototype,"outputLines",void 0),(0,c._)([(0,k.Cb)({type:Fe.Z,json:{name:"outSR",write:!0}})],mt.prototype,"outSpatialReference",void 0),(0,c._)([(0,k.Cb)({json:{write:!0}})],mt.prototype,"overrides",void 0),(0,c._)([(0,k.Cb)({json:{name:"barriers",write:!0}})],mt.prototype,"pointBarriers",void 0),(0,c._)([(0,L.c)("pointBarriers")],mt.prototype,"writePointBarriers",null),(0,c._)([(0,k.Cb)({json:{write:!0}})],mt.prototype,"polygonBarriers",void 0),(0,c._)([(0,L.c)("polygonBarriers")],mt.prototype,"writePolygonBarrier",null),(0,c._)([(0,k.Cb)({json:{write:!0}})],mt.prototype,"polylineBarriers",void 0),(0,c._)([(0,L.c)("polylineBarriers")],mt.prototype,"writePolylineBarrier",null),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveFirstStop",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveLastStop",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveObjectID",void 0),(0,c._)([(0,k.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],mt.prototype,"restrictionAttributes",void 0),(0,c._)([(0,R.r)("restrictionAttributes")],mt.prototype,"readRestrictionAttributes",null),(0,c._)([(0,L.c)("restrictionAttributes")],mt.prototype,"writeRestrictionAttributes",null),(0,c._)([(0,oe.J)(ne.ip)],mt.prototype,"restrictUTurns",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnBarriers",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnDirections",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolygonBarriers",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolylineBarriers",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnRoutes",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnStops",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedEdges",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedJunctions",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedTurns",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnZ",void 0),(0,c._)([(0,k.Cb)({type:Date,json:{type:Number,write:!0}})],mt.prototype,"startTime",void 0),(0,c._)([(0,R.r)("startTime")],mt.prototype,"readStartTime",null),(0,c._)([(0,L.c)("startTime")],mt.prototype,"writeStartTime",null),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"startTimeIsUTC",void 0),(0,c._)([(0,k.Cb)({json:{write:!0}})],mt.prototype,"stops",void 0),(0,c._)([(0,R.r)("stops")],mt.prototype,"readStops",null),(0,c._)([(0,L.c)("stops")],mt.prototype,"writeStops",null),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"timeWindowsAreUTC",void 0),(0,c._)([(0,k.Cb)({type:ue.Z,json:{write:!0}})],mt.prototype,"travelMode",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"useHierarchy",void 0),(0,c._)([(0,k.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"useTimeWindows",void 0);var ht=mt=ft=(0,c._)([(0,P.j)("esri.rest.support.RouteParameters")],mt);function bt(e,t,r){null!=e&&(t[r]=h.Z.isCollection(e)?{features:e.toArray().map((function(e){return e.toJSON()}))}:e.toJSON())}var gt=r(37321),wt=r(70491),Zt=r(77577);function _t(e){return e.length?e:null}function St(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:St("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:St("esriGeometryPolyline")}}}function Ct(e){return"layers"in e}function Bt(e){return"esri.rest.support.FeatureSet"===e.declaredClass}function Tt(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}function kt(e,t,r){var o,n,i,a,l,s,u,c,y,d,f,v,m,h,g,w,Z,_=null===(o=t.networkDataset)||void 0===o?void 0:o.networkAttributes,S=null!==(n=null===_||void 0===_?void 0:_.filter((function(e){return"cost"===e.usageType})))&&void 0!==n?n:[],C=null!==(i=r.travelMode)&&void 0!==i?i:t.defaultTravelMode;if(null!=C){var B=C.timeAttributeName,T=C.distanceAttributeName,k=S.find((function(e){return e.name===B})),N=S.find((function(e){return e.name===T})),x=null!==(a=null!==(l=null===(s=r.travelMode)||void 0===s?void 0:s.impedanceAttributeName)&&void 0!==l?l:r.impedanceAttribute)&&void 0!==a?a:t.impedance,R=null===k||void 0===k?void 0:k.units,P=null===N||void 0===N?void 0:N.units;if(!R||!P)throw new b.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");var L,j=null!==(u=r.directionsLanguage)&&void 0!==u?u:t.directionsLanguage,I=null!==(c=null!==(y=r.accumulateAttributes)&&void 0!==y?y:t.accumulateAttributeNames)&&void 0!==c?c:[],A=new Set(S.filter((function(e){var t=e.name;return t===B||t===T||t===x||null!=t&&I.includes(t)})).map((function(e){return e.name}))),J=function(e){for(var t in e)A.has(t)||delete e[t]},O=(0,p.Z)(e.pointBarriers);try{for(O.s();!(L=O.n()).done;){var D,M=L.value;null!=M.costs&&(M.addedCost=null!==(D=M.costs[x])&&void 0!==D?D:0,J(M.costs))}}catch(ue){O.e(ue)}finally{O.f()}var U,F=(0,p.Z)(e.polygonBarriers);try{for(F.s();!(U=F.n()).done;){var E,G=U.value;null!=G.costs&&(G.scaleFactor=null!==(E=G.costs[x])&&void 0!==E?E:1,J(G.costs))}}catch(ue){F.e(ue)}finally{F.f()}var q,W=(0,p.Z)(e.polylineBarriers);try{for(W.s();!(q=W.n()).done;){var X,z=q.value;null!=z.costs&&(z.scaleFactor=null!==(X=z.costs[x])&&void 0!==X?X:1,J(z.costs))}}catch(ue){W.e(ue)}finally{W.f()}var V=e.routeInfo,K=r.findBestSequence,$=r.preserveFirstStop,Q=r.preserveLastStop,H=r.startTimeIsUTC,Y=r.timeWindowsAreUTC;V.analysisSettings=new gt.Z({accumulateAttributes:I,directionsLanguage:j,findBestSequence:K,preserveFirstStop:$,preserveLastStop:Q,startTimeIsUTC:H,timeWindowsAreUTC:Y,travelMode:C}),V.totalDuration=Rt(null!==(d=null===(f=V.totalCosts)||void 0===f?void 0:f[B])&&void 0!==d?d:0,R),V.totalDistance=Pt(null!==(v=null===(m=V.totalCosts)||void 0===m?void 0:m[T])&&void 0!==v?v:0,P),V.totalLateDuration=Rt(null!==(h=null===(g=V.totalViolations)||void 0===g?void 0:g[B])&&void 0!==h?h:0,R),V.totalWaitDuration=Rt(null!==(w=null===(Z=V.totalWait)||void 0===Z?void 0:Z[B])&&void 0!==w?w:0,R),null!=V.totalCosts&&J(V.totalCosts),null!=V.totalViolations&&J(V.totalViolations),null!=V.totalWait&&J(V.totalWait);var ee,te=(0,p.Z)(e.stops);try{for(te.s();!(ee=te.n()).done;){var re,oe,ne,ie,ae,le,se=ee.value;null!=se.serviceCosts&&(se.serviceDuration=Rt(null!==(re=se.serviceCosts[B])&&void 0!==re?re:0,R),se.serviceDistance=Pt(null!==(oe=se.serviceCosts[T])&&void 0!==oe?oe:0,P),J(se.serviceCosts)),null!=se.cumulativeCosts&&(se.cumulativeDuration=Rt(null!==(ne=se.cumulativeCosts[B])&&void 0!==ne?ne:0,R),se.cumulativeDistance=Pt(null!==(ie=se.cumulativeCosts[T])&&void 0!==ie?ie:0,P),J(se.cumulativeCosts)),null!=se.violations&&(se.lateDuration=Rt(null!==(ae=se.violations[B])&&void 0!==ae?ae:0,R),J(se.violations)),null!=se.wait&&(se.waitDuration=Rt(null!==(le=se.wait[B])&&void 0!==le?le:0,R),J(se.wait))}}catch(ue){te.e(ue)}finally{te.f()}}else Mt.warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.")}function Nt(e){return xt.apply(this,arguments)}function xt(){return xt=(0,u.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fe.Z.WGS84,e.next=3,(0,A.initializeProjection)(t.spatialReference,r);case 3:return e.abrupt("return",(0,A.project)(t,r));case 4:case"end":return e.stop()}}),e)}))),xt.apply(this,arguments)}function Rt(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function Pt(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,B.En)(e,t,"meters")}var Lt=h.Z.ofType(Ye.Z),jt=h.Z.ofType(et.Z),It=h.Z.ofType(tt.Z),At=h.Z.ofType(rt.Z),Jt=h.Z.ofType(ot.Z),Ot=h.Z.ofType(wt.Z),Dt="esri.layers.RouteLayer",Mt=w.Z.getLogger(Dt),Ut=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var o;(0,i.Z)(this,r),(o=t.call(this,e))._cachedServiceDescription=null,o._featureCollection=null,o._type="Feature Collection",o.defaultSymbols=new Q,o.directionLines=null,o.directionPoints=null,o.featureCollectionType="route",o.legendEnabled=!1,o.maxScale=0,o.minScale=0,o.pointBarriers=new It,o.polygonBarriers=new At,o.polylineBarriers=new Jt,o.routeInfo=null,o.spatialReference=Fe.Z.WGS84,o.stops=new Ot,o.type="route";var n=function(){o._setStopSymbol(o.stops)};return o.addHandles((0,C.on)((function(){return o.stops}),"change",n,{sync:!0,onListenerAdd:n})),o}return(0,a.Z)(r,[{key:"writeFeatureCollectionWebmap",value:function(e,t,r,o){var n=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((function(e){return!!e})),i=n.map((function(e,t){return t})),a="web-map"===o.origin?"featureCollection.layers":"layers";(0,_.RB)(a,n,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=i}},{key:"readDirectionLines",value:function(e,t){return this._getNetworkFeatures(t,"DirectionLines",(function(e){return Ye.Z.fromGraphic(e)}))}},{key:"readDirectionPoints",value:function(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(function(e){return et.Z.fromGraphic(e)}))}},{key:"fullExtent",get:function(){var e,t=new I.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:Fe.Z.WGS84});if(null!=this.routeInfo&&null!=this.routeInfo.geometry)return null!==(e=this.routeInfo.geometry.extent)&&void 0!==e?e:t;if(null==this.stops)return t;var r=this.stops.filter((function(e){return null!=e.geometry}));if(r.length<2)return t;var o=r.at(0).geometry.spatialReference;if(null==o)return t;var n=r.toArray().map((function(e){var t=e.geometry;return[t.x,t.y]}));return new Zt.Z({points:n,spatialReference:o}).extent}},{key:"readMaxScale",value:function(e,t){var r,o,n=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,i=null===n||void 0===n?void 0:n.find((function(e){return null!=e.layerDefinition.maxScale}));return null!==(o=null===i||void 0===i?void 0:i.layerDefinition.maxScale)&&void 0!==o?o:0}},{key:"readMinScale",value:function(e,t){var r,o,n=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,i=null===n||void 0===n?void 0:n.find((function(e){return null!=e.layerDefinition.minScale}));return null!==(o=null===i||void 0===i?void 0:i.layerDefinition.minScale)&&void 0!==o?o:0}},{key:"readPointBarriers",value:function(e,t){return this._getNetworkFeatures(t,"Barriers",(function(e){return tt.Z.fromGraphic(e)}))}},{key:"readPolygonBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(function(e){return rt.Z.fromGraphic(e)}))}},{key:"readPolylineBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(function(e){return ot.Z.fromGraphic(e)}))}},{key:"readRouteInfo",value:function(e,t){var r=this._getNetworkFeatures(t,"RouteInfo",(function(e){return nt.Z.fromGraphic(e)}));return r.length>0?r.at(0):null}},{key:"readSpatialReference",value:function(e,t){var r,o,n,i,a,l,s=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers;if(null===s||void 0===s||!s.length)return Fe.Z.WGS84;var u=s[0],p=u.layerDefinition,c=u.featureSet,y=c.features[0],d=null!==(o=null!==(n=null!==(i=null!==(a=null===y||void 0===y||null===(l=y.geometry)||void 0===l?void 0:l.spatialReference)&&void 0!==a?a:c.spatialReference)&&void 0!==i?i:p.spatialReference)&&void 0!==n?n:p.extent.spatialReference)&&void 0!==o?o:J.Zn;return Fe.Z.fromJSON(d)}},{key:"readStops",value:function(e,t){var r=this;return this._getNetworkFeatures(t,"Stops",(function(e){return wt.Z.fromGraphic(e)}),(function(e){return r._setStopSymbol(e)}))}},{key:"title",get:function(){return null!=this.routeInfo&&null!=this.routeInfo.name?this.routeInfo.name:"Route"},set:function(e){this._overrideIfSome("title",e)}},{key:"url",get:function(){return y.Z.routeServiceUrl},set:function(e){null!=e?this._set("url",(0,E.Nm)(e,Mt)):this._set("url",y.Z.routeServiceUrl)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"removeAll",value:function(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}},{key:"removeResult",value:function(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}},{key:"save",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,o,i,a,l,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=this.fullExtent,r=this.portalItem){e.next=5;break}throw new b.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");case 5:if(r.id){e.next=7;break}throw new b.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");case 7:if("Feature Collection"===r.type){e.next=9;break}throw new b.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');case 9:if(null!=this.routeInfo){e.next=11;break}throw new b.Z("routelayer:route-unsolved","save() requires a solved route");case 11:return o=r.portal,e.next=14,o.signIn();case 14:if(e.t0=o.user,e.t0){e.next=18;break}return e.next=18,r.reload();case 18:if(i=r.itemUrl,"admin"===(a=r.itemControl)||"update"===a){e.next=21;break}throw new b.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");case 21:return l={messages:[],origin:"portal-item",portal:o,url:i?(0,T.mN)(i):void 0,writtenProperties:[]},s=this.write(void 0,l),e.next=24,Nt(t);case 24:return r.extent=e.sent,r.title=this.title,e.next=28,r.update({data:s});case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){var r,o,i,a,l,s,u,p,c,y,d=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.load();case 3:if(null!=this.routeInfo){e.next=5;break}throw new b.Z("routelayer:route-unsolved","saveAs() requires a solved route");case 5:if(s=Y.default.from(t).clone(),null===(r=s.extent)||void 0===r){e.next=10;break}e.next=13;break;case 10:return e.next=12,Nt(this.fullExtent);case 12:s.extent=e.sent;case 13:return s.id=null,null!==(o=s.portal)&&void 0!==o||(s.portal=H.Z.getDefault()),null!==(i=s.title)&&void 0!==i||(s.title=this.title),s.type="Feature Collection",s.typeKeywords=["Data","Feature Collection",ee.Kz.MULTI_LAYER,"Route Layer"],u=s.portal,p={messages:[],origin:"portal-item",portal:u,url:null,writtenProperties:[]},e.next=21,u.signIn();case 21:return c=null===l||void 0===l?void 0:l.folder,y=this.write(void 0,p),e.next=24,null===(a=u.user)||void 0===a?void 0:a.addItem({item:s,folder:c,data:y});case 24:return this.portalItem=s,(0,j.D)(p),p.portalItem=s,e.abrupt("return",s);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"solve",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r){var o,i,a,l,s,u,c,y,d,f,v,m,g,w,Z,_,C,B,T,k,N,x,R,P;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y=null!==(o=null===t||void 0===t?void 0:t.stops)&&void 0!==o?o:this.stops,d=null!==(i=null===t||void 0===t?void 0:t.pointBarriers)&&void 0!==i?i:_t(this.pointBarriers),f=null!==(a=null===t||void 0===t?void 0:t.polylineBarriers)&&void 0!==a?a:_t(this.polylineBarriers),v=null!==(l=null===t||void 0===t?void 0:t.polygonBarriers)&&void 0!==l?l:_t(this.polygonBarriers),null!=y){e.next=3;break}throw new b.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");case 3:if(!((Bt(y)||Tt(y))&&y.features.length<2||h.Z.isCollection(y)&&y.length<2)){e.next=5;break}throw new b.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");case 5:if(h.Z.isCollection(y)){m=(0,p.Z)(y);try{for(m.s();!(g=m.n()).done;)g.value.routeName=null}catch(n){m.e(n)}finally{m.f()}}return w=null===t||void 0===t?void 0:t.apiKey,Z=this.url,e.next=10,this._getServiceDescription(Z,w,r);case 10:for(x in _=e.sent,C=null!==(s=null===t||void 0===t?void 0:t.travelMode)&&void 0!==s?s:_.defaultTravelMode,B=null!==(u=null===t||void 0===t?void 0:t.accumulateAttributes)&&void 0!==u?u:[],null!=C&&(B.push(C.distanceAttributeName),C.timeAttributeName&&B.push(C.timeAttributeName)),T={startTime:new Date},k={accumulateAttributes:B,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:d,polylineBarriers:f,polygonBarriers:v,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!d,returnDirections:!0,returnPolygonBarriers:!!v,returnPolylineBarriers:!!f,returnRoutes:!0,returnStops:!0,stops:y},N=t?ht.from(t):new ht,T)null==N[x]&&(N[x]=T[x]);return N.set(k),e.prev=17,e.next=20,$e(Z,N,r);case 20:R=e.sent,e.next=26;break;case 23:throw e.prev=23,e.t0=e.catch(17),(0,S.D_)(e.t0)?e.t0:new b.Z("routelayer:failed-route-request","the routing request failed",{error:e.t0});case 26:return P=this._toRouteLayerSolution(R),e.abrupt("return",(this._isOverridden("title")||(this.title=null!==(c=P.routeInfo.name)&&void 0!==c?c:"Route"),kt(P,_,N),P));case 28:case"end":return e.stop()}}),e,this,[[17,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=e.stops,r=e.directionLines,o=e.directionPoints,n=e.pointBarriers,i=e.polylineBarriers,a=e.polygonBarriers,l=e.routeInfo;this.set({stops:t,pointBarriers:n,polylineBarriers:i,polygonBarriers:a}),this._set("directionLines",r),this._set("directionPoints",o),this._set("routeInfo",l),null!=l.geometry&&(this.spatialReference=l.geometry.spatialReference)}},{key:"_getNetworkFeatures",value:function(e,t,r,o){var n,i,a,l,s=this,u=Ct(e)?e.layers:null===(n=e.featureCollection)||void 0===n?void 0:n.layers,p=null===u||void 0===u?void 0:u.find((function(e){return e.layerDefinition.name===t}));if(null==p)return new h.Z;var c=p.layerDefinition,y=p.popupInfo,d=p.featureSet,b=c.drawingInfo.renderer,g=d.features,w=null!==(i=null!==(a=null!==(l=d.spatialReference)&&void 0!==l?l:c.spatialReference)&&void 0!==a?a:c.extent.spatialReference)&&void 0!==i?i:J.Zn,Z=b&&(0,m.a)(b),_=Fe.Z.fromJSON(w),S=g.map((function(e){var o,n,i,a=f.Z.fromJSON(e);null!=a.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(a.geometry.spatialReference=_);var l=r(a);return null!==(o=l.symbol)&&void 0!==o||(l.symbol=null!==(n=null===Z||void 0===Z?void 0:Z.getSymbol(a))&&void 0!==n?n:s._getNetworkSymbol(t)),null!==(i=l.popupTemplate)&&void 0!==i||(l.popupTemplate=y&&v.Z.fromJSON(y)),l}));return o&&S.some((function(e){return!e.symbol}))&&o(S),new h.Z(S)}},{key:"_getNetworkSymbol",value:function(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}},{key:"_getServiceDescription",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._cachedServiceDescription||this._cachedServiceDescription.url!==t){e.next=2;break}return e.abrupt("return",this._cachedServiceDescription.serviceDescription);case 2:return e.next=4,me(t,r,o);case 4:return i=e.sent,e.abrupt("return",(this._cachedServiceDescription={serviceDescription:i,url:t},i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,o){return e.apply(this,arguments)}}()},{key:"_setStopSymbol",value:function(e){if(e&&0!==e.length&&null!=this.defaultSymbols.stops&&!e.every((function(e){return null!=e.symbol}))){var t=this.defaultSymbols.stops,r=t.first,n=t.last,i=t.middle,a=t.unlocated,l=t.waypoint,s=t.break;if(null!=this.routeInfo&&1!==e.length){var u,c=e.map((function(e){return e.sequence})).filter((function(e){return null!=e})),y=Math.min.apply(Math,(0,o.Z)(c)),d=Math.max.apply(Math,(0,o.Z)(c)),f=(0,p.Z)(e);try{for(f.s();!(u=f.n()).done;){var v=u.value;v.sequence!==y?v.sequence!==d?"ok"===v.status||"not-located-on-closest"===v.status?"waypoint"!==v.locationType?"break"!==v.locationType?v.symbol=i:v.symbol=s:v.symbol=l:v.symbol=a:v.symbol=n:v.symbol=r}}catch(m){f.e(m)}finally{f.f()}}else e.forEach((function(t,o){switch(o){case 0:t.symbol=r;break;case e.length-1:t.symbol=n;break;default:t.symbol=i}}))}}},{key:"_toRouteLayerSolution",value:function(e){var t,r,o,n,i,a,l,s=this,u=null===(t=e.routeResults[0].stops)||void 0===t?void 0:t.map((function(e){return wt.Z.fromJSON(e.toJSON())}));this._setStopSymbol(u);var p=new Ot(u),c=new At(null===(r=e.polygonBarriers)||void 0===r?void 0:r.map((function(e){var t=rt.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polygonBarriers,t}))),y=new Jt(null===(o=e.polylineBarriers)||void 0===o?void 0:o.map((function(e){var t=ot.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polylineBarriers,t}))),d=new It(null===(n=e.pointBarriers)||void 0===n?void 0:n.map((function(e){var t=tt.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.pointBarriers,t}))),f=null===(i=e.routeResults[0].route)||void 0===i?void 0:i.toJSON(),v=nt.Z.fromJSON(f);v.symbol=this.defaultSymbols.routeInfo;var m=new jt(null===(a=e.routeResults[0].directionPoints)||void 0===a?void 0:a.features.map((function(e){var t=et.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionPoints,t})));return{directionLines:new Lt(null===(l=e.routeResults[0].directionLines)||void 0===l?void 0:l.features.map((function(e){var t=Ye.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionLines,t}))),directionPoints:m,pointBarriers:d,polygonBarriers:c,polylineBarriers:y,routeInfo:v,stops:p}}},{key:"_writeDirectionLines",value:function(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",Ye.Z.fields,Ye.Z.popupInfo,"DirectionLines","Direction Lines")}},{key:"_writeDirectionPoints",value:function(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",et.Z.fields,et.Z.popupInfo,"DirectionPoints","Direction Points")}},{key:"_writeNetworkFeatures",value:function(e,t,r,o,n,i,a){if(null==e||!e.length)return null;var l=this.spatialReference.toJSON(),s=this.fullExtent,u=this.maxScale,p=this.minScale;return{featureSet:{features:e.toArray().map((function(e){return function(e){var t=e.toGraphic().toJSON();return{attributes:t.attributes,geometry:t.geometry,popupInfo:t.popupTemplate,symbol:t.symbol}}(e)})),geometryType:r,spatialReference:l},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():St(r)}},extent:s.toJSON(),fields:o,geometryType:r,hasM:!1,hasZ:!1,maxScale:u,minScale:p,name:i,objectIdField:"ObjectID",spatialReference:l,title:a,type:"Feature Layer",typeIdField:""},popupInfo:n}}},{key:"_writePointBarriers",value:function(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",tt.Z.fields,tt.Z.popupInfo,"Barriers","Point Barriers")}},{key:"_writePolygonBarriers",value:function(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",rt.Z.fields,rt.Z.popupInfo,"PolygonBarriers","Polygon Barriers")}},{key:"_writePolylineBarriers",value:function(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",ot.Z.fields,ot.Z.popupInfo,"PolylineBarriers","Line Barriers")}},{key:"_writeRouteInfo",value:function(){return this._writeNetworkFeatures(null!=this.routeInfo?new h.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",nt.Z.fields,nt.Z.popupInfo,"RouteInfo","Route Details")}},{key:"_writeStops",value:function(){var e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",wt.Z.fields,wt.Z.popupInfo,"Stops","Stops");if(null==e)return null;var t=this.defaultSymbols.stops,r=null!=t&&null!=t.first&&t.first.toJSON(),o=null!=t&&null!=t.middle&&t.middle.toJSON(),n=null!=t&&null!=t.last&&t.last.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:o,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:"".concat(this.stops.length),symbol:n,label:"Last Stop"}]},e}}]),r}((0,D.h)((0,F.M)((0,M.q)((0,U.I)((0,Z.R)((0,g.p)(O.Z)))))));(0,c._)([(0,k.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy:function(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],Ut.prototype,"_featureCollection",void 0),(0,c._)([(0,L.c)(["web-map","portal-item"],"_featureCollection")],Ut.prototype,"writeFeatureCollectionWebmap",null),(0,c._)([(0,k.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy:function(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],Ut.prototype,"_type",void 0),(0,c._)([(0,k.Cb)({nonNullable:!0,type:Q})],Ut.prototype,"defaultSymbols",void 0),(0,c._)([(0,k.Cb)({readOnly:!0})],Ut.prototype,"directionLines",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],Ut.prototype,"readDirectionLines",null),(0,c._)([(0,k.Cb)({readOnly:!0})],Ut.prototype,"directionPoints",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],Ut.prototype,"readDirectionPoints",null),(0,c._)([(0,k.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Ut.prototype,"featureCollectionType",void 0),(0,c._)([(0,k.Cb)({readOnly:!0})],Ut.prototype,"fullExtent",null),(0,c._)([(0,k.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],Ut.prototype,"legendEnabled",void 0),(0,c._)([(0,k.Cb)({type:["show","hide"]})],Ut.prototype,"listMode",void 0),(0,c._)([(0,k.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Ut.prototype,"maxScale",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],Ut.prototype,"readMaxScale",null),(0,c._)([(0,k.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Ut.prototype,"minScale",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],Ut.prototype,"readMinScale",null),(0,c._)([(0,k.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],Ut.prototype,"operationalLayerType",void 0),(0,c._)([(0,k.Cb)({nonNullable:!0,type:h.Z.ofType(tt.Z)})],Ut.prototype,"pointBarriers",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],Ut.prototype,"readPointBarriers",null),(0,c._)([(0,k.Cb)({nonNullable:!0,type:h.Z.ofType(rt.Z)})],Ut.prototype,"polygonBarriers",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],Ut.prototype,"readPolygonBarriers",null),(0,c._)([(0,k.Cb)({nonNullable:!0,type:h.Z.ofType(ot.Z)})],Ut.prototype,"polylineBarriers",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],Ut.prototype,"readPolylineBarriers",null),(0,c._)([(0,k.Cb)({readOnly:!0})],Ut.prototype,"routeInfo",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],Ut.prototype,"readRouteInfo",null),(0,c._)([(0,k.Cb)({type:Fe.Z})],Ut.prototype,"spatialReference",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],Ut.prototype,"readSpatialReference",null),(0,c._)([(0,k.Cb)({nonNullable:!0,type:h.Z.ofType(wt.Z)})],Ut.prototype,"stops",void 0),(0,c._)([(0,R.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],Ut.prototype,"readStops",null),(0,c._)([(0,k.Cb)()],Ut.prototype,"title",null),(0,c._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],Ut.prototype,"type",void 0),(0,c._)([(0,k.Cb)()],Ut.prototype,"url",null);var Ft=Ut=(0,c._)([(0,P.j)(Dt)],Ut)}}]);
//# sourceMappingURL=8257.9d5d3f82.chunk.js.map