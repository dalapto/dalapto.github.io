"use strict";(self.webpackChunkreact_arcgis=self.webpackChunkreact_arcgis||[]).push([[1976],{79347:function(e,t,r){r.d(t,{e:function(){return o}});var n,i,a,s=r(84397),l={exports:{}};n=l,i=function(){function e(e,r,i){i=i||2;var a,s,l,u,h,f,_,c=r&&r.length,y=c?r[0]*i:e.length,x=t(e,0,y,i,!0),v=[];if(!x||x.next===x.prev)return v;if(c&&(x=o(e,r,x,i)),e.length>80*i){a=l=e[0],s=u=e[1];for(var d=i;d<y;d+=i)(h=e[d])<a&&(a=h),(f=e[d+1])<s&&(s=f),h>l&&(l=h),f>u&&(u=f);_=0!==(_=Math.max(l-a,u-s))?1/_:0}return n(x,v,i,a,s,_),v}function t(e,t,r,n,i){var a,s;if(i===M(e,t,r,n)>0)for(a=t;a<r;a+=n)s=N(a,e[a],e[a+1],s);else for(a=r-n;a>=t;a-=n)s=N(a,e[a],e[a+1],s);if(s&&T(s,s.next)){var l=s.next;S(s),s=l}return s}function r(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!T(n,n.next)&&0!==E(n.prev,n,n.next))n=n.next;else{var i=n.prev;if(S(n),(n=t=i)===n.next)break;r=!0}}while(r||n!==t);return t}function n(e,t,o,u,h,f,_){if(e){!_&&f&&c(e,u,h,f);for(var y,x,v=e;e.prev!==e.next;)if(y=e.prev,x=e.next,f?a(e,u,h,f):i(e))t.push(y.i/o),t.push(e.i/o),t.push(x.i/o),S(e),e=x.next,v=x.next;else if((e=x)===v){_?1===_?n(e=s(r(e),t,o),t,o,u,h,f,2):2===_&&l(e,t,o,u,h,f):n(r(e),t,o,u,h,f,1);break}}}function i(e){var t=e.prev,r=e,n=e.next;if(E(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(v(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&E(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(e,t,r,n){var i=e.prev,a=e,s=e.next;if(E(i,a,s)>=0)return!1;for(var l=i.x<a.x?i.x<s.x?i.x:s.x:a.x<s.x?a.x:s.x,o=i.y<a.y?i.y<s.y?i.y:s.y:a.y<s.y?a.y:s.y,u=i.x>a.x?i.x>s.x?i.x:s.x:a.x>s.x?a.x:s.x,h=i.y>a.y?i.y>s.y?i.y:s.y:a.y>s.y?a.y:s.y,f=y(l,o,t,r,n),_=y(u,h,t,r,n),c=e.prevZ,x=e.nextZ;c&&c.z>=f&&x&&x.z<=_;){if(c!==e.prev&&c!==e.next&&v(i.x,i.y,a.x,a.y,s.x,s.y,c.x,c.y)&&E(c.prev,c,c.next)>=0)return!1;if(c=c.prevZ,x!==e.prev&&x!==e.next&&v(i.x,i.y,a.x,a.y,s.x,s.y,x.x,x.y)&&E(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;c&&c.z>=f;){if(c!==e.prev&&c!==e.next&&v(i.x,i.y,a.x,a.y,s.x,s.y,c.x,c.y)&&E(c.prev,c,c.next)>=0)return!1;c=c.prevZ}for(;x&&x.z<=_;){if(x!==e.prev&&x!==e.next&&v(i.x,i.y,a.x,a.y,s.x,s.y,x.x,x.y)&&E(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function s(e,t,n){var i=e;do{var a=i.prev,s=i.next.next;!T(a,s)&&p(a,i,i.next,s)&&I(a,s)&&I(s,a)&&(t.push(a.i/n),t.push(i.i/n),t.push(s.i/n),S(i),S(i.next),i=e=s),i=i.next}while(i!==e);return r(i)}function l(e,t,i,a,s,l){var o=e;do{for(var u=o.next.next;u!==o.prev;){if(o.i!==u.i&&d(o,u)){var h=A(o,u);return o=r(o,o.next),h=r(h,h.next),n(o,t,i,a,s,l),void n(h,t,i,a,s,l)}u=u.next}o=o.next}while(o!==e)}function o(e,n,i,a){var s,l,o,h=[];for(s=0,l=n.length;s<l;s++)(o=t(e,n[s]*a,s<l-1?n[s+1]*a:e.length,a,!1))===o.next&&(o.steiner=!0),h.push(x(o));for(h.sort(u),s=0;s<h.length;s++)i=r(i=f(h[s],i),i.next);return i}function u(e,t){return e.x-t.x}function h(e){if(e.next.prev===e)return e;for(var t=e;;){var r=t.next;if(r.prev===t||r===t||r===e)break;t=r}return t}function f(e,t){var n=function(e,t){var r,n=t,i=e.x,a=e.y,s=-1/0;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var l=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=i&&l>s){if(s=l,l===i){if(a===n.y)return n;if(a===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===s)return r;var o,u=r,h=r.x,f=r.y,c=1/0;n=r;do{i>=n.x&&n.x>=h&&i!==n.x&&v(a<f?i:s,a,h,f,a<f?s:i,a,n.x,n.y)&&(o=Math.abs(a-n.y)/(i-n.x),I(n,e)&&(o<c||o===c&&(n.x>r.x||n.x===r.x&&_(r,n)))&&(r=n,c=o)),n=n.next}while(n!==u);return r}(e,t);if(!n)return t;var i=A(n,e),a=r(n,n.next),s=h(i);return r(s,s.next),a=h(a),h(t===n?a:t)}function _(e,t){return E(e.prev,e,t.prev)<0&&E(t.next,e,e.next)<0}function c(e,t,r,n){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,a,s,l,o,u=1;do{for(r=e,e=null,a=null,s=0;r;){for(s++,n=r,l=0,t=0;t<u&&(l++,n=n.nextZ);t++);for(o=u;l>0||o>0&&n;)0!==l&&(0===o||!n||r.z<=n.z)?(i=r,r=r.nextZ,l--):(i=n,n=n.nextZ,o--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;r=n}a.nextZ=null,u*=2}while(s>1)}(i)}function y(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function x(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function v(e,t,r,n,i,a,s,l){return(i-s)*(t-l)-(e-s)*(a-l)>=0&&(e-s)*(n-l)-(r-s)*(t-l)>=0&&(r-s)*(a-l)-(i-s)*(n-l)>=0}function d(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&p(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(I(e,t)&&I(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{r.y>a!=r.next.y>a&&r.next.y!==r.y&&i<(r.next.x-r.x)*(a-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)&&(E(e.prev,e,t.prev)||E(e,t.prev,t))||T(e,t)&&E(e.prev,e,e.next)>0&&E(t.prev,t,t.next)>0)}function E(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function T(e,t){return e.x===t.x&&e.y===t.y}function p(e,t,r,n){var i=R(E(e,t,r)),a=R(E(e,t,n)),s=R(E(r,n,e)),l=R(E(r,n,t));return i!==a&&s!==l||!(0!==i||!g(e,r,t))||!(0!==a||!g(e,n,t))||!(0!==s||!g(r,e,n))||!(0!==l||!g(r,t,n))}function g(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function R(e){return e>0?1:e<0?-1:0}function I(e,t){return E(e.prev,e,e.next)<0?E(e,t,e.next)>=0&&E(e,e.prev,t)>=0:E(e,t,e.prev)<0||E(e,e.next,t)<0}function A(e,t){var r=new m(e.i,e.x,e.y),n=new m(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,a.next=n,n.prev=a,n}function N(e,t,r,n){var i=new m(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function m(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(e,t,r,n){for(var i=0,a=t,s=r-n;a<r;a+=n)i+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return i}return e.deviation=function(e,t,r,n){var i=t&&t.length,a=i?t[0]*r:e.length,s=Math.abs(M(e,0,a,r));if(i)for(var l=0,o=t.length;l<o;l++){var u=t[l]*r,h=l<o-1?t[l+1]*r:e.length;s-=Math.abs(M(e,u,h,r))}var f=0;for(l=0;l<n.length;l+=3){var _=n[l]*r,c=n[l+1]*r,y=n[l+2]*r;f+=Math.abs((e[_]-e[y])*(e[c+1]-e[_+1])-(e[_]-e[c])*(e[y+1]-e[_+1]))}return 0===s&&0===f?0:Math.abs((f-s)/s)},e.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var s=0;s<t;s++)r.vertices.push(e[i][a][s]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r},e},void 0!==(a=i())&&(n.exports=a);var o=(0,s.g)(l.exports)},78084:function(e,t,r){r.d(t,{Z:function(){return _}});var n,i,a=r(15671),s=r(43144),l=r(93169),o=r(13005);(i=n||(n={}))[i.varint=0]="varint",i[i.fixed64=1]="fixed64",i[i.delimited=2]="delimited",i[i.fixed32=5]="fixed32",i[i.unknown=99]="unknown";var u=4294967296,h=new TextDecoder("utf-8"),f=(0,l.Z)("safari")||(0,l.Z)("ios")?6:(0,l.Z)("ff")?12:32,_=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t?t.byteLength:0;(0,a.Z)(this,e),this._tag=0,this._dataType=n.unknown,this._init(t,r,i,s)}return(0,s.Z)(e,[{key:"_init",value:function(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n}},{key:"asUnsafe",value:function(){return this}},{key:"clone",value:function(){return new e(this._data,this._dataView,this._pos,this._end)}},{key:"pos",value:function(){return this._pos}},{key:"move",value:function(e){this._pos=e}},{key:"nextTag",value:function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0}},{key:"next",value:function(){if(this._pos===this._end)return!1;var e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}},{key:"empty",value:function(){return this._pos>=this._end}},{key:"tag",value:function(){return this._tag}},{key:"getInt32",value:function(){return this._decodeVarint()}},{key:"getInt64",value:function(){return this._decodeVarint()}},{key:"getUInt32",value:function(){var e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}},{key:"getUInt64",value:function(){return this._decodeVarint()}},{key:"getSInt32",value:function(){var e=this.getUInt32();if(void 0!==e)return e>>>1^-(1&e)|0}},{key:"getSInt64",value:function(){return this._decodeSVarint()}},{key:"getBool",value:function(){var e=0!==this._data[this._pos];return this._skip(1),e}},{key:"getEnum",value:function(){return this._decodeVarint()}},{key:"getFixed64",value:function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getUint32(t+4,!0)*u;return this._skip(8),r}},{key:"getSFixed64",value:function(){var e=this._dataView,t=this._pos,r=e.getUint32(t,!0)+e.getInt32(t+4,!0)*u;return this._skip(8),r}},{key:"getDouble",value:function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}},{key:"getFixed32",value:function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}},{key:"getSFixed32",value:function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}},{key:"getFloat",value:function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}},{key:"getString",value:function(){var e=this._getLength(),t=this._pos,r=this._toString(this._data,t,t+e);return this._skip(e),r}},{key:"getBytes",value:function(){var e=this._getLength(),t=this._pos,r=this._toBytes(this._data,t,t+e);return this._skip(e),r}},{key:"getLength",value:function(){return this._getLengthUnsafe()}},{key:"processMessageWithArgs",value:function(e,t,r,n){var i=this.getMessage(),a=e(i,t,r,n);return i.release(),a}},{key:"processMessage",value:function(e){var t=this.getMessage(),r=e(t);return t.release(),r}},{key:"getMessage",value:function(){var t=this._getLength(),r=e.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}},{key:"release",value:function(){e.pool.release(this)}},{key:"dataType",value:function(){return this._dataType}},{key:"skip",value:function(){switch(this._dataType){case n.varint:this._decodeVarint();break;case n.fixed64:this._skip(8);break;case n.delimited:this._skip(this._getLength());break;case n.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}},{key:"skipLen",value:function(e){this._skip(e)}},{key:"_skip",value:function(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}},{key:"_decodeVarint",value:function(){var e=this._data,t=this._pos,r=0,n=0;if(this._end-t>=10)do{if(r|=127&(n=e[t++]),0==(128&n))break;if(r|=(127&(n=e[t++]))<<7,0==(128&n))break;if(r|=(127&(n=e[t++]))<<14,0==(128&n))break;if(r|=(127&(n=e[t++]))<<21,0==(128&n))break;if(r+=268435456*(127&(n=e[t++])),0==(128&n))break;if(r+=34359738368*(127&(n=e[t++])),0==(128&n))break;if(r+=4398046511104*(127&(n=e[t++])),0==(128&n))break;if(r+=562949953421312*(127&(n=e[t++])),0==(128&n))break;if(r+=72057594037927940*(127&(n=e[t++])),0==(128&n))break;if(r+=0x8000000000000000*(127&(n=e[t++])),0==(128&n))break;throw new Error("Varint too long!")}while(0);else{for(var i=1;t!==this._end&&0!=(128&(n=e[t]));)++t,r+=(127&n)*i,i*=128;if(t===this._end)throw new Error("Varint overrun!");++t,r+=n*i}return this._pos=t,r}},{key:"_decodeSVarint",value:function(){var e=this._data,t=this._pos,r=0,n=0,i=1&e[t];if(this._end-t>=10)do{if(r|=127&(n=e[t++]),0==(128&n))break;if(r|=(127&(n=e[t++]))<<7,0==(128&n))break;if(r|=(127&(n=e[t++]))<<14,0==(128&n))break;if(r|=(127&(n=e[t++]))<<21,0==(128&n))break;if(r+=268435456*(127&(n=e[t++])),0==(128&n))break;if(r+=34359738368*(127&(n=e[t++])),0==(128&n))break;if(r+=4398046511104*(127&(n=e[t++])),0==(128&n))break;if(r+=562949953421312*(127&(n=e[t++])),0==(128&n))break;if(r+=72057594037927940*(127&(n=e[t++])),0==(128&n))break;if(r+=0x8000000000000000*(127&(n=e[t++])),0==(128&n))break;throw new Error("Varint too long!")}while(0);else{for(var a=1;t!==this._end&&0!=(128&(n=e[t]));)++t,r+=(127&n)*a,a*=128;if(t===this._end)throw new Error("Varint overrun!");++t,r+=n*a}return this._pos=t,i?-(r+1)/2:r/2}},{key:"_getLength",value:function(){if(this._dataType!==n.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}},{key:"_getLengthUnsafe",value:function(){return this.getUInt32()}},{key:"_toString",value:function(e,t,r){if((r=Math.min(this._end,r))-t>f){var n=e.subarray(t,r);return h.decode(n)}for(var i="",a="",s=t;s<r;++s){var l=e[s];128&l?a+="%"+l.toString(16):(i+=decodeURIComponent(a)+String.fromCharCode(l),a="")}return a.length&&(i+=decodeURIComponent(a)),i}},{key:"_toBytes",value:function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)}}]),e}();_.pool=new o.Z(_,void 0,(function(e){e._data=null,e._dataView=null}))},48035:function(e,t,r){r.d(t,{b:function(){return y},j:function(){return h}});var n=r(74165),i=r(15861),a=r(65905),s=r(93169),l=128e3,o=null,u=null;function h(){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(o||(o=_()),o));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,s.Z)("esri-csp-restrictions")){e.next=6;break}return e.next=3,r.e(5948).then(r.bind(r,5948)).then((function(e){return e.l}));case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,r.e(7069).then(r.bind(r,97069)).then((function(e){return e.l}));case 8:e.t0=e.sent;case 9:return t=e.t0,e.next=12,t.load({locateFile:function(e){return(0,a.V)("esri/core/libs/libtess/".concat(e))}});case 12:u=e.sent;case 13:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function y(e,t){var r=Math.max(e.length,l);return u.triangulate(e,t,r)}},79308:function(e,t,r){r.r(t),r.d(t,{default:function(){return oe}});var n=r(37762),i=r(74165),a=r(15861),s=r(15671),l=r(43144),o=r(66978),u=r(10106),h=r(93433),f=r(40316),_=r(99201);function c(e){return 746===e||747===e||!(e<4352)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103&&!(e>=65097&&e<=65103)||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351&&!(e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=12592&&e<=12687||e>=43360&&e<=43391||e>=55216&&e<=55295||e>=4352&&e<=4607||e>=44032&&e<=55215||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12688&&e<=12703||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543&&12540!==e||e>=65280&&e<=65519&&!(65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||e>=65104&&e<=65135&&!(e>=65112&&e<=65118||e>=65123&&e<=65126)||e>=5120&&e<=5759||e>=6320&&e<=6399||e>=65040&&e<=65055||e>=19904&&e<=19967||e>=40960&&e<=42127||e>=42128&&e<=42191)}function y(e){return!(e<11904)&&(e>=12704&&e<=12735||e>=12544&&e<=12591||e>=65072&&e<=65103||e>=63744&&e<=64255||e>=13056&&e<=13311||e>=11904&&e<=12031||e>=12736&&e<=12783||e>=12288&&e<=12351||e>=13312&&e<=19903||e>=19968&&e<=40959||e>=12800&&e<=13055||e>=65280&&e<=65519||e>=12352&&e<=12447||e>=12272&&e<=12287||e>=12032&&e<=12255||e>=12784&&e<=12799||e>=12448&&e<=12543||e>=65040&&e<=65055||e>=42128&&e<=42191||e>=40960&&e<=42127)}function x(e){switch(e){case 10:case 32:case 38:case 40:case 41:case 43:case 45:case 47:case 173:case 183:case 8203:case 8208:case 8211:case 8231:return!0}return!1}function v(e){switch(e){case 9:case 10:case 11:case 12:case 13:case 32:return!0}return!1}var d,E=r(12233),T=24,p=function(){function e(t,r,n,i,a,l,o){(0,s.Z)(this,e),this._glyphItems=t,this._maxWidth=r,this._lineHeight=n,this._letterSpacing=i,this._hAnchor=a,this._vAnchor=l,this._justify=o}return(0,l.Z)(e,[{key:"getShaping",value:function(e,t,r){var i,a=this._letterSpacing,s=this._lineHeight,l=this._justify,o=this._maxWidth,u=[],h=0,f=0,_=(0,n.Z)(e);try{for(_.s();!(i=_.n()).done;){var d=i.value.codePointAt(0);if(null!=d){var E,T=r&&c(d),p=void 0,g=(0,n.Z)(this._glyphItems);try{for(g.s();!(E=g.n()).done;){if(p=E.value[d])break}}catch(K){g.e(K)}finally{g.f()}u.push({codePoint:d,x:h,y:f,vertical:T,glyphMosaicItem:p}),p&&(h+=p.metrics.advance+a)}}}catch(K){_.e(K)}finally{_.f()}var R=h;o>0&&(R=h/Math.max(1,Math.ceil(h/o)));for(var I=e.includes("\u200b"),A=[],N=u.length,S=0;S<N-1;S++){var m=u[S].codePoint,M=y(m);if(x(m)||M){var C=0;if(10===m)C-=1e4;else if(M&&I)C+=150;else{40!==m&&65288!==m||(C+=50);var L=u[S+1].codePoint;41!==L&&65289!==L||(C+=50)}A.push(this._buildBreak(S+1,u[S].x,R,A,C,!1))}}for(var O=this._optimalBreaks(this._buildBreak(N,h,R,A,0,!0)),P=0,D=t?-s:s,k=0,B=0;B<O.length;B++){for(var U=O[B],w=k;w<U&&v(u[w].codePoint);)u[w].glyphMosaicItem=null,++w;for(var b=U-1;b>w&&v(u[b].codePoint);)u[b].glyphMosaicItem=null,--b;if(w<=b){for(var G=u[w].x,V=w;V<=b;V++)u[V].x-=G,u[V].y=f;var F=u[b].x;u[b].glyphMosaicItem&&(F+=u[b].glyphMosaicItem.metrics.advance),P=Math.max(F,P),l&&this._applyJustification(u,w,b)}k=U,f+=D}if(u.length>0){var Z=O.length-1,H=(l-this._hAnchor)*P,z=(-this._vAnchor*(Z+1)+.5)*s;t&&Z&&(z+=Z*s);var Y,X=(0,n.Z)(u);try{for(X.s();!(Y=X.n()).done;){var W=Y.value;W.x+=H,W.y+=z}}catch(K){X.e(K)}finally{X.f()}}return u.filter((function(e){return e.glyphMosaicItem}))}},{key:"_breakScore",value:function(e,t,r,n){var i=(e-t)*(e-t);return n?e<t?i/2:2*i:i+Math.abs(r)*r}},{key:"_buildBreak",value:function(e,t,r,i,a,s){var l,o=null,u=this._breakScore(t,r,a,s),h=(0,n.Z)(i);try{for(h.s();!(l=h.n()).done;){var f=l.value,_=t-f.x,c=this._breakScore(_,r,a,s)+f.score;c<=u&&(o=f,u=c)}}catch(y){h.e(y)}finally{h.f()}return{index:e,x:t,score:u,previousBreak:o}}},{key:"_optimalBreaks",value:function(e){return e?this._optimalBreaks(e.previousBreak).concat(e.index):[]}},{key:"_applyJustification",value:function(e,t,r){for(var n=e[r],i=n.vertical?T:n.glyphMosaicItem?n.glyphMosaicItem.metrics.advance:0,a=(n.x+i)*this._justify,s=t;s<=r;s++)e[s].x-=a}}],[{key:"getTextBox",value:function(e,t){if(!e.length)return null;var r,i=1/0,a=1/0,s=0,l=0,o=(0,n.Z)(e);try{for(o.s();!(r=o.n()).done;){var u=r.value,h=u.glyphMosaicItem.metrics.advance,f=u.x,_=u.y-17,c=f+h,y=_+t;i=Math.min(i,f),s=Math.max(s,c),a=Math.min(a,_),l=Math.max(l,y)}}catch(x){o.e(x)}finally{o.f()}return{x:i,y:a,width:s-i,height:l-a}}},{key:"getBox",value:function(e){if(!e.length)return null;var t,r=1/0,i=1/0,a=0,s=0,l=(0,n.Z)(e);try{for(l.s();!(t=l.n()).done;){var o=t.value,u=o.glyphMosaicItem.metrics,h=u.height,f=u.left,_=u.top,c=u.width,y=o.x,x=o.y-(h-Math.abs(_)),v=y+c+f,d=x+h;r=Math.min(r,y),a=Math.max(a,v),i=Math.min(i,x),s=Math.max(s,d)}}catch(E){l.e(E)}finally{l.f()}return{x:r,y:i,width:a-r,height:s-i}}},{key:"addDecoration",value:function(e,t){var r=e.length;if(0!==r){for(var n=e[0].x+e[0].glyphMosaicItem.metrics.left,i=e[0].y,a=1;a<r;a++){var s=e[a];if(s.y!==i){var l=e[a-1].x+e[a-1].glyphMosaicItem.metrics.left+e[a-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:i+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new E.Z(4,0,4,8),metrics:{width:l-n,height:8,left:0,top:0,advance:0},page:0,code:0}}),i=s.y,n=s.x+s.glyphMosaicItem.metrics.left}}var o=e[r-1].x+e[r-1].glyphMosaicItem.metrics.left+e[r-1].glyphMosaicItem.metrics.width;e.push({codePoint:0,x:n,y:i+t-3,vertical:!1,glyphMosaicItem:{sdf:!0,rect:new E.Z(4,0,4,8),metrics:{width:o-n,height:8,left:0,top:0,advance:0},page:0,code:0}})}}}]),e}(),g=r(46618),R=r(21391),I=.5,A=(0,l.Z)((function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:I;(0,s.Z)(this,e),this.x=t,this.y=r,this.angle=n,this.segment=i,this.minzoom=a})),N=(0,l.Z)((function e(t,r,n,i,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:I,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_.B1;(0,s.Z)(this,e),this.anchor=t,this.labelAngle=r,this.glyphAngle=n,this.page=i,this.alternateVerticalGlyph=a,this.minzoom=l,this.maxzoom=o})),S=(0,l.Z)((function e(t,r,n,i,a,l,o,u,h,f,_,c){(0,s.Z)(this,e),this.tl=t,this.tr=r,this.bl=n,this.br=i,this.mosaicRect=a,this.labelAngle=l,this.minAngle=o,this.maxAngle=u,this.anchor=h,this.minzoom=f,this.maxzoom=_,this.page=c})),m=(0,l.Z)((function e(t){(0,s.Z)(this,e),this.shapes=t})),M=function(){function e(){(0,s.Z)(this,e)}return(0,l.Z)(e,[{key:"getIconPlacement",value:function(e,t,r){var n=new f.E9(e.x,e.y),i=r.rotationAlignment===R.aF.MAP,a=r.keepUpright,s=r.rotate*_.DT;i&&(s+=e.angle);var l=new m([]);return r.allowOverlap&&r.ignorePlacement||!g.Bf||(l.iconColliders=[]),this._addIconPlacement(l,n,t,r,s),i&&a&&this._addIconPlacement(l,n,t,r,s+_.JJ),l}},{key:"_addIconPlacement",value:function(e,t,r,n,i){var a=r.pixelRatio,s=r.width/a,l=r.height/a,o=n.offset,u=o[0],h=o[1];switch(n.anchor){case R.nR.CENTER:u-=s/2,h-=l/2;break;case R.nR.LEFT:h-=l/2;break;case R.nR.RIGHT:u-=s,h-=l/2;break;case R.nR.TOP:u-=s/2;break;case R.nR.BOTTOM:u-=s/2,h-=l;break;case R.nR.TOP_LEFT:break;case R.nR.BOTTOM_LEFT:h-=l;break;case R.nR.TOP_RIGHT:u-=s;break;case R.nR.BOTTOM_RIGHT:u-=s,h-=l}var c=r.rect,y=2/a,x=u-y,v=h-y,d=x+c.width/a,E=v+c.height/a,T=new f.E9(x,v),p=new f.E9(d,E),A=new f.E9(x,E),N=new f.E9(d,v);if(0!==i){var m=Math.cos(i),M=Math.sin(i);T.rotate(m,M),p.rotate(m,M),A.rotate(m,M),N.rotate(m,M)}var C=new S(T,N,A,p,c,i,0,256,t,I,_.B1,0);if(e.shapes.push(C),(!n.allowOverlap||!n.ignorePlacement)&&g.Bf){var L=n.size,O=n.padding,P={xTile:t.x,yTile:t.y,dxPixels:u*L-O,dyPixels:h*L-O,hard:!n.optional,partIndex:0,width:s*L+2*O,height:l*L+2*O,angle:i,minLod:I,maxLod:_.B1};e.iconColliders.push(P)}}},{key:"getTextPlacement",value:function(e,t,r,i){var a,s=new f.E9(e.x,e.y),l=i.rotate*_.DT,o=i.rotationAlignment===R.aF.MAP,u=i.keepUpright,h=i.padding,c=I,y=o?e.angle:0,x=e.segment>=0&&o,v=i.allowOverlap&&i.ignorePlacement?null:[],d=[],E=!x,g=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,M=g,C=A,L=(x||o)&&u,O=i.size/T,P=!1,D=(0,n.Z)(t);try{for(D.s();!(a=D.n()).done;){if(a.value.vertical){P=!0;break}}}catch(Fe){D.e(Fe)}finally{D.f()}var k,B=0,U=0;if(!x&&P){var w=p.getTextBox(t,i.lineHeight*T);switch(i.anchor){case R.nR.LEFT:B=w.height/2,U=-w.width/2;break;case R.nR.RIGHT:B=-w.height/2,U=w.width/2;break;case R.nR.TOP:B=w.height/2,U=w.width/2;break;case R.nR.BOTTOM:B=-w.height/2,U=-w.width/2;break;case R.nR.TOP_LEFT:B=w.height;break;case R.nR.BOTTOM_LEFT:U=-w.width;break;case R.nR.TOP_RIGHT:U=w.width;break;case R.nR.BOTTOM_RIGHT:B=-w.height}}B+=i.offset[0]*T,U+=i.offset[1]*T;var b,G=(0,n.Z)(t);try{for(G.s();!(b=G.n()).done;){var V=b.value,F=V.glyphMosaicItem;if(F&&!F.rect.isEmpty){var Z=F.rect,H=F.metrics,z=F.page;if(v&&E){if(void 0!==k&&k!==V.y){var Y=void 0,X=void 0,W=void 0,K=void 0;P?(Y=-C+B,X=g+U,W=C-M,K=A-g):(Y=g+B,X=M+U,W=A-g,K=C-M);var j={xTile:e.x,yTile:e.y,dxPixels:Y*O-h,dyPixels:X*O-h,hard:!i.optional,partIndex:1,width:W*O+2*h,height:K*O+2*h,angle:l,minLod:I,maxLod:_.B1};v.push(j),g=Number.POSITIVE_INFINITY,A=Number.NEGATIVE_INFINITY,M=g,C=A}k=V.y}var q=[];if(x){var J=.5*F.metrics.width,Q=(V.x+H.left-4+J)*O*8;if(c=this._placeGlyph(e,c,Q,r,e.segment,1,V.vertical,z,q),u&&(c=this._placeGlyph(e,c,Q,r,e.segment,-1,V.vertical,z,q)),c>=2)break}else q.push(new N(s,y,y,z,!1)),o&&u&&q.push(new N(s,y+_.JJ,y+_.JJ,z,!1));var $=V.x+H.left,ee=V.y-17-H.top,te=$+H.width,re=ee+H.height,ne=void 0,ie=void 0,ae=void 0,se=void 0,le=void 0,oe=void 0,ue=void 0,he=void 0;if(!x&&P)if(V.vertical){var fe=($+te)/2-H.height/2,_e=(ee+re)/2+H.width/2;ne=new f.E9(-_e-4+B,fe-4+U),ie=new f.E9(ne.x+Z.width,ne.y+Z.height),ae=new f.E9(ne.x,ie.y),se=new f.E9(ie.x,ne.y)}else ne=new f.E9(4-ee+B,$-4+U),ie=new f.E9(ne.x-Z.height,ne.y+Z.width),ae=new f.E9(ie.x,ne.y),se=new f.E9(ne.x,ie.y);else ne=new f.E9($-4+B,ee-4+U),ie=new f.E9(ne.x+Z.width,ne.y+Z.height),ae=new f.E9(ne.x,ie.y),se=new f.E9(ie.x,ne.y);for(var ce=0,ye=q;ce<ye.length;ce++){var xe=ye[ce],ve=void 0,de=void 0,Ee=void 0,Te=void 0;if(xe.alternateVerticalGlyph){if(!le){var pe=(ee+re)/2+U;le=new f.E9(($+te)/2+B-H.height/2-4,pe+H.width/2+4),oe=new f.E9(le.x+Z.height,le.y-Z.width),ue=new f.E9(oe.x,le.y),he=new f.E9(le.x,oe.y)}ve=le,de=ue,Ee=he,Te=oe}else ve=ne,de=ae,Ee=se,Te=ie;var ge=ee,Re=re,Ie=xe.glyphAngle+l;if(0!==Ie){var Ae,Ne,Se,me,Me,Ce,Le=Math.cos(Ie),Oe=Math.sin(Ie);ve=ve.clone(),de=null===(Ae=de)||void 0===Ae?void 0:Ae.clone(),Ee=null===(Ne=Ee)||void 0===Ne?void 0:Ne.clone(),Te=null===(Se=Te)||void 0===Se?void 0:Se.clone(),ve.rotate(Le,Oe),null!==(me=Te)&&void 0!==me&&me.rotate(Le,Oe),null!==(Me=de)&&void 0!==Me&&Me.rotate(Le,Oe),null===(Ce=Ee)||void 0===Ce||Ce.rotate(Le,Oe)}var Pe=0,De=256;if(x&&P?V.vertical?xe.alternateVerticalGlyph?(Pe=32,De=96):(Pe=224,De=32):(Pe=224,De=96):(Pe=192,De=64),d.push(new S(ve,Ee,de,Te,Z,xe.labelAngle,Pe,De,xe.anchor,xe.minzoom,xe.maxzoom,xe.page)),v&&(!L||this._legible(xe.labelAngle)))if(E)$<g&&(g=$),ge<M&&(M=ge),te>A&&(A=te),Re>C&&(C=Re);else if(xe.minzoom<2){var ke={xTile:e.x,yTile:e.y,dxPixels:($+B)*O-h,dyPixels:(ge+B)*O-h,hard:!i.optional,partIndex:1,width:(te-$)*O+2*h,height:(Re-ge)*O+2*h,angle:Ie,minLod:xe.minzoom,maxLod:xe.maxzoom};v.push(ke)}}}}}catch(Fe){G.e(Fe)}finally{G.f()}if(c>=2)return null;if(v&&E){var Be,Ue,we,be;P?(Be=-C+B,Ue=g+U,we=C-M,be=A-g):(Be=g+B,Ue=M+U,we=A-g,be=C-M);var Ge={xTile:e.x,yTile:e.y,dxPixels:Be*O-h,dyPixels:Ue*O-h,hard:!i.optional,partIndex:1,width:we*O+2*h,height:be*O+2*h,angle:l,minLod:I,maxLod:_.B1};v.push(Ge)}var Ve=new m(d);return v&&v.length>0&&(Ve.textColliders=v),Ve}},{key:"_legible",value:function(e){var t=(0,_.Or)(e);return t<65||t>=193}},{key:"_placeGlyph",value:function(e,t,r,n,i,a,s,l,o){var u=a,h=u<0?(0,_.DQ)(e.angle+_.JJ,_._U):e.angle,c=0;r<0&&(u*=-1,r*=-1,c=_.JJ),u>0&&++i;var y=new f.E9(e.x,e.y),x=n[i],v=_.B1;if(n.length<=i)return v;for(;;){var d=x.x-y.x,E=x.y-y.y,T=Math.sqrt(d*d+E*E),p=Math.max(r/T,t),g=d/T,R=E/T,I=(0,_.DQ)(Math.atan2(R,g)+c,_._U);if(o.push(new N(y,h,I,l,!1,p,v)),s&&o.push(new N(y,h,I,l,!0,p,v)),p<=t)return p;y=x.clone();do{if(i+=u,n.length<=i||i<0)return p;x=n[i]}while(y.isEqual(x));var A=x.x-y.x,S=x.y-y.y,m=Math.sqrt(A*A+S*S);A*=T/m,S*=T/m,y.x-=A,y.y-=S,v=p}}}]),e}(),C=r(29439),L=r(78084),O=r(48035);!function(e){e[e.moveTo=1]="moveTo",e[e.lineTo=2]="lineTo",e[e.close=7]="close"}(d||(d={}));var P=function(){function e(t,r){(0,s.Z)(this,e),this.values={},this._geometry=void 0,this._pbfGeometry=null;for(var n=r.keys,i=r.values,a=t.asUnsafe();a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var l=a.getMessage().asUnsafe(),o=this.values;!l.empty();){var u=l.getUInt32(),h=l.getUInt32();o[n[u]]=i[h]}l.release();break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}return(0,l.Z)(e,[{key:"getGeometry",value:function(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;var t,r,n=this._pbfGeometry.asUnsafe();this._pbfGeometry=null,e?e.reset(this.type):t=[];for(var i,a=d.moveTo,s=0,l=0,o=0;!n.empty();){if(0===s){var u=n.getUInt32();a=7&u,s=u>>3}switch(s--,a){case d.moveTo:l+=n.getSInt32(),o+=n.getSInt32(),e?e.moveTo(l,o):t&&(r&&t.push(r),(r=[]).push(new f.E9(l,o)));break;case d.lineTo:l+=n.getSInt32(),o+=n.getSInt32(),e?e.lineTo(l,o):r&&r.push(new f.E9(l,o));break;case d.close:e?e.close():r&&!r[0].equals(l,o)&&r.push(r[0].clone());break;default:throw n.release(),new Error("Invalid path operation")}}return e?i=e.result():t&&(r&&t.push(r),i=t),n.release(),this._geometry=i,i}}]),e}(),D=r(60136),k=r(29388),B=r(3283),U=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(){return(0,s.Z)(this,r),t.call(this,12)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r){var n=this.array;n.push(e),n.push(t),n.push(r)}}]),r}(B.Z),w=function(){function e(t){(0,s.Z)(this,e),this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=t.clone();for(var r=t.asUnsafe();r.next();)switch(r.tag()){case 1:this.name=r.getString();break;case 3:this.keys.push(r.getString());break;case 4:this.values.push(r.processMessage(e._parseValue));break;case 5:this.extent=r.getUInt32();break;default:r.skip()}}return(0,l.Z)(e,[{key:"getData",value:function(){return this._pbfLayer}}],[{key:"_parseValue",value:function(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}]),e}(),b=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,n,i,a,s,l,o,u,f,_){var c=this.array,y=B.Z.i1616to32(e,t);c.push(y);var x=31;y=B.Z.i8888to32(Math.round(x*r),Math.round(x*n),Math.round(x*i),Math.round(x*a)),c.push(y),y=B.Z.i8888to32(Math.round(x*s),Math.round(x*l),Math.round(x*o),Math.round(x*u)),c.push(y),y=B.Z.i1616to32(f,0),c.push(y),_&&c.push.apply(c,(0,h.Z)(_))}}]),r}(B.Z),G=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r){var n=this.array;n.push(B.Z.i1616to32(e,t)),r&&n.push.apply(n,(0,h.Z)(r))}}]),r}(B.Z),V=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,n,i,a,s){var l=this.array,o=this.index,u=B.Z.i1616to32(e,t);l.push(u);return u=B.Z.i8888to32(Math.round(15*r),Math.round(15*n),i,a),l.push(u),s&&l.push.apply(l,(0,h.Z)(s)),o}}]),r}(B.Z),F=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,n,i,a,s,l,o,u,f,c){var y=this.array,x=B.Z.i1616to32(e,t);y.push(x),x=B.Z.i1616to32(Math.round(8*r),Math.round(8*n)),y.push(x),x=B.Z.i8888to32(i/4,a/4,l,o),y.push(x),x=B.Z.i8888to32(0,(0,_.Or)(s),10*u,Math.min(10*f,255)),y.push(x),c&&y.push.apply(y,(0,h.Z)(c))}}]),r}(B.Z),Z=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e){return(0,s.Z)(this,r),t.call(this,e)}return(0,l.Z)(r,[{key:"add",value:function(e,t,r,n,i){var a=this.array,s=B.Z.i1616to32(2*e+r,2*t+n);a.push(s),i&&a.push.apply(a,(0,h.Z)(i))}}]),r}(B.Z),H=function(){function e(t,r,n){(0,s.Z)(this,e),this.layerExtent=4096,this._features=[],this.layer=t,this.zoom=r,this._spriteInfo=n,this._filter=t.getFeatureFilter()}return(0,l.Z)(e,[{key:"pushFeature",value:function(e){this._filter&&!this._filter.filter(e,this.zoom)||this._features.push(e)}},{key:"hasFeatures",value:function(){return this._features.length>0}},{key:"getResources",value:function(e,t,r){}}]),e}(),z=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e,n,i,a,l){var o;return(0,s.Z)(this,r),(o=t.call(this,e,n,i)).type=u.al.CIRCLE,o._circleVertexBuffer=a,o._circleIndexBuffer=l,o}return(0,l.Z)(r,[{key:"circleIndexStart",get:function(){return this._circleIndexStart}},{key:"circleIndexCount",get:function(){return this._circleIndexCount}},{key:"processFeatures",value:function(e){var t=this._circleVertexBuffer,r=this._circleIndexBuffer;this._circleIndexStart=3*r.index,this._circleIndexCount=0;var i=this.layer,a=this.zoom;e&&e.setExtent(this.layerExtent);var s,l=(0,n.Z)(this._features);try{for(l.s();!(s=l.n()).done;){var o=s.value,u=o.getGeometry(e);if(u){var h,f=i.circleMaterial.encodeAttributes(o,a,i),_=(0,n.Z)(u);try{for(_.s();!(h=_.n()).done;){var c=h.value;if(c){var y,x=(0,n.Z)(c);try{for(x.s();!(y=x.n()).done;){var v=y.value,d=t.index;t.add(v.x,v.y,0,0,f),t.add(v.x,v.y,0,1,f),t.add(v.x,v.y,1,0,f),t.add(v.x,v.y,1,1,f),r.add(d,d+1,d+2),r.add(d+1,d+2,d+3),this._circleIndexCount+=6}}catch(E){x.e(E)}finally{x.f()}}}}catch(E){_.e(E)}finally{_.f()}}}}catch(E){l.e(E)}finally{l.f()}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this._circleVertexBuffer.array.length,e+=this._circleIndexBuffer.array.length;var t=new Uint32Array(e),r=new Int32Array(t.buffer),n=0;t[n++]=this.type,t[n++]=this.layerUIDs.length;for(var i=0;i<this.layerUIDs.length;i++)t[n++]=this.layerUIDs[i];t[n++]=this._circleIndexStart,t[n++]=this._circleIndexCount,t[n++]=this._circleVertexBuffer.array.length;for(var a=0;a<this._circleVertexBuffer.array.length;a++)r[n++]=this._circleVertexBuffer.array[a];t[n++]=this._circleIndexBuffer.array.length;for(var s=0;s<this._circleIndexBuffer.array.length;s++)t[n++]=this._circleIndexBuffer.array[s];return t.buffer}}]),r}(H),Y=r(22213),X=r(79347),W=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e,n,i,a,l,o,h){var f;return(0,s.Z)(this,r),(f=t.call(this,e,n,i)).type=u.al.FILL,f._patternMap=new Map,f._fillVertexBuffer=a,f._fillIndexBuffer=l,f._outlineVertexBuffer=o,f._outlineIndexBuffer=h,f}return(0,l.Z)(r,[{key:"fillIndexStart",get:function(){return this._fillIndexStart}},{key:"fillIndexCount",get:function(){return this._fillIndexCount}},{key:"outlineIndexStart",get:function(){return this._outlineIndexStart}},{key:"outlineIndexCount",get:function(){return this._outlineIndexCount}},{key:"getResources",value:function(e,t,r){var i=this.layer,a=this.zoom,s=i.getPaintProperty("fill-pattern");if(s)if(s.isDataDriven){var l,o=(0,n.Z)(this._features);try{for(o.s();!(l=o.n()).done;){var u=l.value;t(s.getValue(a,u),!0)}}catch(h){o.e(h)}finally{o.f()}}else t(s.getValue(a),!0)}},{key:"processFeatures",value:function(e){this._fillIndexStart=3*this._fillIndexBuffer.index,this._fillIndexCount=0,this._outlineIndexStart=3*this._outlineIndexBuffer.index,this._outlineIndexCount=0;var t=this.layer,r=this.zoom,i=t.fillMaterial,a=t.outlineMaterial,s=t.hasDataDrivenFill,l=t.hasDataDrivenOutline;e&&e.setExtent(this.layerExtent);var o=t.getPaintProperty("fill-pattern"),u=null===o||void 0===o?void 0:o.isDataDriven,h=!o&&t.getPaintValue("fill-antialias",r);if(t.outlineUsesFillColor){if(h&&!t.hasDataDrivenOpacity){var f=t.getPaintValue("fill-opacity",r),_=t.getPaintValue("fill-opacity",r+1);f<1&&_<1&&(h=!1)}if(h&&!t.hasDataDrivenColor){var c=t.getPaintValue("fill-color",r),y=t.getPaintValue("fill-color",r+1);c[3]<1&&y[3]<1&&(h=!1)}}var x=this._features,v=null===e||void 0===e?void 0:e.validateTessellation;if(u){var d,E=[],T=(0,n.Z)(x);try{for(T.s();!(d=T.n()).done;){var p=d.value,g=o.getValue(r,p),R=this._spriteInfo[g];if(R&&R.rect){var I=i.encodeAttributes(p,r,t,R),A=h&&l?a.encodeAttributes(p,r,t):[],N=p.getGeometry(e);E.push({ddFillAttributes:I,ddOutlineAttributes:A,page:R.page,geometry:N}),E.sort((function(e,t){return e.page-t.page}));var S,m=(0,n.Z)(E);try{for(m.s();!(S=m.n()).done;){var M=S.value,C=M.ddFillAttributes,L=M.ddOutlineAttributes,O=M.page,P=M.geometry;this._processFeature(P,h,t.outlineUsesFillColor,C,L,v,O)}}catch(G){m.e(G)}finally{m.f()}}}}catch(G){T.e(G)}finally{T.f()}}else{var D,k=(0,n.Z)(x);try{for(k.s();!(D=k.n()).done;){var B=D.value,U=s?i.encodeAttributes(B,r,t):null,w=h&&l?a.encodeAttributes(B,r,t):null,b=B.getGeometry(e);this._processFeature(b,h,t.outlineUsesFillColor,U,w,v)}}catch(G){k.e(G)}finally{k.f()}}}},{key:"serialize",value:function(){var e=10;e+=this.layerUIDs.length,e+=this._fillVertexBuffer.array.length,e+=this._fillIndexBuffer.array.length,e+=this._outlineVertexBuffer.array.length,e+=this._outlineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[i++]=this.layerUIDs[a];t[i++]=this._fillIndexStart,t[i++]=this._fillIndexCount,t[i++]=this._outlineIndexStart,t[i++]=this._outlineIndexCount;var s=this._patternMap,l=s.size;if(t[i++]=l,l>0){var o,u=(0,n.Z)(s);try{for(u.s();!(o=u.n()).done;){var h=(0,C.Z)(o.value,2),f=h[0],_=(0,C.Z)(h[1],2),c=_[0],y=_[1];t[i++]=f,t[i++]=c,t[i++]=y}}catch(T){u.e(T)}finally{u.f()}}t[i++]=this._fillVertexBuffer.array.length;for(var x=0;x<this._fillVertexBuffer.array.length;x++)r[i++]=this._fillVertexBuffer.array[x];t[i++]=this._fillIndexBuffer.array.length;for(var v=0;v<this._fillIndexBuffer.array.length;v++)t[i++]=this._fillIndexBuffer.array[v];t[i++]=this._outlineVertexBuffer.array.length;for(var d=0;d<this._outlineVertexBuffer.array.length;d++)r[i++]=this._outlineVertexBuffer.array[d];t[i++]=this._outlineIndexBuffer.array.length;for(var E=0;E<this._outlineIndexBuffer.array.length;E++)t[i++]=this._outlineIndexBuffer.array[E];return t.buffer}},{key:"_processFeature",value:function(e,t,n,i,a,s,l){if(e){var o=e.length,u=!a||0===a.length;if(t&&(!n||u))for(var h=0;h<o;h++)this._processOutline(e[h],a);for(var f,_=0;_<o;_++){var c=r._area(e[_]);c>32?(void 0!==f&&this._processFill(e,f,i,s,l),f=[_]):c<-32&&void 0!==f&&f.push(_)}void 0!==f&&this._processFill(e,f,i,s,l)}}},{key:"_processOutline",value:function(e,t){var r,n,i,a=this._outlineVertexBuffer,s=this._outlineIndexBuffer,l=s.index,o=new f.E9(0,0),u=new f.E9(0,0),h=new f.E9(0,0),_=-1,c=-1,y=-1,x=-1,v=-1,d=!1,E=e.length;if(!(E<2)){for(var T=e[0],p=e[E-1];E&&p.isEqual(T);)p=e[--E-1];if(!(E-0<2)){for(var g=0;g<E;++g){0===g?(r=e[E-1],n=e[0],i=e[1],o.assignSub(n,r),o.normalize(),o.rightPerpendicular()):(r=n,n=i,i=g!==E-1?e[g+1]:e[0],o.assign(u));var R=this._isClipEdge(r,n);-1===x&&(d=R),u.assignSub(i,n),u.normalize(),u.rightPerpendicular();var I=o.x*u.y-o.y*u.x;h.assignAdd(o,u),h.normalize();var A=-h.x*-o.x+-h.y*-o.y,N=Math.abs(0!==A?1/A:1);N>8&&(N=8),I>=0?(y=a.add(n.x,n.y,o.x,o.y,0,1,t),-1===x&&(x=y),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),c=a.add(n.x,n.y,N*-h.x,N*-h.y,0,-1,t),-1===v&&(v=c),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),_=c,c=y,y=a.add(n.x,n.y,h.x,h.y,0,1,t),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),c=a.add(n.x,n.y,u.x,u.y,0,1,t),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y)):(y=a.add(n.x,n.y,N*h.x,N*h.y,0,1,t),-1===x&&(x=y),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),c=a.add(n.x,n.y,-o.x,-o.y,0,-1,t),-1===v&&(v=c),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),_=c,c=y,y=a.add(n.x,n.y,-h.x,-h.y,0,-1,t),_>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y),(_=a.add(n.x,n.y,-u.x,-u.y,0,-1,t))>=0&&c>=0&&y>=0&&!R&&s.add(_,c,y))}_>=0&&c>=0&&x>=0&&!d&&s.add(_,c,x),_>=0&&x>=0&&v>=0&&!d&&s.add(_,v,x),this._outlineIndexCount+=3*(s.index-l)}}}},{key:"_processFill",value:function(e,t,r,i,a){var s;t.length>1&&(s=[]);var l,o=0,u=(0,n.Z)(t);try{for(u.s();!(l=u.n()).done;){var h=l.value;0!==o&&s.push(o),o+=e[h].length}}catch(w){u.e(w)}finally{u.f()}var f,_=2*o,c=Y.Z.acquire(),y=(0,n.Z)(t);try{for(y.s();!(f=y.n()).done;)for(var x=f.value,v=e[x],d=v.length,E=0;E<d;++E)c.push(v[E].x,v[E].y)}catch(w){y.e(w)}finally{y.f()}var T=(0,X.e)(c,s,2);if(X.e.deviation(c,s,2,T)>0){var p=t.map((function(t){return e[t].length})),g=(0,O.b)(c,p),R=g.buffer,I=g.vertexCount;if(I>0){for(var A=this._fillVertexBuffer.index,N=0;N<I;N++)this._fillVertexBuffer.add(R[2*N],R[2*N+1],r);for(var S=0;S<I;S+=3){var m=A+S;this._fillIndexBuffer.add(m,m+1,m+2)}if(void 0!==a){var M=this._patternMap,C=M.get(a);C?C[1]+=I:M.set(a,[this._fillIndexStart+this._fillIndexCount,I])}this._fillIndexCount+=I}}else{var L=T.length;if(L>0){for(var P=this._fillVertexBuffer.index,D=0;D<_;)this._fillVertexBuffer.add(c[D++],c[D++],r);for(var k=0;k<L;)this._fillIndexBuffer.add(P+T[k++],P+T[k++],P+T[k++]);if(void 0!==a){var B=this._patternMap,U=B.get(a);U?U[1]+=L:B.set(a,[this._fillIndexStart+this._fillIndexCount,L])}this._fillIndexCount+=L}}Y.Z.release(c)}},{key:"_isClipEdge",value:function(e,t){return e.x===t.x?e.x<=-64||e.x>=4160:e.y===t.y&&(e.y<=-64||e.y>=4160)}}],[{key:"_area",value:function(e){for(var t=0,r=e.length-1,n=0;n<r;n++)t+=(e[n].x-e[n+1].x)*(e[n].y+e[n+1].y);return.5*(t+=(e[r].x-e[0].x)*(e[r].y+e[0].y))}}]),r}(H),K=r(82010),j=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e,n,i,a,l){var o;return(0,s.Z)(this,r),(o=t.call(this,e,n,i)).type=u.al.LINE,o._tessellationOptions={pixelCoordRatio:8,halfWidth:0,offset:0},o._patternMap=new Map,o.tessellationProperties={_lineVertexBuffer:null,_lineIndexBuffer:null,_ddValues:null},o.tessellationProperties._lineVertexBuffer=a,o.tessellationProperties._lineIndexBuffer=l,o._lineTessellator=new K.z(q(o.tessellationProperties),J(o.tessellationProperties),e.canUseThinTessellation),o}return(0,l.Z)(r,[{key:"lineIndexStart",get:function(){return this._lineIndexStart}},{key:"lineIndexCount",get:function(){return this._lineIndexCount}},{key:"getResources",value:function(e,t,r){var i=this.layer,a=this.zoom,s=i.getPaintProperty("line-pattern"),l=i.getPaintProperty("line-dasharray"),o=i.getLayoutProperty("line-cap");if(s||l){var u=(null===o||void 0===o?void 0:o.getValue(a))||0,h=null===o||void 0===o?void 0:o.isDataDriven,f=null===s||void 0===s?void 0:s.isDataDriven,_=null===l||void 0===l?void 0:l.isDataDriven;if(f||_){var c,y=(0,n.Z)(this._features);try{for(y.s();!(c=y.n()).done;){var x=c.value;t(f?s.getValue(a,x):this._getDashArrayKey(x,a,i,l,h,o,u))}}catch(d){y.e(d)}finally{y.f()}}else if(s)t(s.getValue(a));else if(l){var v=l.getValue(a);t(i.getDashKey(v,u))}}}},{key:"processFeatures",value:function(e){var t,r,i,a,s,l;this._lineIndexStart=3*this.tessellationProperties._lineIndexBuffer.index,this._lineIndexCount=0;var o=this.layer,u=this.zoom,h=this._features,f=this._tessellationOptions,_=o.hasDataDrivenLine,c=o.lineMaterial;e&&e.setExtent(this.layerExtent);var y,x=o.getPaintProperty("line-pattern"),v=o.getPaintProperty("line-dasharray"),d=null===x||void 0===x?void 0:x.isDataDriven,E=null===v||void 0===v?void 0:v.isDataDriven,T=null!==(t=y=o.getLayoutProperty("line-cap"))&&void 0!==t&&t.isDataDriven?y:null,p=T?null:o.getLayoutValue("line-cap",u),g=p||0,R=!!T,I=null!==(r=y=o.getLayoutProperty("line-join"))&&void 0!==r&&r.isDataDriven?y:null,A=I?null:o.getLayoutValue("line-join",u),N=null!==(i=y=o.getLayoutProperty("line-miter-limit"))&&void 0!==i&&i.isDataDriven?y:null,S=N?null:o.getLayoutValue("line-miter-limit",u),m=null!==(a=y=o.getLayoutProperty("line-round-limit"))&&void 0!==a&&a.isDataDriven?y:null,M=m?null:o.getLayoutValue("line-round-limit",u),C=null!==(s=y=o.getPaintProperty("line-width"))&&void 0!==s&&s.isDataDriven?y:null,L=C?null:o.getPaintValue("line-width",u),O=null!==(l=y=o.getPaintProperty("line-offset"))&&void 0!==l&&l.isDataDriven?y:null,P=O?null:o.getPaintValue("line-offset",u);if(d||E){var D,k=[],B=(0,n.Z)(h);try{for(B.s();!(D=B.n()).done;){var U=D.value,w=d?x.getValue(u,U):this._getDashArrayKey(U,u,o,v,R,T,g),b=this._spriteInfo[w];if(b&&b.rect){var G=c.encodeAttributes(U,u,o,b),V=U.getGeometry(e);k.push({ddAttributes:G,page:b.page,cap:T?T.getValue(u,U):p,join:I?I.getValue(u,U):A,miterLimit:N?N.getValue(u,U):S,roundLimit:m?m.getValue(u,U):M,halfWidth:.5*(C?C.getValue(u,U):L),offset:O?O.getValue(u,U):P,geometry:V})}}}catch(se){B.e(se)}finally{B.f()}k.sort((function(e,t){return e.page-t.page})),f.textured=!0;for(var F=0,Z=k;F<Z.length;F++){var H=Z[F],z=H.ddAttributes,Y=H.page,X=H.cap,W=H.join,K=H.miterLimit,j=H.roundLimit,q=H.halfWidth,J=H.offset,Q=H.geometry;f.capType=X,f.joinType=W,f.miterLimit=K,f.roundLimit=j,f.halfWidth=q,f.offset=J,this._processFeature(Q,z,Y)}}else{if(x){var $=x.getValue(u),ee=this._spriteInfo[$];if(!ee||!ee.rect)return}f.textured=!(!x&&!v),f.capType=p,f.joinType=A,f.miterLimit=S,f.roundLimit=M,f.halfWidth=.5*L,f.offset=P;var te,re=(0,n.Z)(h);try{for(re.s();!(te=re.n()).done;){var ne=te.value,ie=_?c.encodeAttributes(ne,u,o):null;T&&(f.capType=T.getValue(u,ne)),I&&(f.joinType=I.getValue(u,ne)),N&&(f.miterLimit=N.getValue(u,ne)),m&&(f.roundLimit=m.getValue(u,ne)),C&&(f.halfWidth=.5*C.getValue(u,ne)),O&&(f.offset=O.getValue(u,ne));var ae=ne.getGeometry(e);this._processFeature(ae,ie)}}catch(se){re.e(se)}finally{re.f()}}}},{key:"serialize",value:function(){var e=6;e+=this.layerUIDs.length,e+=this.tessellationProperties._lineVertexBuffer.array.length,e+=this.tessellationProperties._lineIndexBuffer.array.length,e+=3*this._patternMap.size+1;var t=new Uint32Array(e),r=new Int32Array(t.buffer),i=0;t[i++]=this.type,t[i++]=this.layerUIDs.length;for(var a=0;a<this.layerUIDs.length;a++)t[i++]=this.layerUIDs[a];t[i++]=this._lineIndexStart,t[i++]=this._lineIndexCount;var s=this._patternMap,l=s.size;if(t[i++]=l,l>0){var o,u=(0,n.Z)(s);try{for(u.s();!(o=u.n()).done;){var h=(0,C.Z)(o.value,2),f=h[0],_=(0,C.Z)(h[1],2),c=_[0],y=_[1];t[i++]=f,t[i++]=c,t[i++]=y}}catch(d){u.e(d)}finally{u.f()}}t[i++]=this.tessellationProperties._lineVertexBuffer.array.length;for(var x=0;x<this.tessellationProperties._lineVertexBuffer.array.length;x++)r[i++]=this.tessellationProperties._lineVertexBuffer.array[x];t[i++]=this.tessellationProperties._lineIndexBuffer.array.length;for(var v=0;v<this.tessellationProperties._lineIndexBuffer.array.length;v++)t[i++]=this.tessellationProperties._lineIndexBuffer.array[v];return t.buffer}},{key:"_processFeature",value:function(e,t,r){if(e)for(var n=e.length,i=0;i<n;i++)this._processGeometry(e[i],t,r)}},{key:"_processGeometry",value:function(e,t,r){if(!(e.length<2)){for(var n,i,a=e[0],s=1;s<e.length;)(n=e[s].x-a.x)*n+(i=e[s].y-a.y)*i<1e-6?e.splice(s,1):(a=e[s],++s);if(!(e.length<2)){var l=this.tessellationProperties._lineIndexBuffer,o=3*l.index;this._tessellationOptions.initialDistance=0,this._tessellationOptions.wrapDistance=65535,this.tessellationProperties._ddValues=t,this._lineTessellator.tessellate(e,this._tessellationOptions);var u=3*l.index-o;if(void 0!==r){var h=this._patternMap,f=h.get(r);f?f[1]+=u:h.set(r,[o+this._lineIndexCount,u])}this._lineIndexCount+=u}}}},{key:"_getDashArrayKey",value:function(e,t,r,n,i,a,s){var l=i?a.getValue(t,e):s,o=n.getValue(t,e);return r.getDashKey(o,l)}}]),r}(H),q=function(e){return function(t,r,n,i,a,s,l,o,u,h,f){return e._lineVertexBuffer.add(t,r,l,o,n,i,a,s,u,h,f,e._ddValues),e._lineVertexBuffer.index-1}},J=function(e){return function(t,r,n){e._lineIndexBuffer.add(t,r,n)}},Q=r(8961),$=r(92026),ee=r(643),te=r(44305);function re(e,t){return e.iconMosaicItem&&t.iconMosaicItem?e.iconMosaicItem.page===t.iconMosaicItem.page?0:e.iconMosaicItem.page-t.iconMosaicItem.page:e.iconMosaicItem&&!t.iconMosaicItem?1:!e.iconMosaicItem&&t.iconMosaicItem?-1:0}var ne,ie=function(e){(0,D.Z)(r,e);var t=(0,k.Z)(r);function r(e,n,i,a,l,o,h,f){var _;return(0,s.Z)(this,r),(_=t.call(this,e,n,f.getSpriteItems())).type=u.al.SYMBOL,_._markerMap=new Map,_._glyphMap=new Map,_._glyphBufferDataStorage=new Map,_._isIconSDF=!1,_._iconVertexBuffer=i,_._iconIndexBuffer=a,_._textVertexBuffer=l,_._textIndexBuffer=o,_._placementEngine=h,_._workerTileHandler=f,_}return(0,l.Z)(r,[{key:"markerPageMap",get:function(){return this._markerMap}},{key:"glyphsPageMap",get:function(){return this._glyphMap}},{key:"symbolInstances",get:function(){return this._symbolInstances}},{key:"getResources",value:function(e,t,i){var a=this.layer,s=this.zoom;e&&e.setExtent(this.layerExtent);var l,o,u,h,f=a.getLayoutProperty("icon-image"),_=a.getLayoutProperty("text-field"),c=a.getLayoutProperty("text-transform"),y=a.getLayoutProperty("text-font"),x=[];f&&!f.isDataDriven&&(l=f.getValue(s)),_&&!_.isDataDriven&&(o=_.getValue(s)),c&&c.isDataDriven||(u=a.getLayoutValue("text-transform",s),c=null),y&&y.isDataDriven||(h=a.getLayoutValue("text-font",s),y=null);var v,d=(0,n.Z)(this._features);try{for(d.s();!(v=d.n()).done;){var E=v.value,T=E.getGeometry(e);if(T&&0!==T.length){var p=void 0,g=void 0;f&&((p=f.isDataDriven?f.getValue(s,E):this._replaceKeys(l,E.values))&&t(p));var I=!1;if(_&&(g=_.isDataDriven?_.getValue(s,E):this._replaceKeys(o,E.values))){switch(g=g.replaceAll("\\n","\n"),c&&(u=c.getValue(s,E)),u){case R._5.LOWERCASE:g=g.toLowerCase();break;case R._5.UPPERCASE:g=g.toUpperCase()}if(r._bidiEngine.hasBidiChar(g)){var A;A="rtl"===r._bidiEngine.checkContextual(g)?"IDNNN":"ICNNN",g=r._bidiEngine.bidiTransform(g,A,"VLYSN"),I=!0}if(g.length>0){y&&(h=y.getValue(s,E));var N,S=(0,n.Z)(h);try{for(S.s();!(N=S.n()).done;){var m=N.value,M=i[m];M||(M=i[m]=new Set);var C,L=(0,n.Z)(g);try{for(L.s();!(C=L.n()).done;){var O=C.value.codePointAt(0);null!=O&&M.add(O)}}catch(k){L.e(k)}finally{L.f()}}}catch(k){S.e(k)}finally{S.f()}}}if(p||g){var P=a.getLayoutValue("symbol-sort-key",s,E),D={feature:E,sprite:p,label:g,rtl:I,geometry:T,hash:(g?(0,ee.hP)(g):0)^(p?(0,ee.hP)(p):0),priority:P,textFont:h};x.push(D)}}}}catch(k){d.e(k)}finally{d.f()}this._symbolFeatures=x}},{key:"processFeatures",value:function(e){e&&e.setExtent(this.layerExtent);var t,i=this.layer,a=this.zoom,s=i.getLayoutValue("symbol-placement",a),l=s!==R.R.POINT,o=8*i.getLayoutValue("symbol-spacing",a),u=i.getLayoutProperty("icon-image"),h=i.getLayoutProperty("text-field"),c=u?new te._L(i,a,l):null,y=h?new te.nj(i,a,l):null,x=this._workerTileHandler;u&&(t=x.getSpriteItems()),this._iconIndexStart=3*this._iconIndexBuffer.index,this._textIndexStart=3*this._textIndexBuffer.index,this._iconIndexCount=0,this._textIndexCount=0,this._markerMap.clear(),this._glyphMap.clear();var v=[],d=1;y&&y.size&&(d=y.size/T);var E,g=y?y.maxAngle*_.DT:0,I=y?8*y.size:0,N=(0,n.Z)(this._symbolFeatures);try{for(N.s();!(E=N.n()).done;){var S=E.value,m=void 0;c&&t&&S.sprite&&((m=t[S.sprite])&&m.sdf&&(this._isIconSDF=!0));var M=void 0;m&&c.update(a,S.feature);var C=0,L=S.label;if(L){(0,$.O3)(y),y.update(a,S.feature);var O=l&&y.rotationAlignment===R.aF.MAP?y.keepUpright:y.writingMode&&y.writingMode.includes(R.r1.VERTICAL),P=.5;switch(y.anchor){case R.nR.TOP_LEFT:case R.nR.LEFT:case R.nR.BOTTOM_LEFT:P=0;break;case R.nR.TOP_RIGHT:case R.nR.RIGHT:case R.nR.BOTTOM_RIGHT:P=1}var D=.5;switch(y.anchor){case R.nR.TOP_LEFT:case R.nR.TOP:case R.nR.TOP_RIGHT:D=0;break;case R.nR.BOTTOM_LEFT:case R.nR.BOTTOM:case R.nR.BOTTOM_RIGHT:D=1}var k=.5;switch(y.justify){case R.vL.AUTO:k=P;break;case R.vL.LEFT:k=0;break;case R.vL.RIGHT:k=1}var B=y.letterSpacing*T,U=l?0:y.maxWidth*T,w=y.lineHeight*T,b=S.textFont.map((function(e){return x.getGlyphItems(e)}));if((M=new p(b,U,w,B,P,D,k).getShaping(L,S.rtl,O))&&M.length>0){var G,V=1e30,F=-1e30,Z=(0,n.Z)(M);try{for(Z.s();!(G=Z.n()).done;){var H=G.value;V=Math.min(V,H.x),F=Math.max(F,H.x)}}catch(ne){Z.e(ne)}finally{Z.f()}C=(F-V+48)*d*8}}var z,Y=(0,n.Z)(S.geometry);try{for(Y.s();!(z=Y.n()).done;){var X=z.value,W=[];if(s===R.R.LINE){var K;if(null!==(K=M)&&void 0!==K&&K.length&&null!==y&&void 0!==y&&y.size){var j=8*y.size*(2+Math.min(2,4*Math.abs(y.offset[1])));X=r._smoothVertices(X,j)}r._pushAnchors(W,X,o,C)}else s===R.R.LINE_CENTER?r._pushCenterAnchor(W,X):S.feature.type===f.Vl.Polygon?r._pushCentroid(W,X):W.push(new A(X[0].x,X[0].y));for(var q=0,J=W;q<J.length;q++){var Q=J[q];if(!(Q.x<0||Q.x>4096||Q.y<0||Q.y>4096)&&(!(l&&C>0&&(null===y||void 0===y?void 0:y.rotationAlignment)===R.aF.MAP)||r._honorsTextMaxAngle(X,Q,C,g,I))){var ee={shaping:M,line:X,iconMosaicItem:m,anchor:Q,symbolFeature:S,textColliders:[],iconColliders:[],textVertexRanges:[],iconVertexRanges:[]};v.push(ee),this._processFeature(ee,c,y)}}}}catch(ne){Y.e(ne)}finally{Y.f()}}}catch(ne){N.e(ne)}finally{N.f()}v.sort(re),this._addPlacedGlyphs(),this._symbolInstances=v}},{key:"serialize",value:function(){var e=11;e+=this.layerUIDs.length,e+=3*this.markerPageMap.size,e+=3*this.glyphsPageMap.size,e+=r._symbolsSerializationLength(this._symbolInstances),e+=this._iconVertexBuffer.array.length,e+=this._iconIndexBuffer.array.length,e+=this._textVertexBuffer.array.length,e+=this._textIndexBuffer.array.length;var t=new Uint32Array(e),i=new Int32Array(t.buffer),a=new Float32Array(t.buffer),s=0;t[s++]=this.type,t[s++]=this.layerUIDs.length;for(var l=0;l<this.layerUIDs.length;l++)t[s++]=this.layerUIDs[l];t[s++]=this._isIconSDF?1:0,t[s++]=this.markerPageMap.size;var o,u=(0,n.Z)(this.markerPageMap);try{for(u.s();!(o=u.n()).done;){var h=(0,C.Z)(o.value,2),f=h[0],_=(0,C.Z)(h[1],2),c=_[0],y=_[1];t[s++]=f,t[s++]=c,t[s++]=y}}catch(S){u.e(S)}finally{u.f()}t[s++]=this.glyphsPageMap.size;var x,v=(0,n.Z)(this.glyphsPageMap);try{for(v.s();!(x=v.n()).done;){var d=(0,C.Z)(x.value,2),E=d[0],T=(0,C.Z)(d[1],2),p=T[0],g=T[1];t[s++]=E,t[s++]=p,t[s++]=g}}catch(S){v.e(S)}finally{v.f()}t[s++]=this._iconVertexBuffer.index/4,t[s++]=this._textVertexBuffer.index/4,s=r.serializeSymbols(t,i,a,s,this._symbolInstances),t[s++]=this._iconVertexBuffer.array.length;for(var R=0;R<this._iconVertexBuffer.array.length;R++)i[s++]=this._iconVertexBuffer.array[R];t[s++]=this._iconIndexBuffer.array.length;for(var I=0;I<this._iconIndexBuffer.array.length;I++)t[s++]=this._iconIndexBuffer.array[I];t[s++]=this._textVertexBuffer.array.length;for(var A=0;A<this._textVertexBuffer.array.length;A++)i[s++]=this._textVertexBuffer.array[A];t[s++]=this._textIndexBuffer.array.length;for(var N=0;N<this._textIndexBuffer.array.length;N++)t[s++]=this._textIndexBuffer.array[N];return t.buffer}},{key:"_replaceKeys",value:function(e,t){return e.replaceAll(/{([^{}]+)}/g,(function(e,r){return r in t?t[r]:""}))}},{key:"_processFeature",value:function(e,t,r){var i=e.line,a=e.iconMosaicItem,s=e.shaping,l=e.anchor,o=this.zoom,u=this.layer,h=!!a,f=!0;h&&(f=(null===t||void 0===t?void 0:t.optional)||!a);var c,y,x=s&&s.length>0,v=!x||(null===r||void 0===r?void 0:r.optional);if(h&&(c=this._placementEngine.getIconPlacement(l,a,t)),(c||f)&&(x&&(y=this._placementEngine.getTextPlacement(l,s,i,r)),y||v)){if(c&&y||(v||f?v||y?f||c||(y=null):c=null:(c=null,y=null)),y){var d=u.hasDataDrivenText?u.textMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._storePlacedGlyphs(e,y.shapes,o,r.rotationAlignment,d),y.textColliders){e.textColliders=y.textColliders;var E,T=(0,n.Z)(y.textColliders);try{for(T.s();!(E=T.n()).done;){var p=E.value;p.minLod=Math.max(o+(0,_.k3)(p.minLod),0),p.maxLod=Math.min(o+(0,_.k3)(p.maxLod),25);var g=p.angle;if(g){var I=Math.cos(g),A=Math.sin(g),N=p.dxPixels*I-p.dyPixels*A,S=p.dxPixels*A+p.dyPixels*I,m=(p.dxPixels+p.width)*I-p.dyPixels*A,M=(p.dxPixels+p.width)*A+p.dyPixels*I,C=p.dxPixels*I-(p.dyPixels+p.height)*A,L=p.dxPixels*A+(p.dyPixels+p.height)*I,O=(p.dxPixels+p.width)*I-(p.dyPixels+p.height)*A,P=(p.dxPixels+p.width)*A+(p.dyPixels+p.height)*I,D=Math.min(N,m,C,O),k=Math.max(N,m,C,O),B=Math.min(S,M,L,P),U=Math.max(S,M,L,P);p.dxPixels=D,p.dyPixels=B,p.width=k-D,p.height=U-B}}}catch(re){T.e(re)}finally{T.f()}}}if(c){var w=u.hasDataDrivenIcon?u.iconMaterial.encodeAttributes(e.symbolFeature.feature,o,u):null;if(this._addPlacedIcons(e,c.shapes,o,a.page,t.rotationAlignment===R.aF.VIEWPORT,w),c.iconColliders){e.iconColliders=c.iconColliders;var b,G=(0,n.Z)(c.iconColliders);try{for(G.s();!(b=G.n()).done;){var V=b.value;V.minLod=Math.max(o+(0,_.k3)(V.minLod),0),V.maxLod=Math.min(o+(0,_.k3)(V.maxLod),25);var F=V.angle;if(F){var Z=Math.cos(F),H=Math.sin(F),z=V.dxPixels*Z-V.dyPixels*H,Y=V.dxPixels*H+V.dyPixels*Z,X=(V.dxPixels+V.width)*Z-V.dyPixels*H,W=(V.dxPixels+V.width)*H+V.dyPixels*Z,K=V.dxPixels*Z-(V.dyPixels+V.height)*H,j=V.dxPixels*H+(V.dyPixels+V.height)*Z,q=(V.dxPixels+V.width)*Z-(V.dyPixels+V.height)*H,J=(V.dxPixels+V.width)*H+(V.dyPixels+V.height)*Z,Q=Math.min(z,X,K,q),$=Math.max(z,X,K,q),ee=Math.min(Y,W,j,J),te=Math.max(Y,W,j,J);V.dxPixels=Q,V.dyPixels=ee,V.width=$-Q,V.height=te-ee}}}catch(re){G.e(re)}finally{G.f()}}}}}},{key:"_addPlacedIcons",value:function(e,t,r,i,a,s){var l,o=Math.max(r-1,0),u=this._iconVertexBuffer,h=this._iconIndexBuffer,f=this._markerMap,c=(0,n.Z)(t);try{for(c.s();!(l=c.n()).done;){var y=l.value,x=a?0:Math.max(r+(0,_.k3)(y.minzoom),o),v=a?25:Math.min(r+(0,_.k3)(y.maxzoom),25);if(!(v<=x)){var d=y.tl,E=y.tr,T=y.bl,p=y.br,g=y.mosaicRect,R=y.labelAngle,I=y.minAngle,A=y.maxAngle,N=y.anchor,S=u.index,m=g.x,M=g.y,C=m+g.width,L=M+g.height,O=u.index;u.add(N.x,N.y,d.x,d.y,m,M,R,I,A,x,v,s),u.add(N.x,N.y,E.x,E.y,C,M,R,I,A,x,v,s),u.add(N.x,N.y,T.x,T.y,m,L,R,I,A,x,v,s),u.add(N.x,N.y,p.x,p.y,C,L,R,I,A,x,v,s),e.iconVertexRanges.length>0&&e.iconVertexRanges[0][0]+e.iconVertexRanges[0][1]===O?e.iconVertexRanges[0][1]+=4:e.iconVertexRanges.push([O,4]),h.add(S,S+1,S+2),h.add(S+1,S+2,S+3),f.has(i)?f.get(i)[1]+=6:f.set(i,[this._iconIndexStart+this._iconIndexCount,6]),this._iconIndexCount+=6}}}catch(P){c.e(P)}finally{c.f()}}},{key:"_addPlacedGlyphs",value:function(){var e,t=this._textVertexBuffer,r=this._textIndexBuffer,i=this._glyphMap,a=(0,n.Z)(this._glyphBufferDataStorage);try{for(a.s();!(e=a.n()).done;){var s,l=(0,C.Z)(e.value,2),o=l[0],u=l[1],h=(0,n.Z)(u);try{for(h.s();!(s=h.n()).done;){var f=s.value,_=t.index,c=f.symbolInstance,y=f.ddAttributes,x=t.index;t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tl[0],f.tl[1],f.xmin,f.ymin,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,y),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.tr[0],f.tr[1],f.xmax,f.ymin,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,y),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.bl[0],f.bl[1],f.xmin,f.ymax,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,y),t.add(f.glyphAnchor[0],f.glyphAnchor[1],f.br[0],f.br[1],f.xmax,f.ymax,f.labelAngle,f.minAngle,f.maxAngle,f.minLod,f.maxLod,y),c.textVertexRanges.length>0&&c.textVertexRanges[0][0]+c.textVertexRanges[0][1]===x?c.textVertexRanges[0][1]+=4:c.textVertexRanges.push([x,4]),r.add(_,_+1,_+2),r.add(_+1,_+2,_+3),i.has(o)?i.get(o)[1]+=6:i.set(o,[this._textIndexStart+this._textIndexCount,6]),this._textIndexCount+=6}}catch(v){h.e(v)}finally{h.f()}}}catch(v){a.e(v)}finally{a.f()}this._glyphBufferDataStorage.clear()}},{key:"_storePlacedGlyphs",value:function(e,t,r,i,a){var s,l,o,u,h,f,c,y,x,v,d,E,T=Math.max(r-1,0),p=i===R.aF.VIEWPORT,g=(0,n.Z)(t);try{for(g.s();!(E=g.n()).done;){var I=E.value;(s=p?0:Math.max(r+(0,_.k3)(I.minzoom),T),(l=p?25:Math.min(r+(0,_.k3)(I.maxzoom),25))<=s)||(o=I.tl,u=I.tr,h=I.bl,f=I.br,c=I.labelAngle,y=I.minAngle,x=I.maxAngle,v=I.anchor,d=I.mosaicRect,this._glyphBufferDataStorage.has(I.page)||this._glyphBufferDataStorage.set(I.page,[]),this._glyphBufferDataStorage.get(I.page).push({glyphAnchor:[v.x,v.y],tl:[o.x,o.y],tr:[u.x,u.y],bl:[h.x,h.y],br:[f.x,f.y],xmin:d.x,ymin:d.y,xmax:d.x+d.width,ymax:d.y+d.height,labelAngle:c,minAngle:y,maxAngle:x,minLod:s,maxLod:l,placementLod:T,symbolInstance:e,ddAttributes:a}))}}catch(A){g.e(A)}finally{g.f()}}}],[{key:"_symbolsSerializationLength",value:function(e){var t=0;t+=1;var r,i=(0,n.Z)(e||[]);try{for(i.s();!(r=i.n()).done;){var a=r.value;t+=4,t+=1;var s,l=(0,n.Z)(a.textColliders);try{for(l.s();!(s=l.n()).done;){s.value;t+=10}}catch(h){l.e(h)}finally{l.f()}var o,u=(0,n.Z)(a.iconColliders);try{for(u.s();!(o=u.n()).done;){o.value;t+=10}}catch(h){u.e(h)}finally{u.f()}t+=1,t+=2*a.textVertexRanges.length,t+=1,t+=2*a.iconVertexRanges.length}}catch(h){i.e(h)}finally{i.f()}return t}},{key:"serializeSymbols",value:function(e,t,r,i,a){a=a||[],t[i++]=a.length;var s,l=(0,n.Z)(a);try{for(l.s();!(s=l.n()).done;){var o=s.value;t[i++]=o.anchor.x,t[i++]=o.anchor.y,t[i++]=o.symbolFeature.hash,t[i++]=o.symbolFeature.priority,t[i++]=o.textColliders.length+o.iconColliders.length;var u,h=(0,n.Z)(o.textColliders);try{for(h.s();!(u=h.n()).done;){var f=u.value;t[i++]=f.xTile,t[i++]=f.yTile,t[i++]=f.dxPixels,t[i++]=f.dyPixels,t[i++]=f.hard?1:0,t[i++]=f.partIndex,r[i++]=f.minLod,r[i++]=f.maxLod,t[i++]=f.width,t[i++]=f.height}}catch(N){h.e(N)}finally{h.f()}var _,c=(0,n.Z)(o.iconColliders);try{for(c.s();!(_=c.n()).done;){var y=_.value;t[i++]=y.xTile,t[i++]=y.yTile,t[i++]=y.dxPixels,t[i++]=y.dyPixels,t[i++]=y.hard?1:0,t[i++]=y.partIndex,r[i++]=y.minLod,r[i++]=y.maxLod,t[i++]=y.width,t[i++]=y.height}}catch(N){c.e(N)}finally{c.f()}t[i++]=o.textVertexRanges.length;var x,v=(0,n.Z)(o.textVertexRanges);try{for(v.s();!(x=v.n()).done;){var d=(0,C.Z)(x.value,2),E=d[0],T=d[1];t[i++]=E,t[i++]=T}}catch(N){v.e(N)}finally{v.f()}t[i++]=o.iconVertexRanges.length;var p,g=(0,n.Z)(o.iconVertexRanges);try{for(g.s();!(p=g.n()).done;){var R=(0,C.Z)(p.value,2),I=R[0],A=R[1];t[i++]=I,t[i++]=A}}catch(N){g.e(N)}finally{g.f()}}}catch(N){l.e(N)}finally{l.f()}return i}},{key:"_pushAnchors",value:function(e,t,r,n){r+=n;for(var i=0,a=t.length-1,s=0;s<a;s++)i+=f.E9.distance(t[s],t[s+1]);var l=n||r;if(!(i<=(l*=.5)))for(var o=l/i,u=0,h=-(r=i/Math.max(Math.round(i/r),1))/2,c=t.length-1,y=0;y<c;y++){for(var x=t[y],v=t[y+1],d=v.x-x.x,E=v.y-x.y,T=Math.sqrt(d*d+E*E),p=void 0;h+r<u+T;){var g=((h+=r)-u)/T,R=(0,_.sX)(x.x,v.x,g),I=(0,_.sX)(x.y,v.y,g);void 0===p&&(p=Math.atan2(E,d)),e.push(new A(R,I,p,y,o))}u+=T}}},{key:"_pushCenterAnchor",value:function(e,t){for(var r=0,n=t.length-1,i=0;i<n;i++)r+=f.E9.distance(t[i],t[i+1]);for(var a=r/2,s=0,l=t.length-1,o=0;o<l;o++){var u=t[o],h=t[o+1],c=h.x-u.x,y=h.y-u.y,x=Math.sqrt(c*c+y*y);if(a<s+x){var v=(a-s)/x,d=(0,_.sX)(u.x,h.x,v),E=(0,_.sX)(u.y,h.y,v),T=Math.atan2(y,c);return void e.push(new A(d,E,T,o,0))}s+=x}}},{key:"_deviation",value:function(e,t,r){var n=(t.x-e.x)*(r.x-t.x)+(t.y-e.y)*(r.y-t.y),i=(t.x-e.x)*(r.y-t.y)-(t.y-e.y)*(r.x-t.x);return Math.atan2(i,n)}},{key:"_honorsTextMaxAngle",value:function(e,t,r,n,i){for(var a=0,s=r/2,l=new f.E9(t.x,t.y),o=t.segment+1;a>-s;){if(--o<0)return!1;a-=f.E9.distance(e[o],l),l=e[o]}a+=f.E9.distance(e[o],e[o+1]);for(var u=[],h=0,_=e.length;a<s;){var c=e[o],y=void 0,x=o;do{if(++x===_)return!1;y=e[x]}while(y.isEqual(c));var v=void 0,d=x;do{if(++d===_)return!1;v=e[d]}while(v.isEqual(y));var E=this._deviation(c,y,v);for(u.push({deviation:E,distToAnchor:a}),h+=E;a-u[0].distToAnchor>i;)h-=u.shift().deviation;if(Math.abs(h)>n)return!1;a+=f.E9.distance(y,v),o=x}return!0}},{key:"_smoothVertices",value:function(e,t){if(t<=0)return e;var r=e.length;if(r<3)return e;var n=[],i=0,a=0;n.push(0);for(var s=1;s<r;s++){var l=f.E9.distance(e[s],e[s-1]);l>0&&(i+=l,n.push(i),++a!==s&&(e[a]=e[s]))}if((r=a+1)<3)return e;t=Math.min(t,.2*i);var o=e[0].x,u=e[0].y,h=e[r-1].x,_=e[r-1].y,c=f.E9.sub(e[0],e[1]);c.normalize(),e[0].x+=t*c.x,e[0].y+=t*c.y,c.assignSub(e[r-1],e[r-2]),c.normalize(),e[r-1].x+=t*c.x,e[r-1].y+=t*c.y,n[0]-=t,n[r-1]+=t;var y=[];y.push(new f.E9(o,u));for(var x=1e-6,v=.5*t,d=1;d<r-1;d++){for(var E=0,T=0,p=0,g=d-1;g>=0;g--){var R=v+n[g+1]-n[d];if(R<0)break;var I=n[g+1]-n[g],A=n[d]-n[g]<v?1:R/I;if(A<x)break;var N=A*A,S=A*R-.5*N*I,m=A*I/t,M=e[g+1],C=e[g].x-M.x,L=e[g].y-M.y;E+=m/S*(M.x*A*R+.5*N*(R*C-I*M.x)-N*A*I*C/3),T+=m/S*(M.y*A*R+.5*N*(R*L-I*M.y)-N*A*I*L/3),p+=m}for(var O=d+1;O<r;O++){var P=v-n[O-1]+n[d];if(P<0)break;var D=n[O]-n[O-1],k=n[O]-n[d]<v?1:P/D;if(k<x)break;var B=k*k,U=k*P-.5*B*D,w=k*D/t,b=e[O-1],G=e[O].x-b.x,V=e[O].y-b.y;E+=w/U*(b.x*k*P+.5*B*(P*G-D*b.x)-B*k*D*G/3),T+=w/U*(b.y*k*P+.5*B*(P*V-D*b.y)-B*k*D*V/3),p+=w}y.push(new f.E9(E/p,T/p))}return y.push(new f.E9(h,_)),e[0].x=o,e[0].y=u,e[r-1].x=h,e[r-1].y=_,y}},{key:"_pushCentroid",value:function(e,t){var r=4096,n=4096,i=t.length-1,a=0,s=0,l=0,o=t[0].x,u=t[0].y;o>r&&(o=r),o<0&&(o=0),u>n&&(u=n),u<0&&(u=0);for(var h=1;h<i;h++){var f=t[h].x,_=t[h].y,c=t[h+1].x,y=t[h+1].y;f>r&&(f=r),f<0&&(f=0),_>n&&(_=n),_<0&&(_=0),c>r&&(c=r),c<0&&(c=0),y>n&&(y=n),y<0&&(y=0);var x=(f-o)*(y-u)-(c-o)*(_-u);a+=x*(o+f+c),s+=x*(u+_+y),l+=x}a/=3*l,s/=3*l,isNaN(a)||isNaN(s)||e.push(new A(a,s))}}]),r}(H);ie._bidiEngine=new Q.Z,function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.NO_DATA=1]="NO_DATA",e[e.READY=2]="READY",e[e.MODIFIED=3]="MODIFIED",e[e.INVALID=4]="INVALID"}(ne||(ne={}));var ae=function(){function e(t,r,i,a,l){var o,u;if((0,s.Z)(this,e),this._pbfTiles={},this._tileClippers={},this._client=i,this._tile=r,l){this._styleLayerUIDs=new Set;var h,_=(0,n.Z)(l);try{for(_.s();!(h=_.n()).done;){var c=h.value;this._styleLayerUIDs.add(c)}}catch(O){_.e(O)}finally{_.f()}}this._styleRepository=a,this._layers=null!==(o=null===(u=this._styleRepository)||void 0===u?void 0:u.layers)&&void 0!==o?o:[];var y=r.tileKey.split("/").map(parseFloat),x=(0,C.Z)(y,3),v=x[0],d=x[1],E=x[2];this._level=v;for(var T=8+Math.max(5*(this._level-14),0),p=0,g=Object.keys(t);p<g.length;p++){var R=g[p],I=t[R];if(this._pbfTiles[R]=new L.Z(new Uint8Array(I.protobuff),new DataView(I.protobuff)),I.refKey){var A=I.refKey.split("/").map(parseFloat),N=v-(0,C.Z)(A,1)[0];if(N>0){var S=(1<<N)-1,m=d&S,M=E&S;this._tileClippers[R]=new f.bN(N,m,M,8,T)}}this._tileClippers[R]||(this._tileClippers[R]=new f.I6)}}return(0,l.Z)(e,[{key:"_canParseStyleLayer",value:function(e){return!this._styleLayerUIDs||this._styleLayerUIDs.has(e)}},{key:"parse",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var r,a,s,l,o,u,f,_,c,y,x,v=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=(0,O.j)(),a=this._initialize(t),s=a.returnedBuckets,this._processLayers(a),this._linkReferences(a),this._filterFeatures(a),l=[],o=new Set,u=function(e,t){o.has(e)||(l.push({name:e,repeat:t}),o.add(e))},f={},_=(0,n.Z)(s);try{for(_.s();!(c=_.n()).done;)(y=c.value).getResources(y.tileClipper,u,f)}catch(i){_.e(i)}finally{_.f()}if(this._tile.status!==ne.INVALID){e.next=7;break}return e.abrupt("return",[]);case 7:return x=this._fetchResources(l,f,t),e.abrupt("return",Promise.all([].concat((0,h.Z)(x),[r])).then((function(){return v._processFeatures(a.returnedBuckets)})));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){return{signal:e&&e.signal,sourceNameToTileData:this._parseTileData(this._pbfTiles),layers:this._layers,zoom:this._level,sourceNameToTileClipper:this._tileClippers,sourceNameToUniqueSourceLayerBuckets:{},sourceNameToUniqueSourceLayers:{},returnedBuckets:[],layerIdToBucket:{},referencerUIDToReferencedId:new Map}}},{key:"_processLayers",value:function(e){for(var t=e.sourceNameToTileData,r=e.layers,n=e.zoom,i=e.sourceNameToTileClipper,a=e.sourceNameToUniqueSourceLayerBuckets,s=e.sourceNameToUniqueSourceLayers,l=e.returnedBuckets,o=e.layerIdToBucket,u=e.referencerUIDToReferencedId,h=r.length-1;h>=0;h--){var f=r[h];if(!(!this._canParseStyleLayer(f.uid)||f.minzoom&&n<Math.floor(f.minzoom)||f.maxzoom&&n>=f.maxzoom||f.type===R.fR.BACKGROUND)&&(t[f.source]&&i[f.source])){var _=t[f.source],c=i[f.source],y=f.sourceLayer,x=_[y];if(x){var v=s[f.source];if(v||(v=s[f.source]=new Set),v.add(f.sourceLayer),f.refLayerId)u.set(f.uid,f.refLayerId);else{var d=this._createBucket(f);if(d){d.layerUIDs=[f.uid],d.layerExtent=x.extent,d.tileClipper=c;var E=a[f.source];E||(E=a[f.source]={});var T=E[y];T||(T=E[y]=[]),T.push(d),l.push(d),o[f.id]=d}}}}}}},{key:"_linkReferences",value:function(e){var t=e.layerIdToBucket;e.referencerUIDToReferencedId.forEach((function(e,r){t[e]&&t[e].layerUIDs.push(r)}))}},{key:"_filterFeatures",value:function(e){for(var t=e.signal,r=e.sourceNameToTileData,i=e.sourceNameToUniqueSourceLayerBuckets,a=e.sourceNameToUniqueSourceLayers,s=10*this._level,l=10*(this._level+1),u=[],h=[],f=function(){var e=c[_];a[e].forEach((function(t){u.push(t),h.push(e)}))},_=0,c=Object.keys(a);_<c.length;_++)f();for(var y=0;y<u.length;y++){var x=h[y],v=u[y];if(r[x]&&i[x]){var d=r[x][v],E=i[x][v];if(E&&0!==E.length){if((0,o.Hc)(t))return;for(var T=d.getData();T.nextTag(2);){var p=T.getMessage(),g=new P(p,d);p.release();var R=g.values;if(R){var I=R._minzoom;if(I&&I>=l)continue;var A=R._maxzoom;if(A&&A<=s)continue}var N,S=(0,n.Z)(E);try{for(S.s();!(N=S.n()).done;){N.value.pushFeature(g)}}catch(m){S.e(m)}finally{S.f()}}}}}}},{key:"_fetchResources",value:function(e,t,r){var n,i,a=[],s=this._tile.getWorkerTileHandler();for(var l in e.length>0&&(n=s.fetchSprites(e,this._client,r),a.push(n)),t){var o=t[l];o.size>0&&(i=s.fetchGlyphs(this._tile.tileKey,l,o,this._client,r),a.push(i))}return a}},{key:"_processFeatures",value:function(e){var t,r=this,i=e.filter((function(e){return e.hasFeatures()||r._canParseStyleLayer(e.layer.uid)})),a=(0,n.Z)(i);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.processFeatures(s.tileClipper)}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"_parseTileData",value:function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){for(var i=n[r],a=e[i],s={};a.next();)if(3===a.tag()){var l=a.getMessage(),o=new w(l);l.release(),s[o.name]=o}else a.skip();t[i]=s}return t}},{key:"_createBucket",value:function(e){switch(e.type){case R.fR.BACKGROUND:return null;case R.fR.FILL:return this._createFillBucket(e);case R.fR.LINE:return this._createLineBucket(e);case R.fR.CIRCLE:return this._createCircleBucket(e);case R.fR.SYMBOL:return this._createSymbolBucket(e)}}},{key:"_createFillBucket",value:function(e){return new W(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new G(e.fillMaterial.getStride()),new U,new V(e.outlineMaterial.getStride()),new U)}},{key:"_createLineBucket",value:function(e){return new j(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new b(e.lineMaterial.getStride()),new U)}},{key:"_createCircleBucket",value:function(e){return new z(e,this._level,this._tile.getWorkerTileHandler().getSpriteItems(),new Z(e.circleMaterial.getStride()),new U)}},{key:"_createSymbolBucket",value:function(e){var t=this._tile;return new ie(e,this._level,new F(e.iconMaterial.getStride()),new U,new F(e.textMaterial.getStride()),new U,t.placementEngine,t.getWorkerTileHandler())}}]),e}(),se=function(){function e(t,r,n,i){(0,s.Z)(this,e),this.status=ne.INITIALIZED,this.placementEngine=new M,this.tileKey=t,this.refKeys=r,this._workerTileHandler=n,this._styleRepository=i}return(0,l.Z)(e,[{key:"release",value:function(){this.tileKey="",this.refKeys=null,this.status=ne.INITIALIZED,this._workerTileHandler=null}},{key:"parse",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var a,s,l,u,f,_,c,y,x,v,d,E,T=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=(a=r&&r.signal)&&(s=function e(){a.removeEventListener("abort",e),T.status=ne.INVALID},a.addEventListener("abort",s)),u={bucketsWithData:[],emptyBuckets:null},e.prev=3,e.next=6,this._parse(t,r);case 6:l=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(0,o.D_)(e.t0)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",{result:u,transferList:[]});case 14:this.status=ne.READY,f=u.bucketsWithData,_=[],c=(0,n.Z)(l);try{for(c.s();!(y=c.n()).done;)(x=y.value).hasFeatures()?(v=x.serialize(),f.push(v)):_.push(x.layer.uid)}catch(i){c.e(i)}finally{c.f()}return d=(0,h.Z)(f),E=null,e.abrupt("return",(_.length>0&&(E=Uint32Array.from(_),d.push(E.buffer)),u.emptyBuckets=E,{result:u,transferList:d}));case 21:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"setObsolete",value:function(){this.status=ne.INVALID}},{key:"getLayers",value:function(){return this._workerTileHandler.getLayers()}},{key:"getWorkerTileHandler",value:function(){return this._workerTileHandler}},{key:"_parse",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.sourceName2DataAndRefKey,0!==Object.keys(n).length){e.next=3;break}return e.abrupt("return",[]);case 3:return this.status=ne.MODIFIED,e.abrupt("return",new ae(n,this,r.client,this._styleRepository,t.styleLayerUIDs).parse(r));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),le=r(30969),oe=function(){function e(){(0,s.Z)(this,e),this._spriteInfo={},this._glyphInfo={}}return(0,l.Z)(e,[{key:"reset",value:function(){return this._spriteInfo={},this._glyphInfo={},Promise.resolve()}},{key:"getLayers",value:function(){var e,t;return null!==(e=null===(t=this._styleRepository)||void 0===t?void 0:t.layers)&&void 0!==e?e:[]}},{key:"createTileAndParse",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,r){var n,a,s,l,u,h,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.key,a={},s=0,l=Object.keys(t.sourceName2DataAndRefKey);s<l.length;s++)u=l[s],h=t.sourceName2DataAndRefKey[u],a[u]=h.refKey;return f=new se(n,a,this,this._styleRepository),e.prev=3,e.next=6,f.parse(t,r);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),f.setObsolete(),f.release(),(0,o.D_)(e.t0)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateStyle",value:function(e){if(e&&0!==e.length&&this._styleRepository){var t,r=this._styleRepository,i=(0,n.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,s=a.type,l=a.data;switch(s){case u.Fr.PAINTER_CHANGED:r.setPaintProperties(l.layer,l.paint);break;case u.Fr.LAYOUT_CHANGED:r.setLayoutProperties(l.layer,l.layout);break;case u.Fr.LAYER_REMOVED:r.deleteStyleLayer(l.layer);break;case u.Fr.LAYER_CHANGED:r.setStyleLayer(l.layer,l.index);break;case u.Fr.SPRITES_CHANGED:this._spriteInfo={}}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"setStyle",value:function(e){this._styleRepository=new le.Z(e),this._spriteInfo={},this._glyphInfo={}}},{key:"fetchSprites",value:function(e,t,r){var i,a=[],s=this._spriteInfo,l=(0,n.Z)(e);try{for(l.s();!(i=l.n()).done;){var o=i.value;void 0===s[o.name]&&a.push(o)}}catch(u){l.e(u)}finally{l.f()}return 0===a.length?Promise.resolve():t.invoke("getSprites",a,{signal:r&&r.signal}).then((function(e){for(var t in e){var r=e[t];s[t]=r}}))}},{key:"getSpriteItems",value:function(){return this._spriteInfo}},{key:"fetchGlyphs",value:function(e,t,r,n,i){var a=[],s=this._glyphInfo[t];return s?r.forEach((function(e){s[e]||a.push(e)})):(s=this._glyphInfo[t]=[],r.forEach((function(e){return a.push(e)}))),0===a.length?Promise.resolve():n.invoke("getGlyphs",{tileID:e,font:t,codePoints:a},i).then((function(e){for(var t=0;t<e.length;t++)e[t]&&(s[t]=e[t])}))}},{key:"getGlyphItems",value:function(e){return this._glyphInfo[e]}}]),e}()},46618:function(e,t,r){r.d(t,{Bf:function(){return n},PF:function(){return i},Ts:function(){return a},nN:function(){return s}});var n=!0,i=32,a=1.5,s=200},82010:function(e,t,r){r.d(t,{z:function(){return x}});var n=r(15671),i=r(43144),a=r(48202),s=r(94109);function l(e,t){return e.x===t.x&&e.y===t.y}function o(e,t){return e.x=t.y,e.y=-t.x,e}function u(e,t){return e.x=-t.y,e.y=t.x,e}function h(e,t){return e.x=t.x,e.y=t.y,e}function f(e,t){return e.x=-t.x,e.y=-t.y,e}function _(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function c(e,t){return e.x*t.x+e.y*t.y}function y(e,t,r,n){return e.x=t.x*r+t.y*n,e.y=t.x*n-t.y*r,e}var x=function(){function e(t,r,i){(0,n.Z)(this,e),this._writeVertex=t,this._writeTriangle=r,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}return(0,i.Z)(e,[{key:"tessellate",value:function(e,t){(function(e){if(e){var t=e.length;if(!(t<=1)){for(var r=0,n=1;n<t;n++)l(e[n],e[r])||++r===n||(e[r]=e[n]);e.length=r+1}}})(e),this._canUseThinTessellation&&t.halfWidth<s.tQ&&!t.offset?this._tessellateThin(e,t):this._tessellate(e,t)}},{key:"_tessellateThin",value:function(e,t){if(!(e.length<2))for(var r=t.wrapDistance||65535,n=t.initialDistance||0,i=!1,a=e[0].x,s=e[0].y,l=e.length,o=1;o<l;++o){i&&(i=!1,n=0);var u=e[o].x,h=e[o].y,f=u-a,_=h-s,c=Math.sqrt(f*f+_*_);if(f/=c,_/=c,n+c>r){i=!0;var y=(r-n)/c;c=r-n,u=(1-y)*a+y*u,h=(1-y)*s+y*h,--o}var x=this._writeVertex(a,s,0,0,f,_,_,-f,0,-1,n),v=this._writeVertex(a,s,0,0,f,_,-_,f,0,1,n);n+=c;var d=this._writeVertex(u,h,0,0,f,_,_,-f,0,-1,n),E=this._writeVertex(u,h,0,0,f,_,-_,f,0,1,n);this._writeTriangle(x,v,d),this._writeTriangle(v,d,E),a=u,s=h}}},{key:"_tessellate",value:function(e,t){var r=e[0],n=e[e.length-1],i=l(r,n),s=i?3:2;if(!(e.length<s)){var x,v,d,E,T,p=t.pixelCoordRatio,g=null!=t.capType?t.capType:a.RL.BUTT,R=null!=t.joinType?t.joinType:a.AH.MITER,I=null!=t.miterLimit?Math.min(t.miterLimit,4):2,A=null!=t.roundLimit?Math.min(t.roundLimit,1.05):1.05,N=null!=t.halfWidth?t.halfWidth:2,S=!!t.textured,m=null,M=this._prevNormal,C=this._nextNormal,L=-1,O=-1,P=this._joinNormal,D=this._textureNormalLeft,k=this._textureNormalRight,B=this._textureNormal,U=-1,w=-1,b=t.wrapDistance||65535,G=t.initialDistance||0,V=this._writeVertex,F=this._writeTriangle,Z=function(e,t,r,n,i,a){var s=V(v,d,E,T,r,n,e,t,i,a,G);return U>=0&&w>=0&&s>=0&&F(U,w,s),U=w,w=s,s};i&&(x=e[e.length-2],C.x=n.x-x.x,C.y=n.y-x.y,O=_(C),C.x/=O,C.y/=O);for(var H,z,Y=!1,X=0;X<e.length;++X){if(Y&&(Y=!1,G=0),x&&(M.x=-C.x,M.y=-C.y,G+(L=O)>b&&(Y=!0)),Y){var W=(b-G)/L;L=b-G,x={x:(1-W)*x.x+W*e[X].x,y:(1-W)*x.y+W*e[X].y},--X}else x=e[X];v=x.x,d=x.y;var K=X<=0&&!Y,j=X===e.length-1;if(K||(G+=L),(m=j?i?e[1]:null:e[X+1])?(C.x=m.x-v,C.y=m.y-d,O=_(C),C.x/=O,C.y/=O):(C.x=void 0,C.y=void 0),!i){if(K){u(P,C),E=P.x,T=P.y,g===a.RL.SQUARE&&(Z(-C.y-C.x,C.x-C.y,C.x,C.y,0,-1),Z(C.y-C.x,-C.x-C.y,C.x,C.y,0,1)),g===a.RL.ROUND&&(Z(-C.y-C.x,C.x-C.y,C.x,C.y,-1,-1),Z(C.y-C.x,-C.x-C.y,C.x,C.y,-1,1)),g!==a.RL.ROUND&&g!==a.RL.BUTT||(Z(-C.y,C.x,C.x,C.y,0,-1),Z(C.y,-C.x,C.x,C.y,0,1));continue}if(j){o(P,M),E=P.x,T=P.y,g!==a.RL.ROUND&&g!==a.RL.BUTT||(Z(M.y,-M.x,-M.x,-M.y,0,-1),Z(-M.y,M.x,-M.x,-M.y,0,1)),g===a.RL.SQUARE&&(Z(M.y-M.x,-M.x-M.y,-M.x,-M.y,0,-1),Z(-M.y-M.x,M.x-M.y,-M.x,-M.y,0,1)),g===a.RL.ROUND&&(Z(M.y-M.x,-M.x-M.y,-M.x,-M.y,1,-1),Z(-M.y-M.x,M.x-M.y,-M.x,-M.y,1,1));continue}}var q=void 0,J=void 0,Q=(z=C,-((H=M).x*z.y-H.y*z.x));if(Math.abs(Q)<.01)c(M,C)>0?(P.x=M.x,P.y=M.y,Q=1,q=Number.MAX_VALUE,J=!0):(u(P,C),Q=1,q=1,J=!1);else{P.x=(M.x+C.x)/Q,P.y=(M.y+C.y)/Q;var $=((q=_(P))-1)*N*p;J=q>4||$>L&&$>O}E=P.x,T=P.y;var ee=R;switch(R){case a.AH.BEVEL:q<1.05&&(ee=a.AH.MITER);break;case a.AH.ROUND:q<A&&(ee=a.AH.MITER);break;case a.AH.MITER:q>I&&(ee=a.AH.BEVEL)}switch(ee){case a.AH.MITER:if(Z(P.x,P.y,-M.x,-M.y,0,-1),Z(-P.x,-P.y,-M.x,-M.y,0,1),j)break;if(S){var te=Y?0:G;U=this._writeVertex(v,d,E,T,C.x,C.y,P.x,P.y,0,-1,te),w=this._writeVertex(v,d,E,T,C.x,C.y,-P.x,-P.y,0,1,te)}break;case a.AH.BEVEL:var re=Q<0,ne=void 0,ie=void 0,ae=void 0,se=void 0;if(re){var le=U;U=w,w=le,ne=D,ie=k}else ne=k,ie=D;if(J)ae=re?u(this._innerPrev,M):o(this._innerPrev,M),se=re?o(this._innerNext,C):u(this._innerNext,C);else{var oe=re?f(this._inner,P):h(this._inner,P);ae=oe,se=oe}var ue=re?o(this._bevelStart,M):u(this._bevelStart,M);Z(ae.x,ae.y,-M.x,-M.y,ne.x,ne.y);var he=Z(ue.x,ue.y,-M.x,-M.y,ie.x,ie.y);if(j)break;var fe=re?u(this._bevelEnd,C):o(this._bevelEnd,C);if(J){var _e=this._writeVertex(v,d,E,T,-M.x,-M.y,0,0,0,0,G);U=this._writeVertex(v,d,E,T,C.x,C.y,se.x,se.y,ne.x,ne.y,G),w=this._writeVertex(v,d,E,T,C.x,C.y,fe.x,fe.y,ie.x,ie.y,G),this._writeTriangle(he,_e,w)}else{if(S){var ce=this._bevelMiddle;ce.x=(ue.x+fe.x)/2,ce.y=(ue.y+fe.y)/2,y(B,ce,-M.x,-M.y),Z(ce.x,ce.y,-M.x,-M.y,B.x,B.y),y(B,ce,C.x,C.y),U=this._writeVertex(v,d,E,T,C.x,C.y,ce.x,ce.y,B.x,B.y,G),w=this._writeVertex(v,d,E,T,C.x,C.y,se.x,se.y,ne.x,ne.y,G)}else{var ye=U;U=w,w=ye}Z(fe.x,fe.y,C.x,C.y,ie.x,ie.y)}if(re){var xe=U;U=w,w=xe}break;case a.AH.ROUND:var ve=Q<0,de=void 0,Ee=void 0;if(ve){var Te=U;U=w,w=Te,de=D,Ee=k}else de=k,Ee=D;var pe=ve?f(this._inner,P):h(this._inner,P),ge=void 0,Re=void 0;J?(ge=ve?u(this._innerPrev,M):o(this._innerPrev,M),Re=ve?o(this._innerNext,C):u(this._innerNext,C)):(ge=pe,Re=pe);var Ie=ve?o(this._roundStart,M):u(this._roundStart,M),Ae=ve?u(this._roundEnd,C):o(this._roundEnd,C),Ne=Z(ge.x,ge.y,-M.x,-M.y,de.x,de.y),Se=Z(Ie.x,Ie.y,-M.x,-M.y,Ee.x,Ee.y);if(j)break;var me=this._writeVertex(v,d,E,T,-M.x,-M.y,0,0,0,0,G);J||this._writeTriangle(U,w,me);var Me=f(this._outer,pe),Ce=this._writeVertex(v,d,E,T,C.x,C.y,Ae.x,Ae.y,Ee.x,Ee.y,G),Le=void 0,Oe=void 0,Pe=q>2;if(Pe){var De=void 0;q!==Number.MAX_VALUE?(Me.x/=q,Me.y/=q,De=(q*((De=c(M,Me))*De-1)+1)/De):De=-1,(Le=ve?o(this._startBreak,M):u(this._startBreak,M)).x+=M.x*De,Le.y+=M.y*De,(Oe=ve?u(this._endBreak,C):o(this._endBreak,C)).x+=C.x*De,Oe.y+=C.y*De}y(B,Me,-M.x,-M.y);var ke=this._writeVertex(v,d,E,T,-M.x,-M.y,Me.x,Me.y,B.x,B.y,G);y(B,Me,C.x,C.y);var Be=S?this._writeVertex(v,d,E,T,C.x,C.y,Me.x,Me.y,B.x,B.y,G):ke,Ue=me,we=S?this._writeVertex(v,d,E,T,C.x,C.y,0,0,0,0,G):me,be=-1,Ge=-1;if(Pe&&(y(B,Le,-M.x,-M.y),be=this._writeVertex(v,d,E,T,-M.x,-M.y,Le.x,Le.y,B.x,B.y,G),y(B,Oe,C.x,C.y),Ge=this._writeVertex(v,d,E,T,C.x,C.y,Oe.x,Oe.y,B.x,B.y,G)),S?Pe?(this._writeTriangle(Ue,Se,be),this._writeTriangle(Ue,be,ke),this._writeTriangle(we,Be,Ge),this._writeTriangle(we,Ge,Ce)):(this._writeTriangle(Ue,Se,ke),this._writeTriangle(we,Be,Ce)):Pe?(this._writeTriangle(me,Se,be),this._writeTriangle(me,be,Ge),this._writeTriangle(me,Ge,Ce)):(this._writeTriangle(me,Se,ke),this._writeTriangle(me,Be,Ce)),J?(U=this._writeVertex(v,d,E,T,C.x,C.y,Re.x,Re.y,de.x,de.y,G),w=Ce):(U=S?this._writeVertex(v,d,E,T,C.x,C.y,Re.x,Re.y,de.x,de.y,G):Ne,this._writeTriangle(U,we,Ce),w=Ce),ve){var Ve=U;U=w,w=Ve}}}}}}]),e}()},94109:function(e,t,r){r.d(t,{$0:function(){return h},AI:function(){return i},Al:function(){return d},By:function(){return I},C1:function(){return j},CQ:function(){return J},CU:function(){return Z},D3:function(){return v},Ex:function(){return c},I_:function(){return s},Ic:function(){return E},Ij:function(){return g},Ip:function(){return W},Iv:function(){return te},Iw:function(){return y},Jw:function(){return m},Ls:function(){return l},MI:function(){return K},QU:function(){return S},SD:function(){return ne},Tz:function(){return Q},U:function(){return se},Uh:function(){return q},V4:function(){return F},X0:function(){return Y},XD:function(){return he},XJ:function(){return X},Xj:function(){return N},Zd:function(){return w},_5:function(){return L},_6:function(){return re},a:function(){return H},aK:function(){return D},dn:function(){return V},e0:function(){return ee},eF:function(){return x},eV:function(){return f},f2:function(){return R},fL:function(){return z},iJ:function(){return T},iV:function(){return b},jk:function(){return ie},kF:function(){return M},lK:function(){return k},m4:function(){return B},mx:function(){return A},nM:function(){return p},nb:function(){return ue},oK:function(){return $},pU:function(){return P},qf:function(){return u},ru:function(){return a},tQ:function(){return G},tz:function(){return le},u4:function(){return oe},uG:function(){return U},uQ:function(){return o},vw:function(){return ae},xl:function(){return O},xm:function(){return _},yP:function(){return C}});var n=r(93169),i=1e-30,a=4294967295,s=512,l=128,o=511,u=16777216,h=8,f=10,_=29,c=24,y=8,x={metrics:{width:15,height:17,left:0,top:-7,advance:14}},v=0,d=0,E=0,T=1,p=2,g=3,R=4,I=5,A=6,N=12,S=5,m=6,M=5,C=6,L=0,O=1,P=2,D=3,k=4,B=2,U=1,w=2,b=4,G=1.05,V=(0,n.Z)("featurelayer-force-marker-text-draw-order")?.5:3,F=5,Z=6,H=1.15,z=2,Y=128-2*z,X=8,W=500,K=10,j=1024,q=2,J=0,Q=1,$=4,ee=8,te=16,re=4,ne=1,ie=4,ae=8,se=32,le=64,oe=128,ue=4,he=2},8548:function(e,t,r){var n,i,a,s,l,o,u,h,f,_,c,y,x,v,d,E,T,p,g,R;r.d(t,{Br:function(){return E},Ho:function(){return g},LR:function(){return o},Ld:function(){return N},Lu:function(){return D},MX:function(){return i},No:function(){return x},Se:function(){return m},Tg:function(){return T},V7:function(){return O},VI:function(){return v},VY:function(){return A},Wf:function(){return u},Y5:function(){return L},_g:function(){return I},cw:function(){return c},db:function(){return s},e8:function(){return y},g:function(){return h},l1:function(){return p},lP:function(){return d},lk:function(){return n},q_:function(){return S},qi:function(){return R},w0:function(){return l},wb:function(){return f},xS:function(){return _},zi:function(){return a}}),function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT"}(n||(n={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(i||(i={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"}(a||(a={})),function(e){e[e.ADD=32774]="ADD",e[e.MIN=32775]="MIN",e[e.MAX=32776]="MAX",e[e.SUBTRACT=32778]="SUBTRACT",e[e.REVERSE_SUBTRACT=32779]="REVERSE_SUBTRACT"}(s||(s={})),function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e[e.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",e[e.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",e[e.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",e[e.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER"}(l||(l={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(o||(o={})),function(e){e[e.CW=2304]="CW",e[e.CCW=2305]="CCW"}(u||(u={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT"}(h||(h={})),function(e){e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS"}(f||(f={})),function(e){e[e.ZERO=0]="ZERO",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP"}(_||(_={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(c||(c={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y||(y={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_3D=32879]="TEXTURE_3D",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"}(x||(x={})),function(e){e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.RED=6403]="RED",e[e.RG=33319]="RG",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER"}(v||(v={})),function(e){e[e.RGBA4=32854]="RGBA4",e[e.R16F=33325]="R16F",e[e.RG16F=33327]="RG16F",e[e.RGB32F=34837]="RGB32F",e[e.RGBA16F=34842]="RGBA16F",e[e.R32F=33326]="R32F",e[e.RG32F=33328]="RG32F",e[e.RGBA32F=34836]="RGBA32F",e[e.R11F_G11F_B10F=35898]="R11F_G11F_B10F",e[e.RGB8=32849]="RGB8",e[e.RGBA8=32856]="RGBA8",e[e.RGB5_A1=32855]="RGB5_A1",e[e.R8=33321]="R8",e[e.RG8=33323]="RG8",e[e.R8I=33329]="R8I",e[e.R8UI=33330]="R8UI",e[e.R16I=33331]="R16I",e[e.R16UI=33332]="R16UI",e[e.R32I=33333]="R32I",e[e.R32UI=33334]="R32UI",e[e.RG8I=33335]="RG8I",e[e.RG8UI=33336]="RG8UI",e[e.RG16I=33337]="RG16I",e[e.RG16UI=33338]="RG16UI",e[e.RG32I=33339]="RG32I",e[e.RG32UI=33340]="RG32UI",e[e.RGB16F=34843]="RGB16F",e[e.RGB9_E5=35901]="RGB9_E5",e[e.SRGB8=35905]="SRGB8",e[e.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",e[e.RGB565=36194]="RGB565",e[e.RGBA32UI=36208]="RGBA32UI",e[e.RGB32UI=36209]="RGB32UI",e[e.RGBA16UI=36214]="RGBA16UI",e[e.RGB16UI=36215]="RGB16UI",e[e.RGBA8UI=36220]="RGBA8UI",e[e.RGB8UI=36221]="RGB8UI",e[e.RGBA32I=36226]="RGBA32I",e[e.RGB32I=36227]="RGB32I",e[e.RGBA16I=36232]="RGBA16I",e[e.RGB16I=36233]="RGB16I",e[e.RGBA8I=36238]="RGBA8I",e[e.RGB8I=36239]="RGB8I",e[e.R8_SNORM=36756]="R8_SNORM",e[e.RG8_SNORM=36757]="RG8_SNORM",e[e.RGB8_SNORM=36758]="RGB8_SNORM",e[e.RGBA8_SNORM=36759]="RGBA8_SNORM",e[e.RGB10_A2=32857]="RGB10_A2",e[e.RGB10_A2UI=36975]="RGB10_A2UI"}(d||(d={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.INT=5124]="INT",e[e.HALF_FLOAT=5131]="HALF_FLOAT",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"}(E||(E={})),function(e){e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",e[e.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",e[e.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",e[e.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"}(T||(T={})),function(e){e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_READ=35045]="STATIC_READ",e[e.DYNAMIC_READ=35049]="DYNAMIC_READ",e[e.STREAM_READ=35041]="STREAM_READ",e[e.STATIC_COPY=35046]="STATIC_COPY",e[e.DYNAMIC_COPY=35050]="DYNAMIC_COPY",e[e.STREAM_COPY=35042]="STREAM_COPY"}(p||(p={})),function(e){e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER"}(g||(g={})),function(e){e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",e[e.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"}(R||(R={}));var I,A,N=33984;!function(e){e[e.Texture=0]="Texture",e[e.BufferObject=1]="BufferObject",e[e.VertexArrayObject=2]="VertexArrayObject",e[e.Shader=3]="Shader",e[e.Program=4]="Program",e[e.FramebufferObject=5]="FramebufferObject",e[e.Renderbuffer=6]="Renderbuffer",e[e.Sync=7]="Sync",e[e.COUNT=8]="COUNT"}(I||(I={})),function(e){e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",e[e.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",e[e.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",e[e.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",e[e.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",e[e.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",e[e.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",e[e.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",e[e.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",e[e.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",e[e.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",e[e.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",e[e.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",e[e.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",e[e.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15"}(A||(A={}));var S,m,M,C,L,O,P,D=33306;!function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"}(S||(S={})),function(e){e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT=5124]="INT",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",e[e.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",e[e.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",e[e.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",e[e.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",e[e.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",e[e.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",e[e.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",e[e.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",e[e.SAMPLER_3D=35679]="SAMPLER_3D",e[e.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",e[e.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",e[e.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",e[e.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",e[e.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",e[e.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",e[e.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",e[e.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",e[e.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",e[e.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",e[e.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",e[e.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"}(m||(m={})),function(e){e[e.OBJECT_TYPE=37138]="OBJECT_TYPE",e[e.SYNC_CONDITION=37139]="SYNC_CONDITION",e[e.SYNC_STATUS=37140]="SYNC_STATUS",e[e.SYNC_FLAGS=37141]="SYNC_FLAGS"}(M||(M={})),function(e){e[e.UNSIGNALED=37144]="UNSIGNALED",e[e.SIGNALED=37145]="SIGNALED"}(C||(C={})),function(e){e[e.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",e[e.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",e[e.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",e[e.WAIT_FAILED=37149]="WAIT_FAILED"}(L||(L={})),function(e){e[e.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"}(O||(O={})),function(e){e[e.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"}(P||(P={}))}}]);
//# sourceMappingURL=1976.9a809e54.chunk.js.map