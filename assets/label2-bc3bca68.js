import{U as g,q as k,W as M}from"./index-425e7585.js";/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/main/LICENSE.md for details.
 * v1.7.0
 */const C="calciteInternalLabelClick",f="calciteInternalLabelConnected",E="calciteInternalLabelDisconnected",L="calcite-label",c=new WeakMap,r=new WeakMap,b=new WeakMap,d=new WeakMap,i=new WeakSet,m=e=>{const{id:t}=e,l=t&&k(e,{selector:`${L}[for="${t}"]`});if(l)return l;const s=M(e,L);return!s||w(s,e)?null:s};function w(e,t){let l;const s="custom-element-ancestor-check",o=a=>{a.stopImmediatePropagation();const n=a.composedPath();l=n.slice(n.indexOf(t),n.indexOf(e))};return e.addEventListener(s,o,{once:!0}),t.dispatchEvent(new CustomEvent(s,{composed:!0,bubbles:!0})),e.removeEventListener(s,o),l.filter(a=>a!==t&&a!==e).filter(a=>{var n;return(n=a.tagName)==null?void 0:n.includes("-")}).length>0}function D(e){const t=m(e.el);if(r.has(t)&&t===e.labelEl||!t&&i.has(e))return;const l=W.bind(e);if(t){e.labelEl=t;const s=c.get(t)||[];s.push(e),c.set(t,s.sort(v)),r.has(e.labelEl)||(r.set(e.labelEl,h),e.labelEl.addEventListener(C,h)),i.delete(e),document.removeEventListener(f,b.get(e)),d.set(e,l),document.addEventListener(E,l)}else i.has(e)||(l(),document.removeEventListener(E,d.get(e)))}function T(e){if(i.delete(e),document.removeEventListener(f,b.get(e)),document.removeEventListener(E,d.get(e)),b.delete(e),d.delete(e),!e.labelEl)return;const t=c.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(C,r.get(e.labelEl)),r.delete(e.labelEl)),c.set(e.labelEl,t.filter(l=>l!==e).sort(v)),e.labelEl=null}function v(e,t){return g(e.el,t.el)?-1:1}function y(e){var t,l;return e.label||((l=(t=e.labelEl)==null?void 0:t.textContent)==null?void 0:l.trim())||""}function h(e){const t=e.detail.sourceEvent.target,l=c.get(this),s=l.find(a=>a.el===t);if(l.includes(s))return;const u=l[0];u.disabled||u.onLabelClick(e)}function O(){i.has(this)&&D(this)}function W(){i.add(this);const e=b.get(this)||O.bind(this);b.set(this,e),document.addEventListener(f,e)}export{E as a,D as c,T as d,y as g,f as l};
